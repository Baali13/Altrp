{"version":3,"file":"altrp-js-plugins.customizer.js","mappings":"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","sources":["webpack:///./resources/modules/front-app/src/js/helpers/plugins.js"],"sourcesContent":["/**\n * Включаем версию сайта для слабовидящих\n */\nexport function vIOn(){\n  if(document.getElementsByClassName('bvi-body').length){\n    return;\n  }\n  const link = document.body.appendChild(document.createElement('a'));\n  link.classList.add('altrp-bvi-open');\n  $.bvi({\n    bvi_target: '.altrp-bvi-open'\n  });\n  link.click();\n  link.remove();\n}\n/**\n * Загружаем BVI, если не заргужен\n * @param {boolean} init - нужно ли включать\n * @return {Promise<void>}\n */\nexport async function loadVIPlugin(init = true){\n  await loadJQuery();\n\n  if(document.querySelector('link[href=\"/plugins/button-visually-impaired-javascript/css/bvi.min.css\"]')\n      // && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/js.cookie.min.js\"]')\n      // && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/bvi-init.min.js\"]')\n      && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/bvi.min.js\"]')\n  ){\n    init && vIOn();\n    return;\n  }\n\n  const bVIStyles = document.head.appendChild(document.createElement('link'));\n  bVIStyles.setAttribute('href', '/plugins/button-visually-impaired-javascript/css/bvi.min.css');\n  bVIStyles.setAttribute('rel', 'stylesheet');\n\n  const style = document.head.appendChild(document.createElement('style'));\n  style.setAttribute('type', 'text/css');\n  // language=CSS\n  const css = `\n  .bvi-body{\n    height: 100%;\n  }\n  .bvi-link-copy{\n    display: none!important;\n  }\n  .bvi-hide.admin-bar,\n  .bvi-hide.altrp-element{\n    display: flex;\n  }\n  `;\n  if (style.styleSheet){\n    // This is required for IE8 and below.\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n\n  // const jsCookieScript = document.head.appendChild(document.createElement('script'));\n  // jsCookieScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/js.cookie.min.js');\n\n  const bVIScript = document.head.appendChild(document.createElement('script'));\n  bVIScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/bvi.min.js');\n\n  // const bVIInitScript = document.head.appendChild(document.createElement('script'));\n  // bVIInitScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/bvi-init.min.js');\n\n  let resolve, reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n\n  \n  let scriptsLoaded = 0;\n  const loadChecker = ()=>{\n    if(++scriptsLoaded < 2){\n      return;\n    }\n    init && vIOn();\n    resolve && resolve();\n  };\n\n  bVIStyles.onload = loadChecker;\n  // jsCookieScript.onload = loadChecker;\n  bVIScript.onload = loadChecker;\n\n  bVIStyles.onerror = () => {\n    reject && reject()\n  };\n  // jsCookieScript.onerror = () => {\n  //   reject && reject()\n  // };\n  // bVIInitScript.onerror = () => {\n  //   reject && reject()\n  // };\n  bVIScript.onerror = () => {\n    reject && reject()\n  };\n  return promise;\n}\n\n/**\n * Загружаем jQuery, если не заргужен\n * @return {Promise<void>}\n */\nexport async function loadJQuery(){\n  if(document.querySelector('script[src=\"/plugins/jquery.js\"]')){\n    return;\n  }\n\n  const jQueryScript = document.head.appendChild(document.createElement('script'));\n  jQueryScript.setAttribute('src', '/plugins/jquery.js');\n\n  let resolve, reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  jQueryScript.onload = () => {\n    resolve && resolve()\n  };\n  jQueryScript.onerror = () => {\n    reject && reject()\n  };\n\n  return promise;\n}"],"names":["vIOn","document","getElementsByClassName","length","link","body","appendChild","createElement","classList","add","$","bvi","bvi_target","click","remove","loadVIPlugin","init","loadJQuery","querySelector","bVIStyles","head","setAttribute","style","css","styleSheet","cssText","createTextNode","bVIScript","promise","Promise","res","rej","resolve","reject","scriptsLoaded","loadChecker","onload","onerror","jQueryScript"],"sourceRoot":""}