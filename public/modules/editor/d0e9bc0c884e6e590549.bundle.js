(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{486:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.text;return a.a.createElement("div",{className:"spinner-container"},a.a.createElement("div",{className:"spinner-container__text"},t||"Нет данных"))}},487:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(502),o=n.n(l),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n,r){return[t,0===r?"?":"&",n=encodeURIComponent(n),"=",encodeURIComponent(e[n])].join("")}),"")},s=function(){var e=i()(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u(n),e.prev=1,e.next=4,o()(t+r);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{status:500});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()},489:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(){return a.a.createElement("div",{className:"spinner-container"},a.a.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")))}},528:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(170),m=n(489),p=n(486),f=n(487);t.a=function(e){var t,n=e.widget,r=e.width,c=void 0===r?300:r,l=e.height,b=void 0===l?300:l,E=Object(u.useState)(!1),g=o()(E,2),O=g[0],h=g[1],v=Object(u.useState)([]),y=o()(v,2),w=y[0],j=y[1],k=Object(u.useCallback)(i()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(f.a)(n.source,n.filter);case 3:200===(t=e.sent).status&&(j(t.data),h(!1));case 5:case"end":return e.stop()}}),e)}))),[n]);if(Object(u.useEffect)((function(){k()}),[k]),O)return s.a.createElement(m.a,null);if(0===w.length)return s.a.createElement(p.a,null);var P=w.map((function(e,t){return s.a.createElement(d.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.BarChart,{height:b,width:c,data:w,series:s.a.createElement(d.BarSeries,{colorScheme:n.options.colorScheme,bar:s.a.createElement(d.Bar,{gradient:s.a.createElement(d.Gradient,{stops:[s.a.createElement(d.GradientStop,{stopOpacity:1})]})})})}),(null===(t=n.options)||void 0===t?void 0:t.legend)&&s.a.createElement(d.DiscreteLegend,{className:"discrete__legend",orientation:n.options.legend,entries:P}))}},529:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(170),m=n(489),p=n(486),f=n(487);t.a=function(e){var t,n=e.widget,r=e.width,c=void 0===r?300:r,l=e.height,b=void 0===l?300:l,E=Object(u.useState)(!1),g=o()(E,2),O=g[0],h=g[1],v=Object(u.useState)([]),y=o()(v,2),w=y[0],j=y[1],k=Object(u.useCallback)(i()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(f.a)(n.source,n.filter);case 3:200===(t=e.sent).status&&(j(t.data),h(!1));case 5:case"end":return e.stop()}}),e)}))),[n]);if(Object(u.useEffect)((function(){k()}),[k]),O)return s.a.createElement(m.a,null);if(0===w.length)return s.a.createElement(p.a,null);var P=w.map((function(e,t){return s.a.createElement(d.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.PieChart,{height:b,width:c,data:w||[],series:s.a.createElement(d.PieArcSeries,{explode:n.options.explode,colorScheme:n.options.colorScheme,label:s.a.createElement(d.PieArcLabel,{fontSize:12,fontFill:"#000000"})})}),(null===(t=n.options)||void 0===t?void 0:t.legend)&&s.a.createElement(d.DiscreteLegend,{className:"discrete__legend",orientation:n.options.legend,entries:P}))}},530:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(170),m=n(509),p=n(511),f=n(510),b=n(489),E=n(486),g=n(487);t.a=function(e){var t=e.widget,n=e.width,r=void 0===n?300:n,c=e.height,l=void 0===c?300:c,O=e.strokeWidth,h=void 0===O?3:O,v=Object(u.useState)(!1),y=o()(v,2),w=y[0],j=y[1],k=Object(u.useState)([]),P=o()(k,2),S=P[0],x=P[1],D=Object(u.useCallback)(i()(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Object(g.a)(t.source,t.filter);case 3:200===(n=e.sent).status&&(r=n.data.map((function(e){var t=new Date(e.key);if(t)return{key:t,data:e.data}})),x(r),j(!1));case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(u.useEffect)((function(){D()}),[D]),w?s.a.createElement(b.a,null):0===S.length?s.a.createElement(E.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(d.LineChart,{height:l,width:r,data:S,xAxis:s.a.createElement(d.LinearXAxis,{type:"time",tickSeries:s.a.createElement(d.LinearXAxisTickSeries,{label:s.a.createElement(d.LinearXAxisTickLabel,{format:function(e){var t=S.slice().shift(),n=S.slice().pop(),r=parseInt(Object(p.a)(t.key,n.key,{unit:"month"}));return r>=0&&r<=12?Object(m.a)(e,"d MMM",{locale:f.a}):Object(m.a)(e,"d MMM yy",{locale:f.a})}})})}),series:s.a.createElement(d.LineSeries,{line:s.a.createElement(d.Line,{strokeWidth:h}),colorScheme:t.colorScheme})}))}},531:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(489),m=n(486),p=n(487),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc";return function(n,r){if(!n.hasOwnProperty(e)||!r.hasOwnProperty(e))return 0;var a="string"==typeof n[e]?n[e].toUpperCase():n[e],c="string"==typeof r[e]?r[e].toUpperCase():r[e],i=0;return a>c?i=1:a<c&&(i=-1),"desc"===t?-1*i:i}};t.a=function(e){var t=e.widget,n=Object(u.useState)([]),r=o()(n,2),c=r[0],l=r[1],b=Object(u.useState)(!1),E=o()(b,2),g=E[0],O=E[1],h=Object(u.useCallback)(i()(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Object(p.a)(t.source,t.filter);case 3:200===(n=e.sent).status&&(l(n.data.sort(f("data"))),O(!1));case 5:case"end":return e.stop()}}),e)}))),[t]),v=Object(u.useMemo)((function(){return c.reduce((function(e,t){return e+t.data}),0)}),[c]);return Object(u.useEffect)((function(){h()}),[h]),g?s.a.createElement(d.a,null):0===c.length?s.a.createElement(m.a,null):t.options.isVertical?s.a.createElement("div",{className:"widget-table"},s.a.createElement("table",{className:"vertical-table"},s.a.createElement("tbody",null,c.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,e.key),s.a.createElement("td",null,e.data))})),s.a.createElement("tr",null,s.a.createElement("td",null,"ИТОГО"),s.a.createElement("td",null,v))))):s.a.createElement("div",{className:"widget-table"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,c.map((function(e,t){return s.a.createElement("th",{key:t},e.key)})),s.a.createElement("th",null,"ИТОГО"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,c.map((function(e,t){return s.a.createElement("td",{key:t},e.data)})),s.a.createElement("td",null,v)))))}},532:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(170),m=n(489),p=n(486),f=n(487);t.a=function(e){var t,n=e.widget,r=e.width,c=void 0===r?300:r,l=e.height,b=void 0===l?300:l,E=Object(u.useState)([]),g=o()(E,2),O=g[0],h=g[1],v=Object(u.useState)(!1),y=o()(v,2),w=y[0],j=y[1],k=Object(u.useCallback)(i()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Object(f.a)(n.source,n.filter);case 3:200===(t=e.sent).status&&(h(t.data),j(!1));case 5:case"end":return e.stop()}}),e)}))),[n]);if(Object(u.useEffect)((function(){k()}),[k]),w)return s.a.createElement(m.a,null);if(0===O.length)return s.a.createElement(p.a,null);var P=O.map((function(e,t){return s.a.createElement(d.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.PieChart,{height:b,width:c,data:O,series:s.a.createElement(d.PieArcSeries,{doughnut:!0,colorScheme:n.options.colorScheme,label:s.a.createElement(d.PieArcLabel,{fontSize:12,fontFill:"#000000"})})}),(null===(t=n.options)||void 0===t?void 0:t.legend)&&s.a.createElement(d.DiscreteLegend,{className:"discrete__legend",orientation:n.options.legend,entries:P}))}},536:function(e,t,n){"use strict";var r=n(11),a=n.n(r),c=n(19),i=n.n(c),l=n(71),o=n.n(l),u=n(0),s=n.n(u),d=n(170),m=n(509),p=n(511),f=n(510),b=function(){return s.a.createElement("div",{className:"spinner-container"},s.a.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))},E=n(486),g=n(487);t.a=function(e){var t=e.widget,n=e.width,r=void 0===n?300:n,c=e.height,l=void 0===c?300:c,O=e.color,h=void 0===O?"#FFD51F":O,v=Object(u.useState)([]),y=o()(v,2),w=y[0],j=y[1],k=Object(u.useState)(!1),P=o()(k,2),S=P[0],x=P[1],D=Object(u.useCallback)(i()(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,Object(g.a)(t.source,t.filter);case 3:200===(n=e.sent).status&&"string"!=typeof n.data&&(r=n.data.map((function(e){var t=new Date(e.key);if(t)return{key:t,data:e.data}})),j(r),x(!1));case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(u.useEffect)((function(){D()}),[D]),S?s.a.createElement(b,null):Array.isArray(w)&&0!==w.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(d.AreaChart,{height:l,width:r,data:w,xAxis:s.a.createElement(d.LinearXAxis,{type:"time",tickSeries:s.a.createElement(d.LinearXAxisTickSeries,{label:s.a.createElement(d.LinearXAxisTickLabel,{format:function(e){var t=w.slice().shift(),n=w.slice().pop(),r=parseInt(Object(p.a)(t.key,n.key,{unit:"month"}));return r>=0&&r<=12?Object(m.a)(e,"d LLL",{locale:f.a}):Object(m.a)(e,"d MMM yy",{locale:f.a})}})})}),series:s.a.createElement(d.AreaSeries,{type:t.options.type||"standard",markLine:s.a.createElement(d.MarkLine,{strokeWidth:0}),line:s.a.createElement(d.Line,{strokeWidth:0}),area:s.a.createElement(d.Area,{gradient:s.a.createElement(d.Gradient,{color:h,stops:[s.a.createElement(d.GradientStop,{color:h})]})})})})):s.a.createElement(E.a,null)}},681:function(e,t,n){"use strict";n.r(t);var r=n(46),a=n.n(r),c=n(11),i=n.n(c),l=n(8),o=n.n(l),u=n(19),s=n.n(u),d=n(71),m=n.n(d),p=n(0),f=n.n(p),b=n(502),E=n.n(b),g=n(501),O=n(535),h=n(570),v=n(135),y=n(528),w=n(529),j=n(536),k=n(530),P=n(531),S=n(532),x=function(e){var t=e.widget,n=e.width,r=void 0===n?360:n,a=e.height,c=void 0===a?300:a;switch(t.type){case v.b:return f.a.createElement(y.a,{width:r,height:c,widget:t});case v.e:return f.a.createElement(w.a,{width:r,height:c,widget:t});case v.c:return f.a.createElement(S.a,{width:r,height:c,widget:t});case v.d:return f.a.createElement(k.a,{width:r,height:c,widget:t});case v.f:return f.a.createElement(P.a,{width:r,height:c,widget:t});case v.a:return f.a.createElement(j.a,{width:r,height:c,widget:t});default:return f.a.createElement(f.a.Fragment,null)}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t=e.widget,n=e.setWidget,r=e.allowedTypes;return f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Тип виджета"),f.a.createElement(g.a.Control,{as:"select",custom:!0,value:t.type,onChange:function(e){return n(C(C({},t),{},{type:e.target.value}))}},r.map((function(e,t){return f.a.createElement("option",{key:t,value:e},Object(v.g)(e))}))))};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.widget,n=e.setWidget;return f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Легенда"),f.a.createElement(g.a.Control,{as:"select",custom:!0,value:t.options.legend,onChange:function(e){return n(A(A({},t),{},{options:A(A({},t.options),{},{legend:e.target.value})}))},required:!0},f.a.createElement("option",{value:""},"Не показывать"),f.a.createElement("option",{value:"horizontal"},"Горизонтальная"),f.a.createElement("option",{value:"vertical"},"Вертикальная")))};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e.widget,n=e.setWidget,r=e.sources;return f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Источник данных"),f.a.createElement(g.a.Control,{as:"select",custom:!0,value:t.source,onChange:function(e){return n(F(F({},t),{},{source:e.target.value}))},required:!0},f.a.createElement("option",{value:""},"-"),r.map((function(e){var t=e.url,n=e.name;return f.a.createElement("option",{key:t,value:t},n)}))))},T=n(170);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){var t=e.widget,n=e.setWidget,r=Object.keys(T.schemes).map((function(e){return{label:e,value:e}}));return f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Цветовая схема"),f.a.createElement(g.a.Control,{as:"select",custom:!0,value:t.options.colorScheme,onChange:function(e){return n(I(I({},t),{},{options:I(I({},t.options),{},{colorScheme:e.target.value})}))},required:!0},r.map((function(e){var t=e.label,n=e.value;return f.a.createElement("option",{key:n,value:n},t)}))))};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.id,n=e.onAdd,r=e.setIsShow,a=Object(p.useState)({type:v.f,source:"",options:{isVertical:!1,legend:""}}),c=m()(a,2),l=c[0],o=c[1],u=Object(p.useRef)(""),d=function(){var e=s()(i.a.mark((function e(){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=X(X({},l),{},{title:u.current.value,options:JSON.stringify(l.options),filter:JSON.stringify({})}),e.next=3,E.a.post("/ajax/dashboards/".concat(t),a);case 3:200===(c=e.sent).status&&(n(c.data),r(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(O.a,null,f.a.createElement(O.a.Header,null,f.a.createElement(O.a.Title,null,"Добавить виджет")),f.a.createElement(O.a.Body,null,f.a.createElement(g.a,null,f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Название виджета"),f.a.createElement(g.a.Control,{type:"text",ref:u,onFocus:function(e){"Новый виджет"===e.target.value&&(u.current.value="")},onBlur:function(e){""===e.target.value&&(u.current.value="Новый виджет")},defaultValue:"Новый виджет",required:!0})),f.a.createElement(L,{widget:l,setWidget:o,allowedTypes:[v.b,v.e,v.c,v.f]}),f.a.createElement(J,{widget:l,setWidget:o}),f.a.createElement(M,{widget:l,setWidget:o,sources:[{name:"Информация о шаблонах",url:"/admin/ajax/analytics"},{name:"Пустые данные",url:"/admin/ajax/analytics/none"}]}),f.a.createElement(_,{widget:l,setWidget:o})),f.a.createElement("div",{className:"widget-placeholder"},l.source&&f.a.createElement(x,{widget:l,width:360,height:360}))),f.a.createElement(O.a.Footer,null,f.a.createElement(h.a,{variant:"secondary",onClick:function(){return r(!1)}},"Закрыть"),f.a.createElement(h.a,{variant:"warning",onClick:d,disabled:""===l.source},"Сохранить изменения")))},R=f.a.memo(q),U=n(667),V=n(668);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.data,n=e.onEdited,r=e.setIsEdit,a=Object(p.useState)(t),c=m()(a,2),l=c[0],o=c[1],u=Object(p.useRef)(l.title),d=function(){var e=s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(H(H({},l),{},{title:u.current.value})),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(O.a,null,f.a.createElement(O.a.Header,null,f.a.createElement(O.a.Title,null,"Редактировать виджет")),f.a.createElement(O.a.Body,null,f.a.createElement(g.a,null,f.a.createElement(g.a.Group,null,f.a.createElement(g.a.Label,null,"Название виджета"),f.a.createElement(g.a.Control,{type:"text",ref:u,defaultValue:l.title,required:!0})),f.a.createElement(L,{widget:l,setWidget:o,allowedTypes:[v.b,v.e,v.c,v.f]}),f.a.createElement(J,{widget:l,setWidget:o}),f.a.createElement(M,{widget:l,setWidget:o,sources:[{name:"Информация о шаблонах",url:"/admin/ajax/analytics"},{name:"Пустые данные",url:"/admin/ajax/analytics/none"}]}),f.a.createElement(_,{widget:l,setWidget:o})),f.a.createElement("div",{className:"widget-placeholder"},l.source&&f.a.createElement(x,{widget:l,width:360,height:360}))),f.a.createElement(O.a.Footer,null,f.a.createElement(h.a,{variant:"secondary",onClick:function(){return r(!1)}},"Закрыть"),f.a.createElement(h.a,{variant:"warning",onClick:d,disabled:""===l.source},"Сохранить изменения")))},Q=f.a.memo(K);var Y=function(e){var t=e.widget,n=e.onDeleted,r=e.onEdited,a=Object(p.useState)(!1),c=m()(a,2),i=c[0],l=c[1];return f.a.createElement(O.a,{key:t.id},f.a.createElement(O.a.Header,null,f.a.createElement(O.a.Title,null,t.title),f.a.createElement(O.a.Title,null,f.a.createElement("button",{type:"button",title:"Настроить виджет",onClick:function(){return l(!i)}},f.a.createElement(U.a,null)),f.a.createElement("button",{type:"button",title:"Удалить виджет",onClick:function(){return n(t)}},f.a.createElement(V.a,null)))),f.a.createElement(O.a.Body,null,i?f.a.createElement(Q,{data:t,onEdited:r,setIsEdit:l}):f.a.createElement(x,{widget:t,width:360,height:300})))};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=e.id,n=(e.settings,Object(p.useState)([])),r=m()(n,2),c=r[0],l=r[1],o=Object(p.useState)(!1),u=m()(o,2),d=u[0],b=u[1],g=Object(p.useCallback)(function(){var e=s()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()("/ajax/dashboards/".concat(t));case 3:200===(n=e.sent).status&&l(n.data.map((function(e){return $($({},e),{},{options:JSON.parse(e.options),filter:JSON.parse(e.filter)})}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[t]),O=function(e){l(c.filter((function(t){return t.id!==e.id}))),E.a.delete("/ajax/dashboards/".concat(e.id))},h=function(e){l(c.map((function(t){return t.id===e.id?e:t}))),E.a.put("/ajax/dashboards/".concat(e.id),$($({},e),{},{options:JSON.stringify(e.options),filter:JSON.stringify(e.filter)}))};return Object(p.useEffect)((function(){g(t)}),[t]),f.a.createElement("div",{className:"altrp-dashboard"},f.a.createElement("div",{className:"altrp-dashboard__controls"},f.a.createElement("button",{onClick:function(){return b(!0)}},"Добавить виджет")),f.a.createElement("div",{className:"altrp-dashboard__widgets"},d&&f.a.createElement(R,{id:t,setIsShow:b,onAdd:function(e){l([e].concat(a()(c)))}}),c.map((function(e){return f.a.createElement(Y,{key:e.id,widget:e,onDeleted:O,onEdited:h})}))))}}}]);
//# sourceMappingURL=d0e9bc0c884e6e590549.bundle.js.map