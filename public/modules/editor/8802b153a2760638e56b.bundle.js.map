{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/classes/Template.js","webpack:///./resources/modules/front-app/src/js/classes/Area.js","webpack:///./resources/modules/front-app/src/js/classes/Route.js","webpack:///./resources/modules/front-app/src/js/store/routes/reducers.js","webpack:///./resources/modules/front-app/src/js/store/reducers.js","webpack:///./resources/modules/front-app/src/js/store/routes/actions.js","webpack:///./resources/modules/front-app/src/js/store/store.js","webpack:///./resources/modules/front-app/src/js/classes/Routes.js"],"names":["Template","Area","this","templates","areaData","area","settings","id","template","data","JSON","parse","area_name","forEach","_t","template_settings","push","Route","path","model","models","title","allowed","redirect","lazy","route","areas","_area","areaFabric","defaultState","routes","combineReducers","appRoutes","state","action","type","appStore","createStore","rootReducer","Routes","resource","Resource","loadRoutes","getAll","then","routesData","pages","_data","routeFabric","dispatch","changeAppRoutes","err","console","error"],"mappings":"8IAQeA,E,0BC+BAC,E,uFAJX,OADAC,KAAKC,UAAYD,KAAKC,WAAa,GAC5BD,KAAKC,a,kCA7BIC,GAChB,IAAIC,EAAO,IAAIJ,EAmBf,OAlBAI,EAAKC,SAAWF,EAASE,SACzBD,EAAKE,GAAKH,EAASG,GACnBF,EAAKG,SAAW,IAAIR,EACpBK,EAAKG,SAASC,KAAOL,EAASI,SAAWE,KAAKC,MAAMP,EAASI,SAASC,MAAQ,KAC9EJ,EAAKG,SAASD,GAAKH,EAASI,SAAWJ,EAASI,SAASD,GAAK,KACpC,WAAvBH,EAASQ,YAGVP,EAAKF,UAAY,GACjBC,EAASD,UAAYC,EAASD,WAAa,GAC3CC,EAASD,UAAUU,SAAQ,SAAAC,GACzB,IAAIN,EAAW,IAAIR,EACnBQ,EAASC,KAAOK,EAAKJ,KAAKC,MAAMG,EAAGL,MAAQ,KAC3CD,EAASD,GAAKO,EAAKJ,KAAKC,MAAMG,EAAGP,IAAM,KACvCC,EAASO,kBAAoBD,EAAKJ,KAAKC,MAAMG,EAAGC,mBAAqB,KACrEV,EAAKF,UAAUa,KAAKR,OAGjBH,M,0hCCKIY,E,WAzBb,WAAYR,GAAK,YACfP,KAAKK,GAAKE,EAAKF,GACfL,KAAKgB,KAAOT,EAAKS,KACjBhB,KAAKiB,MAAQV,EAAKU,MAClBjB,KAAKkB,OAASX,EAAKW,OACdlB,KAAKkB,SACRlB,KAAKkB,OAASX,EAAKU,MAAQ,CAACV,EAAKU,OAAS,IAE5CjB,KAAKiB,MAAQV,EAAKU,MAClBjB,KAAKmB,MAAQZ,EAAKY,OAAS,GAC3BnB,KAAKoB,QAAUb,EAAKa,QACpBpB,KAAKqB,SAAWd,EAAKc,SACrBrB,KAAKsB,KAAOf,EAAKe,K,qDAEAf,GACjB,IAAIgB,EAAQ,IAAIR,EAAMR,GACtBgB,EAAMC,MAAQ,GACdjB,EAAKiB,MAAQjB,EAAKiB,OAAS,GAHL,UAIJjB,EAAKiB,OAJD,IAItB,2BAA6B,KAApBC,EAAoB,QAC3BF,EAAMC,MAAMV,KAAKf,EAAK2B,WAAWD,KALb,8BAOtB,OAAOF,M,aCzBX,IAAMI,EAAe,CACnBC,OAAQ,ICCKC,gCAAgB,CAC7BC,UDCK,SAA0BC,EAAOC,GAEtC,OADAD,EAAQA,GAASJ,EACTK,EAAOC,MACb,IET6B,oBFU3BF,EAAQ,CACNH,OAAQI,EAAOJ,QAIrB,OAAOG,KGVMG,EAFAC,sBAAYC,G,qhCCErBC,E,WAEJ,aAAa,YACXrC,KAAKsC,SAAW,IAAIC,IAAS,CAC3BhB,MAAO,iBAETvB,KAAKwC,a,iDAGLxC,KAAKsC,SAASG,SAASC,MAAK,SAAAC,GAC1B,IADsC,EAClCf,EAAS,GADyB,IAErBe,EAAWC,OAFU,IAEtC,2BAAkC,KAA1BC,EAA0B,QAChCjB,EAAOd,KAAKC,EAAM+B,YAAYD,KAHM,8BAKtCX,EAASa,SFjBR,SAAyBnB,GAC9B,MAAO,CACLK,KAJ6B,oBAK7BL,UEcoBoB,CAAgBpB,OALpC,OAMS,SAAAqB,GACPC,QAAQC,MAAMF,U,KAKL,cAAIZ","file":"8802b153a2760638e56b.bundle.js","sourcesContent":["/**\r\n * @property {Int} id\r\n * @property {Object} data\r\n * */\r\nclass Template {\r\n\r\n}\r\n\r\nexport default Template","import Template from './Template';\r\n/**\r\n * @property {Template} template\r\n * @property {Object} settings\r\n * */\r\nclass Area {\r\n  static areaFabric(areaData){\r\n    let area = new Area();\r\n    area.settings = areaData.settings;\r\n    area.id = areaData.id;\r\n    area.template = new Template();\r\n    area.template.data = areaData.template ? JSON.parse(areaData.template.data) : null;\r\n    area.template.id = areaData.template ? areaData.template.id : null;\r\n    if(areaData.area_name === 'popups'){\r\n      // area.templates = [];\r\n      // area.templates = new Template();\r\n      area.templates = [];\r\n      areaData.templates = areaData.templates || [];\r\n      areaData.templates.forEach(_t=>{\r\n        let template = new Template();\r\n        template.data = _t ? JSON.parse(_t.data) : null;\r\n        template.id = _t ? JSON.parse(_t.id) : null;\r\n        template.template_settings = _t ? JSON.parse(_t.template_settings) : null;\r\n        area.templates.push(template);\r\n      });\r\n    }\r\n    return area;\r\n  }\r\n\r\n  /**\r\n   * Массив шаблонов\r\n   * @return {*|Array}\r\n   */\r\n  getTemplates(){\r\n    this.templates = this.templates || [];\r\n    return this.templates;\r\n  }\r\n}\r\n\r\nexport default Area","/**\r\n * @property {Area[]} areas\r\n * */\r\nimport Area from \"./Area\";\r\n\r\nclass Route {\r\n  constructor(data){\r\n    this.id = data.id ;\r\n    this.path = data.path;\r\n    this.model = data.model;\r\n    this.models = data.models;\r\n    if(! this.models){\r\n      this.models = data.model ? [data.model] : [];\r\n    }\r\n    this.model = data.model;\r\n    this.title = data.title || '';\r\n    this.allowed = data.allowed;\r\n    this.redirect = data.redirect;\r\n    this.lazy = data.lazy;\r\n  }\r\n  static routeFabric(data){\r\n    let route = new Route(data);\r\n    route.areas = [];\r\n    data.areas = data.areas || [];\r\n    for (let _area of data.areas){\r\n      route.areas.push(Area.areaFabric(_area))\r\n    }\r\n    return route;\r\n  }\r\n}\r\n\r\nexport default Route","import {CHANGE_APP_ROUTES} from './actions'\r\n\r\nconst defaultState = {\r\n  routes: [],\r\n};\r\n\r\nexport function appRoutesReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case CHANGE_APP_ROUTES:{\r\n      state = {\r\n        routes: action.routes,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {combineReducers} from 'redux';\r\nimport {appRoutesReducer} from \"./routes/reducers\";\r\n\r\n\r\nexport default combineReducers({\r\n  appRoutes: appRoutesReducer,\r\n});\r\n","export const CHANGE_APP_ROUTES = 'CHANGE_APP_ROUTES';\r\n\r\nexport function changeAppRoutes(routes) {\r\n  return {\r\n    type: CHANGE_APP_ROUTES,\r\n    routes\r\n  };\r\n}\r\n\r\n","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nlet appStore = createStore(rootReducer);\r\n\r\nexport default appStore;","import Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport Route from \"./Route\";\r\nimport appStore from \"../store/store\";\r\nimport {changeAppRoutes} from \"../store/routes/actions\";\r\n\r\nclass Routes {\r\n\r\n  constructor(){\r\n    this.resource = new Resource({\r\n      route: '/ajax/routes'\r\n    });\r\n    this.loadRoutes();\r\n  }\r\n  loadRoutes(){\r\n    this.resource.getAll().then(routesData=>{\r\n      let routes = [];\r\n      for(let _data of routesData.pages){\r\n        routes.push(Route.routeFabric(_data));\r\n      }\r\n      appStore.dispatch(changeAppRoutes(routes))\r\n    }).catch(err=>{\r\n      console.error(err);\r\n    });\r\n  }\r\n}\r\n\r\nexport default new Routes();"],"sourceRoot":""}