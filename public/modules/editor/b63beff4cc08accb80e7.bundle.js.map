{"version":3,"sources":["webpack:///./resources/modules/editor/src/sass/dialog-content.scss?fdee","webpack:///./resources/modules/front-app/src/js/store/routes/actions.js","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.scss?8fce","webpack:///./resources/modules/editor/src/sass/altrp-menu.scss?c57c","webpack:///./resources/modules/editor/src/sass/state-section.scss?3e6a","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?1926","webpack:///./resources/modules/editor/src/sass/dialog-content.scss?66a5","webpack:///./resources/modules/front-app/src/js/store/routes/reducers.js","webpack:///./resources/modules/front-app/src/js/store/forms-data-storage/reducers.js","webpack:///./resources/modules/front-app/src/js/store/reducers.js","webpack:///./resources/modules/front-app/src/js/store/store.js","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.scss?3739","webpack:///./resources/modules/editor/src/sass/altrp-menu.scss?11f8","webpack:///./resources/modules/editor/src/sass/state-section.scss?14a6","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?1863","webpack:///./resources/modules/editor/src/js/classes/modules/BaseModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/ElementsFactory.js","webpack:///./resources/modules/editor/src/js/classes/modules/SaveImportModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/SettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateSettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateDataStorage.js","webpack:///./resources/modules/editor/src/js/classes/Modules.js","webpack:///./resources/modules/editor/src/js/components/WidgetIcon.js","webpack:///./resources/modules/editor/src/js/components/WidgetsPanel.js","webpack:///./resources/modules/editor/src/js/components/SettingSection.js","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.js","webpack:///./resources/modules/editor/src/js/components/PanelTabContent.js","webpack:///./resources/modules/editor/src/js/components/StateSection.js","webpack:///./resources/modules/editor/src/js/components/SettingsPanel.js","webpack:///./resources/modules/editor/src/js/components/EditorWindow.js","webpack:///./resources/modules/editor/src/js/components/HistoryPanel.js","webpack:///./resources/modules/editor/src/js/components/UpdateButton.js","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/js/components/ResponsiveDdFooter.js","webpack:///./resources/modules/editor/src/js/components/DialogTab.js","webpack:///./resources/modules/editor/src/js/components/DialogConditionsTab.js","webpack:///./resources/modules/editor/src/js/components/DialogTriggersTab.js","webpack:///./resources/modules/editor/src/js/components/DialogWindow.js","webpack:///./resources/modules/editor/src/Editor.js"],"names":["content","module","i","options","transform","undefined","update","locals","exports","hot","accept","newContent","a","b","key","idx","Error","dispose","CHANGE_APP_ROUTES","changeAppRoutes","routes","type","push","defaultState","combineReducers","appRoutes","state","action","currentModel","currentModelReducer","formsStore","formId","fieldName","value","CHANGE_FORM_FIELD_VALUE","_","get","cloneDeep","set","currentUser","currentUserReducer","appStore","createStore","rootReducer","BaseModule","modules","this","ElementsFactory","object","parent","children","elementsManager","window","element","getElementClass","name","length","child","checkElementExists","parseData","id","settings","setSettings","cssClassStorage","setCSSStorage","dynamicContentSettings","target","newElement","_duplicateElement","insertNewChildAfter","getId","templateDataStorage","getEditor","elementsIds","union","getIds","getName","newChildren","map","childrenItem","newChild","setParent","setChildren","SaveImportModule","resource","Resource","route","template_id","getTemplateId","store","dispatch","changeTemplateStatus","CONSTANTS","TEMPLATE_SAVING","then","templateData","setTitle","title","data","JSON","parse","setTemplateData","parsedData","elementsFactory","replaceAll","setName","endLoading","TEMPLATE_UPDATED","err","console","error","getTemplateDataForSave","put","res","SettingsChangeModule","TemplateSettingsChangeModule","TemplateDataStorage","RootElement","rootElement","setCurrentRootElement","toObject","getTemplateData","currentElement","setCurrentElement","BaseElement","elementName","newSection","Section","newColumn","Column","newWidget","appendWidget","appendColumn","appendNewSection","TEMPLATE_NEED_UPDATE","showSettingsPanel","Modules","editor","saveImportModule","settingsChangeModule","templateSettingsChangeModule","load","WidgetIcon","props","onDragStart","bind","e","startDrag","dataTransfer","effectAllowed","setData","className","draggable","React","createElement","getIconComponent","height","getTitle","Component","WidgetsPanel","widgets","getWidgetsList","autoHide","autoHideTimeout","autoHideDuration","widget","ChevronIcon","SettingSection","open","toggle","currentElementName","getCurrentElement","currentTab","getCurrentTab","settingSection","setActiveSection","sectionID","activeSectionID","controllers","controls","onClick","label","controller","ControllerComponent","controllersManager","getController","controlId","connect","settingSectionMenu","DynamicContent","models","select","getAll","setState","stopPropagation","modelName","dataset","modelname","modelTitle","modeltitle","fieldname","fieldTitle","fieldtitle","settingName","params","dynamic","onSelect","closeDynamicContent","setModelsSettings","top","offsetTop","offsetHeight","left","classes","show","join","style","getPositionProps","model","fields","field","data-fieldname","data-fieldtitle","data-modelname","data-modeltitle","dynamicContentState","PanelTabContent","sections","section","sectionId","StateSection","buttons","setCurrentState","button","index","currentState","ContentIcon","StyleIcon","AdvancedIcon","SettingsPanel","activeTab","setCurrentTab","toPairs","getControls","forEach","pair","control","Controller","contentTabClasses","TAB_CONTENT","styleTabClasses","TAB_STYLE","advancedTabClasses","TAB_ADVANCED","setActiveTab","EditorWindow","width","currentScreen","src","Chevron","UpdateButton","isShowed","saveTemplate","toggleModalWindow","buttonClasses","templateStatus","showModal","status","Times","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","assets","getAssets","selectedAsset","mediaAssets","mediaResource","log","tab","iconsManager","getIconsList","currentTarget","assetname","assetsToggle","asset","item","onChoose","active","tabClasses","data-tab","AssetContent","assetProps","iconComponent","url","filename","assetType","data-assetname","assetsManagerSettings","ResponsiveDdFooter","screens","SCREENS","screen","setCurrentScreen","toggleOpen","renderIcon","icon","DialogTab","desc","DialogConditionsTab","handleObjectTypeChange","conditionId","v","object_type","object_ids","handleIdsSelect","ids","handleChangeConditionType","condition_type","currentLogic","searchValue","pageOptions","conditions","close","randomNumber","Math","floor","random","forceUpdate","filteredData","filter","test","findIndex","obj","include","exclude","logic_options","main_options","AltrpSelect","onChange","find","o","p","indexOf","isMulti","closeMenuOnSelect","placeholder","removeCondition","addCondition","updateConditions","DialogTriggersTab","onLoad","onScroll","scrollElement","afterInactivity","on_exit","triggers","on_scroll","size","direction","checked","htmlFor","handleChangePage","min","step","on_page_load","handleCheck","max","defaultValue","on_click","inactivity","updateTriggers","Logo","DialogWindow","template_type","handleClose","handleOpen","renderSwitch","Navigation","History","Preview","Settings","Dots","_export","Hamburger","altrpEditor","activePanel","showDialogWindow","openPageSettings","showWidgetsPanel","onDragEnd","subscribe","getState","loaded","contextMenu","hideAll","draggableElement","elementDrag","stopDrag","initModules","changeCurrentUser","settingsActive","templateClasses","getType","href","admin_logo","renderAsset","viewBox"],"mappings":"6EACA,IAAIA,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEN,EAASG,GAEzFH,EAAQO,SAAQN,EAAOO,QAAUR,EAAQO,QAG3CN,EAAOQ,IAAIC,OAAO,KAAsS,WACvT,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACV,EAAOC,EAAIS,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXf,EAAQO,OAAQI,EAAWJ,QAEjB,MAAM,IAAIS,MAAM,uDAE5BV,EAAOK,MAGRV,EAAOQ,IAAIQ,SAAQ,WAAaX,Q,iCC3CjC,oEAAO,IAAMY,EAAoB,oBAE1B,SAASC,EAAgBC,GAC9B,MAAO,CACLC,KAAMH,EACNE,Y,qBCLMnB,EAAOO,QAAU,EAAQ,GAAR,EAAwE,IAK3Fc,KAAK,CAACrB,EAAOC,EAAI,GAAI,M,qBCLnBD,EAAOO,QAAU,EAAQ,GAAR,EAAkE,IAKrFc,KAAK,CAACrB,EAAOC,EAAI,GAAI,M,qBCLnBD,EAAOO,QAAU,EAAQ,GAAR,EAAkE,IAKrFc,KAAK,CAACrB,EAAOC,EAAI,GAAI,M,qBCLnBD,EAAOO,QAAU,EAAQ,GAAR,EAAkE,IAKrFc,KAAK,CAACrB,EAAOC,EAAI,GAAI,M,qBCLnBD,EAAOO,QAAU,EAAQ,GAAR,EAAkE,IAKrFc,KAAK,CAACrB,EAAOC,EAAI,GAAI,M,sDCHvBqB,EAAe,CACnBH,OAAQ,I,sBCDJG,EAAe,G,aCKNC,4BAAgB,CAC7BC,UFFK,SAA0BC,EAAOC,GAEtC,OADAD,EAAQA,GAASH,EACTI,EAAON,MACb,KAAKH,IACHQ,EAAQ,CACNN,OAAQO,EAAOP,QAIrB,OAAOM,GENPE,aAAcC,IACdC,WDJK,SAA2BJ,EAA3B,GAAoE,IAAjCL,EAAiC,EAAjCA,KAAMU,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,UAAWC,EAAQ,EAARA,MAEjE,OADAP,EAAQA,GAASH,EACTF,GACN,KAAKa,IACAC,EAAEC,IAAIV,EAAO,CAACK,EAAQC,MAAgBC,IACvCP,EAAQS,EAAEE,UAAUX,GACpBS,EAAEG,IAAIZ,EAAO,CAACK,EAAQC,GAAYC,IAKxC,OAAOP,GCNPa,YAAaC,MCRXC,EAAWC,sBAAYC,GAEZF,O,oBCJf,IAAIzC,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAA4EN,EAASG,GAE/FH,EAAQO,SAAQN,EAAOO,QAAUR,EAAQO,QAG3CN,EAAOQ,IAAIC,OAAO,KAAoU,WACrV,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACV,EAAOC,EAAIS,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXf,EAAQO,OAAQI,EAAWJ,QAEjB,MAAM,IAAIS,MAAM,uDAE5BV,EAAOK,MAGRV,EAAOQ,IAAIQ,SAAQ,WAAaX,Q,oBC1CjC,IAAIN,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEN,EAASG,GAEzFH,EAAQO,SAAQN,EAAOO,QAAUR,EAAQO,QAG3CN,EAAOQ,IAAIC,OAAO,KAAkS,WACnT,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACV,EAAOC,EAAIS,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXf,EAAQO,OAAQI,EAAWJ,QAEjB,MAAM,IAAIS,MAAM,uDAE5BV,EAAOK,MAGRV,EAAOQ,IAAIQ,SAAQ,WAAaX,Q,oBC1CjC,IAAIN,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEN,EAASG,GAEzFH,EAAQO,SAAQN,EAAOO,QAAUR,EAAQO,QAG3CN,EAAOQ,IAAIC,OAAO,KAAqS,WACtT,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACV,EAAOC,EAAIS,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXf,EAAQO,OAAQI,EAAWJ,QAEjB,MAAM,IAAIS,MAAM,uDAE5BV,EAAOK,MAGRV,EAAOQ,IAAIQ,SAAQ,WAAaX,Q,oBC1CjC,IAAIN,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEN,EAASG,GAEzFH,EAAQO,SAAQN,EAAOO,QAAUR,EAAQO,QAG3CN,EAAOQ,IAAIC,OAAO,KAAsS,WACvT,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACV,EAAOC,EAAIS,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXf,EAAQO,OAAQI,EAAWJ,QAEjB,MAAM,IAAIS,MAAM,uDAE5BV,EAAOK,MAGRV,EAAOQ,IAAIQ,SAAQ,WAAaX,Q,8NC9BlBsC,EALb,WAAYC,GAAS,YACnBC,KAAKD,QAAUA,G,q8CCqEJE,E,sIA1EHC,EAAQC,GAChB,IAAIC,EAAW,GACTC,EAAkBC,OAAOD,gBAI3BE,EAAU,IAAKF,EAAgBG,gBAAgBN,EAAOO,OAC1D,GAAIP,EAAOE,UAAYF,EAAOE,SAASM,OAAQ,WAC3BR,EAAOE,UADoB,IAC7C,2BAAkC,KAAzBO,EAAyB,QAChCN,EAAgBO,mBAAmBD,EAAMF,OACvCL,EAAS5B,KAAKwB,KAAKa,UAAUF,EAAOJ,KAHK,+BAM/CA,EAAQO,GAAKZ,EAAOY,GACpBP,EAAQH,SAAWA,EAInB,IAAIW,EAAuC,IAA3Bb,EAAOa,SAASL,OAAgB,GAAKR,EAAOa,SAC5DR,EAAQS,YAAYD,GACpB,IAAIE,EAAmBf,EAAOe,iBAAqD,IAAlCf,EAAOe,gBAAgBP,OAAgB,GAAKR,EAAOe,gBAUpG,OATAV,EAAQW,cAAcD,GACnBf,EAAOiB,yBACRZ,EAAQY,uBAAmE,IAAzCjB,EAAOiB,uBAAuBT,OAAgB,GAAKR,EAAOiB,wBAG3FhB,IACDI,EAAQJ,OAASA,GAEnBI,EAAQ/C,SACD+C,I,uCAQQA,EAASa,GAExB,IAAIC,EAAarB,KAAKsB,kBAAkBf,GACxCa,EAAOG,oBAAoBhB,EAAQiB,QAASH,GAI5C,IAAII,EAAsBC,cAAY3B,QAAQ0B,oBAE9C,OADAA,EAAoBE,YAActC,EAAEuC,MAAMH,EAAoBE,YAAaN,EAAWQ,UAC/ER,I,wCAKSd,GAAQ,WAIpBc,EAAa,IAAKhB,gBAAgBG,gBAAgBD,EAAQuB,YAC1DC,EAAc,GAalB,OAZAxB,EAAQH,SAAS4B,KAAI,SAACC,GACpB,IAAIC,EAAW,EAAKZ,kBAAkBW,GACtCC,EAASC,UAAUd,GACnBU,EAAYvD,KAAK0D,MAGnBb,EAAWe,YAAYL,GACvBV,EAAWN,SAAW1B,EAAEE,UAAUgB,EAAQQ,UACvCR,EAAQY,yBACTE,EAAWF,uBAAyB9B,EAAEE,UAAUgB,EAAQY,yBAE1DE,EAAWjB,SAAW2B,EACfV,M,GAvEmBvB,G,seCuDfuC,E,gCA9Cb,WAAYtC,GAAQ,0BAClB,cAAMA,IAEDuC,SAAW,IAAIC,IAAS,CAC3BC,MAAO,0BAJS,E,2CAQd,WAIJ,GAHAxC,KAAKyC,YAAcC,cAEnBC,IAAMC,SAASC,YAAqBC,IAAUC,kBAC3C/C,KAAKyC,YACIzC,KAAKsC,SAAShD,IAAIU,KAAKyC,aAAaO,MAAK,SAAAC,GACjDC,YAASD,EAAaE,OACtB,IAAIC,EAAOC,KAAKC,MAAML,EAAaG,MACnCT,IAAMC,SAASW,YAAgBN,IAC/B,IAAIO,EAAa,EAAKzD,QAAQ0D,gBAAgB5C,UAAUuC,GACpD3B,EAAsBC,cAAY3B,QAAQ0B,oBAC9CA,EAAoBiC,WAAWF,GAC/B/B,EAAoByB,SAASD,EAAaE,OAC1C1B,EAAoBkC,QAAQV,EAAaxC,MACzCiB,cAAYkC,aACZjB,IAAMC,SAASC,YAAqBC,IAAUe,sBAVtC,OAWD,SAAAC,GACPC,QAAQC,MAAMF,GACdnB,IAAMC,SAASC,YAAqBC,IAAUe,wB,qCAQlDlB,IAAMC,SAASC,YAAqBC,IAAUC,kBAC9C,IAAIE,EAAevB,cAAY3B,QAAQ0B,oBAAoBwC,yBAC3DjE,KAAKsC,SAAS4B,IAAIlE,KAAKyC,YAAaQ,GAAcD,MAAK,SAAAmB,GACrDxB,IAAMC,SAASC,YAAqBC,IAAUe,sBADhD,OAES,SAAAC,GACPC,QAAQC,MAAMF,GACdnB,IAAMC,SAASC,YAAqBC,IAAUe,0B,GA1CrB/D,GCPhBsE,E,0BCAAC,E,weC0FAC,E,gCAhFb,WAAYvE,GAAQ,0BAClB,cAAMA,IACD4B,YAAc,GAFD,E,+CAKTpB,GACT,IAAKA,aAAmBgE,IACtB,KAAM,wCAERvE,KAAKwE,YAAcjE,EACnBP,KAAK2B,YAAcpB,EAAQsB,SAC3B7B,KAAKyE,0B,wCAIL,OAAOzE,KAAKwE,YAAYE,a,+CAGxB,IAAItB,EAAO,GAKX,OAHAA,EAAKA,KAAOpD,KAAK2E,kBACjBvB,EAAKD,MAAQnD,KAAKmD,OAAS,YAC3BC,EAAK3C,KAAOT,KAAKS,MAAQ,WAClB2C,I,+BAGAD,GACPnD,KAAKmD,MAAQA,I,8BAIP1C,GACNT,KAAKS,KAAOA,I,8CAMZ,OAFAT,KAAK4E,eAAiB5E,KAAKwE,YAC3B7B,IAAMC,SAASiC,YAAkB7E,KAAK4E,iBAC/B5E,KAAK4E,iB,wCAGIrE,GAChB,IAAKA,aAAmBuE,IACtB,KAAM,0CAER9E,KAAK4E,eAAiBrE,EACtBoC,IAAMC,SAASiC,YAAkBtE,M,0CAIjC,OAAIP,KAAK4E,eAGF5E,KAAK4E,eAFH5E,KAAKyE,0B,uCAMd,OAAOzE,KAAKwE,c,yCAGKO,GACjB,IAAIC,EAAa,IAAIC,IACrBjF,KAAK2B,YAAYnD,KAAKwG,EAAWxD,SAEjC,IAAI0D,EAAY,IAAIC,IACpBnF,KAAK2B,YAAYnD,KAAK0G,EAAU1D,SAEhC,IAAI4D,EAAY,IAAK9E,OAAOD,gBAAgBG,gBAAgBuE,IAC5D/E,KAAK2B,YAAYnD,KAAK4G,EAAU5D,SAEhC0D,EAAUG,aAAaD,GACvBJ,EAAWM,aAAaJ,GACxBlF,KAAKwE,YAAYe,iBAAiBP,GAClChF,KAAK6E,kBAAkBO,GACvBzC,IAAMC,SAASC,YAAqBC,IAAU0C,uBAC9C9D,cAAY+D,wB,GA7EkB3F,GCUnB4F,E,WAXb,WAAYC,GAAO,YACjB3F,KAAKyD,gBAAkB,IAAIxD,EAAgBD,MAC3CA,KAAK4F,iBAAmB,IAAIvD,EAAiBrC,MAC7CA,KAAK6F,qBAAuB,IAAIzB,EAAqBpE,MACrDA,KAAK8F,6BAA+B,IAAKzB,EAA6BrE,MACtEA,KAAKyB,oBAAsB,IAAI6C,EAAoBtE,M,6CAGnDA,KAAK4F,iBAAiBG,W,ybCbLC,E,gCACnB,WAAYC,GAAM,0BAChB,cAAMA,IAEDrH,MAAQ,CACX2B,QAAS,EAAK0F,MAAM1F,SAEtB,EAAK2F,YAAc,EAAKA,YAAYC,KAAjB,QANH,E,gDAQNC,GACVzD,IAAMC,SAASyD,YAAU,OACzBD,EAAEE,aAAaC,cAAgB,OAC/BH,EAAEE,aAAaE,QAAQ,aAAcxG,KAAKpB,MAAM2B,QAAQuB,a,+BAGxD,IAAK9B,KAAKpB,MAAM2B,mBAAmBuE,IACjC,KAAM,6CAER,OAAO,yBAAK2B,UAAU,cAAcC,UAAU,OAAOR,YAAalG,KAAKkG,aAEnES,IAAMC,cAAc5G,KAAKpB,MAAM2B,QAAQsG,mBAAoB,CAACC,OAAQ,KAEtE,yBAAKL,UAAU,sBACZzG,KAAKpB,MAAM2B,QAAQwG,iB,GAvBcC,a,+bCwB3BC,G,iCAvBb,WAAYhB,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CAAEsI,QAAS5G,OAAOD,gBAAgB8G,kBAF9B,E,6CAKjB,OAAO,yBAAKV,UAAU,wBACpB,kBAAC,IAAD,CACEW,UAAQ,EACRC,gBAAiB,IACjBC,iBAAkB,KAElB,yBAAKb,UAAU,gBAEXzG,KAAKpB,MAAMsI,QAAQlF,KAAI,SAAAuF,GACrB,OAAO,kBAAC,EAAD,CAAYhH,QAASgH,EAAQvJ,IAAKuJ,EAAOzF,sB,GAfnCkF,a,whCCJpBQ,G,iIAAAA,G,2GAKDC,G,iCACJ,WAAYxB,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACX8I,MAAM,GAER,EAAKC,OAAS,EAAKA,OAAOxB,KAAZ,QALG,E,wDAcjB,IAAIyB,EAAqBC,cAAoB/F,UACzCgG,EAAaC,cACV/H,KAAKiG,MAAM+B,eAAeJ,SACqCrK,IAA9DyC,KAAKiG,MAAM+B,eAAeJ,GAAoBE,IACpD9H,KAAKiG,MAAMrD,SAASqF,aAAiBJ,cAAoB/F,UAAWiG,cAAiB,M,+BAKvF/H,KAAKiG,MAAMrD,SAASqF,aAAiBJ,cAAoB/F,UAAWiG,cAAiB/H,KAAKiG,MAAMiC,c,+BAIhG,IAAIN,EAAqBC,cAAoB/F,UACzCgG,EAAaC,cACbI,EAAkB,EAIlBnI,KAAKiG,MAAM+B,eAAeJ,SACwCrK,IAA9DyC,KAAKiG,MAAM+B,eAAeJ,GAAoBE,KACpDK,EAAkBnI,KAAKiG,MAAM+B,eAAeJ,GAAoBE,IAElE,IAAIM,EAAcpI,KAAKiG,MAAMoC,UAAY,GACzC,OACE,yBAAM5B,UAAW,qBAAuBzG,KAAKiG,MAAMiC,YAAcC,EAAkB,OAAS,KAC1F,yBAAK1B,UAAU,iCAAiC6B,QAAStI,KAAK2H,QAC5D,yBAAKlB,UAAU,kCACb,kBAAC,GAAD,OAEF,yBAAKA,UAAU,2BACZzG,KAAKiG,MAAMsC,QAGhB,yBAAK9B,UAAU,uBAEX2B,EAAYpG,KAAI,SAACwG,GACf,IAAIC,EAAsBnI,OAAOoI,mBAAmBC,cAAcH,EAAWjK,MAC7E,OAAOoI,IAAMC,cAAc6B,EAApB,SAA8CD,GAA9C,IAA0DxK,IAAKwK,EAAWI,sB,GArDlE5B,aAqEd6B,gBAPS,SAACjK,GACvB,MAAO,CACLoJ,eAAgBpJ,EAAMkK,sBAKc,KAAzBD,CAA+BpB,I,2gCC/DxCsB,G,mCACJ,WAAY9C,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACXoK,OAAQ,IAyBV,EAAKC,OAAS,EAAKA,OAAO9C,KAAZ,QACd,EAAK7D,SAAW,IAAIC,IAAS,CAACC,MAAO,2CA7BpB,E,kKAiCExC,KAAKsC,SAAS4G,S,OAA7BF,E,OACJhJ,KAAKmJ,UAAS,SAAAvK,GAAK,gBACZA,GADY,IAEjBoK,c,0HAMG5C,GACLA,EAAEgD,kBACF,IAAIjK,EAAQ,GAEZA,EAAMkK,UAAYjD,EAAEhF,OAAOkI,QAAQC,UACnCpK,EAAMqK,WAAapD,EAAEhF,OAAOkI,QAAQG,WACpCtK,EAAMD,UAAYkH,EAAEhF,OAAOkI,QAAQI,UACnCvK,EAAMwK,WAAavD,EAAEhF,OAAOkI,QAAQM,WACpCzK,EAAM0K,YAAc7J,KAAKiG,MAAM6D,OAAOD,YACtC1K,EAAM4K,SAAU,EAChB/J,KAAKiG,MAAM6D,OAAOE,SAAS7K,GAC3BwD,IAAMC,SAASqH,gBACfpC,cAAoBqC,kBAAkB/K,K,yCAItC,IAAIoB,EAAUP,KAAKiG,MAAM1F,QACzB,OAAKA,EAGC,CACJ4J,IAAK5J,EAAQ6J,UAAY7J,EAAQ8J,aAAe,EAChDC,KAAK,GAJC,CAACH,IAAI,EAAGG,KAAK,K,+BAQd,WACHC,EAAU,CAAC,yBAIf,OAHGvK,KAAKiG,MAAMuE,MACZD,EAAQ/L,KAAK,8BAER,yBAAKiI,UAAW8D,EAAQE,KAAK,KAAOC,MAAO1K,KAAK2K,oBACrD,yBAAKlE,UAAU,cAEXzG,KAAKpB,MAAMoK,OAAOhH,KAAI,SAAA4I,GACpB,OAAM,yBAAKnE,UAAU,mBAAmBzI,IAAK4M,EAAMvB,WACjD,yBAAK5C,UAAU,oBAAoBzI,IAAK4M,EAAMvB,WAAYuB,EAAMzH,OAC9DyH,EAAMC,OAAO7I,KAAI,SAAA8I,GAAK,OAAG,yBAAKrE,UAAU,mBACjBsE,iBAAgBD,EAAM5L,UACtB8L,kBAAiBF,EAAM3H,MACvB8H,iBAAgBL,EAAMvB,UACtB6B,kBAAiBN,EAAMzH,MACvBmF,QAAS,EAAKW,OACdjL,IAAG,UAAK4M,EAAMvB,WAAX,OAAuByB,EAAM5L,YAAc4L,EAAM3H,oB,GAtF9D6D,aAqGd6B,oBANf,SAAyBjK,GACvB,aACKA,EAAMuM,uBAIEtC,CAAyBE,I,k/BChFzBqC,G,sIAzBX,IAAIC,EAAWrL,KAAKiG,MAAMoF,UAAY,GACtC,OAAO,yBAAK5E,UAAU,wBACpB,kBAAC,aAAD,CACEW,UAAQ,EACRC,gBAAiB,IACjBC,iBAAkB,KAElB,yBAAKxG,GAAG,uBAEJuK,EAASrJ,KAAI,SAACsJ,EAASrN,GACrB,OAAO0I,IAAMC,cAAca,GAApB,SACF6D,GADE,IAELtN,IAAKsN,EAAQC,UACbrD,UAAWjK,QAKjB,kBAAC,GAAD,a,GArBoB+I,a,odCCxBwE,G,iCAEJ,WAAYvF,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACX6M,QAAS,CACP,CAAEtI,MAAO,IAAKhE,MAAO,IACrB,CAAEgE,MAAO,IAAKhE,MAAO,UACrB,CAAEgE,MAAO,IAAKhE,MAAO,WACrB,CAAEgE,MAAO,IAAKhE,MAAO,UACrB,CAAEgE,MAAO,IAAKhE,MAAO,qBARR,E,2DAcjBa,KAAKiG,MAAMrD,SAAS8I,aAAgB,IAAK,O,sCAG3BC,GACd3L,KAAKiG,MAAMrD,SAAS8I,aAAgBC,EAAOxI,MAAOwI,EAAOxM,U,+BAGlD,WACP,OACE,yBAAKsH,UAAU,iBAEXzG,KAAKpB,MAAM6M,QAAQzJ,KAAI,SAAC2J,EAAQC,GAC9B,OAAO,4BACL5N,IAAK4N,EACLnF,UAAW,0BAA4B,EAAKR,MAAM4F,aAAa1I,QAAUwI,EAAOxI,MAAQ,+BAAiC,IACzHmF,QAAS,kBAAM,EAAKoD,gBAAgBC,KACpCA,EAAOxI,e,GAhCM6D,aA8CZ6B,gBANS,SAACjK,GACvB,MAAO,CACLiN,aAAcjN,EAAMiN,gBAIgB,KAAzBhD,CAA+B2C,I,k/BClDvCM,G,4/BAAAA,G,0EACAC,G,0mCAAAA,G,6GACAC,G,uoNAAAA,G,6GAUDC,G,iCAEJ,WAAYhG,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACXsN,UAAW,WAHI,E,iDAWNA,GACXlM,KAAKmJ,SAAL,SACKnJ,KAAKpB,OADV,IACiBsN,eAEjBlM,KAAKiG,MAAMkG,cAAcD,K,0CAIzBlM,KAAKiG,MAAMkG,cAAcnM,KAAKpB,MAAMsN,a,+BAG7B,WAEHxD,EAAqBpI,OAAOoI,mBAC5B2C,EAAW,GACXrL,KAAKiG,MAAMrB,eAAe9C,SACFzC,EAAE+M,QAAQ1D,EAAmB2D,YAAYrM,KAAKiG,MAAMrB,eAAe9C,YACzEwK,SAAQ,SAAAC,GAC1BA,EAAK,GAAGD,SAAQ,SAAAhB,GACdA,EAAQjD,SAAWiD,EAAQjD,SAASrG,KAAI,SAAAwK,GACtC,gBACKA,GADL,IAEEhE,WAAY,IAAIiE,KAAWD,WAI7BD,EAAK,KAAO,EAAK3N,MAAMsN,YACzBb,EAAW,KAAIkB,EAAK,QAM1B,IAAIG,EAAoB,qBAAuB1M,KAAKpB,MAAMsN,YAAcS,KAAc,SAAW,IAC7FC,EAAkB,qBAAuB5M,KAAKpB,MAAMsN,YAAcW,KAAY,SAAW,IACzFC,EAAqB,qBAAuB9M,KAAKpB,MAAMsN,YAAca,KAAe,SAAW,IACnG,OAAO,yBAAKtG,UAAU,+BACpB,yBAAKA,UAAU,qBACb,4BAAQA,UAAWiG,EAAmBpE,QAAS,kBAAM,EAAK0E,aAAaL,QACrE,0BAAMlG,UAAU,mBACd,kBAAC,GAAD,OAEF,0BAAMA,UAAU,mBAAhB,YAIF,4BAAQA,UAAWmG,EAAiBtE,QAAS,kBAAM,EAAK0E,aAAaH,QACnE,0BAAMpG,UAAU,mBACd,kBAAC,GAAD,OAEF,0BAAMA,UAAU,mBAAhB,UAIF,4BAAQA,UAAWqG,EAAoBxE,QAAS,kBAAM,EAAK0E,aAAaD,QACtE,0BAAMtG,UAAU,mBACd,kBAAC,GAAD,OAEF,0BAAMA,UAAU,mBAAhB,cAMwB,UAAzBzG,KAAKpB,MAAMsN,WAAyB,kBAAC,GAAD,MAEvC,kBAAC,GAAD,CAAiBb,SAAUA,S,GA/ELrE,aA4Fb6B,oBARf,SAAyBjK,GACvB,MAAO,CACLgG,eAAgBhG,EAAMgG,eAAeA,eACrCiH,aAAcjN,EAAMiN,gBAKgB,CAAEM,mBAAeT,sBAA1C7C,CAA6DoD,I,6aCvGtEgB,G,iCAEJ,WAAYhH,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,GAFI,E,6CAOjB,OAAO,yBAAK8L,MAAO,CAAEwC,MAAOlN,KAAKiG,MAAMkH,cAAcD,MAAOpG,OAAQ9G,KAAKiG,MAAMkH,cAAcrG,QAAUL,UAAW,gBAAiB3F,GAAG,gBAEpI,4BAAQsM,IAAI,wBAAwBF,MAAM,c,GAXrBlG,aAuBZ6B,oBAPf,SAAyBjK,GACvB,MAAO,CACLuO,cAAevO,EAAMuO,iBAKVtE,CAAyBoE,I,yaCxBbjG,Y,6aCFpBqG,G,iIAAAA,G,2GAMDC,G,iCACJ,WAAYrH,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACX2O,UAAU,GAEZ,EAAKC,aAAe,EAAKA,aAAarH,KAAlB,QALH,E,iDAONC,GACX1E,cAAY3B,QAAQ6F,iBAAiB4H,iB,kCAGrCxN,KAAKiG,MAAMwH,sB,+BAGJ,WACHC,EAAgB,wCACpB,OAAQ1N,KAAKiG,MAAM0H,gBACjB,KAAK7K,IAAUe,iBACb6J,GAAiB,iBAEjB,MACF,KAAK5K,IAAU0C,qBACbkI,GAAiB,eAIrB,OAAO,yBAAKjH,UAAU,wBACpB,4BAAQA,UAAWiH,EAAepF,QAAStI,KAAKwN,cAAhD,UAGA,4BAAQlF,QAAS,kBAAM,EAAKsF,aAAanH,UAAU,gBACjD,kBAAC,GAAD,CAASA,UAAU,e,GAhCAO,aA2CZ6B,oBALf,SAAyBjK,GACvB,MAAO,CACL+O,eAAgB/O,EAAM+O,eAAeE,UAG1BhF,CAAyByE,I,kgCC/CjCQ,G,w8CAAAA,G,6GAODC,G,mCACJ,WAAY9H,GAAO,0BACjB,cAAMA,IACD+H,SAAW,EAAKA,SAAS7H,KAAd,QAChB,EAAK8H,cAAgB,EAAKA,cAAc9H,KAAnB,QACrB,EAAK+H,YAAc,EAAKA,YAAY/H,KAAjB,QACnB,EAAKgI,YAAc,EAAKA,YAAYhI,KAAjB,QACnB,EAAKvH,MAAQ,CAEXsN,UAAW,QACXkC,KAAM,CAKJ,CACE3N,KAAM,QACN0C,MAAO,iBAET,CACE1C,KAAM,QACN0C,MAAO,kBAGXkL,OAAQ,EAAKC,UAAU,SAEvBC,cAAe,KACfC,YAAa,IAEf,EAAKC,cAAgB,IAAIlM,IAAS,CAAEC,MAAO,sBA5B1B,E,2KAgCCxC,KAAKyO,cAAcvF,S,OAA/B/E,E,OAEJnE,KAAKmJ,UAAS,SAAAvK,GAKZ,MAHwB,WADxBA,EAAQ,SAAKA,GAAR,IAAe4P,YAAarK,KACvB+H,YACRtN,EAAMyP,OAASlK,GAEVvF,K,gDAGTmF,QAAQ2K,IAAI,QAAZ,M,sIAGMC,GAKR,OAJKA,IACHA,EAAM3O,KAAKpB,MAAMsN,WAGXyC,GACN,IAAK,QACH,OAAOC,cAAeC,eAExB,IAAK,QACH,OAAO7O,KAAKpB,MAAQoB,KAAKpB,MAAM4P,YAAc,GAGjD,MAAO,K,kCAGGpI,GACV,IAAImI,EAAgBnI,EAAE0I,cAAcxF,QAAQyF,UAC5C/O,KAAKmJ,UAAS,SAAAvK,GACZ,gBAAYA,GAAZ,IAAmB2P,uB,+BAIdnI,GACPpG,KAAKgN,aAAa5G,EAAEhF,OAAOkI,QAAQqF,O,mCAGxBA,GAAK,WAChB3O,KAAKmJ,UAAS,SAAAvK,GACZ,gBAAYA,GAAZ,IAAmBsN,UAAWyC,EAAKN,OAAQ,EAAKC,UAAUK,U,sCAK5D3O,KAAKmJ,UAAS,SAAAvK,GACZ,gBAAYA,GAAZ,IAAmB2P,cAAe,UAEpCvO,KAAKiG,MAAMrD,SAASoM,kB,oCAGR,IACRC,EADQ,OAOZ,GALAjP,KAAKpB,MAAMyP,OAAO/B,SAAQ,SAAA4C,GACpBA,EAAKzO,OAAS,EAAK7B,MAAM2P,gBAC3BU,EAAQC,OAGPD,EACH,+BAAyBjP,KAAKpB,MAAM2P,cAApC,yCAAkFvO,KAAKpB,MAAMsN,UAA7F,MAEFlM,KAAKiG,MAAMkJ,SAASF,GACpBjP,KAAKmJ,UAAS,SAAAvK,GACZ,gBAAYA,GAAZ,IAAmB2P,cAAe,UAEpCvO,KAAKiG,MAAMrD,SAASoM,kB,+BAGb,WACHzE,EAAU,iBACVvK,KAAKiG,MAAMmJ,SACb7E,GAAW,0BAEb,IAAImD,EAAgB,MAMpB,OALK1N,KAAKpB,MAAM2P,cAGdb,GAAiB,eAFjBA,GAAiB,gBAKjB,yBAAKjH,UAAW8D,GACd,yBAAK9D,UAAU,qBAAqB6B,QAAStI,KAAKiO,gBAClD,yBAAKxH,UAAU,0BACb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,WAAf,gBACA,4BAAQA,UAAU,qCAAqC6B,QAAStI,KAAKiO,eACnE,kBAAC,GAAD,CAAOxH,UAAU,UAEnB,yBAAKA,UAAU,sBACZzG,KAAKpB,MAAMwP,KAAKpM,KAAI,SAAA2M,GACnB,IAAIU,EAAa,sBAIjB,OAHI,EAAKzQ,MAAMsN,YAAcyC,EAAIlO,OAC/B4O,GAAc,+BAGd,4BACE5I,UAAW4I,EACX/G,QAAS,EAAK0F,SACdhQ,IAAK2Q,EAAIlO,KACT6O,WAAUX,EAAIlO,MAEbkO,EAAIxL,YAMdnD,KAAKpB,MAAMyP,OAAO3N,OACjB,yBAAK+F,UAAU,+BACZzG,KAAKpB,MAAMyP,OAAOrM,KAAI,SAAAiN,GACrB,IAAIM,EACAhF,EAAU,eACViF,EAAa,CACf/I,UAAW,yBAoBb,MAlB6B,UAAzB,EAAK7H,MAAMsN,YACbqD,EAAeN,EAAMQ,cACrBlF,GAAW,qBAGXiF,EAAWtC,MAAQ,KACnBsC,EAAW1I,OAAS,MAEO,UAAzB,EAAKlI,MAAMsN,YACbqD,EAAe,MACfC,EAAWpC,IAAM6B,EAAMS,IACvBnF,GAAW,sBACX0E,EAAMxO,KAAOwO,EAAMU,SACnBV,EAAMW,UAAY,SAEhB,EAAKhR,MAAM2P,gBAAkBU,EAAMxO,OACrC8J,GAAW,0BAGX,yBACE9D,UAAW8D,EACXsF,iBAAgBZ,EAAMxO,KACtBzC,IAAKiR,EAAMxO,KACX6H,QAAS,EAAK4F,aAEd,kBAACqB,EAAiBC,QAM1B,GAEF,yBAAK/I,UAAU,yBACb,4BAAQA,UAAWiH,EAAepF,QAAStI,KAAKmO,aAAhD,iB,GAxLgBnH,aAwMb6B,oBANf,SAAyBjK,GACvB,aACKA,EAAMkR,yBAIEjH,CAAyBkF,I,gdC3MlCgC,G,iCACJ,WAAY9J,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACXoR,QAASlN,IAAUmN,QACnBvI,MAAM,GAJS,E,iDAQjB1H,KAAKmJ,SAAS,CACZzB,MAAO1H,KAAKpB,MAAM8I,S,uCAGLwI,GACflQ,KAAKiG,MAAMkK,iBAAiBD,GAC5BlQ,KAAKmJ,SAAS,CACZzB,MAAO1H,KAAKpB,MAAM8I,S,+BAGb,WACP,OACE,yBAAKjB,UAAU,6BACb,0BAAMA,UAAW,4BAA8BzG,KAAKpB,MAAM8I,KAAO,gCAAkC,IAAKY,QAAS,kBAAM,EAAK8H,eAAexB,cAAeyB,WAAWrQ,KAAKiG,MAAMkH,cAAcmD,OAC9L,yBAAK7J,UAAW,8BAAgCzG,KAAKpB,MAAM8I,KAAO,iCAAmC,KAEjG1H,KAAKpB,MAAMoR,QAAQhO,KAAI,SAAAkO,GACrB,OAAO,4BACLzJ,UAAW,oCAAsC,EAAKR,MAAMkH,cAAcrM,KAAOoP,EAAOpP,GAAK,0CAA4C,IACzIwH,QAAS,kBAAM,EAAK6H,iBAAiBD,IACrClS,IAAKkS,EAAOpP,IACX8N,cAAeyB,WAAWH,EAAOI,gB,GA9BjBtJ,aA+ClB6B,oBANf,SAAyBjK,GACvB,MAAO,CACLuO,cAAevO,EAAMuO,iBAIe,CAAEgD,uBAA3BtH,CAA+CkH,I,obC5B/CQ,G,iCApBb,WAAYtK,GAAO,+BACXA,G,6CAGN,OACE,yBAAKQ,UAAW,sBAAwBzG,KAAKiG,MAAMmJ,OAAS,2BAA6B,KACvF,yBAAK3I,UAAU,oBAEXmI,cAAeyB,WAAWrQ,KAAKiG,MAAM0I,IAAI2B,OAG7C,yBAAK7J,UAAU,sBACb,yBAAKA,UAAU,oBAAoBzG,KAAKiG,MAAM0I,IAAIxL,OAClD,yBAAKsD,UAAU,0BAA0BzG,KAAKiG,MAAM0I,IAAI6B,Y,GAd1CxJ,a,4/BCIHyJ,G,qCACnB,WAAYxK,GAAO,0BACjB,cAAMA,IA6FRyK,uBAAyB,SAACtK,EAAGuK,GAC3B,IAAIxR,EAAQE,EAAEE,UAAU,EAAKX,MAAMO,OACnCA,EAAMmN,SAAQ,SAAAsE,GACTA,EAAE9P,KAAO6P,IACVC,EAAEC,YAAczK,EAAEjH,MAClByR,EAAEE,WAAa,OAGnB,EAAK3H,UAAS,SAAAvK,GAAK,gBACdA,GADc,IACPO,cAvGK,EA+GnB4R,gBAAkB,SAACC,EAAKL,GACtB,IAAIxR,EAAQE,EAAEE,UAAU,EAAKX,MAAMO,OACnCA,EAAMmN,SAAQ,SAAAsE,GACTA,EAAE9P,KAAO6P,IACVC,EAAEE,WAAaE,EAAIhP,KAAI,SAAAlB,GAAE,OAAEA,EAAG3B,aAGlC,EAAKgK,UAAS,SAAAvK,GAAK,gBACdA,GADc,IACPO,cAvHK,EA+HnB8R,0BAA4B,SAAC7K,EAAGuK,GAC9B,IAAIxR,EAAQE,EAAEE,UAAU,EAAKX,MAAMO,OACnCA,EAAMmN,SAAQ,SAAAsE,GACTA,EAAE9P,KAAO6P,IACVC,EAAEM,eAAiB9K,EAAEjH,UAGzB,EAAKgK,UAAS,SAAAvK,GAAK,gBACdA,GADc,IACPO,cArIV,EAAKP,MAAQ,CACXO,MAAO,GACPgS,aAAc,UACdC,YAAa,GACbC,YAAa,IAEjB,EAAK/O,SAAW,IAAIC,IAAS,CAAEC,MAAO,yBAAF,OAA2BE,cAA3B,iBARnB,E,oKAaM1C,KAAKsC,SAAS4G,S,cAAjCoI,E,gBACqB,IAAI/O,IAAS,CAACC,MAAO,8BAAgC0G,S,OAA1EmI,E,OACJrR,KAAKmJ,SAAS,CACZhK,MAAOmS,EAAWlO,MAAQ,GAC1BiO,gB,mPAUmBE,E,yCACJ,IAAIhP,IAAS,CAAEC,MAAO,yBAAF,OAA2BE,cAA3B,iBAA4DwB,IAAI,GAAI,CAAEd,KAAMpD,KAAKpB,MAAMO,Q,cACzHoS,GACD7P,cAAY+L,oB,kIAKd,IAAI+D,EAAeC,KAAKC,MAAM,EAAI,IAAAD,KAAKE,UACnCxS,EAAQE,EAAEE,UAAUS,KAAKpB,MAAMO,OACnCA,EAAMX,KAAK,CACTqS,YAAa,WACbC,WAAY,GACZhQ,GAAI0Q,EACJN,eAAgB,YAElBlR,KAAKmJ,UAAS,SAAAvK,GAAK,gBACdA,GADc,IAEjBO,aAEFa,KAAK4R,gB,sCAIS9Q,GACd,IAAI+Q,EAAe7R,KAAKpB,MAAMO,MAAM2S,QAAO,SAAA1O,GAAI,OAAIA,EAAKtC,KAAOA,KAC/Dd,KAAKmJ,SAAS,CACZhK,MAAO0S,M,mCAKEzL,EAAG2L,GACd,GAAgB,YAAZ3L,EAAEjH,MAKC,GAAgB,YAAZiH,EAAEjH,OAMb,GAAgC,YAA5Ba,KAAKpB,MAAMuS,aAA4B,CACzC,IAAI/N,EAAO,KAAIpD,KAAKpB,MAAMO,OACtByM,EAAQxI,EAAK4O,WAAU,SAAAC,GAAG,OAAIA,EAAInR,KAAOiR,EAAKjR,MAClDsC,EAAKwI,GAAOsG,QAAQ,GAApB,SAA8B9O,EAAKwI,GAAOsG,QAAQ,IAAlD,UAAuD9L,EAAE3F,KAAO2F,EAAEjH,QAClEiE,EAAKwI,GAAOuG,QAAU,GACtBnS,KAAKmJ,SAAS,CACZhK,MAAOiE,SAEJ,GAAgC,YAA5BpD,KAAKpB,MAAMuS,aAA4B,CAChD,IAAI/N,EAAO,KAAIpD,KAAKpB,MAAMO,OACtByM,EAAQxI,EAAK4O,WAAU,SAAAC,GAAG,OAAIA,EAAInR,KAAOiR,EAAKjR,MAClDsC,EAAKwI,GAAOuG,QAAQ,GAApB,SAA8B/O,EAAKwI,GAAOuG,QAAQ,IAAlD,UAAuD/L,EAAE3F,KAAO2F,EAAEjH,QAClEiE,EAAKwI,GAAOsG,QAAU,GACtBlS,KAAKmJ,SAAS,CACZhK,MAAOiE,UAnBTpD,KAAKmJ,SAAS,CACZgI,aAAc/K,EAAEjH,aANlBa,KAAKmJ,SAAS,CACZgI,aAAc/K,EAAEjH,U,mCA4ETiH,M,+BAMJ,WACDgM,EAAgB,CACpB,CAAE3R,KAAM,aAActB,MAAO,UAAWoJ,MAAO,WAC/C,CAAE9H,KAAM,aAActB,MAAO,UAAWoJ,MAAO,YAE3C8J,EAAe,CACnB,CAAE5R,KAAM,OAAQtB,MAAO,WAAYoJ,MAAO,YAC1C,CAAE9H,KAAM,OAAQtB,MAAO,OAAQoJ,MAAO,SAWxC,OACE,yBAAK9B,UAAU,uBACb,yBAAKA,UAAU,yBAEXmI,cAAeyB,WAAW,mBAG9B,yBAAK5J,UAAU,yBAAf,+CACA,yBAAKA,UAAU,wBAAf,sFACqF,6BADrF,+EAIA,yBAAKA,UAAU,iCACb,yBAAKA,UAAU,yBAEXzG,KAAKpB,MAAMO,MAAM6C,KAAI,SAAA+P,GAEnB,OADAhO,QAAQ2K,IAAIqD,GAEV,yBAAKtL,UAAU,uBAAuBzI,IAAK+T,EAAKjR,IAC9C,kBAACwR,GAAA,EAAD,CACEC,SAAU,SAACnM,GAAD,OAAO,EAAK6K,0BAA0B7K,EAAG2L,EAAKjR,KACxD2F,UAAU,0BACVpJ,QAAS+U,EACTjT,MAAOE,EAAEmT,KAAKJ,GAAe,SAAAK,GAAC,OAAEA,EAAEtT,QAAU4S,EAAKb,mBAAmBkB,EAAc,KAEpF,kBAACE,GAAA,EAAD,CACEC,SAAU,SAACpT,GAAD,OAAW,EAAKuR,uBAAuBvR,EAAO4S,EAAKjR,KAC7D2F,UAAU,0BACVpJ,QAASgV,EACTlT,MAAOE,EAAEmT,KAAKH,GAAc,SAAAI,GAAC,OAAEA,EAAEtT,QAAU4S,EAAKlB,gBAAgBwB,EAAa,KAyBxD,SAArBN,EAAKlB,aACH,kBAACyB,GAAA,EAAD,CAEEnT,MAAOE,EAAEyS,OAAO,EAAKlT,MAAMyS,aAAa,SAAAqB,GAAC,OAAIX,EAAKjB,YAAciB,EAAKjB,WAAW6B,QAAQD,EAAEvT,QAAU,KACpGoT,SAAU,SAACnM,GAAD,OAAO,EAAK2K,gBAAgB3K,EAAG2L,EAAKjR,KAC9C8R,SAAS,EACTC,mBAAmB,EACnBC,YAAY,eACZzV,QAAS,EAAKuB,MAAMyS,YACpB5K,UAAU,4BAGhB,4BAAQ6B,QAAS,kBAAM,EAAKyK,gBAAgBhB,EAAKjR,KAAK2F,UAAU,8BAAhE,WAOZ,yBAAKA,UAAU,kCACb,4BAAQ6B,QAAS,kBAAM,EAAK0K,gBAAgBvM,UAAU,0BAAtD,kBAEF,yBAAKA,UAAU,gBACb,4BAAQ6B,QAAS,kBAAM,EAAK2K,kBAAiB,IAAOxM,UAAU,mCAA9D,gBACA,4BAAQ6B,QAAS,kBAAM,EAAK2K,oBAAoBxM,UAAU,mCAA1D,c,GAjPuCO,a,k/BCF5BkM,G,qCACnB,WAAYjN,GAAO,0BACjB,cAAMA,IACDrH,MAAQ,CACXO,MAAO,GACPgU,QAAQ,EACRC,UAAU,EACVC,eAAe,EACf/K,SAAS,EACTgL,iBAAiB,EACjBC,SAAS,GAEX,EAAKjR,SAAW,IAAIC,IAAS,CAAEC,MAAO,yBAAF,OAA2BE,cAA3B,eAXnB,E,+JAeD1C,KAAKsC,SAAS4B,IAAI,WAAY,CAACd,KAAMpD,KAAKpB,MAAMO,Q,OAA5DgF,E,OACJJ,QAAQ2K,IAAIvK,G,iPAOSnE,KAAKsC,SAAShD,IAAI,Y,OAAnCkU,E,OACJxT,KAAKmJ,SAAS,CACZhK,MAAOqU,EAASpQ,O,oIAIHgD,GACO,cAAlBA,EAAEhF,OAAOX,KAWgB,SAAlB2F,EAAEhF,OAAOX,KAYpBT,KAAKmJ,SAAS,CACZhK,MAAO,SACFa,KAAKpB,MAAMO,OADX,UAEFiH,EAAEhF,OAAOX,KAAO2F,EAAEhF,OAAOjC,UAd5Ba,KAAKmJ,SAAS,CACZhK,MAAO,SACFa,KAAKpB,MAAMO,OADX,IAEHsU,UAAW,SACNzT,KAAKpB,MAAMO,MAAMsU,WADb,IAEPC,KAAMtN,EAAEhF,OAAOjC,YAhBrBa,KAAKmJ,SAAS,CACZhK,MAAO,SACFa,KAAKpB,MAAMO,OADX,IAEHsU,UAAW,SACNzT,KAAKpB,MAAMO,MAAMsU,WADb,IAEPE,UAAWvN,EAAEhF,OAAOjC,c,kCAyBlBiH,GACuB,MAAX,YAAlBA,EAAEhF,OAAOX,MACXT,KAAKmJ,UAAL,WACG/C,EAAEhF,OAAOX,KAAO2F,EAAEhF,OAAOwS,SAD5B,uBAGO5T,KAAKpB,MAAMO,OAHlB,UAIKiH,EAAEhF,OAAOX,KAAO2F,EAAEhF,OAAOwS,WAJ9B,IAQF5T,KAAKmJ,SAAL,OACG/C,EAAEhF,OAAOX,KAAO2F,EAAEhF,OAAOwS,Y,+BAIrB,WACP,OACE,yBAAKnN,UAAU,gBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBAEXmI,cAAeyB,WAAW,cAG9B,yBAAK5J,UAAU,kBAAf,gBACA,yBAAKA,UAAU,4BACZzG,KAAKpB,MAAMuU,QACV,yBAAK1M,UAAU,0BACb,2BAAOoN,QAAQ,mCAAf,eACA,yBAAKpN,UAAU,kCACb,2BAAOA,UAAU,yBACf3F,GAAG,kCACHyR,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,IAAI7H,KAAK,SAChDwV,IAAI,IACJC,KAAK,MACL7U,MAAOa,KAAKpB,MAAMqV,aAClBxT,KAAK,oBAMf,yBAAKgG,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVhG,KAAK,SACLmT,QAAS5T,KAAKpB,MAAM6B,MACpBK,GAAG,eACHyR,SAAU,SAACnM,GAAD,OAAO,EAAK8N,YAAY9N,MAEpC,2BAAOK,UAAU,sBAAsBoN,QAAQ,gBAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBAEXmI,cAAeyB,WAAW,cAG9B,yBAAK5J,UAAU,kBAAf,aACA,yBAAKA,UAAU,4BACZzG,KAAKpB,MAAMwU,UACV,yBAAK3M,UAAU,0BACb,2BAAOoN,QAAQ,sCAAf,aACA,yBAAKpN,UAAU,kCACb,4BACEhG,KAAK,YACL8R,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,IACvCtF,GAAG,sCACH,4BAAQ3B,MAAM,QAAd,QACA,4BAAQA,MAAM,MAAd,UAMV,yBAAKsH,UAAU,4BAEXzG,KAAKpB,MAAMwU,UACX,yBAAK3M,UAAU,0BACb,2BAAOoN,QAAQ,uCAAf,aACA,yBAAKpN,UAAU,kCACb,2BAAOlI,KAAK,SACVwV,IAAI,IACJI,IAAI,MACJrT,GAAG,sCACHL,KAAK,OACL8R,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,SAMjD,yBAAKK,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVhG,KAAK,WACLmT,QAAS5T,KAAKpB,MAAM6B,MACpB6H,QAAS,SAAClC,GAAD,OAAO,EAAK8N,YAAY9N,IACjCtF,GAAG,kBAEL,2BAAO2F,UAAU,sBAAsBoN,QAAQ,iBAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBAEXmI,cAAeyB,WAAW,iBAG9B,yBAAK5J,UAAU,kBAAf,wBACA,yBAAKA,UAAU,4BAEXzG,KAAKpB,MAAMyU,eACX,yBAAK5M,UAAU,0BACb,2BAAOoN,QAAQ,oCAAf,YACA,yBAAKpN,UAAU,kCACb,2BAAOA,UAAU,6BACf3F,GAAG,8BACHvC,KAAK,OACLkC,KAAK,aACLqS,YAAY,YACZsB,aAAa,GACb7B,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,SAMjD,yBAAKK,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVmN,QAAS5T,KAAKpB,MAAM6B,MACpBA,KAAK,gBACL6H,QAAS,SAAClC,GAAD,OAAO,EAAK8N,YAAY9N,IACjCtF,GAAG,qBAEL,2BAAO2F,UAAU,sBAAsBoN,QAAQ,oBAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBAEXmI,cAAeyB,WAAW,UAG9B,yBAAK5J,UAAU,kBAAf,YACA,yBAAKA,UAAU,4BAEXzG,KAAKpB,MAAM0J,SACX,yBAAK7B,UAAU,0BACb,2BAAOoN,QAAQ,iCAAf,UACA,yBAAKpN,UAAU,kCACb,2BAAOA,UAAU,yBACf3F,GAAG,gCACHvC,KAAK,SACLwV,IAAI,IACJtT,KAAK,WACLtB,MAAOa,KAAKpB,MAAMyV,SAClB9B,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,SAMjD,yBAAKK,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVmN,QAAS5T,KAAKpB,MAAM6B,MACpBA,KAAK,UACL6H,QAAS,SAAClC,GAAD,OAAO,EAAK8N,YAAY9N,IACjCtF,GAAG,uBAEL,2BAAO2F,UAAU,sBAAsBoN,QAAQ,sBAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,iBAEXmI,cAAeyB,WAAW,gBAIhC,yBAAK5J,UAAU,kBAAf,oBACA,yBAAKA,UAAU,4BACZzG,KAAKpB,MAAM0U,iBACV,yBAAK7M,UAAU,0BACb,2BAAOoN,QAAQ,qCAAf,eACA,yBAAKpN,UAAU,kCACb,2BAAOA,UAAU,yBACf3F,GAAG,oCACHvC,KAAK,SACLY,MAAOa,KAAKpB,MAAM0V,WAClBP,IAAI,IACJC,KAAK,MACLvT,KAAK,aACL8R,SAAU,SAACnM,GAAD,OAAO,EAAK0N,iBAAiB1N,SAMjD,yBAAKK,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVmN,QAAS5T,KAAKpB,MAAM6B,MACpBA,KAAK,kBACL6H,QAAS,SAAClC,GAAD,OAAO,EAAK8N,YAAY9N,IACjCtF,GAAG,2BAEL,2BAAO2F,UAAU,sBAAsBoN,QAAQ,0BAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,iBAEXmI,cAAeyB,WAAW,iBAIhC,yBAAK5J,UAAU,kBAAf,uBACA,yBAAKA,UAAU,mCACb,yBAAKA,UAAU,iBACb,2BACElI,KAAK,WACLkI,UAAU,yBACVmN,QAAS5T,KAAKpB,MAAM6B,MACpBA,KAAK,UACL6H,QAAS,SAAClC,GAAD,OAAO,EAAK8N,YAAY9N,IACjCtF,GAAG,qBACHyR,SAAU,SAACnM,GAAD,OAAO,EAAK+C,SAAS,CAAEoK,SAAU,EAAK3U,MAAM2U,aAExD,2BAAO9M,UAAU,sBAAsBoN,QAAQ,sBAC7C,0BAAMpN,UAAU,wBAChB,0BAAMA,UAAU,6BAKxB,yBAAKA,UAAU,gBACb,4BAAQ6B,QAAS,kBAAM,EAAKiM,kBAAkB9N,UAAU,mCAAxD,gBACA,4BAAQ6B,QAAS,kBAAM,EAAKiM,kBAAkB9N,UAAU,mCAAxD,c,GA/UqCO,a,6aCLxCwN,G,+jFAAAA,G,6GAODC,G,iCACJ,WAAYxO,GAAO,kBACjB,cAAMA,GACN,IAAImI,EAAO,CACT,CAAEkC,KAAM,iBAAkBnN,MAAO,aAAcqN,KAAM,0CAHtC,MAKd,CAAC,SAASmC,QAAQ,EAAK1M,MAAMhD,aAAayR,gBAAkB,IAC7DtG,EAAO,CACL,CAAEkC,KAAM,iBAAkBnN,MAAO,aAAcqN,KAAM,yCACrD,CAAEF,KAAM,eAAgBnN,MAAO,WAAYqN,KAAM,2DACjD,CAAEF,KAAM,eAAgBnN,MAAO,iBAAkBqN,KAAM,6DAG3D,EAAK5R,MAAQ,CACXsN,UAAW,aACXkC,QAde,E,+CAmBRjL,GACTnD,KAAKmJ,SAAS,CACZ+C,UAAW/I,M,oCAKbnD,KAAKiG,MAAMwH,sB,mCAGAvB,GACX,OAAQlM,KAAKpB,MAAMsN,WACjB,IAAK,aACH,OAAO,kBAAC,GAAD,MACT,IAAK,WACH,OAAO,kBAAC,GAAD,MACT,IAAK,iBACH,OAAO,yCACT,QACE,OAAO,Q,+BASJ,WACP,OACE,yBAAKzF,UAAU,iBACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,gBACb,kBAAC,GAAD,CAAMA,UAAU,uBAChB,4BAAQ6B,QAAS,kBAAM,EAAKqM,gBAA5B,MAEF,yBAAKlO,UAAU,cACb,yBAAKA,UAAU,oBAEXzG,KAAKpB,MAAMwP,KAAKpM,KAAI,SAAC2M,EAAK/C,GACxB,OAAO,yBAAK5N,IAAK2Q,EAAIxL,MAAOmF,QAAS,kBAAM,EAAKsM,WAAWjG,EAAIxL,SAC7D,kBAAC,GAAD,CAAWiM,OAAQ,EAAKxQ,MAAMsN,YAAcyC,EAAIxL,MAAsBwL,IAAKA,SAKnF,yBAAKlI,UAAU,uBACZzG,KAAK6U,aAAa7U,KAAKpB,MAAMsN,mB,GAnEjBlF,aA8EZ6B,oBAHf,SAAyBjK,GACvB,MAAO,CAACqE,aAAcrE,EAAMqE,gBAEf4F,CAAyB4L,I,sgCCnEjCD,G,+jFAAAA,G,6GACAM,G,uYAAAA,G,6GACAC,G,0dAAAA,G,6GACAC,G,ggBAAAA,G,6GACAC,G,43BAAAA,G,6GACAC,G,wMAAAA,G,6GA4NHC,GA3NGC,G,mIAAAA,G,yGA6NLD,G,mCAvMA,WAAYlP,GAAO,yBACjB,cAAMA,GACN3F,OAAO+U,YAAP,OACA,EAAKzW,MAAQ,CAEX0W,YAAa,WACb3H,eAAgB7K,IAAUe,iBAC1B0R,kBAAkB,GAEpB,EAAKC,iBAAmB,EAAKA,iBAAiBrP,KAAtB,QACxB,EAAKV,kBAAoB,EAAKA,kBAAkBU,KAAvB,QACzB,EAAKsP,iBAAmB,EAAKA,iBAAiBtP,KAAtB,QACxB,EAAKuP,UAAY,EAAKA,UAAUvP,KAAf,QACjB,EAAKmC,QAAU,EAAKA,QAAQnC,KAAb,QACfxD,IAAMgT,UAAU,EAAKhI,eAAexH,KAApB,SAdC,E,qDAoBjB,IAAIwH,EAAiBhL,IAAMiT,WAAWjI,eAAeE,OACjDF,IAAmB3N,KAAKpB,MAAM+O,gBAChC3N,KAAKmJ,SAAL,SAAmBnJ,KAAKpB,OAAxB,IAA+B+O,sB,oCASjC3N,KAAKD,QAAU,IAAI2F,EAAQ1F,MAC3BA,KAAKD,QAAQ8V,W,yCAOb7V,KAAKmJ,SAAL,SACKnJ,KAAKpB,OADV,IAEE0W,YAAa,e,0CAQftV,KAAKmJ,SAAS,CACZoM,kBAAmBvV,KAAKpB,MAAM2W,qB,0CAQhCvV,KAAKmJ,SAAL,SACKnJ,KAAKpB,OADV,IAEE0W,YAAa,gB,gCAQfQ,eAAYC,UACZpT,IAAMC,SAASqH,kB,kCAQf,IAAI+L,EAAmBrT,IAAMiT,WAAWK,YAAY1V,QAChDyV,GAAoBA,EAAiBE,UACvCF,EAAiBE,WAEnBvT,IAAMC,SAASsT,iB,mCAOfnS,QAAQ2K,IAAI,mB,2IAQZ1O,KAAKmW,c,SAEoB,IAAI5T,IAAS,CAACC,MAAO,uBAAwB0G,S,OACtEzJ,GADIA,E,QACsB2D,KAC1BzD,KAASiD,SAASwT,aAAkB3W,I,sIAQpCO,KAAKD,QAAQ0B,oBAAoBgD,wBACjCzE,KAAKyF,sB,+BAME,WACH4Q,EAAiB,GACjBC,EAAkB,UAYtB,OAXItW,KAAKpB,MAAM+O,iBAAmB7K,IAAUC,kBAC1CuT,GAAmB,kBAGnB3T,IAAMiT,WAAWhR,eAAeA,eAAe2R,SAE/C,iBADA5T,IAAMiT,WAAWhR,eAAeA,eAAe2R,WAEpB,aAA3BvW,KAAKpB,MAAM0W,cAEXe,EAAiB,WAGjB,kBAAC,IAAD,CAAU1T,MAAOA,KACf,yBAAK8D,UAAW6P,EACdhO,QAAStI,KAAKsI,QACdoN,UAAW1V,KAAK0V,WAChB,yBAAKjP,UAAU,cACb,yBAAKA,UAAU,oBACb,4BACEA,UAAU,qBAGV,kBAAC,GAAD,CAAWA,UAAU,UAEvB,uBAAG+P,KAAK,mBAAmBpV,OAAO,SAASqF,UAAU,QAEjDnG,OAAOmW,WACHC,YAAYpW,OAAOmW,WAAY,CAAEhQ,UAAW,iBAC5C,kBAAC,GAAD,CAAMkQ,QAAQ,YAAYlQ,UAAU,kBAG5C,4BAAQA,UAAU,eAAe6B,QAAStI,KAAKyV,kBAC7C,kBAAC,GAAD,CAAMhP,UAAU,WAGpB,yBAAKA,UAAU,mBACe,YAA3BzG,KAAKpB,MAAM0W,aAA6B,kBAAC,GAAD,MACb,aAA3BtV,KAAKpB,MAAM0W,aAA8B,kBAAC,GAAD,OAE5C,yBAAK7O,UAAU,kEACb,4BACEA,UAAW,mBAAqB4P,EAChC/N,QAAStI,KAAKwV,kBAEd,kBAAC,GAAD,CAAU/O,UAAU,UAEtB,4BAAQA,UAAU,QAChB,kBAAC,GAAD,CAAYA,UAAU,UAExB,4BAAQA,UAAU,QAChB,kBAAC,GAAD,CAASA,UAAU,UAErB,yBAAKA,UAAU,QACb,kBAAC,GAAD,OAEF,4BAAQA,UAAU,QAChB,kBAAC,GAAD,CAASA,UAAU,UAErB,kBAAC,GAAD,CAAc6B,QAAS,kBAAM,EAAKmF,qBAAqBA,kBAAmB,kBAAM,EAAKA,yBAGzF,yBAAKhH,UAAU,eACZzG,KAAKpB,MAAM2W,kBACZ,kBAAC,GAAD,CAAc3W,MAAOoB,KAAKpB,MAAM2W,iBAClB9H,kBAAmB,kBAAM,EAAKA,uBAC5C,kBAAC,GAAD,QAGJ,kBAAC,GAAD,W,GA9LazG,aAgNNmO","file":"b63beff4cc08accb80e7.bundle.js","sourcesContent":["\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./dialog-content.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./dialog-content.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./dialog-content.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","export const CHANGE_APP_ROUTES = 'CHANGE_APP_ROUTES';\r\n\r\nexport function changeAppRoutes(routes) {\r\n  return {\r\n    type: CHANGE_APP_ROUTES,\r\n    routes\r\n  };\r\n}\r\n\r\n","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","import {CHANGE_APP_ROUTES} from './actions'\r\n\r\nconst defaultState = {\r\n  routes: [],\r\n};\r\n\r\nexport function appRoutesReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case CHANGE_APP_ROUTES:{\r\n      state = {\r\n        routes: action.routes,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {CHANGE_FORM_FIELD_VALUE} from './actions'\r\n\r\nconst defaultState = {\r\n\r\n};\r\n\r\nexport function formsStoreReducer(state, {type, formId, fieldName, value}) {\r\n  state = state || defaultState;\r\n  switch (type) {\r\n    case CHANGE_FORM_FIELD_VALUE:{\r\n      if(_.get(state, [formId, fieldName]) !== value){\r\n        state = _.cloneDeep(state);\r\n        _.set(state, [formId, fieldName], value);\r\n      }\r\n\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {combineReducers} from 'redux';\r\nimport {appRoutesReducer} from \"./routes/reducers\";\r\nimport {currentModelReducer} from \"./current-model/reducers\";\r\nimport {formsStoreReducer} from \"./forms-data-storage/reducers\";\r\nimport {currentUserReducer} from \"./current-user/reducers\";\r\n\r\n\r\nexport default combineReducers({\r\n  appRoutes: appRoutesReducer,\r\n  currentModel: currentModelReducer,\r\n  formsStore: formsStoreReducer,\r\n  currentUser: currentUserReducer,\r\n});\r\n","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nlet appStore = createStore(rootReducer);\r\n\r\nexport default appStore;","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./state-section.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./state-section.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./state-section.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\n/**\r\n * @property {Modules} modules\r\n * */\r\nclass BaseModule {\r\n  /**\r\n   * @param {Modules} modules\r\n   * */\r\n  constructor(modules) {\r\n    this.modules = modules;\r\n  }\r\n}\r\n\r\nexport default BaseModule;","import BaseModule from './BaseModule';\r\nimport {getEditor} from \"../../helpers\";\r\n\r\nclass ElementsFactory extends BaseModule{\r\n  parseData(object, parent){\r\n    let children = [];\r\n    const elementsManager = window.elementsManager;\r\n    /**\r\n     * @member {BaseElement} element\r\n     * */\r\n    let element = new (elementsManager.getElementClass(object.name));\r\n    if( object.children && object.children.length ){\r\n      for( let child of object.children){\r\n        elementsManager.checkElementExists(child.name) ?\r\n          children.push(this.parseData(child, element) ) : '';\r\n      }\r\n    }\r\n    element.id = object.id;\r\n    element.children = children;\r\n    /**\r\n     * Если настройки пустый то с сервера приходит пустой массив -- меняем на пустой объект\r\n     * */\r\n    let settings = (object.settings.length === 0) ? {} : object.settings;\r\n    element.setSettings(settings);\r\n    let cssClassStorage = (object.cssClassStorage && object.cssClassStorage.length === 0) ? {} : object.cssClassStorage;\r\n    element.setCSSStorage(cssClassStorage);\r\n    if(object.dynamicContentSettings){\r\n      element.dynamicContentSettings = (object.dynamicContentSettings.length === 0) ? {} : object.dynamicContentSettings;\r\n    }\r\n\r\n    if(parent){\r\n      element.parent = parent;\r\n    }\r\n    element.update();\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * @param {BaseElement} element\r\n   * @param {BaseElement} target\r\n   * @return{BaseElement}\r\n   * */\r\n  duplicateElement(element, target){\r\n\r\n    let newElement = this._duplicateElement(element);\r\n    target.insertNewChildAfter(element.getId(), newElement);\r\n    /**\r\n     * @member {TemplateDataStorage} templateDataStorage\r\n     * */\r\n    let templateDataStorage = getEditor().modules.templateDataStorage;\r\n    templateDataStorage.elementsIds = _.union(templateDataStorage.elementsIds, newElement.getIds());\r\n    return newElement;\r\n  }\r\n  /**\r\n   * @param {BaseElement} element\r\n   * */\r\n  _duplicateElement(element){\r\n    /**\r\n     * @member {BaseElement} newElement\r\n     * */\r\n    let newElement = new (elementsManager.getElementClass(element.getName()));\r\n    let newChildren = [];\r\n    element.children.map((childrenItem)=>{\r\n      let newChild = this._duplicateElement(childrenItem);\r\n      newChild.setParent(newElement);\r\n      newChildren.push(newChild);\r\n    });\r\n    // newElement.component = new\r\n    newElement.setChildren(newChildren);\r\n    newElement.settings = _.cloneDeep(element.settings);\r\n    if(element.dynamicContentSettings){\r\n      newElement.dynamicContentSettings = _.cloneDeep(element.dynamicContentSettings);\r\n    }\r\n    newElement.children = newChildren;\r\n    return newElement;\r\n  }\r\n}\r\n\r\nexport default ElementsFactory;","import BaseModule from \"./BaseModule\";\r\nimport Resource from \"../Resource\";\r\nimport { getEditor, getTemplateId} from \"../../helpers\";\r\nimport CONSTANTS from \"../../consts\";\r\nimport RootElement from \"../elements/RootElement\";\r\nimport store from \"../../store/store\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\nimport {setTitle} from \"../../../../../front-app/src/js/helpers\";\r\nimport {setTemplateData} from \"../../store/template-data/actions\";\r\n\r\nclass SaveImportModule extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n\r\n    this.resource = new Resource({\r\n      route: '/admin/ajax/templates',\r\n    });\r\n  }\r\n\r\n  load(){\r\n    this.template_id = getTemplateId();\r\n    // console.log(this.template_id);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    if(this.template_id){\r\n      let res = this.resource.get(this.template_id).then(templateData => {\r\n        setTitle(templateData.title);\r\n        let data = JSON.parse(templateData.data);\r\n        store.dispatch(setTemplateData(templateData));\r\n        let parsedData = this.modules.elementsFactory.parseData(data);\r\n        let templateDataStorage = getEditor().modules.templateDataStorage;\r\n        templateDataStorage.replaceAll(parsedData);\r\n        templateDataStorage.setTitle(templateData.title);\r\n        templateDataStorage.setName(templateData.name);\r\n        getEditor().endLoading();\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      }).catch(err=>{\r\n        console.error(err);\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      });\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  saveTemplate(){\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    let templateData = getEditor().modules.templateDataStorage.getTemplateDataForSave();\r\n    this.resource.put(this.template_id, templateData).then(res=>{\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    }).catch(err=>{\r\n      console.error(err);\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default SaveImportModule;","class SettingsChangeModule {\r\n\r\n}\r\nexport default SettingsChangeModule;","class TemplateSettingsChangeModule {\r\n\r\n}\r\nexport default TemplateSettingsChangeModule;","import RootElement from \"../elements/RootElement\";\r\nimport { getEditor, getTemplateId} from \"../../helpers\";\r\nimport CONSTANTS from \"../../consts\";\r\nimport BaseModule from \"./BaseModule\";\r\nimport store from '../../store/store';\r\nimport {setCurrentElement, SET_CURRENT_ELEMENT} from '../../store/current-element/actions'\r\nimport BaseElement from \"../elements/BaseElement\";\r\nimport Section from \"../elements/Section\";\r\nimport Column from \"../elements/Column\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\n\r\nclass TemplateDataStorage extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n    this.elementsIds = [];\r\n  }\r\n\r\n  replaceAll(element) {\r\n    if(! element instanceof RootElement ){\r\n      throw 'Expect Root Element as root element;)';\r\n    }\r\n    this.rootElement = element;\r\n    this.elementsIds = element.getIds();\r\n    this.setCurrentRootElement();\r\n  }\r\n\r\n  getTemplateData() {\r\n    return this.rootElement.toObject();\r\n  }\r\n  getTemplateDataForSave(){\r\n    let data = {};\r\n\r\n    data.data = this.getTemplateData();\r\n    data.title = this.title || 'testtitle';\r\n    data.name = this.name || 'testname';\r\n    return data;\r\n  }\r\n\r\n  setTitle(title){\r\n    this.title = title;\r\n  }\r\n\r\n\r\n  setName(name){\r\n    this.name = name;\r\n  }\r\n\r\n  setCurrentRootElement(){\r\n    this.currentElement = this.rootElement;\r\n    store.dispatch(setCurrentElement(this.currentElement));\r\n    return this.currentElement;\r\n  }\r\n\r\n  setCurrentElement(element){\r\n    if(! element instanceof BaseElement){\r\n      throw 'Only Base Element Can Be Set as Default'\r\n    }\r\n    this.currentElement = element;\r\n    store.dispatch(setCurrentElement(element));\r\n  }\r\n\r\n  getCurrentElement(){\r\n    if(!this.currentElement){\r\n      return this.setCurrentRootElement();\r\n    }\r\n    return this.currentElement;\r\n  }\r\n\r\n  getRootElement(){\r\n    return this.rootElement\r\n  }\r\n\r\n  addWidgetInSection(elementName){\r\n    let newSection = new Section();\r\n    this.elementsIds.push(newSection.getId());\r\n\r\n    let newColumn = new Column();\r\n    this.elementsIds.push(newColumn.getId());\r\n\r\n    let newWidget = new (window.elementsManager.getElementClass(elementName));\r\n    this.elementsIds.push(newWidget.getId());\r\n\r\n    newColumn.appendWidget(newWidget);\r\n    newSection.appendColumn(newColumn);\r\n    this.rootElement.appendNewSection(newSection);\r\n    this.setCurrentElement(newWidget);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    getEditor().showSettingsPanel();\r\n  }\r\n\r\n}\r\n\r\nexport default TemplateDataStorage;","import ElementsFactory from './modules/ElementsFactory';\r\nimport SaveImportModule from \"./modules/SaveImportModule\";\r\nimport SettingsChangeModule from \"./modules/SettingsChangeModule\";\r\nimport TemplateSettingsChangeModule from \"./modules/TemplateSettingsChangeModule\";\r\nimport TemplateDataStorage from \"./modules/TemplateDataStorage\";\r\n\r\nclass Modules {\r\n  /**\r\n   * @param {Editor} editor\r\n   * */\r\n  constructor(editor){\r\n    this.elementsFactory = new ElementsFactory(this);\r\n    this.saveImportModule = new SaveImportModule(this);\r\n    this.settingsChangeModule = new SettingsChangeModule(this);\r\n    this.templateSettingsChangeModule = new  TemplateSettingsChangeModule(this);\r\n    this.templateDataStorage = new TemplateDataStorage(this);\r\n  }\r\n  loaded(){\r\n    this.saveImportModule.load();\r\n  }\r\n}\r\nexport default Modules;","import React, {Component} from \"react\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\nimport store from '../store/store'\r\nimport {startDrag} from \"../store/element-drag/actions\";\r\n\r\nexport default class WidgetIcon  extends  Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      element: this.props.element,\r\n    };\r\n    this.onDragStart = this.onDragStart.bind(this);\r\n  }\r\n  onDragStart(e){\r\n    store.dispatch(startDrag(null));\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData('text/plain', this.state.element.getName());\r\n  }\r\n  render() {\r\n    if (!this.state.element instanceof BaseElement) {\r\n      throw 'Widget Component must has Element in props';\r\n    }\r\n    return <div className='widget-icon' draggable=\"true\" onDragStart={this.onDragStart}>\r\n      {\r\n        React.createElement(this.state.element.getIconComponent(), {height: 35})\r\n      }\r\n      <div className=\"widget-icon__title\">\r\n        {this.state.element.getTitle()}\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport WidgetIcon from \"./WidgetIcon\";\r\nimport Scrollbars from \"react-custom-scrollbars\";\r\n\r\n\r\nclass WidgetsPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { widgets: window.elementsManager.getWidgetsList() };\r\n  }\r\n  render() {\r\n    return <div className=\"widget-panel-wrapper\">\r\n      <Scrollbars\r\n        autoHide\r\n        autoHideTimeout={500}\r\n        autoHideDuration={200}\r\n      >\r\n        <div className=\"widget-panel\">\r\n          {\r\n            this.state.widgets.map(widget => {\r\n              return <WidgetIcon element={widget} key={widget.getName()} />;\r\n            })\r\n          }\r\n        </div>\r\n      </Scrollbars>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default WidgetsPanel","import React, { Component } from \"react\";\r\nimport ChevronIcon from '../../svgs/chevron.svg'\r\nimport { connect } from \"react-redux\";\r\nimport { getCurrentElement, getCurrentTab, getElementState } from \"../store/store\";\r\nimport { setActiveSection } from \"../store/setting-section/actions\";\r\n\r\nclass SettingSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n    };\r\n    this.toggle = this.toggle.bind(this);\r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    /**\r\n     * Если еще ни разу не открывали текущую вкладку у элемента,\r\n     * то в setActiveSection передадим 0\r\n     */\r\n    let currentElementName = getCurrentElement().getName();\r\n    let currentTab = getCurrentTab();\r\n    if (! (this.props.settingSection[currentElementName]\r\n        && (this.props.settingSection[currentElementName][currentTab] !== undefined))) {\r\n      this.props.dispatch(setActiveSection(getCurrentElement().getName(), getCurrentTab(), 0));\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.props.dispatch(setActiveSection(getCurrentElement().getName(), getCurrentTab(), this.props.sectionID));\r\n  };\r\n\r\n  render() {\r\n    let currentElementName = getCurrentElement().getName();\r\n    let currentTab = getCurrentTab();\r\n    let activeSectionID = 0;\r\n    /**\r\n     * Сравниваем с undefined\r\n     */\r\n    if (this.props.settingSection[currentElementName]\r\n        && (this.props.settingSection[currentElementName][currentTab] !== undefined)) {\r\n      activeSectionID = this.props.settingSection[currentElementName][currentTab];\r\n    }\r\n    let controllers = this.props.controls || [];\r\n    return (\r\n      <div  className={\"settings-section \" + (this.props.sectionID === activeSectionID ? 'open' : '')}>\r\n        <div className=\"settings-section__title d-flex\" onClick={this.toggle}>\r\n          <div className=\"settings-section__icon d-flex \">\r\n            <ChevronIcon />\r\n          </div>\r\n          <div className=\"settings-section__label\">\r\n            {this.props.label}\r\n          </div>\r\n        </div>\r\n        <div className=\"controllers-wrapper\">\r\n          {\r\n            controllers.map((controller) => {\r\n              let ControllerComponent = window.controllersManager.getController(controller.type);\r\n              return React.createElement(ControllerComponent, { ...controller, key: controller.controlId });\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    settingSection: state.settingSectionMenu\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, null)(SettingSection);\r\n","import React, {Component} from \"react\";\r\nimport './DynamicContent.scss';\r\nimport './../../../sass/altrp-menu.scss';\r\nimport {connect} from \"react-redux\";\r\nimport {closeDynamicContent} from \"../../store/dynamic-content/actions\";\r\nimport store from \"../../store/store\";\r\nimport {getCurrentElement} from \"../../store/store\";\r\nimport Resource from \"../../classes/Resource\";\r\n\r\n/**\r\n * Класс реализующий список динамических данных для контроллера\r\n */\r\nclass DynamicContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      models: [\r\n        //   {\r\n        // modelName: 'page',\r\n        // title: 'Page',\r\n        // fields: [\r\n        //       {\r\n        //         fieldName: 'id',\r\n        //         title: 'ID',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'title',\r\n        //         title: 'Title',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'authorName',\r\n        //         title: 'Author Name',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'authorId',\r\n        //         title: 'Author ID',\r\n        //       },\r\n        //     ]\r\n        //   },\r\n        ],\r\n      };\r\n    this.select = this.select.bind(this);\r\n    this.resource = new Resource({route: '/admin/ajax/models_with_fields_options'});\r\n  }\r\n\r\n  async componentDidMount(){\r\n    let models = await this.resource.getAll();\r\n    this.setState(state=>({\r\n        ...state,\r\n      models,\r\n    }))\r\n  }\r\n  /**\r\n   * Обработка клика по элемету\r\n   */\r\n  select(e){\r\n    e.stopPropagation();\r\n    let value = {};\r\n\r\n    value.modelName = e.target.dataset.modelname;\r\n    value.modelTitle = e.target.dataset.modeltitle;\r\n    value.fieldName = e.target.dataset.fieldname;\r\n    value.fieldTitle = e.target.dataset.fieldtitle;\r\n    value.settingName = this.props.params.settingName;\r\n    value.dynamic = true;\r\n    this.props.params.onSelect(value);\r\n    store.dispatch(closeDynamicContent());\r\n    getCurrentElement().setModelsSettings(value);\r\n  }\r\n\r\n  getPositionProps(){\r\n    let element = this.props.element;\r\n    if(! element){\r\n      return{top:0, left:7};\r\n    }\r\n    return{\r\n      top: element.offsetTop + element.offsetHeight + 2,\r\n      left:7\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let classes = ['altrp-dynamic-content'];\r\n    if(this.props.show){\r\n      classes.push('altrp-dynamic-content_show')\r\n    }\r\n    return <div className={classes.join(' ')}  style={this.getPositionProps()}>\r\n      <div className=\"altrp-menu\">\r\n        {\r\n          this.state.models.map(model=>{\r\n            return<div className=\"altrp-menu-group\" key={model.modelName}>\r\n              <div className=\"altrp-menu__title\" key={model.modelName}>{model.title}</div>\r\n              { model.fields.map(field=>(<div className=\"altrp-menu__item\"\r\n                                       data-fieldname={field.fieldName}\r\n                                       data-fieldtitle={field.title}\r\n                                       data-modelname={model.modelName}\r\n                                       data-modeltitle={model.title}\r\n                                       onClick={this.select}\r\n                                       key={`${model.modelName}${field.fieldName}`}>{field.title}</div>))}\r\n            </div>\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.dynamicContentState,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(DynamicContent);\r\n","import React, { Component } from \"react\";\r\nimport SettingSection from \"./SettingSection\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\n\r\nclass PanelTabContent extends Component {\r\n\r\n  render() {\r\n    let sections = this.props.sections || [];\r\n    return <div className=\"settings-controllers\">\r\n      <Scrollbars\r\n        autoHide\r\n        autoHideTimeout={500}\r\n        autoHideDuration={200}\r\n      >\r\n        <div id=\"settingsControllers\">\r\n          {\r\n            sections.map((section, idx) => {\r\n              return React.createElement(SettingSection, {\r\n                ...section,\r\n                key: section.sectionId,\r\n                sectionID: idx,\r\n              });\r\n            }\r\n            )\r\n          }\r\n          <DynamicContent />\r\n        </div>\r\n      </Scrollbars>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default PanelTabContent\r\n","import React, { Component } from \"react\";\r\nimport '../../sass/state-section.scss'\r\nimport { connect } from \"react-redux\";\r\nimport { setCurrentState } from \"../store/state-section/actions\";\r\nimport { getElementState, getCurrentTab } from \"../store/store\";\r\n\r\nclass StateSection extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      buttons: [\r\n        { title: \"N\", value: \"\" },\r\n        { title: \"H\", value: \":hover\" },\r\n        { title: \"A\", value: \".active\" },\r\n        { title: \"F\", value: \":focus\" },\r\n        { title: \"D\", value: \".state-disabled\" },\r\n      ]\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.dispatch(setCurrentState(\"N\", \"\"));\r\n  }\r\n\r\n  setCurrentState(button) {\r\n    this.props.dispatch(setCurrentState(button.title, button.value));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"state-section\">\r\n        {\r\n          this.state.buttons.map((button, index) => {\r\n            return <button\r\n              key={index}\r\n              className={\"state-section__button \" + (this.props.currentState.title === button.title ? \"state-section__button_active\" : \"\")}\r\n              onClick={() => this.setCurrentState(button)}\r\n            >{button.title}</button>\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentState: state.currentState\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(StateSection);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport ContentIcon from '../../svgs/content.svg'\r\nimport StyleIcon from '../../svgs/style.svg'\r\nimport AdvancedIcon from '../../svgs/advanced.svg'\r\nimport { TAB_ADVANCED, TAB_CONTENT, TAB_STYLE } from \"../classes/modules/ControllersManager\";\r\nimport PanelTabContent from \"./PanelTabContent\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\nimport Controller from \"../classes/Controller\";\r\nimport { setCurrentTab } from \"../store/active-settings-tab/actions\";\r\nimport { getCurrentTab, getElementState } from \"../store/store\";\r\nimport StateSection from \"./StateSection\";\r\nimport { setCurrentState } from \"../store/state-section/actions\";\r\n\r\nclass SettingsPanel extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab: 'content',\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Устанавливает текущий таб\r\n   * @param activeTab\r\n   */\r\n  setActiveTab(activeTab) {\r\n    this.setState({\r\n      ...this.state, activeTab\r\n    })\r\n    this.props.setCurrentTab(activeTab);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setCurrentTab(this.state.activeTab)\r\n  };\r\n\r\n  render() {\r\n\r\n    let controllersManager = window.controllersManager;\r\n    let sections = [];\r\n    if (this.props.currentElement.getName) {\r\n      let allControllersPairs = _.toPairs(controllersManager.getControls(this.props.currentElement.getName()));\r\n      allControllersPairs.forEach(pair => {\r\n        pair[1].forEach(section => {\r\n          section.controls = section.controls.map(control => {\r\n            return {\r\n              ...control,\r\n              controller: new Controller(control)\r\n            }\r\n          });\r\n        });\r\n        if (pair[0] === this.state.activeTab) {\r\n          sections = [...pair[1]];\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    let contentTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_CONTENT ? 'active' : '');\r\n    let styleTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_STYLE ? 'active' : '');\r\n    let advancedTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_ADVANCED ? 'active' : '');\r\n    return <div className=\"panel settings-panel d-flex\">\r\n      <div className=\"panel-tabs d-flex\">\r\n        <button className={contentTabClasses} onClick={() => this.setActiveTab(TAB_CONTENT)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <ContentIcon />\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Content\r\n          </span>\r\n        </button>\r\n        <button className={styleTabClasses} onClick={() => this.setActiveTab(TAB_STYLE)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <StyleIcon />\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Style\r\n          </span>\r\n        </button>\r\n        <button className={advancedTabClasses} onClick={() => this.setActiveTab(TAB_ADVANCED)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <AdvancedIcon />\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Advanced\r\n          </span>\r\n        </button>\r\n      </div>\r\n      {\r\n        (this.state.activeTab === 'style' && <StateSection />)\r\n      }\r\n      <PanelTabContent sections={sections} />\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentElement: state.currentElement.currentElement,\r\n    currentState: state.currentState,\r\n  };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { setCurrentTab, setCurrentState })(SettingsPanel);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass EditorWindow extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return <div style={{ width: this.props.currentScreen.width, height: this.props.currentScreen.height }} className={\"editor-window\"} id=\"editorWindow\">\r\n\r\n      <iframe src=\"/admin/editor-content\" width=\"100%\" />\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentScreen: state.currentScreen\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(EditorWindow)","import React, {Component} from \"react\";\r\n\r\nclass HistoryPanel extends Component {\r\n\r\n  render() {\r\n    return <div className=\"history-panel\">\r\n      HistoryPanel\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default HistoryPanel","import Chevron from '../../svgs/chevron.svg';\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getEditor } from \"../helpers\";\r\nimport CONSTANTS from '../consts'\r\n\r\nclass UpdateButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isShowed: false,\r\n    }\r\n    this.saveTemplate = this.saveTemplate.bind(this);\r\n  }\r\n  saveTemplate(e) {\r\n    getEditor().modules.saveImportModule.saveTemplate();\r\n  }\r\n  showModal() {\r\n    this.props.toggleModalWindow();\r\n  }\r\n\r\n  render() {\r\n    let buttonClasses = 'btn font_montserrat font_500 btn_grey';\r\n    switch (this.props.templateStatus) {\r\n      case CONSTANTS.TEMPLATE_UPDATED: {\r\n        buttonClasses += ' btn_disabled ';\r\n      }\r\n        break;\r\n      case CONSTANTS.TEMPLATE_NEED_UPDATE: {\r\n        buttonClasses += ' btn_active ';\r\n      }\r\n        break;\r\n    }\r\n    return <div className=\"control-group d-flex\">\r\n      <button className={buttonClasses} onClick={this.saveTemplate}>\r\n        UPDATE\r\n      </button>\r\n      <button onClick={() => this.showModal()} className=\"btn btn_grey\">\r\n        <Chevron className=\"icon\" />\r\n      </button>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    templateStatus: state.templateStatus.status,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(UpdateButton)","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Times from \"../../../svgs/times.svg\";\r\nimport { assetsToggle } from \"../../store/assets-browser/actions\";\r\nimport { iconsManager } from \"../../helpers\";\r\nimport Resource from \"../Resource\";\r\nimport '../../../sass/assets-browser.scss';\r\n\r\n\r\nclass AssetsBrowser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      // activeTab: 'icons',\r\n      activeTab: \"media\",\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: \"icons\",\r\n          title: \"Icons Library\"\r\n        },\r\n        {\r\n          name: \"media\",\r\n          title: \"Media Library\"\r\n        }\r\n      ],\r\n      assets: this.getAssets(\"media\"),\r\n      // assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n      mediaAssets: []\r\n    };\r\n    this.mediaResource = new Resource({ route: \"/admin/ajax/media\" });\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      let res = await this.mediaResource.getAll();\r\n\r\n      this.setState(state => {\r\n        state = { ...state, mediaAssets: res };\r\n        if (state.activeTab === \"media\") {\r\n          state.assets = res;\r\n        }\r\n        return state;\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  }\r\n  getAssets(tab) {\r\n    if (!tab) {\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab) {\r\n      case \"icons\": {\r\n        return iconsManager().getIconsList();\r\n      }\r\n      case \"media\": {\r\n        return this.state ? this.state.mediaAssets : [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e) {\r\n    let selectedAsset = e.currentTarget.dataset.assetname;\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset };\r\n    });\r\n  }\r\n\r\n  tabClick(e) {\r\n    this.setActiveTab(e.target.dataset.tab);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.setState(state => {\r\n      return { ...state, activeTab: tab, assets: this.getAssets(tab) };\r\n    });\r\n  }\r\n\r\n  toggleBrowser() {\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  chooseAsset() {\r\n    let asset;\r\n    this.state.assets.forEach(item => {\r\n      if (item.name === this.state.selectedAsset) {\r\n        asset = item;\r\n      }\r\n    });\r\n    if (!asset) {\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`;\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render() {\r\n    let classes = \"assets-browser\";\r\n    if (this.props.active) {\r\n      classes += \" assets-browser_active\";\r\n    }\r\n    let buttonClasses = \"btn\";\r\n    if (!this.state.selectedAsset) {\r\n      buttonClasses += \" btn_disabled\";\r\n    } else {\r\n      buttonClasses += \" btn_success\";\r\n    }\r\n    return (\r\n      <div className={classes}>\r\n        <div className=\"assets-browser__bg\" onClick={this.toggleBrowser} />\r\n        <div className=\"assets-browser-content\">\r\n          <div className=\"assets-browser-top\">\r\n            <div className=\"caption\">Append Media</div>\r\n            <button className=\"btn btn_bare assets-browser__close\" onClick={this.toggleBrowser} >\r\n              <Times className=\"icon\"/>\r\n            </button>\r\n            <div className=\"assets-browser-nav\">\r\n              {this.state.tabs.map(tab => {\r\n                let tabClasses = \"assets-browser__tab\";\r\n                if (this.state.activeTab === tab.name) {\r\n                  tabClasses += \" assets-browser__tab_active\";\r\n                }\r\n                return (\r\n                  <button\r\n                    className={tabClasses}\r\n                    onClick={this.tabClick}\r\n                    key={tab.name}\r\n                    data-tab={tab.name}\r\n                  >\r\n                    {tab.title}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {this.state.assets.length ? (\r\n            <div className=\"assets-browser-choose-frame\">\r\n              {this.state.assets.map(asset => {\r\n                let AssetContent;\r\n                let classes = \"asset-choose\";\r\n                let assetProps = {\r\n                  className: \"asset-choose__content\"\r\n                };\r\n                if (this.state.activeTab === \"icons\") {\r\n                  AssetContent = asset.iconComponent;\r\n                  classes += \" asset-choose_icon\";\r\n                  // assetProps.viewBox = '0 0 20 20';\r\n                  // assetProps.viewport = '0 0 10 10';\r\n                  assetProps.width = \"20\";\r\n                  assetProps.height = \"20\";\r\n                }\r\n                if (this.state.activeTab === \"media\") {\r\n                  AssetContent = \"img\";\r\n                  assetProps.src = asset.url;\r\n                  classes += \" asset-choose_media\";\r\n                  asset.name = asset.filename;\r\n                  asset.assetType = \"media\";\r\n                }\r\n                if (this.state.selectedAsset === asset.name) {\r\n                  classes += \" asset-choose_selected\";\r\n                }\r\n                return (\r\n                  <div\r\n                    className={classes}\r\n                    data-assetname={asset.name}\r\n                    key={asset.name}\r\n                    onClick={this.selectAsset}\r\n                  >\r\n                    <AssetContent {...assetProps} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"assets-browser-bottom\">\r\n            <button className={buttonClasses} onClick={this.chooseAsset}>\r\n              Choose\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { setCurrentScreen } from \"../store/responsive-switcher/actions\"\r\nimport { iconsManager } from \"../helpers\"\r\nimport CONSTANTS from '../consts'\r\n\r\nclass ResponsiveDdFooter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      screens: CONSTANTS.SCREENS,\r\n      open: false,\r\n    }\r\n  };\r\n  toggleOpen() {\r\n    this.setState({\r\n      open: !this.state.open,\r\n    })\r\n  };\r\n  setCurrentScreen(screen) {\r\n    this.props.setCurrentScreen(screen);\r\n    this.setState({\r\n      open: !this.state.open,\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"responsive-footer-wrapper\">\r\n        <span className={\"responsive-footer-title \" + (this.state.open ? 'responsive-footer-icon__close' : '')} onClick={() => this.toggleOpen()}>{iconsManager().renderIcon(this.props.currentScreen.icon)}</span>\r\n        <div className={\"responsive-footer-submenu \" + (this.state.open ? \"responsive-footer-submenu-open\" : '')} >\r\n          {\r\n            this.state.screens.map(screen => {\r\n              return <button\r\n                className={\"responsive-footer-submenu__item \" + (this.props.currentScreen.id === screen.id ? \"responsive-footer-submenu__item__active\" : '')}\r\n                onClick={() => this.setCurrentScreen(screen)}\r\n                key={screen.id}>\r\n                {iconsManager().renderIcon(screen.icon)}\r\n              </button>\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentScreen: state.currentScreen,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { setCurrentScreen })(ResponsiveDdFooter);\r\n","import React, { Component } from 'react';\r\nimport '../../sass/dialog-content.scss'\r\nimport { iconsManager } from '../../../../front-app/src/js/helpers';\r\n\r\nclass DialogTab extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={\"modal-tab-wrapper \" + (this.props.active ? 'modal-tab-wrapper-active' : '')}>\r\n        <div className=\"modal-tab__image\">\r\n          {\r\n            iconsManager().renderIcon(this.props.tab.icon)\r\n          }\r\n        </div>\r\n        <div className=\"modal-tab__content\">\r\n          <div className=\"modal-tab__title\">{this.props.tab.title}</div>\r\n          <div className=\"modal-tab__description\">{this.props.tab.desc}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DialogTab;","import React, { Component } from 'react';\r\nimport '../../sass/dialog-content.scss';\r\nimport { iconsManager } from '../../../../front-app/src/js/helpers';\r\nimport Select from 'react-select'\r\nimport Resource from '../classes/Resource';\r\nimport {getEditor, getTemplateId} from '../helpers';\r\nimport AltrpSelect from '../../../../admin/src/components/altrp-select/AltrpSelect';\r\n\r\nexport default class DialogConditionsTab extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n      this.state = {\r\n        value: [],\r\n        currentLogic: 'include',\r\n        searchValue: '',\r\n        pageOptions: [],\r\n      };\r\n    this.resource = new Resource({ route: `/admin/ajax/templates/${getTemplateId()}/conditions` });\r\n  }\r\n\r\n\r\n  async componentDidMount() {\r\n    let conditions = await this.resource.getAll();\r\n    let pageOptions = await (new Resource({route: \"/admin/ajax/pages_options\" })).getAll();\r\n    this.setState({\r\n      value: conditions.data || [],\r\n      pageOptions\r\n      // value: []\r\n    })\r\n  };\r\n\r\n  /**\r\n   * запрос на обнровление условий\r\n   * @param {boolean} close\r\n   * @return {Promise<void>}\r\n   */\r\n  async updateConditions(close = false) {\r\n    let res = await (new Resource({ route: `/admin/ajax/templates/${getTemplateId()}/conditions` })).put('', { data: this.state.value });\r\n    if(close){\r\n      getEditor().toggleModalWindow()\r\n    }\r\n  }\r\n\r\n  addCondition() {\r\n    let randomNumber = Math.floor(1 + Math.random() * (1000 - 1));\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.push({\r\n      object_type: 'all_site',\r\n      object_ids: [],\r\n      id: randomNumber,\r\n      condition_type: 'include',\r\n    });\r\n    this.setState(state => ({\r\n      ...state,\r\n      value\r\n    }));\r\n    this.forceUpdate();\r\n  };\r\n\r\n\r\n  removeCondition(id) {\r\n    let filteredData = this.state.value.filter(data => data.id !== id);\r\n    this.setState({\r\n      value: filteredData,\r\n    })\r\n  }\r\n\r\n\r\n  handleChange(e, test) {\r\n    if (e.value === 'include') {\r\n      this.setState({\r\n        currentLogic: e.value,\r\n      });\r\n      return;\r\n    } else if (e.value === 'exclude') {\r\n      this.setState({\r\n        currentLogic: e.value,\r\n      });\r\n      return;\r\n    }\r\n    if (this.state.currentLogic === 'include') {\r\n      let data = [...this.state.value];\r\n      let index = data.findIndex(obj => obj.id === test.id);\r\n      data[index].include[0] = { ...data[index].include[0], [e.name]: e.value };\r\n      data[index].exclude = [];\r\n      this.setState({\r\n        value: data,\r\n      })\r\n    } else if (this.state.currentLogic === 'exclude') {\r\n      let data = [...this.state.value];\r\n      let index = data.findIndex(obj => obj.id === test.id);\r\n      data[index].exclude[0] = { ...data[index].exclude[0], [e.name]: e.value };\r\n      data[index].include = [];\r\n      this.setState({\r\n        value: data,\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * именение object_type для условий\r\n   * @param {object} e\r\n   * @param {integer} conditionId\r\n   */\r\n  handleObjectTypeChange = (e, conditionId) => {\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v=>{\r\n      if(v.id === conditionId){\r\n        v.object_type = e.value;\r\n        v.object_ids = [];\r\n      }\r\n    });\r\n    this.setState(state =>({\r\n      ...state, value,\r\n    }));\r\n  };\r\n  /**\r\n   * изменение спика ид объектов\r\n   * @param {[]} ids\r\n   * @param {integer} conditionId\r\n   */\r\n  handleIdsSelect = (ids, conditionId)=>{\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v=>{\r\n      if(v.id === conditionId){\r\n        v.object_ids = ids.map(id=>id.value);\r\n      }\r\n    });\r\n    this.setState(state =>({\r\n      ...state, value,\r\n    }));\r\n  };\r\n  /**\r\n   * изменение типа  условия\r\n   * @param {[]} e\r\n   * @param {integer} conditionId\r\n   */\r\n  handleChangeConditionType = (e, conditionId)=>{\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v=>{\r\n      if(v.id === conditionId){\r\n        v.condition_type = e.value;\r\n      }\r\n    });\r\n    this.setState(state =>({\r\n      ...state, value,\r\n    }));\r\n  };\r\n  handleSelect(e) {\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const logic_options = [\r\n      { name: 'logic_type', value: 'include', label: 'Include' },\r\n      { name: 'logic_type', value: 'exclude', label: 'Exclude' },\r\n    ];\r\n    const main_options = [\r\n      { name: 'type', value: 'all_site', label: 'All Site' },\r\n      { name: 'type', value: 'page', label: 'Page' },\r\n      // { name: 'type', value: 'model', label: 'Model' },\r\n      // { name: 'type', value: 'not_authorized_page', label: 'Not Authorized' },\r\n      // { name: 'type', value: 'not_found_page', label: 'Not found: 404' },\r\n    ];\r\n    const model_options = [\r\n      { name: 'model_name', value: 'model1', label: 'model1' },\r\n      { name: 'model_name', value: 'model2', label: 'model2' },\r\n      { name: 'model_name', value: 'model3', label: 'model3' },\r\n      { name: 'model_name', value: 'model4', label: 'model4' },\r\n    ];\r\n    return (\r\n      <div className=\"modal-condition-tab\">\r\n        <div className=\"modal-condition-image\">\r\n          {\r\n            iconsManager().renderIcon('conditions_tab')\r\n          }\r\n        </div>\r\n        <div className=\"modal-condition-title\">Where Do You Want to Display Your Template?</div>\r\n        <div className=\"modal-condition-text\">\r\n          Set the conditions that determine where your Template is used throughout your site.<br />\r\n          For example, choose 'Entire Site' to display the template across your site.\r\n        </div>\r\n        <div className=\"modal-repeater-fields-wrapper\">\r\n          <div className=\"modal-repeater-fields\">\r\n            {\r\n              this.state.value.map(test => {\r\n                console.log(test);\r\n                return (\r\n                  <div className=\"modal-repeater-field\" key={test.id}>\r\n                    <AltrpSelect\r\n                      onChange={(e) => this.handleChangeConditionType(e, test.id)}\r\n                      className=\"modal-repeater-field-c1\"\r\n                      options={logic_options}\r\n                      value={_.find(logic_options, o=>o.value === test.condition_type) || logic_options[0]}\r\n                    />\r\n                    <AltrpSelect\r\n                      onChange={(value) => this.handleObjectTypeChange(value, test.id)}\r\n                      className=\"modal-repeater-field-c2\"\r\n                      options={main_options}\r\n                      value={_.find(main_options, o=>o.value === test.object_type) || main_options[0]}\r\n                      // defaultValue={main_options[0]}\r\n                    />\r\n                    {/*{*/}\r\n                      {/*(test.include[0]) &&*/}\r\n                      {/*(test.include[0].type === 'model'*/}\r\n                        {/*&&*/}\r\n                        {/*<Select*/}\r\n                          {/*onChange={(e) => this.handleChange(e, test)}*/}\r\n                          {/*className=\"modal-repeater-field-c3\"*/}\r\n                          {/*defaultValue={model_options[0]}*/}\r\n                          {/*options={model_options}*/}\r\n                        {/*/>)*/}\r\n                    {/*}*/}\r\n                    {/*{*/}\r\n                      {/*(test.exclude[0]) &&*/}\r\n                      {/*(test.exclude[0].type === 'model' &&*/}\r\n                        {/*<Select*/}\r\n                          {/*onChange={(e) => this.handleChange(e, test)}*/}\r\n                          {/*className=\"modal-repeater-field-c3\"*/}\r\n                          {/*defaultValue={model_options[0]}*/}\r\n                          {/*options={model_options}*/}\r\n                        {/*/>)*/}\r\n                    {/*}*/}\r\n                    {\r\n                      test.object_type === 'page' &&\r\n                        <AltrpSelect\r\n                          // value={(test.object_ids || []).map(o=>this.state.pageOptions.find())}\r\n                          value={_.filter(this.state.pageOptions, p => test.object_ids && test.object_ids.indexOf(p.value) >= 0)}\r\n                          onChange={(e) => this.handleIdsSelect(e, test.id)}\r\n                          isMulti={true}\r\n                          closeMenuOnSelect={false}\r\n                          placeholder=\"Choose Pages\"\r\n                          options={this.state.pageOptions}\r\n                          className=\"modal-repeater-field-c3\"\r\n                        />\r\n                    }\r\n                    <button onClick={() => this.removeCondition(test.id)} className=\"modal-repeater-tool-remove\">X</button>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-condition-button-wrapper\">\r\n          <button onClick={() => this.addCondition()} className=\"modal-condition-button\">Add condition</button>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={() => this.updateConditions(true)} className=\"modal-footer__button modal-save\">Save & close</button>\r\n          <button onClick={() => this.updateConditions()} className=\"modal-footer__button modal-next\">Next</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport '../../sass/dialog-content.scss';\r\nimport { iconsManager } from '../../../../front-app/src/js/helpers';\r\nimport { getTemplateId } from '../helpers';\r\nimport Resource from '../classes/Resource';\r\n\r\nexport default class DialogTriggersTab extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: {},\r\n      onLoad: false,\r\n      onScroll: false,\r\n      scrollElement: false,\r\n      onClick: false,\r\n      afterInactivity: false,\r\n      on_exit: false,\r\n    }\r\n    this.resource = new Resource({ route: `/admin/ajax/templates/${getTemplateId()}/settings` })\r\n  }\r\n\r\n  async updateTriggers() {\r\n    let res = await this.resource.put('triggers', {data: this.state.value});\r\n    console.log(res);\r\n  }\r\n\r\n\r\n\r\n  /**  Отправляем get request, результат присваиваем  state.value */\r\n  async componentDidMount() {\r\n    let triggers = await this.resource.get('triggers')\r\n    this.setState({\r\n      value: triggers.data,\r\n    })\r\n  }\r\n\r\n  handleChangePage(e) {\r\n    if (e.target.name === 'direction') {\r\n      this.setState({\r\n        value: {\r\n          ...this.state.value,\r\n          on_scroll: {\r\n            ...this.state.value.on_scroll,\r\n            direction: e.target.value, \r\n          }\r\n        }\r\n      })\r\n      return;\r\n    } else if (e.target.name === 'size') {\r\n      this.setState({\r\n        value: {\r\n          ...this.state.value,\r\n          on_scroll: {\r\n            ...this.state.value.on_scroll,\r\n            size: e.target.value,\r\n          }\r\n        }\r\n      })\r\n      return;\r\n    }\r\n    this.setState({\r\n      value: {\r\n        ...this.state.value,\r\n        [e.target.name]: e.target.value\r\n      }\r\n    })\r\n  }\r\n\r\n  handleCheck(e) {\r\n    if (e.target.name === 'on_exit') {\r\n      this.setState({\r\n        [e.target.name]: e.target.checked,\r\n        value:{\r\n          ...this.state.value,\r\n          [e.target.name]: e.target.checked,\r\n        }\r\n      })\r\n    }\r\n    this.setState({\r\n      [e.target.name]: e.target.checked\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"triggers-tab\">\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('page_load')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Page Load</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.onLoad &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-pageLoad\">Within(sec)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-pageLoad\"\r\n                    onChange={(e) => this.handleChangePage(e)} type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.1\"\r\n                    value={this.state.on_page_load}\r\n                    name=\"on_page_load\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                name=\"onLoad\"\r\n                checked={this.state[name]}\r\n                id=\"toggleSwitch\"\r\n                onChange={(e) => this.handleCheck(e)}\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitch\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('scrolling')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Scroll</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.onScroll &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputSelect\">Direction</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <select\r\n                    name=\"direction\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                    id=\"triggers-control-field-inputSelect\">\r\n                    <option value=\"down\">Down</option>\r\n                    <option value=\"up\">Up</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.onScroll &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputNumber2\">Within(%)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    id=\"triggers-control-field-inputNumber2\"\r\n                    name=\"size\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                name=\"onScroll\"\r\n                checked={this.state[name]}\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitch2\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitch2\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('scrolling_to')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Scroll To Element</div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.scrollElement &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputText\">Selector</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-inputText\"\r\n                    id=\"triggers-control-field-Text\"\r\n                    type=\"text\"\r\n                    name=\"to_element\"\r\n                    placeholder=\".my class\"\r\n                    defaultValue=''\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"scrollElement\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchText\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchText\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('click')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Click</div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.onClick &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-Clicks\">Clicks</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-Clicks\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    name=\"on_click\"\r\n                    value={this.state.on_click}\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"onClick\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchClicks\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchClicks\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            <div className=\"triggers-icon\">\r\n              {\r\n                iconsManager().renderIcon('inactivity')\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"triggers-title\">After Inactivity</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.afterInactivity &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inactivity\">Within(sec)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-inactivity\"\r\n                    type=\"number\"\r\n                    value={this.state.inactivity}\r\n                    min=\"1\"\r\n                    step=\"0.1\"\r\n                    name=\"inactivity\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"afterInactivity\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchInactivity\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchInactivity\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            <div className=\"triggers-icon\">\r\n              {\r\n                iconsManager().renderIcon('exit_intent')\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"triggers-title\">On Page Exit Intent</div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"on_exit\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchIntent\"\r\n                onChange={(e) => this.setState({ on_exit: !this.state.on_exit })}\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchIntent\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={() => this.updateTriggers()} className=\"modal-footer__button modal-save\">Save & close</button>\r\n          <button onClick={() => this.updateTriggers()} className=\"modal-footer__button modal-next\">Next</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport Logo from \"../../svgs/logo.svg\";\r\nimport '../../sass/dialog-content.scss'\r\nimport DialogTab from './DialogTab';\r\nimport DialogConditionsTab from './DialogConditionsTab';\r\nimport DialogTriggersTab from './DialogTriggersTab';\r\nimport {connect} from 'react-redux';\r\n\r\nclass DialogWindow extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let tabs = [\r\n      { icon: 'conditions_tab', title: 'Conditions', desc: 'Apply current template to these pages' },\r\n    ];\r\n    if(['popup'].indexOf(this.props.templateData.template_type) >= 0){\r\n      tabs = [\r\n        { icon: 'conditions_tab', title: 'Conditions', desc: 'Apply current template to these pages' },\r\n        { icon: 'triggers_tab', title: 'Triggers', desc: 'What action the user needs to do for the popup to open.' },\r\n        { icon: 'triggers_tab', title: 'Advanced Rules', desc: 'Requirements that have to be met for the popup to open.' },\r\n      ];\r\n    }\r\n    this.state = {\r\n      activeTab: 'Conditions',\r\n      tabs,\r\n      \r\n    }\r\n  }\r\n\r\n  handleOpen(title) {\r\n    this.setState({\r\n      activeTab: title,\r\n    })\r\n  };\r\n  \r\n  handleClose() {\r\n    this.props.toggleModalWindow()\r\n  };\r\n\r\n  renderSwitch(activeTab) {\r\n    switch (this.state.activeTab) {\r\n      case 'Conditions':\r\n        return <DialogConditionsTab />;\r\n      case 'Triggers':\r\n        return <DialogTriggersTab />;\r\n      case 'Advanced Rules':\r\n        return <div>ADVANCED</div>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  // (this.state.activeTab === 'Conditions' && <DialogConditionsTab /> ||\r\n  //   this.state.activeTab === 'Triggers' && <div>Triggers</div> ||\r\n  //   this.state.activeTab === 'Advanced Rules' && <div>Advanced Rules</div>\r\n  // )\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"modal-overlay\">\r\n        <div className=\"modal-window\">\r\n          <div className=\"modal-header\">\r\n            <Logo className=\"modal-header__logo\" />\r\n            <button onClick={() => this.handleClose()}>X</button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"modal-body__tabs\">\r\n              {\r\n                this.state.tabs.map((tab, index) => {\r\n                  return <div key={tab.title} onClick={() => this.handleOpen(tab.title)}>\r\n                    <DialogTab active={this.state.activeTab === tab.title ? true : false} tab={tab} />\r\n                  </div>\r\n                })\r\n              }\r\n            </div>\r\n            <div className=\"modal-body__content\">\r\n              {this.renderSwitch(this.state.activeTab)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {templateData: state.templateData};\r\n}\r\nexport default connect(mapStateToProps)(DialogWindow);","import \"./sass/editor-style.scss\";\r\nimport React, { Component } from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport Modules from \"./js/classes/Modules\";\r\nimport WidgetsPanel from \"./js/components/WidgetsPanel\";\r\nimport SettingsPanel from \"./js/components/SettingsPanel\";\r\nimport EditorWindow from \"./js/components/EditorWindow\";\r\nimport HistoryPanel from \"./js/components/HistoryPanel\";\r\nimport UpdateButton from \"./js/components/UpdateButton\";\r\nimport CONSTANTS from \"./js/consts\";\r\nimport { stopDrag } from \"./js/store/element-drag/actions\";\r\nimport AssetsBrowser from \"./js/classes/modules/AssetsBrowser\";\r\n\r\nimport store, { getCurrentElement, getCurrentScreen } from \"../src/js/store/store\";\r\n\r\n\r\nimport DesktopIcon from \"./svgs/desktop.svg\";\r\nimport Logo from \"./svgs/logo.svg\";\r\nimport Navigation from \"./svgs/navigation.svg\";\r\nimport History from \"./svgs/history.svg\";\r\nimport Preview from \"./svgs/preview.svg\";\r\nimport Settings from \"./svgs/settings.svg\";\r\nimport Dots from \"./svgs/dots.svg\";\r\nimport Hamburger from \"./svgs/hamburger.svg\";\r\nimport { contextMenu } from \"react-contexify\";\r\nimport DynamicContent from \"./js/components/DynamicContent/DynamicContent\";\r\nimport { closeDynamicContent } from \"./js/store/dynamic-content/actions\";\r\nimport { iconsManager } from \"../../admin/src/js/helpers\";\r\nimport ResponsiveDdMenu from \"./js/components/ResponsiveDdMenu\";\r\nimport ResponsiveDdFooter from \"./js/components/ResponsiveDdFooter\";\r\nimport DialogWindow from \"./js/components/DialogWindow\";\r\nimport {renderAsset} from \"../../front-app/src/js/helpers\";\r\nimport {changeCurrentUser} from \"../../front-app/src/js/store/current-user/actions\";\r\nimport Resource from \"./js/classes/Resource\";\r\nimport appStore from \"../../front-app/src/js/store/store\";\r\n/**\r\n * Главный класс редактора.<br/>\r\n * Реакт-Компонент.<br/>\r\n * Синглтон, который хранится в глобальной переменной altrpEditor.\r\n *\r\n * */\r\nclass Editor extends Component {\r\n  /**\r\n   * @constructor\r\n   * */\r\n  constructor(props) {\r\n    super(props);\r\n    window.altrpEditor = this;\r\n    this.state = {\r\n      // activePanel: 'widgets',\r\n      activePanel: \"settings\",\r\n      templateStatus: CONSTANTS.TEMPLATE_UPDATED,\r\n      showDialogWindow: false,\r\n    };\r\n    this.openPageSettings = this.openPageSettings.bind(this);\r\n    this.showSettingsPanel = this.showSettingsPanel.bind(this);\r\n    this.showWidgetsPanel = this.showWidgetsPanel.bind(this);\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n    this.onClick = this.onClick.bind(this);\r\n    store.subscribe(this.templateStatus.bind(this));\r\n  }\r\n  /**\r\n   * Метод подписчик на изменение состояния Редактора из Редакс хранилища\r\n   * */\r\n  templateStatus() {\r\n    let templateStatus = store.getState().templateStatus.status;\r\n    if (templateStatus !== this.state.templateStatus) {\r\n      this.setState({ ...this.state, templateStatus });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Инициализация модулей\r\n   */\r\n\r\n  initModules() {\r\n    this.modules = new Modules(this);\r\n    this.modules.loaded();\r\n  }\r\n\r\n  /**\r\n   * Показывает панель со списком виджетов\r\n   */\r\n  showWidgetsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"widgets\",\r\n    });\r\n  }\r\n\r\n  /** \r\n   * Показывает Dialog окно\r\n   */\r\n  toggleModalWindow() {\r\n    this.setState({\r\n      showDialogWindow: !this.state.showDialogWindow\r\n    })\r\n  };\r\n\r\n  /**\r\n   * Показывает панель с настройками текущего виджета\r\n   */\r\n  showSettingsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"settings\",\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Сработывает при клике\r\n   */\r\n  onClick() {\r\n    contextMenu.hideAll();\r\n    store.dispatch(closeDynamicContent())\r\n  }\r\n\r\n  /**\r\n   * Обработчик события конец переноса вызывает метод stopDrag переносимого элемента\r\n   * @see ElementWrapper.stopDrag\r\n   */\r\n  onDragEnd() {\r\n    let draggableElement = store.getState().elementDrag.element;\r\n    if (draggableElement && draggableElement.stopDrag) {\r\n      draggableElement.stopDrag();\r\n    }\r\n    store.dispatch(stopDrag());\r\n  }\r\n  /**\r\n   * Вызывается после загрузки шаблона\r\n   * @see {@link SaveImportModule}\r\n   * */\r\n  endLoading() {\r\n    console.log(\"editor loaded\");\r\n  }\r\n\r\n  /**\r\n   * Вызывается после загрузки компонента\r\n   * @see {@link https://ru.reactjs.org/docs/react-component.html#componentdidmount}\r\n   * */\r\n  async componentDidMount() {\r\n    this.initModules();\r\n\r\n    let currentUser = await (new Resource({route: '/ajax/current-user'})).getAll();\r\n    currentUser = currentUser.data;\r\n    appStore.dispatch(changeCurrentUser(currentUser));\r\n  }\r\n\r\n  /**\r\n   * Выбирает корневой элемент текущим и открывает панель настроек\r\n   */\r\n\r\n  openPageSettings() {\r\n    this.modules.templateDataStorage.setCurrentRootElement();\r\n    this.showSettingsPanel();\r\n  }\r\n\r\n  /**\r\n   * Отрисовка Компонента\r\n   */\r\n  render() {\r\n    let settingsActive = \"\";\r\n    let templateClasses = \"editor \";\r\n    if (this.state.templateStatus === CONSTANTS.TEMPLATE_SAVING) {\r\n      templateClasses += \" editor_saving\";\r\n    }\r\n    if (\r\n      store.getState().currentElement.currentElement.getType &&\r\n      store.getState().currentElement.currentElement.getType() ===\r\n      \"root-element\" &&\r\n      this.state.activePanel === \"settings\"\r\n    ) {\r\n      settingsActive = \" active\";\r\n    }\r\n    return (\r\n      <Provider store={store}>\r\n        <div className={templateClasses}\r\n          onClick={this.onClick}\r\n          onDragEnd={this.onDragEnd}>\r\n          <div className=\"left-panel\">\r\n            <div className=\"editor-top-panel\">\r\n              <button\r\n                className=\"btn btn_hamburger\"\r\n              // onClick={this.showSettingsPanel}\r\n              >\r\n                <Hamburger className=\"icon\" />\r\n              </button>\r\n              <a href=\"/admin/templates\" target=\"_blank\" className=\"logo\">\r\n                {\r\n                  window.admin_logo\r\n                    ? renderAsset(window.admin_logo, { className: 'editor__logo' })\r\n                    : <Logo viewBox=\"0 0 97 35\" className=\"editor__logo\" />\r\n                }\r\n              </a>\r\n              <button className=\"btn btn_dots\" onClick={this.showWidgetsPanel}>\r\n                <Dots className=\"icon\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"left-panel-main\">\r\n              {this.state.activePanel === \"widgets\" && <WidgetsPanel />}\r\n              {this.state.activePanel === \"settings\" && <SettingsPanel />}\r\n            </div>\r\n            <div className=\"editor-bottom-panel d-flex align-content-center justify-center\">\r\n              <button\r\n                className={\"btn btn_settings\" + settingsActive}\r\n                onClick={this.openPageSettings}\r\n              >\r\n                <Settings className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <Navigation className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <History className=\"icon\" />\r\n              </button>\r\n              <div className=\"btn \">\r\n                <ResponsiveDdFooter />\r\n              </div>\r\n              <button className=\"btn \">\r\n                <Preview className=\"icon\" />\r\n              </button>\r\n              <UpdateButton onClick={() => this.toggleModalWindow()} toggleModalWindow={() => this.toggleModalWindow()} />\r\n            </div>\r\n          </div>\r\n          <div className=\"right-panel\">\r\n            {this.state.showDialogWindow &&\r\n            <DialogWindow state={this.state.showDialogWindow}\r\n                          toggleModalWindow={() => this.toggleModalWindow()} />}\r\n            <EditorWindow />\r\n          </div>\r\n        </div>\r\n        <AssetsBrowser />\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Если разработка то включается HMR <br/>\r\n * По умолчанию просто компонент\r\n * @member _export\r\n */\r\nlet _export;\r\nif (process.env.NODE_ENV === \"production\") {\r\n  _export = Editor;\r\n} else {\r\n  _export = hot(module)(Editor);\r\n}\r\n\r\nexport default _export;\r\n"],"sourceRoot":""}