{"version":3,"sources":["webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.scss?8fce","webpack:///./resources/modules/editor/src/sass/altrp-menu.scss?c57c","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?1926","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.scss?3739","webpack:///./resources/modules/editor/src/sass/altrp-menu.scss?11f8","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?1863","webpack:///./resources/modules/editor/src/js/classes/modules/BaseModule.js","webpack:///./resources/modules/front-app/src/js/helpers.js","webpack:///./resources/modules/editor/src/js/classes/modules/ElementsFactory.js","webpack:///./resources/modules/editor/src/js/classes/modules/SaveImportModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/SettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateSettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateDataStorage.js","webpack:///./resources/modules/editor/src/js/classes/Modules.js","webpack:///./resources/modules/editor/src/js/components/WidgetIcon.js","webpack:///./resources/modules/editor/src/js/components/WidgetsPanel.js","webpack:///./resources/modules/editor/src/js/components/SettingSection.js","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.js","webpack:///./resources/modules/editor/src/js/components/PanelTabContent.js","webpack:///./resources/modules/editor/src/js/components/SettingsPanel.js","webpack:///./resources/modules/editor/src/js/components/EditorWindow.js","webpack:///./resources/modules/editor/src/js/components/HistoryPanel.js","webpack:///./resources/modules/editor/src/js/components/UpdateButton.js","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/Editor.js"],"names":["module","exports","push","i","content","options","transform","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","BaseModule","modules","this","defaultTitle","ElementsFactory","object","parent","children","elementsManager","window","element","getElementClass","name","length","child","checkElementExists","parseData","id","settings","setSettings","dynamicContentSettings","target","newElement","_duplicateElement","insertNewChildAfter","getId","templateDataStorage","getEditor","elementsIds","_","union","getIds","getName","newChildren","map","childrenItem","newChild","setParent","setChildren","cloneDeep","SaveImportModule","resource","Resource","route","template_id","getTemplateId","store","dispatch","changeTemplateStatus","CONSTANTS","TEMPLATE_SAVING","get","then","templateData","title","titleElement","document","innerHTML","data","JSON","parse","parsedData","elementsFactory","replaceAll","setTitle","setName","endLoading","TEMPLATE_UPDATED","err","console","error","getTemplateDataForSave","put","res","SettingsChangeModule","TemplateSettingsChangeModule","TemplateDataStorage","RootElement","rootElement","setCurrentRootElement","toObject","getTemplateData","currentElement","setCurrentElement","BaseElement","elementName","newSection","Section","newColumn","Column","newWidget","appendWidget","appendColumn","appendNewSection","TEMPLATE_NEED_UPDATE","showSettingsPanel","Modules","editor","saveImportModule","settingsChangeModule","templateSettingsChangeModule","load","WidgetIcon","props","state","onDragStart","bind","e","startDrag","dataTransfer","effectAllowed","setData","className","draggable","React","createElement","getIconComponent","height","getTitle","Component","WidgetsPanel","widgets","getWidgetsList","widget","SettingSection","open","active","toggle","setState","currentTarget","dataset","settingsControllers","getElementById","classList","contains","count","remove","add","controllers","controls","data-open","data-key","onClick","label","controller","ControllerComponent","controllersManager","getController","type","controlId","Controller","DynamicContent","models","select","getAll","stopPropagation","value","modelName","modelname","modelTitle","modeltitle","fieldName","fieldname","fieldTitle","fieldtitle","settingName","params","dynamic","onSelect","closeDynamicContent","getCurrentElement","setModelsSettings","top","offsetTop","offsetHeight","left","classes","show","join","style","getPositionProps","model","fields","field","data-fieldname","data-fieldtitle","data-modelname","data-modeltitle","connect","dynamicContentState","PanelTabContent","keyActive","sections","autoHide","autoHideTimeout","autoHideDuration","section","sectionId","SettingsPanel","activeTab","getControls","contentTabClasses","TAB_CONTENT","styleTabClasses","TAB_STYLE","advancedTabClasses","TAB_ADVANCED","setActiveTab","EditorWindow","src","width","UpdateButton","saveTemplate","buttonClasses","templateStatus","status","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","assets","getAssets","selectedAsset","mediaAssets","mediaResource","log","tab","iconsManager","getIconsList","assetname","assetsToggle","asset","forEach","item","onChoose","tabClasses","data-tab","AssetContent","assetProps","iconComponent","url","filename","assetType","data-assetname","_export","assetsManagerSettings","altrpEditor","activePanel","openPageSettings","showWidgetsPanel","onDragEnd","subscribe","getState","loaded","contextMenu","hideAll","draggableElement","elementDrag","stopDrag","initModules","settingsActive","templateClasses","getType","href","admin_logo","renderAsset","viewBox"],"mappings":"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","file":"885d3cf8298841ef7c9b.bundle.js","sourcesContent":["exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/sass-loader/dist/cjs.js!./DynamicContent.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./altrp-menu.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\r\n/**\r\n * @property {Modules} modules\r\n * */\r\nclass BaseModule {\r\n  /**\r\n   * @param {Modules} modules\r\n   * */\r\n  constructor(modules) {\r\n    this.modules = modules;\r\n  }\r\n}\r\n\r\nexport default BaseModule;","export function getTemplates() {\r\n  return import('./classes/Templates.js');\r\n\r\n}\r\nexport function getRoutes() {\r\n  return import('./classes/Routes.js');\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n    return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Устанавливаент заголовок страницы на фронтенде\r\n * @param {string} title\r\n */\r\nexport function setTitle(title){\r\n  let titleElement = document.title;\r\n  if(!defaultTitle){\r\n    defaultTitle = titleElement.innerHTML;\r\n  }\r\n  if(! title){\r\n    title = defaultTitle;\r\n  }\r\n  if(document.title !== title){\r\n    document.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * Переменная, в которой храниться измначальный заголовок\r\n * @var {string}\r\n */\r\nlet defaultTitle;","import BaseModule from './BaseModule';\r\nimport {getEditor} from \"../../helpers\";\r\n\r\nclass ElementsFactory extends BaseModule{\r\n  parseData(object, parent){\r\n    let children = [];\r\n    const elementsManager = window.elementsManager;\r\n    /**\r\n     * @member {BaseElement} element\r\n     * */\r\n    let element = new (elementsManager.getElementClass(object.name));\r\n    if( object.children && object.children.length ){\r\n      for( let child of object.children){\r\n        elementsManager.checkElementExists(child.name) ?\r\n          children.push(this.parseData(child, element) ) : '';\r\n      }\r\n    }\r\n    element.id = object.id;\r\n    element.children = children;\r\n    /**\r\n     * Если настройки пустый то с сервера приходит пустой массив -- меняем на пустой объект\r\n     * */\r\n    let settings = (object.settings.length === 0) ? {} : object.settings;\r\n    element.setSettings(settings);\r\n    if(object.dynamicContentSettings){\r\n      element.dynamicContentSettings = (object.dynamicContentSettings.length === 0) ? {} : object.dynamicContentSettings;\r\n    }\r\n\r\n    if(parent){\r\n      element.parent = parent;\r\n    }\r\n    element.update();\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * @param {BaseElement} element\r\n   * @param {BaseElement} target\r\n   * @return{BaseElement}\r\n   * */\r\n  duplicateElement(element, target){\r\n\r\n    let newElement = this._duplicateElement(element);\r\n    target.insertNewChildAfter(element.getId(), newElement);\r\n    /**\r\n     * @member {TemplateDataStorage} templateDataStorage\r\n     * */\r\n    let templateDataStorage = getEditor().modules.templateDataStorage;\r\n    templateDataStorage.elementsIds = _.union(templateDataStorage.elementsIds, newElement.getIds());\r\n    return newElement;\r\n  }\r\n  /**\r\n   * @param {BaseElement} element\r\n   * */\r\n  _duplicateElement(element){\r\n    /**\r\n     * @member {BaseElement} newElement\r\n     * */\r\n    let newElement = new (elementsManager.getElementClass(element.getName()));\r\n    let newChildren = [];\r\n    element.children.map((childrenItem)=>{\r\n      let newChild = this._duplicateElement(childrenItem);\r\n      newChild.setParent(newElement);\r\n      newChildren.push(newChild);\r\n    });\r\n    // newElement.component = new\r\n    newElement.setChildren(newChildren);\r\n    newElement.settings = _.cloneDeep(element.settings);\r\n    if(element.dynamicContentSettings){\r\n      newElement.dynamicContentSettings = _.cloneDeep(element.dynamicContentSettings);\r\n    }\r\n    newElement.children = newChildren;\r\n    return newElement;\r\n  }\r\n}\r\n\r\nexport default ElementsFactory;","import BaseModule from \"./BaseModule\";\r\nimport Resource from \"../Resource\";\r\nimport {CONSTANTS, getEditor, getTemplateId} from \"../../helpers\";\r\nimport RootElement from \"../elements/RootElement\";\r\nimport store from \"../../store/store\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\nimport {setTitle} from \"../../../../../front-app/src/js/helpers\";\r\n\r\nclass SaveImportModule extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n\r\n    this.resource = new Resource({\r\n      route: '/admin/ajax/templates',\r\n    });\r\n  }\r\n\r\n  load(){\r\n    this.template_id = getTemplateId();\r\n    // console.log(this.template_id);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    if(this.template_id){\r\n      let res = this.resource.get(this.template_id).then(templateData => {\r\n        setTitle(templateData.title);\r\n        let data = JSON.parse(templateData.data);\r\n        let parsedData = this.modules.elementsFactory.parseData(data);\r\n        let templateDataStorage = getEditor().modules.templateDataStorage;\r\n        templateDataStorage.replaceAll(parsedData);\r\n        templateDataStorage.setTitle(templateData.title);\r\n        templateDataStorage.setName(templateData.name);\r\n        getEditor().endLoading();\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      }).catch(err=>{\r\n        console.error(err);\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      });\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  saveTemplate(){\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    let templateData = getEditor().modules.templateDataStorage.getTemplateDataForSave();\r\n    this.resource.put(this.template_id, templateData).then(res=>{\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    }).catch(err=>{\r\n      console.error(err);\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default SaveImportModule;","class SettingsChangeModule {\r\n\r\n}\r\nexport default SettingsChangeModule;","class TemplateSettingsChangeModule {\r\n\r\n}\r\nexport default TemplateSettingsChangeModule;","import RootElement from \"../elements/RootElement\";\r\nimport {CONSTANTS, getEditor, getTemplateId} from \"../../helpers\";\r\nimport BaseModule from \"./BaseModule\";\r\nimport store from '../../store/store';\r\nimport {setCurrentElement, SET_CURRENT_ELEMENT} from '../../store/current-element/actions'\r\nimport BaseElement from \"../elements/BaseElement\";\r\nimport Section from \"../elements/Section\";\r\nimport Column from \"../elements/Column\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\n\r\nclass TemplateDataStorage extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n    this.elementsIds = [];\r\n  }\r\n\r\n  replaceAll(element) {\r\n    if(! element instanceof RootElement ){\r\n      throw 'Expect Root Element as root element;)';\r\n    }\r\n    this.rootElement = element;\r\n    this.elementsIds = element.getIds();\r\n    this.setCurrentRootElement();\r\n  }\r\n\r\n  getTemplateData() {\r\n    return this.rootElement.toObject();\r\n  }\r\n  getTemplateDataForSave(){\r\n    let data = {};\r\n\r\n    data.data = this.getTemplateData();\r\n    data.title = this.title || 'testtitle';\r\n    data.name = this.name || 'testname';\r\n    return data;\r\n  }\r\n\r\n  setTitle(title){\r\n    this.title = title;\r\n  }\r\n\r\n\r\n  setName(name){\r\n    this.name = name;\r\n  }\r\n\r\n  setCurrentRootElement(){\r\n    this.currentElement = this.rootElement;\r\n    store.dispatch(setCurrentElement(this.currentElement));\r\n    return this.currentElement;\r\n  }\r\n\r\n  setCurrentElement(element){\r\n    if(! element instanceof BaseElement){\r\n      throw 'Only Base Element Can Be Set as Default'\r\n    }\r\n    this.currentElement = element;\r\n    store.dispatch(setCurrentElement(element));\r\n  }\r\n\r\n  getCurrentElement(){\r\n    if(!this.currentElement){\r\n      return this.setCurrentRootElement();\r\n    }\r\n    return this.currentElement;\r\n  }\r\n\r\n  getRootElement(){\r\n    return this.rootElement\r\n  }\r\n\r\n  addWidgetInSection(elementName){\r\n    let newSection = new Section();\r\n    this.elementsIds.push(newSection.getId());\r\n\r\n    let newColumn = new Column();\r\n    this.elementsIds.push(newColumn.getId());\r\n\r\n    let newWidget = new (window.elementsManager.getElementClass(elementName));\r\n    this.elementsIds.push(newWidget.getId());\r\n\r\n    newColumn.appendWidget(newWidget);\r\n    newSection.appendColumn(newColumn);\r\n    this.rootElement.appendNewSection(newSection);\r\n    this.setCurrentElement(newWidget);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    getEditor().showSettingsPanel();\r\n  }\r\n\r\n}\r\n\r\nexport default TemplateDataStorage;","import ElementsFactory from './modules/ElementsFactory';\r\nimport SaveImportModule from \"./modules/SaveImportModule\";\r\nimport SettingsChangeModule from \"./modules/SettingsChangeModule\";\r\nimport TemplateSettingsChangeModule from \"./modules/TemplateSettingsChangeModule\";\r\nimport TemplateDataStorage from \"./modules/TemplateDataStorage\";\r\n\r\nclass Modules {\r\n  /**\r\n   * @param {Editor} editor\r\n   * */\r\n  constructor(editor){\r\n    this.elementsFactory = new ElementsFactory(this);\r\n    this.saveImportModule = new SaveImportModule(this);\r\n    this.settingsChangeModule = new SettingsChangeModule(this);\r\n    this.templateSettingsChangeModule = new  TemplateSettingsChangeModule(this);\r\n    this.templateDataStorage = new TemplateDataStorage(this);\r\n  }\r\n  loaded(){\r\n    this.saveImportModule.load();\r\n  }\r\n}\r\nexport default Modules;","import React, {Component} from \"react\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\nimport store from '../store/store'\r\nimport {startDrag} from \"../store/element-drag/actions\";\r\n\r\nexport default class WidgetIcon  extends  Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      element: this.props.element,\r\n    };\r\n    this.onDragStart = this.onDragStart.bind(this);\r\n  }\r\n  onDragStart(e){\r\n    store.dispatch(startDrag(null));\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData('text/plain', this.state.element.getName());\r\n  }\r\n  render() {\r\n    if (!this.state.element instanceof BaseElement) {\r\n      throw 'Widget Component must has Element in props';\r\n    }\r\n    return <div className='widget-icon' draggable=\"true\" onDragStart={this.onDragStart}>\r\n      {\r\n        React.createElement(this.state.element.getIconComponent(), {height: 35})\r\n      }\r\n      <div className=\"widget-icon__title\">\r\n        {this.state.element.getTitle()}\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n","import React, {Component} from \"react\";\r\nimport WidgetIcon from \"./WidgetIcon\";\r\n\r\n\r\nclass WidgetsPanel extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {widgets: window.elementsManager.getWidgetsList()};\r\n  }\r\n  render() {\r\n    return <div className=\"widget-panel\">\r\n      {\r\n        this.state.widgets.map(widget => {\r\n          return <WidgetIcon element={widget} key={widget.getName()}/>;\r\n        })\r\n      }\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default WidgetsPanel","import React, {Component} from \"react\";\r\nimport ChevronIcon from '../../svgs/chevron.svg'\r\nimport Controller from \"../classes/Controller\";\r\nimport { set } from \"lodash\";\r\n\r\nclass SettingSection extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      open: props.open,\r\n      active: props.open\r\n    };\r\n    this.toggle = this.toggle.bind(this);\r\n    const open = props.open;\r\n  }\r\n\r\n  // componentDidMount() {\r\n  //   document.getElementById(\"settingsSection0\").classList.add('open')\r\n  // }\r\n\r\n  toggle(e){\r\n    this.setState({\r\n      open: !this.state.open,\r\n      active: e.currentTarget.dataset.key\r\n    });\r\n  }\r\n\r\n\r\n  render() {\r\n    let settingsControllers = document.getElementById('settingsControllers');\r\n    if(document.getElementById(\"settingsSection\" + this.props.active))\r\n    if(document.getElementById(\"settingsSection\" + this.props.active).classList.contains('open') === false) {\r\n      for(let count = 0; count < settingsControllers.children.length; count++) {\r\n        document.getElementById(\"settingsSection\" + count)\r\n            ? document.getElementById(\"settingsSection\" + count).classList.remove('open') : '';\r\n      }\r\n      document.getElementById(\"settingsSection\" + this.props.active).classList.add('open')\r\n    } else {\r\n      document.getElementById(\"settingsSection\" + this.props.active).classList.remove('open');\r\n    }\r\n\r\n    let controllers = this.props.controls || [];\r\n    return <div className=\"settings-section\" id={\"settingsSection\" + this.props.active}>\r\n    <div className=\"settings-section\">\r\n      <div className=\"settings-section__title d-flex \" data-open={true} data-key={this.props.active} onClick={this.toggle}>\r\n        <div className=\"settings-section__icon d-flex \">\r\n          <ChevronIcon/>\r\n        </div>\r\n        <div className=\"settings-section__label\">\r\n          {this.props.label}\r\n        </div>\r\n      </div>\r\n      <div className=\"controllers-wrapper\">\r\n        {\r\n          controllers.map((controller) => {\r\n              let ControllerComponent = window.controllersManager.getController(controller.type);\r\n              return React.createElement(ControllerComponent, {...controller, key: controller.controlId, controller: new Controller(controller)});\r\n            })\r\n        }\r\n      </div>\r\n    </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default SettingSection;\r\n","import React, {Component} from \"react\";\r\nimport './DynamicContent.scss';\r\nimport './../../../sass/altrp-menu.scss';\r\nimport {connect} from \"react-redux\";\r\nimport {closeDynamicContent} from \"../../store/dynamic-content/actions\";\r\nimport store from \"../../store/store\";\r\nimport {getCurrentElement} from \"../../store/store\";\r\nimport Resource from \"../../classes/Resource\";\r\n\r\n/**\r\n * Класс реализующий список динамических данных для контроллера\r\n */\r\nclass DynamicContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      models: [\r\n        //   {\r\n        // modelName: 'page',\r\n        // title: 'Page',\r\n        // fields: [\r\n        //       {\r\n        //         fieldName: 'id',\r\n        //         title: 'ID',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'title',\r\n        //         title: 'Title',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'authorName',\r\n        //         title: 'Author Name',\r\n        //       },\r\n        //       {\r\n        //         fieldName: 'authorId',\r\n        //         title: 'Author ID',\r\n        //       },\r\n        //     ]\r\n        //   },\r\n        ],\r\n      };\r\n    this.select = this.select.bind(this);\r\n    this.resource = new Resource({route: '/admin/ajax/models_with_fields_options'});\r\n  }\r\n\r\n  async componentDidMount(){\r\n    let models = await this.resource.getAll();\r\n    this.setState(state=>({\r\n        ...state,\r\n      models,\r\n    }))\r\n  }\r\n  /**\r\n   * Обработка клика по элемету\r\n   */\r\n  select(e){\r\n    e.stopPropagation();\r\n    let value = {};\r\n\r\n    value.modelName = e.target.dataset.modelname;\r\n    value.modelTitle = e.target.dataset.modeltitle;\r\n    value.fieldName = e.target.dataset.fieldname;\r\n    value.fieldTitle = e.target.dataset.fieldtitle;\r\n    value.settingName = this.props.params.settingName;\r\n    value.dynamic = true;\r\n    this.props.params.onSelect(value);\r\n    store.dispatch(closeDynamicContent());\r\n    getCurrentElement().setModelsSettings(value);\r\n  }\r\n\r\n  getPositionProps(){\r\n    let element = this.props.element;\r\n    if(! element){\r\n      return{top:0, left:7};\r\n    }\r\n    return{\r\n      top: element.offsetTop + element.offsetHeight + 2,\r\n      left:7\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let classes = ['altrp-dynamic-content'];\r\n    if(this.props.show){\r\n      classes.push('altrp-dynamic-content_show')\r\n    }\r\n\r\n    return <div className={classes.join(' ')}  style={this.getPositionProps()}>\r\n      <div className=\"altrp-menu\">\r\n        {\r\n          this.state.models.map(model=>{\r\n            return<div className=\"altrp-menu-group\" key={model.modelName}>\r\n              <div className=\"altrp-menu__title\" key={model.modelName}>{model.title}</div>\r\n              { model.fields.map(field=>(<div className=\"altrp-menu__item\"\r\n                                       data-fieldname={field.fieldName}\r\n                                       data-fieldtitle={field.title}\r\n                                       data-modelname={model.modelName}\r\n                                       data-modeltitle={model.title}\r\n                                       onClick={this.select}\r\n                                       key={field.fieldName}>{field.title}</div>))}\r\n            </div>\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.dynamicContentState,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(DynamicContent);\r\n","import React, {Component} from \"react\";\r\nimport SettingSection from \"./SettingSection\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\n\r\nclass PanelTabContent extends Component {\r\n    render(){\r\n      let keyActive = 0;\r\n      let sections =  this.props.sections || [];\r\n      return <div className=\"settings-controllers\">\r\n        <Scrollbars\r\n        autoHide\r\n        autoHideTimeout={500}\r\n        autoHideDuration={200}\r\n        > \r\n          <div id=\"settingsControllers\">\r\n            {\r\n              sections.map((section, idx) =>{\r\n                return React.createElement(SettingSection, {\r\n                  ...section,\r\n                  key: section.sectionId,\r\n                  active: keyActive++,\r\n                  open: idx === 0,\r\n                  });\r\n                }\r\n            )\r\n          }\r\n          <DynamicContent/>\r\n          </div>\r\n        </Scrollbars>\r\n      </div>\r\n    }\r\n}\r\n\r\nexport default PanelTabContent","import React, {Component} from \"react\";\r\nimport {connect} from 'react-redux';\r\nimport ContentIcon from '../../svgs/content.svg'\r\nimport StyleIcon from '../../svgs/style.svg'\r\nimport AdvancedIcon from '../../svgs/advanced.svg'\r\nimport {TAB_ADVANCED, TAB_CONTENT, TAB_STYLE} from \"../classes/modules/ControllersManager\";\r\nimport PanelTabContent from \"./PanelTabContent\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\n\r\nclass SettingsPanel extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      activeTab: 'content',\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Устанавливает текущий таб\r\n   * @param activeTab\r\n   */\r\n  setActiveTab(activeTab){\r\n    this.setState({\r\n        ...this.state, activeTab\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    let controllersManager = window.controllersManager;\r\n\r\n    let sections = [];\r\n    if(this.props.currentElement.getName){\r\n      sections = controllersManager.getControls(this.props.currentElement.getName())[this.state.activeTab] || [];\r\n    }\r\n\r\n    // let sections = this.props.currentElement.getControllers ?\r\n    let contentTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_CONTENT ? 'active' : '');\r\n    let styleTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_STYLE ? 'active' : '');\r\n    let advancedTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_ADVANCED ? 'active' : '');\r\n    return <div className=\"panel settings-panel d-flex\">\r\n      <div className=\"panel-tabs d-flex\">\r\n        <button className={contentTabClasses} onClick={()=>this.setActiveTab(TAB_CONTENT)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <ContentIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Content\r\n          </span>\r\n        </button>\r\n        <button className={styleTabClasses} onClick={()=>this.setActiveTab(TAB_STYLE)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <StyleIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Style\r\n          </span>\r\n        </button>\r\n        <button className={advancedTabClasses} onClick={()=>this.setActiveTab(TAB_ADVANCED)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <AdvancedIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Advanced\r\n          </span>\r\n        </button>\r\n      </div>\r\n      <PanelTabContent sections={sections}/>\r\n    </div>\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return{\r\n    currentElement:state.currentElement.currentElement\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(SettingsPanel);\r\n","import React, {Component} from \"react\";\r\n\r\n\r\nclass EditorWindow extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n\r\n    return  <div className=\"editor-window\" id=\"editorWindow\">\r\n\r\n      {/*<Frame>*/}\r\n        {/*<FrameBindingContext>*/}\r\n          {/*<DropTarget/>*/}\r\n        {/*</FrameBindingContext>*/}\r\n      {/*</Frame>*/}\r\n      {/*<Frame src=\"/admin/editor-content\" >*/}\r\n        {/*<FrameBindingContext/>*/}\r\n      {/*</Frame>*/}\r\n      {/*<FrameContextConsumer>*/}\r\n      <iframe src=\"/admin/editor-content\" width=\"100%\"/>\r\n      {/*</FrameContextConsumer>*/}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default EditorWindow","import React, {Component} from \"react\";\r\n\r\nclass HistoryPanel extends Component {\r\n\r\n  render() {\r\n    return <div className=\"history-panel\">\r\n      HistoryPanel\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default HistoryPanel","import Chevron from '../../svgs/chevron.svg';\r\nimport React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {CONSTANTS, getEditor} from \"../helpers\";\r\n\r\nclass UpdateButton extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.saveTemplate = this.saveTemplate.bind(this);\r\n  }\r\n  saveTemplate(e){\r\n    getEditor().modules.saveImportModule.saveTemplate();\r\n  }\r\n render(){\r\n   let buttonClasses = 'btn font_montserrat font_500 btn_grey';\r\n   switch (this.props.templateStatus) {\r\n     case CONSTANTS.TEMPLATE_UPDATED:{\r\n       buttonClasses += ' btn_disabled ';\r\n     }\r\n     break;\r\n     case CONSTANTS.TEMPLATE_NEED_UPDATE:{\r\n       buttonClasses += ' btn_active ';\r\n     }\r\n     break;\r\n   }\r\n   return  <div className=\"control-group d-flex\">\r\n     <button className={buttonClasses} onClick={this.saveTemplate}>\r\n       UPDATE\r\n     </button>\r\n     <button className=\"btn btn_grey\">\r\n       <Chevron className=\"icon\"/>\r\n     </button>\r\n   </div>\r\n }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return{\r\n    templateStatus: state.templateStatus.status,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(UpdateButton)","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Times from \"../../../svgs/times.svg\";\r\nimport { assetsToggle } from \"../../store/assets-browser/actions\";\r\nimport { iconsManager } from \"../../helpers\";\r\nimport Resource from \"../Resource\";\r\nimport '../../../sass/assets-browser.scss';\r\n\r\n\r\nclass AssetsBrowser extends Component {\r\n  constructor() {\r\n    super();\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      // activeTab: 'icons',\r\n      activeTab: \"media\",\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: \"icons\",\r\n          title: \"Icons Library\"\r\n        },\r\n        {\r\n          name: \"media\",\r\n          title: \"Media Library\"\r\n        }\r\n      ],\r\n      assets: this.getAssets(\"media\"),\r\n      // assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n      mediaAssets: []\r\n    };\r\n    this.mediaResource = new Resource({ route: \"/admin/ajax/media\" });\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      let res = await this.mediaResource.getAll();\r\n\r\n      this.setState(state => {\r\n        state = { ...state, mediaAssets: res };\r\n        if (state.activeTab === \"media\") {\r\n          state.assets = res;\r\n        }\r\n        return state;\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  }\r\n  getAssets(tab) {\r\n    if (!tab) {\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab) {\r\n      case \"icons\": {\r\n        return iconsManager().getIconsList();\r\n      }\r\n      case \"media\": {\r\n        return this.state ? this.state.mediaAssets : [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e) {\r\n    let selectedAsset = e.currentTarget.dataset.assetname;\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset };\r\n    });\r\n  }\r\n\r\n  tabClick(e) {\r\n    this.setActiveTab(e.target.dataset.tab);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.setState(state => {\r\n      return { ...state, activeTab: tab, assets: this.getAssets(tab) };\r\n    });\r\n  }\r\n\r\n  toggleBrowser() {\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  chooseAsset() {\r\n    let asset;\r\n    this.state.assets.forEach(item => {\r\n      if (item.name === this.state.selectedAsset) {\r\n        asset = item;\r\n      }\r\n    });\r\n    if (!asset) {\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`;\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render() {\r\n    let classes = \"assets-browser\";\r\n    if (this.props.active) {\r\n      classes += \" assets-browser_active\";\r\n    }\r\n    let buttonClasses = \"btn\";\r\n    if (!this.state.selectedAsset) {\r\n      buttonClasses += \" btn_disabled\";\r\n    } else {\r\n      buttonClasses += \" btn_success\";\r\n    }\r\n    return (\r\n      <div className={classes}>\r\n        <div className=\"assets-browser__bg\" onClick={this.toggleBrowser} />\r\n        <div className=\"assets-browser-content\">\r\n          <div className=\"assets-browser-top\">\r\n            <div className=\"caption\">Append Media</div>\r\n            <button className=\"btn btn_bare assets-browser__close\" onClick={this.toggleBrowser} >\r\n              <Times className=\"icon\"/>\r\n            </button>\r\n            <div className=\"assets-browser-nav\">\r\n              {this.state.tabs.map(tab => {\r\n                let tabClasses = \"assets-browser__tab\";\r\n                if (this.state.activeTab === tab.name) {\r\n                  tabClasses += \" assets-browser__tab_active\";\r\n                }\r\n                return (\r\n                  <button\r\n                    className={tabClasses}\r\n                    onClick={this.tabClick}\r\n                    key={tab.name}\r\n                    data-tab={tab.name}\r\n                  >\r\n                    {tab.title}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {this.state.assets.length ? (\r\n            <div className=\"assets-browser-choose-frame\">\r\n              {this.state.assets.map(asset => {\r\n                let AssetContent;\r\n                let classes = \"asset-choose\";\r\n                let assetProps = {\r\n                  className: \"asset-choose__content\"\r\n                };\r\n                if (this.state.activeTab === \"icons\") {\r\n                  AssetContent = asset.iconComponent;\r\n                  classes += \" asset-choose_icon\";\r\n                  // assetProps.viewBox = '0 0 20 20';\r\n                  // assetProps.viewport = '0 0 10 10';\r\n                  assetProps.width = \"20\";\r\n                  assetProps.height = \"20\";\r\n                }\r\n                if (this.state.activeTab === \"media\") {\r\n                  AssetContent = \"img\";\r\n                  assetProps.src = asset.url;\r\n                  classes += \" asset-choose_media\";\r\n                  asset.name = asset.filename;\r\n                  asset.assetType = \"media\";\r\n                }\r\n                if (this.state.selectedAsset === asset.name) {\r\n                  classes += \" asset-choose_selected\";\r\n                }\r\n                return (\r\n                  <div\r\n                    className={classes}\r\n                    data-assetname={asset.name}\r\n                    key={asset.name}\r\n                    onClick={this.selectAsset}\r\n                  >\r\n                    <AssetContent {...assetProps} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"assets-browser-bottom\">\r\n            <button className={buttonClasses} onClick={this.chooseAsset}>\r\n              Choose\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import \"./sass/editor-style.scss\";\r\nimport React, { Component } from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport Modules from \"./js/classes/Modules\";\r\nimport WidgetsPanel from \"./js/components/WidgetsPanel\";\r\nimport SettingsPanel from \"./js/components/SettingsPanel\";\r\nimport EditorWindow from \"./js/components/EditorWindow\";\r\nimport HistoryPanel from \"./js/components/HistoryPanel\";\r\nimport UpdateButton from \"./js/components/UpdateButton\";\r\nimport {CONSTANTS, renderAsset} from \"./js/helpers\";\r\nimport { stopDrag } from \"./js/store/element-drag/actions\";\r\nimport AssetsBrowser from \"./js/classes/modules/AssetsBrowser\";\r\n\r\nimport store from \"../src/js/store/store\";\r\n\r\n\r\nimport DesktopIcon from \"./svgs/desktop.svg\";\r\nimport Logo from \"./svgs/logo.svg\";\r\nimport Navigation from \"./svgs/navigation.svg\";\r\nimport History from \"./svgs/history.svg\";\r\nimport Preview from \"./svgs/preview.svg\";\r\nimport Settings from \"./svgs/settings.svg\";\r\nimport Dots from \"./svgs/dots.svg\";\r\nimport Hamburger from \"./svgs/hamburger.svg\";\r\nimport {contextMenu} from \"react-contexify\";\r\nimport DynamicContent from \"./js/components/DynamicContent/DynamicContent\";\r\nimport {closeDynamicContent} from \"./js/store/dynamic-content/actions\";\r\nimport {iconsManager} from \"../../admin/src/js/helpers\";\r\n/**\r\n * Главный класс редактора.<br/>\r\n * Реакт-Компонент.<br/>\r\n * Синглтон, который хранится в глобальной переменной altrpEditor.\r\n *\r\n * */\r\nclass Editor extends Component {\r\n  /**\r\n   * @constructor\r\n   * */\r\n  constructor(props) {\r\n    super(props);\r\n    window.altrpEditor = this;\r\n    this.state = {\r\n      // activePanel: 'widgets',\r\n      activePanel: \"settings\",\r\n      templateStatus: CONSTANTS.TEMPLATE_UPDATED,\r\n    };\r\n    this.openPageSettings = this.openPageSettings.bind(this);\r\n    this.showSettingsPanel = this.showSettingsPanel.bind(this);\r\n    this.showWidgetsPanel = this.showWidgetsPanel.bind(this);\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n    this.onClick = this.onClick.bind(this);\r\n    store.subscribe(this.templateStatus.bind(this));\r\n  }\r\n  /**\r\n   * Метод подписчик на изменение состояния Редактора из Редакс хранилища\r\n   * */\r\n  templateStatus() {\r\n    let templateStatus = store.getState().templateStatus.status;\r\n    if (templateStatus !== this.state.templateStatus) {\r\n      this.setState({ ...this.state, templateStatus });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Инициализация модулей\r\n   */\r\n\r\n  initModules() {\r\n    this.modules = new Modules(this);\r\n    this.modules.loaded();\r\n  }\r\n\r\n  /**\r\n   * Показывает панель со списком виджетов\r\n   */\r\n  showWidgetsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"widgets\",\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Показывает панель с настройками текущего виджета\r\n   */\r\n  showSettingsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"settings\",\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Сработывает при клике\r\n   */\r\n  onClick() {\r\n    contextMenu.hideAll();\r\n    store.dispatch(closeDynamicContent())\r\n  }\r\n\r\n  /**\r\n   * Обработчик события конец переноса вызывает метод stopDrag переносимого элемента\r\n   * @see ElementWrapper.stopDrag\r\n   */\r\n  onDragEnd() {\r\n    let draggableElement = store.getState().elementDrag.element;\r\n    if (draggableElement && draggableElement.stopDrag) {\r\n      draggableElement.stopDrag();\r\n    }\r\n    store.dispatch(stopDrag());\r\n  }\r\n  /**\r\n   * Вызывается после загрузки шаблона\r\n   * @see {@link SaveImportModule}\r\n   * */\r\n  endLoading() {\r\n    console.log(\"editor loaded\");\r\n  }\r\n\r\n  /**\r\n   * Вызывается после загрузки компонента\r\n   * @see {@link https://ru.reactjs.org/docs/react-component.html#componentdidmount}\r\n   * */\r\n  componentDidMount() {\r\n    this.initModules();\r\n  }\r\n\r\n  /**\r\n   * Выбирает корневой элемент текущим и открывает панель настроек\r\n   */\r\n\r\n  openPageSettings() {\r\n    this.modules.templateDataStorage.setCurrentRootElement();\r\n    this.showSettingsPanel();\r\n  }\r\n\r\n  /**\r\n   * Отрисовка Компонента\r\n   */\r\n  render() {\r\n    let settingsActive = \"\";\r\n    let templateClasses = \"editor \";\r\n    if (this.state.templateStatus === CONSTANTS.TEMPLATE_SAVING) {\r\n      templateClasses += \" editor_saving\";\r\n    }\r\n    if (\r\n      store.getState().currentElement.currentElement.getType &&\r\n      store.getState().currentElement.currentElement.getType() ===\r\n        \"root-element\" &&\r\n      this.state.activePanel === \"settings\"\r\n    ) {\r\n      settingsActive = \" active\";\r\n    }\r\n    return (\r\n      <Provider store={store}>\r\n        <div className={templateClasses}\r\n             onClick={this.onClick}\r\n             onDragEnd={this.onDragEnd}>\r\n          <div className=\"left-panel\">\r\n            <div className=\"editor-top-panel\">\r\n              <button\r\n                className=\"btn btn_hamburger\"\r\n                // onClick={this.showSettingsPanel}\r\n              >\r\n                <Hamburger className=\"icon\" />\r\n              </button>\r\n              <a href=\"/admin\" target=\"_blank\" className=\"logo\">\r\n                {\r\n                  window.admin_logo\r\n                      ? renderAsset(window.admin_logo, {className:'editor__logo'})\r\n                      :<Logo viewBox=\"0 0 97 35\" className=\"editor__logo\"/>\r\n                }\r\n              </a>\r\n              <button className=\"btn btn_dots\" onClick={this.showWidgetsPanel}>\r\n                <Dots className=\"icon\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"left-panel-main\">\r\n              {this.state.activePanel === \"widgets\" && <WidgetsPanel />}\r\n              {this.state.activePanel === \"settings\" && <SettingsPanel />}\r\n            </div>\r\n            <div className=\"editor-bottom-panel d-flex align-content-center justify-center\">\r\n              <button\r\n                className={\"btn btn_settings\" + settingsActive}\r\n                onClick={this.openPageSettings}\r\n              >\r\n                <Settings className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <Navigation className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <History className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <DesktopIcon className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \">\r\n                <Preview className=\"icon\" />\r\n              </button>\r\n              <UpdateButton />\r\n            </div>\r\n          </div>\r\n          <div className=\"right-panel\">\r\n            <EditorWindow />\r\n          </div>\r\n        </div>\r\n        <AssetsBrowser />\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Если разработка то включается HMR <br/>\r\n * По умолчанию просто компонент\r\n * @member _export\r\n */\r\nlet _export;\r\nif (process.env.NODE_ENV === \"production\") {\r\n  _export = Editor;\r\n} else {\r\n  _export = hot(module)(Editor);\r\n}\r\n\r\nexport default _export;\r\n"],"sourceRoot":""}