(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{227:function(e,t,r){(e.exports=r(60)(!1)).push([e.i,"",""])},260:function(e,t,r){var a=r(227);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},o=r(61)(a,n);a.locals&&(e.exports=a.locals),e.hot.accept(227,(function(){var t=r(227);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var r,a=0;for(r in e){if(!t||e[r]!==t[r])return!1;a++}for(r in t)a--;return 0===a}(a.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},295:function(e,t,r){"use strict";r.r(t);var a=r(24),n=r.n(a),o=r(9),l=r.n(o),c=r(13),i=r.n(c),s=r(17),u=r.n(s),d=r(20),p=r.n(d),m=r(0),f=r.n(m),g=r(258),b=r(261),v=(r(260),r(63)),h=r(39),w=(r(90),r(291));r(47),r(103);function y(){return window.iconsManager||(window.iconsManager=new w.default),window.iconsManager}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.settings,r=e.query,a=e.data;if(!t.tables_columns||!t.tables_columns.length)return f.a.createElement("div",{children:"Please Add Column"});var o,l,c,s=[],d=Object(m.useState)(1),w=p()(d,2),E=w[0],N=w[1],S=Object(m.useState)({}),j=p()(S,2),P=j[0],C=j[1],k=Object(m.useState)({}),x=p()(k,2),M=x[0],D=x[1],H=JSON.stringify(M),A=Object(m.useCallback)(function(){var e=u()(i.a.mark((function e(t){var a,n,o,l,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:1,n=s.length>2?s[2]:void 0,o=s.length>3?s[3]:void 0,l={page:a},c=JSON.stringify(o),n&&(l=_.assign(n,l)),c.length>2&&(l.filters=c),e.abrupt("return",r.getQueried(l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());if(r.pageSize){var J=Object(b.b)([r.modelName,E,P,M],A,{}),R=J.status,T=J.resolvedData,I=J.latestData,Q=J.error;s=T?T[r.modelName]:s,o=R,l=Q,c=I,Object(m.useEffect)((function(){(null==I?void 0:I.hasMore)&&b.a.prefetchQuery([r.modelName,E+1],A)}),[I,A,E,P,M])}else{var z=Object(b.c)(r.modelName,(function(){return r.getResource().getQueried(O(O({},P),{},{filters:H}))}),[r.modelName]),G=z.status,q=z.data,B=z.error;s=q,o=G,l=B}var F=[];F=function(e){var t=[],r=e.tables_columns;return(r=r||[]).forEach((function(e){e.column_name&&e.accessor&&(e._accessor=e.accessor,t.push(e))})),t}(t),s.length||(s=a);var L=Object(g.useTable)({columns:f.a.useMemo((function(){return F||[]}),[t.tables_columns]),data:f.a.useMemo((function(){return s||[]}),[s])}),K=L.getTableProps,U=L.getTableBodyProps,V=L.headerGroups,W=L.rows,X=L.prepareRow,Y=function(e){C({order_by:e,order:P&&P.order_by===e?"DESC"===P.order?"ASC":"DESC":"ASC"})},Z=function(e,t){N(1);var r=O({},M);t?r[e]=t:delete r[e],D(r)};return f.a.createElement(f.a.Fragment,null,f.a.createElement("table",n()({className:"altrp-table"},K()),f.a.createElement("thead",{className:"altrp-table-head"},function(e){var t=e.additional_rows;if(!_.isArray(t))return"";return t.map((function(e){return e.additional_cells=e.additional_cells||[],f.a.createElement("tr",{key:"additional-row-".concat(e.id)},e.additional_cells.map((function(t){return t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,f.a.createElement("th",{key:"additional-cell-".concat(e.id,"-").concat(t.id),role:"columnheader",className:"altrp-table-th",colSpan:t.colspan,rowSpan:t.rowspan},t.title)})))}))}(t),V.map((function(e){return f.a.createElement("tr",n()({},e.getHeaderGroupProps(),{className:"altrp-table-tr"}),e.headers.map((function(e){return function(e){var t=e.column,r=e.sortSetting,a=e.sortingHandler,n=e.filterSetting,o=e.filterHandler,l=O({},t.getHeaderProps());l.className="altrp-table-th",t.column_is_sorted&&(l.onClick=function(){return a(t._accessor)},l.className+=" clickable");t.column_width&&(l.width=t.column_width+"%");var c=t.render("column_name");return f.a.createElement("th",l,c,r&&r.order_by===t._accessor&&("DESC"===r.order?y().renderIcon("chevron",{className:"rotate-180"}):y().renderIcon("chevron")),t.column_is_filtered&&f.a.createElement("label",{className:"altrp-label"},f.a.createElement("input",{type:"text",onClick:function(e){e.stopPropagation()},onChange:function(e){e.stopPropagation();var r=e.target.value;o(t._accessor,r)},value:n[t._accessor]||"",className:"altrp-field"})))}({column:e,sortSetting:P,sortingHandler:Y,filterSetting:M,filterHandler:Z})})))}))),f.a.createElement("tbody",n()({},U(),{className:"altrp-table-tbody"}),"error"===o?f.a.createElement("tr",null,f.a.createElement("td",null,l.message)):"loading"===o?f.a.createElement("tr",null,f.a.createElement("td",null,"Loading")):W.map((function(e,t){return X(e),f.a.createElement("tr",n()({},e.getRowProps(),{className:"altrp-table-tr"}),e.cells.map((function(t,r){var a=t.render("Cell"),o=Object(h.b)()?"a":v.b;return(_.isObject(t.value)||_.isArray(t.value))&&(a=""),F[r].column_link&&e.original.id&&(a=f.a.createElement(o,{to:F[r].column_link.replace(":id",e.original.id),className:"altrp-inherit"},a)),f.a.createElement("td",n()({},t.getCellProps(),{className:"altrp-table-td"}),a)})))})))),"prev-next"===r.paginationType&&r.pageSize?f.a.createElement("div",{className:"altrp-pagination"},f.a.createElement("button",{className:"altrp-pagination__previous",onClick:function(){return N((function(e){return Math.max(e-1,0)}))},disabled:1===E},t.prev_text||"Previous Page"),f.a.createElement("div",{className:"altrp-pagination__count"},t.current_page_text||"Current Page:",E),f.a.createElement("button",{className:"altrp-pagination__next",onClick:function(){return N((function(e){return c&&c.hasMore?e+1:e}))},disabled:!c||!c.hasMore},t.next_text||"Next Page")):"")}}}]);
//# sourceMappingURL=412fd7a949b7900c0846.bundle.js.map