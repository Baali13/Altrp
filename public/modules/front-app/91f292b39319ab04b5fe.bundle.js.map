{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/store/routes/actions.js","webpack:///./resources/modules/front-app/src/js/store/routes/reducers.js","webpack:///./resources/modules/front-app/src/js/store/reducers.js","webpack:///./resources/modules/front-app/src/js/store/store.js","webpack:///./resources/modules/front-app/src/js/helpers.js","webpack:///./resources/modules/front-app/src/js/components/AreaComponent.js","webpack:///./resources/modules/front-app/src/js/components/RouteContent.js","webpack:///./resources/modules/editor/src/js/components/Styles.js","webpack:///./resources/modules/front-app/src/js/components/AppContent.js","webpack:///./resources/modules/front-app/src/FrontApp.js"],"names":["CHANGE_APP_ROUTES","changeAppRoutes","routes","type","defaultState","combineReducers","appRoutes","state","action","appStore","createStore","rootReducer","defaultTitle","AreaComponent","rootElement","window","frontElementsFabric","parseData","this","props","template","data","className","React","createElement","componentClass","element","children","Component","RouteContent","title","titleElement","document","innerHTML","areas","map","area","key","id","Styles","elementStyles","stylesModule","stylesModuleResolve","elementId","styles","elementFound","forEach","elementStyle","push","setState","data-styles-id","AppContent","route","path","exact","connect","_export","frontApp","getTemplates","getRoutes","then","res","templates","store"],"mappings":"yFAAA,oEAAO,IAAMA,EAAoB,oBAE1B,SAASC,EAAgBC,GAC9B,MAAO,CACLC,KAAMH,EACNE,Y,oDCHEE,EAAe,CACnBF,OAAQ,ICCKG,kBAAgB,CAC7BC,UDCK,SAA0BC,EAAOC,GAEtC,OADAD,EAAQA,GAASH,EACTI,EAAOL,MACb,KAAKH,IACHO,EAAQ,CACNL,OAAQM,EAAON,QAIrB,OAAOK,KEZLE,EAAWC,YAAYC,GAEZF,O,2CC8BXG,E,gkBCpBWC,E,qIAXT,IAAIC,EAAeC,OAAOC,oBAAoBC,UAAUC,KAAKC,MAAMC,SAASC,MAC5E,OAAO,yBAAKC,UAAU,YACpBC,IAAMC,cAAcV,EAAYW,eAC5B,CACEC,QAASZ,EACTa,SAAUb,EAAYa,gB,GAPRC,a,4aCabC,E,gJFGR,IAAkBC,EACnBC,EADmBD,EEZZZ,KAAKC,MAAMW,MFalBC,EAAeC,SAASF,MACxBlB,IACFA,EAAemB,EAAaE,WAEzBH,IACHA,EAAQlB,GAEPoB,SAASF,QAAUA,IACpBE,SAASF,MAAQA,K,+BElBjB,OAAM,yBAAKR,UAAU,iBACnBJ,KAAKC,MAAMe,MAAMC,KAAI,SAAAC,GAAI,OAAI,kBAAC,EAAD,CAAehB,SAAUgB,EAAKhB,SAAUiB,IAAK,WAAaD,EAAKE,a,GANvEV,a,8gCC2CZW,E,gCA5Cb,WAAYpB,GAAM,0BAChB,cAAMA,IACDZ,MAAQ,CACXiC,cAAe,IAEjBzB,OAAO0B,aAAP,OACA1B,OAAO2B,oBAAP,QANgB,E,qDAYDC,EAAWC,GAC1B,GAAIA,EAAJ,CAGA,IAAIC,GAAe,EACfL,EAAgB,IAAItB,KAAKX,MAAMiC,eACnCA,EAAcM,SAAQ,SAAAC,GACjBA,EAAaJ,YAAcA,IAC5BE,GAAe,EACfE,EAAaH,OAASA,MAGtBC,GACFL,EAAcQ,KAAK,CACjBL,YACAC,WAGJ1B,KAAK+B,SAAL,OACK/B,KAAKX,OADV,IAEEiC,sB,+BAIF,OAAO,yBAAKlB,UAAU,oBACnBJ,KAAKX,MAAMiC,cAAcL,KAAI,SAAAY,GAC5B,OAAM,2BAAOG,iBAAgBH,EAAaJ,UAAWN,IAAKU,EAAaJ,WAAYI,EAAaH,gB,GAvCnFhB,a,4aCSfuB,E,qIAEF,OAAO,yBAAK7B,UAAU,qBACpB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACGJ,KAAKC,MAAMjB,OAAOiC,KAAI,SAAAiB,GAAK,OAAE,kBAAC,IAAD,CAAOf,IAAKe,EAAMd,GAAIe,KAAMD,EAAMC,KAAMC,OAAK,GACzE,kBAAC,EAAiBF,SAIxB,kBAAC,EAAD,W,GAVmBxB,aAqBV2B,ICDXC,EDCWD,eANf,SAAyBhD,GACvB,MAAO,CACLL,OAAQK,EAAMD,UAAUJ,UAIbqD,CAAyBJ,G,waCCtCK,E,gCAzBA,WAAYrC,GAAM,yBAChB,cAAMA,GACNJ,OAAO0C,SAAP,OACA,EAAKC,eACL,EAAKC,YAJW,E,mDAMJ,WACZ,OLdK,6BKciBC,MAAK,SAAAC,GACzB,EAAKC,UAAYD,EAAG,a,kCAGb,WACT,OLfK,6BKecD,MAAK,SAAAC,GACtB,EAAK3D,OAAS2D,EAAG,a,+BAInB,OAAO,kBAAC,IAAD,CAAUE,MAAOtD,KACtB,kBAAC,EAAD,W,GAnBiBmB,aA+BR4B","file":"91f292b39319ab04b5fe.bundle.js","sourcesContent":["export const CHANGE_APP_ROUTES = 'CHANGE_APP_ROUTES';\r\n\r\nexport function changeAppRoutes(routes) {\r\n  return {\r\n    type: CHANGE_APP_ROUTES,\r\n    routes\r\n  };\r\n}\r\n\r\n","import {CHANGE_APP_ROUTES} from './actions'\r\n\r\nconst defaultState = {\r\n  routes: [],\r\n};\r\n\r\nexport function appRoutesReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case CHANGE_APP_ROUTES:{\r\n      state = {\r\n        routes: action.routes,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {combineReducers} from 'redux';\r\nimport {appRoutesReducer} from \"./routes/reducers\";\r\n\r\n\r\nexport default combineReducers({\r\n  appRoutes: appRoutesReducer,\r\n});\r\n","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nlet appStore = createStore(rootReducer);\r\n\r\nexport default appStore;","export function getTemplates() {\r\n  return import('./classes/Templates.js');\r\n\r\n}\r\nexport function getRoutes() {\r\n  return import('./classes/Routes.js');\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n    return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Устанавливаент заголовок страницы на фронтенде\r\n * @param {string} title\r\n */\r\nexport function setTitle(title){\r\n  let titleElement = document.title;\r\n  if(!defaultTitle){\r\n    defaultTitle = titleElement.innerHTML;\r\n  }\r\n  if(! title){\r\n    title = defaultTitle;\r\n  }\r\n  if(document.title !== title){\r\n    document.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * Переменная, в которой храниться измначальный заголовок\r\n * @var {string}\r\n */\r\nlet defaultTitle;","import React, {Component} from \"react\";\r\n\r\nclass AreaComponent extends Component {\r\n    render(){\r\n      let rootElement  = window.frontElementsFabric.parseData(this.props.template.data);\r\n      return <div className=\"app-area\">{\r\n        React.createElement(rootElement.componentClass,\r\n            {\r\n              element: rootElement,\r\n              children: rootElement.children\r\n            })\r\n      }</div>\r\n    }\r\n}\r\n\r\nexport default AreaComponent","import React, {Component} from \"react\";\r\nimport AreaComponent from \"./AreaComponent\";\r\nimport {setTitle} from \"../helpers\";\r\n\r\nclass RouteContent extends Component {\r\n  componentDidMount(){\r\n    setTitle(this.props.title);\r\n  }\r\n  render(){\r\n    return<div className=\"route-content\">{\r\n      this.props.areas.map(area => <AreaComponent template={area.template} key={'appArea_' + area.id}/>)\r\n    }</div>\r\n  }\r\n}\r\n\r\nexport default RouteContent","import React, {Component} from \"react\";\r\n\r\nclass Styles extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      elementStyles: []\r\n    };\r\n    window.stylesModule = this;\r\n    window.stylesModuleResolve(this);\r\n  }\r\n  /**\r\n   * @param {string} elementId\r\n   * @param {string} styles\r\n   * */\r\n  addElementStyles(elementId, styles){\r\n    if(!styles){\r\n      return\r\n    }\r\n    let elementFound = false;\r\n    let elementStyles = [...this.state.elementStyles];\r\n    elementStyles.forEach(elementStyle=>{\r\n      if(elementStyle.elementId === elementId){\r\n        elementFound = true;\r\n        elementStyle.styles = styles;\r\n      }\r\n    });\r\n    if(!elementFound){\r\n      elementStyles.push({\r\n        elementId,\r\n        styles,\r\n      })\r\n    }\r\n    this.setState({\r\n      ...this.state,\r\n      elementStyles\r\n    })\r\n  }\r\n  render(){\r\n    return <div className=\"styles-container\">\r\n      {this.state.elementStyles.map(elementStyle => {\r\n        return<style data-styles-id={elementStyle.elementId} key={elementStyle.elementId}>{elementStyle.styles}</style>\r\n      })}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Styles","import React, {Component} from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport RouteContent from \"./RouteContent\";\r\nimport Styles from \"../../../../editor/src/js/components/Styles\";\r\n\r\nclass AppContent extends Component {\r\n  render(){\r\n    return <div className=\"front-app-content\">\r\n      <Router>\r\n        <Switch>\r\n          {this.props.routes.map(route=><Route key={route.id} path={route.path} exact>\r\n            <RouteContent {...route}/>\r\n          </Route>)}\r\n        </Switch>\r\n      </Router>\r\n      <Styles/>\r\n    </div>;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    routes: state.appRoutes.routes\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AppContent);\r\n","import React, {Component} from \"react\";\r\nimport {hot} from \"react-hot-loader\";\r\nimport {getRoutes, getTemplates} from \"./js/helpers\";\r\nimport appStore from \"./js/store/store\";\r\nimport AppContent from \"./js/components/AppContent\";\r\nimport {Provider} from 'react-redux'\r\n\r\nclass FrontApp extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    window.frontApp = this;\r\n    this.getTemplates();\r\n    this.getRoutes();\r\n  }\r\n  getTemplates(){\r\n    return getTemplates().then(res => {\r\n      this.templates = res.default\r\n    });\r\n  }\r\n  getRoutes(){\r\n    return getRoutes().then(res => {\r\n      this.routes = res.default;\r\n    });\r\n  }\r\n  render(){\r\n    return <Provider store={appStore}>\r\n      <AppContent/>\r\n    </Provider>;\r\n  }\r\n}\r\n\r\nlet _export;\r\nif (process.env.NODE_ENV === 'production') {\r\n  _export = FrontApp;\r\n} else {\r\n  _export = hot(module)(FrontApp);\r\n}\r\n\r\nexport default _export;\r\n"],"sourceRoot":""}