(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{179:function(t,e,r){"use strict";var n=r(3),a=r.n(n),c=r(4),o=r.n(c),s=function t(){a()(this,t)},i=function(){function t(){a()(this,t)}return o()(t,[{key:"getTemplates",value:function(){return this.templates=this.templates||[],this.templates}}],[{key:"areaFabric",value:function(e){var r=new t;return r.settings=e.settings,r.id=e.id,r.template=new s,r.template.data=e.template?JSON.parse(e.template.data):null,r.template.id=e.template?e.template.id:null,"popups"===e.area_name&&(r.templates=[],e.templates=e.templates||[],e.templates.forEach((function(t){var e=new s;e.data=t?JSON.parse(t.data):null,e.id=t?JSON.parse(t.id):null,e.template_settings=t?t.template_settings:[],r.templates.push(e)}))),r}}]),t}();e.a=i},225:function(t,e,r){var n=r(226);t.exports=function(t,e){if(null==t)return{};var r,a,c=n(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)r=o[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(c[r]=t[r])}return c}},226:function(t,e){t.exports=function(t,e){if(null==t)return{};var r,n,a={},c=Object.keys(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}},327:function(t,e,r){"use strict";r.r(e);var n=r(9),a=r.n(n),c=r(12),o=r.n(c),s=r(3),i=r.n(s),u=r(4),l=r.n(u),p=r(2),f=r.n(p),h=r(6),m=r.n(h),d=r(7),y=r.n(d),v=r(1),b=r.n(v),g=r(0),O=r.n(g),w=r(8),j=r(19),R=r(26),k=r(11),E=r(37),x=r(122),D=r.n(x),S=r(225),P=r.n(S),N=r(5),C=r.n(N);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var I=function(t){m()(r,t);var e=M(r);function r(){return i()(this,r),e.apply(this,arguments)}return l()(r,[{key:"render",value:function(){var t=window.frontElementsFabric.parseData(this.props.template.data,null,this.props.page,this.props.models);return O.a.createElement("div",{className:["app-popup"].join(" ")},O.a.createElement(t.componentClass,{element:t,children:t.children}))}}]),r}(g.Component);function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var T=function(t){m()(r,t);var e=J(r);function r(){return i()(this,r),e.apply(this,arguments)}return l()(r,[{key:"render",value:function(){var t=["app-area","app-area_".concat(this.props.id)];if(this.props.area.getTemplates().length)return O.a.createElement("div",{className:t.join(" ")},this.props.area.getTemplates().map((function(t){return O.a.createElement(I,{key:t.id,template:t})})));if(!this.props.template.data)return O.a.createElement("div",{className:t.join(" ")});var e=window.frontElementsFabric.parseData(this.props.template.data,null,this.props.page,this.props.models);return O.a.createElement("div",{className:t.join(" ")},O.a.createElement(e.componentClass,{element:e,children:e.children}))}}]),r}(g.Component),F=r(57),U=r(18),A=new(function(){function t(){i()(this,t),this.resource=new U.a({route:"/ajax/pages"}),this.pagesStorage={}}var e;return l()(t,[{key:"loadPage",value:(e=o()(a.a.mark((function t(e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.isObject(this.pagesStorage[e])){t.next=2;break}return t.abrupt("return",this.pagesStorage[e]);case 2:return t.next=4,this.resource.get(e);case 4:return r=t.sent,this.pagesStorage[e]=r,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}()),H=r(179),z=r(59),V=r(181);function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){C()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var K=function(t){m()(s,t);var e,r,n,c=G(s);function s(t){var e;return i()(this,s),e=c.call(this,t),Object(w.i)(e.props.title),e.state={areas:e.props.areas||[]},e}return l()(s,[{key:"componentDidMount",value:(n=o()(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(w.i)(this.props.title),!this.props.lazy||!this.props.allowed){t.next=7;break}return t.next=4,A.loadPage(this.props.id);case 4:e=t.sent,r=e.areas.map((function(t){return H.a.areaFabric(t)})),this.setState((function(t){return B(B({},t),{},{areas:r})}));case 7:this.changeRouteCurrentModel();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"changeRouteCurrentModel",value:(r=o()(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.get(this.props,"model.modelName")||!_.get(this.props,"match.params.id")){t.next=9;break}return j.a.dispatch(Object(z.b)({altrpModelUpdated:!1})),t.next=4,new U.a({route:"/ajax/models/".concat(this.props.model.modelName)}).get(this.props.match.params.id);case 4:(e=t.sent).altrpModelUpdated=!0,j.a.dispatch(Object(z.b)(e)),t.next=10;break;case 9:j.a.dispatch(Object(z.b)({altrpModelUpdated:!0}));case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=o()(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:V.a.clear(),_.get(this.props,"model.modelName")===_.get(e,"model.modelName")&&_.get(this.props,"match.params.id")===_.get(e,"match.params.id")||this.changeRouteCurrentModel();case 2:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this;return this.props.allowed?O.a.createElement(F.Scrollbars,{style:{zIndex:99999},autoHide:!0,autoHideTimeout:500,autoHideDuration:200,renderTrackVertical:function(t){var e=t.style,r=P()(t,["style"]);return O.a.createElement("div",D()({className:"altrp-scroll__vertical-track",style:e},r))}},O.a.createElement("div",{className:"route-content"},this.state.areas.map((function(e){return O.a.createElement(T,D()({},e,{area:e,page:t.props.id,models:[t.props.model],key:"appArea_"+e.id}))})))):O.a.createElement(k.a,{to:this.props.redirect||"/"})}}]),s}(g.Component),L=Object(k.g)(K),Q=r(47),W=r.n(Q);function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){C()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var $=function(t){m()(r,t);var e=Z(r);function r(t){var n;return i()(this,r),(n=e.call(this,t)).state={elementStyles:[]},window.stylesModule=f()(n),window.stylesModuleResolve(f()(n)),n}return l()(r,[{key:"addElementStyles",value:function(t,e){if(e){var r=!1,n=W()(this.state.elementStyles);n.forEach((function(n){n.elementId===t&&(r=!0,n.styles=e)})),r||n.push({elementId:t,styles:e}),this.setState(Y(Y({},this.state),{},{elementStyles:n}))}}},{key:"render",value:function(){return O.a.createElement("div",{className:"styles-container"},this.state.elementStyles.map((function(t){return O.a.createElement("style",{"data-styles-id":t.elementId,key:t.elementId},t.styles)})))}}]),r}(g.Component);function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var et=function(t){m()(r,t);var e=tt(r);function r(t){return i()(this,r),e.call(this,t)}return l()(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return O.a.createElement(R.a,null,O.a.createElement("div",{className:"front-app-content"},O.a.createElement(k.d,null,this.props.routes.map((function(t){return O.a.createElement(k.b,{key:t.id,children:O.a.createElement(L,t),path:t.path,exact:!0})})))),O.a.createElement($,null))}}]),r}(g.Component);var rt,nt=Object(E.b)((function(t){return{routes:t.appRoutes.routes}}))(et),at=r(60);function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b()(t);if(e){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}rt=function(t){m()(n,t);var e,r=ct(n);function n(t){var e;return i()(this,n),e=r.call(this,t),window.frontApp=f()(e),e.getRoutes(),e}return l()(n,[{key:"getRoutes",value:function(){var t=this;return Object(w.b)().then((function(e){t.routes=e.default}))}},{key:"componentDidMount",value:(e=o()(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new U.a({route:"/ajax/current-user"}).getAll();case 2:e=(e=t.sent).data,j.a.dispatch(Object(at.b)(e));case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){return O.a.createElement(E.a,{store:j.a},O.a.createElement(nt,null))}}]),n}(g.Component);e.default=rt}}]);
//# sourceMappingURL=dc3f3e05147feb9eefbf.bundle.js.map