(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{322:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(9),l=a.n(c),i=a(12),s=a.n(i),o=a(48),u=a.n(o),m=a(119),d=function(){return n.a.createElement("div",{className:"spinner-container"},n.a.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")))},E=function(e){var t=e.text;return n.a.createElement("div",{className:"spinner-container"},n.a.createElement("div",{className:"spinner-container__text"},t||"Нет данных"))},h=a(166),f=a.n(h),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,a,r){return[t,0===r?"?":"&",a=encodeURIComponent(a),"=",encodeURIComponent(e[a])].join("")}),"")},v=function(){var e=s()(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p(a),e.prev=1,e.next=4,f()(t+r);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{status:500});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(e){var t,a=e.widget,c=e.width,i=void 0===c?300:c,o=e.height,h=void 0===o?300:o,f=Object(r.useState)(!1),p=u()(f,2),b=p[0],g=p[1],w=Object(r.useState)([]),y=u()(w,2),k=y[0],S=y[1],O=Object(r.useCallback)(s()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,v(a.source,a.filter);case 3:200===(t=e.sent).status&&(S(t.data),g(!1));case 5:case"end":return e.stop()}}),e)}))),[a]);if(Object(r.useEffect)((function(){O()}),[O]),b)return n.a.createElement(d,null);if(0===k.length)return n.a.createElement(E,null);var j=k.map((function(e,t){return n.a.createElement(m.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.BarChart,{height:h,width:i,data:k,series:n.a.createElement(m.BarSeries,{colorScheme:a.options.colorScheme,bar:n.a.createElement(m.Bar,{gradient:n.a.createElement(m.Gradient,{stops:[n.a.createElement(m.GradientStop,{stopOpacity:1})]})})})}),(null===(t=a.options)||void 0===t?void 0:t.legend)&&n.a.createElement(m.DiscreteLegend,{className:"discrete__legend",orientation:a.options.legend,entries:j}))},g=function(e){var t,a=e.widget,c=e.width,i=void 0===c?300:c,o=e.height,h=void 0===o?300:o,f=Object(r.useState)(!1),p=u()(f,2),b=p[0],g=p[1],w=Object(r.useState)([]),y=u()(w,2),k=y[0],S=y[1],O=Object(r.useCallback)(s()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,v(a.source,a.filter);case 3:200===(t=e.sent).status&&(S(t.data),g(!1));case 5:case"end":return e.stop()}}),e)}))),[a]);if(Object(r.useEffect)((function(){O()}),[O]),b)return n.a.createElement(d,null);if(0===k.length)return n.a.createElement(E,null);var j=k.map((function(e,t){return n.a.createElement(m.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.PieChart,{height:h,width:i,data:k||[],series:n.a.createElement(m.PieArcSeries,{explode:a.options.explode,colorScheme:a.options.colorScheme,label:n.a.createElement(m.PieArcLabel,{fontSize:12,fontFill:"#000000"})})}),(null===(t=a.options)||void 0===t?void 0:t.legend)&&n.a.createElement(m.DiscreteLegend,{className:"discrete__legend",orientation:a.options.legend,entries:j}))},w=a(198),y=a(201),k=a(200),S=function(){return n.a.createElement("div",{className:"spinner-container"},n.a.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")))},O=function(e){var t=e.widget,a=e.width,c=void 0===a?300:a,i=e.height,o=void 0===i?300:i,d=e.color,h=void 0===d?"#FFD51F":d,f=Object(r.useState)([]),p=u()(f,2),b=p[0],g=p[1],O=Object(r.useState)(!1),j=u()(O,2),L=j[0],x=j[1],A=Object(r.useCallback)(s()(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,v(t.source,t.filter);case 3:200===(a=e.sent).status&&"string"!=typeof a.data&&(r=a.data.map((function(e){var t=new Date(e.key);if(t)return{key:t,data:e.data}})),g(r),x(!1));case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(r.useEffect)((function(){A()}),[A]),L?n.a.createElement(S,null):Array.isArray(b)&&0!==b.length?n.a.createElement(n.a.Fragment,null,n.a.createElement(m.AreaChart,{height:o,width:c,data:b,xAxis:n.a.createElement(m.LinearXAxis,{type:"time",tickSeries:n.a.createElement(m.LinearXAxisTickSeries,{label:n.a.createElement(m.LinearXAxisTickLabel,{format:function(e){var t=b.slice().shift(),a=b.slice().pop(),r=parseInt(Object(y.a)(t.key,a.key,{unit:"month"}));return r>=0&&r<=12?Object(w.a)(e,"d LLL",{locale:k.a}):Object(w.a)(e,"d MMM yy",{locale:k.a})}})})}),series:n.a.createElement(m.AreaSeries,{type:t.options.type||"standard",markLine:n.a.createElement(m.MarkLine,{strokeWidth:0}),line:n.a.createElement(m.Line,{strokeWidth:0}),area:n.a.createElement(m.Area,{gradient:n.a.createElement(m.Gradient,{color:h,stops:[n.a.createElement(m.GradientStop,{color:h})]})})})})):n.a.createElement(E,null)},j=function(e){var t=e.widget,a=e.width,c=void 0===a?300:a,i=e.height,o=void 0===i?300:i,h=e.strokeWidth,f=void 0===h?3:h,p=Object(r.useState)(!1),b=u()(p,2),g=b[0],S=b[1],O=Object(r.useState)([]),j=u()(O,2),L=j[0],x=j[1],A=Object(r.useCallback)(s()(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,v(t.source,t.filter);case 3:200===(a=e.sent).status&&(r=a.data.map((function(e){var t=new Date(e.key);if(t)return{key:t,data:e.data}})),x(r),S(!1));case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(r.useEffect)((function(){A()}),[A]),g?n.a.createElement(d,null):0===L.length?n.a.createElement(E,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.LineChart,{height:o,width:c,data:L,xAxis:n.a.createElement(m.LinearXAxis,{type:"time",tickSeries:n.a.createElement(m.LinearXAxisTickSeries,{label:n.a.createElement(m.LinearXAxisTickLabel,{format:function(e){var t=L.slice().shift(),a=L.slice().pop(),r=parseInt(Object(y.a)(t.key,a.key,{unit:"month"}));return r>=0&&r<=12?Object(w.a)(e,"d MMM",{locale:k.a}):Object(w.a)(e,"d MMM yy",{locale:k.a})}})})}),series:n.a.createElement(m.LineSeries,{line:n.a.createElement(m.Line,{strokeWidth:f}),colorScheme:t.colorScheme})}))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc";return function(a,r){if(!a.hasOwnProperty(e)||!r.hasOwnProperty(e))return 0;var n="string"==typeof a[e]?a[e].toUpperCase():a[e],c="string"==typeof r[e]?r[e].toUpperCase():r[e],l=0;return n>c?l=1:n<c&&(l=-1),"desc"===t?-1*l:l}},x=function(e){var t=e.widget,a=Object(r.useState)([]),c=u()(a,2),i=c[0],o=c[1],m=Object(r.useState)(!1),h=u()(m,2),f=h[0],p=h[1],b=Object(r.useCallback)(s()(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,v(t.source,t.filter);case 3:200===(a=e.sent).status&&(o(a.data.sort(L("data"))),p(!1));case 5:case"end":return e.stop()}}),e)}))),[t]),g=Object(r.useMemo)((function(){return i.reduce((function(e,t){return e+t.data}),0)}),[i]);return Object(r.useEffect)((function(){b()}),[b]),f?n.a.createElement(d,null):0===i.length?n.a.createElement(E,null):t.options.isVertical?n.a.createElement("div",{className:"widget-table"},n.a.createElement("table",{className:"vertical-table"},n.a.createElement("tbody",null,i.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.key),n.a.createElement("td",null,e.data))})),n.a.createElement("tr",null,n.a.createElement("td",null,"ИТОГО"),n.a.createElement("td",null,g))))):n.a.createElement("div",{className:"widget-table"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,i.map((function(e,t){return n.a.createElement("th",{key:t},e.key)})),n.a.createElement("th",null,"ИТОГО"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,i.map((function(e,t){return n.a.createElement("td",{key:t},e.data)})),n.a.createElement("td",null,g)))))},A=function(e){var t,a=e.widget,c=e.width,i=void 0===c?300:c,o=e.height,h=void 0===o?300:o,f=Object(r.useState)([]),p=u()(f,2),b=p[0],g=p[1],w=Object(r.useState)(!1),y=u()(w,2),k=y[0],S=y[1],O=Object(r.useCallback)(s()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,v(a.source,a.filter);case 3:200===(t=e.sent).status&&(g(t.data),S(!1));case 5:case"end":return e.stop()}}),e)}))),[a]);if(Object(r.useEffect)((function(){O()}),[O]),k)return n.a.createElement(d,null);if(0===b.length)return n.a.createElement(E,null);var j=b.map((function(e,t){return n.a.createElement(m.DiscreteLegendEntry,{className:"discrete__legend-item",label:"".concat(e.key," (").concat(e.data,")")})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.PieChart,{height:h,width:i,data:b,series:n.a.createElement(m.PieArcSeries,{doughnut:!0,colorScheme:a.options.colorScheme,label:n.a.createElement(m.PieArcLabel,{fontSize:12,fontFill:"#000000"})})}),(null===(t=a.options)||void 0===t?void 0:t.legend)&&n.a.createElement(m.DiscreteLegend,{className:"discrete__legend",orientation:a.options.legend,entries:j}))};t.default=function(e){var t,a,r=e.settings,c=null===(t=r.query)||void 0===t||null===(a=t.dataSource)||void 0===a?void 0:a.value;if(!c)return n.a.createElement("div",{className:"altrp-chart"},"Choose data for chart");switch(r.type){case"CHART/BAR":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(b,{dataUrl:c,colorScheme:r.colorScheme}));case"CHART/PIE":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(g,{dataUrl:c,colorScheme:r.colorScheme}));case"CHART/DONUT":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(A,{dataUrl:c,colorScheme:r.colorScheme}));case"CHART/LINE":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(j,{dataUrl:c,colorScheme:r.colorScheme}));case"CHART/TABLE":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(x,{dataUrl:c}));case"CHART/AREA":return n.a.createElement("div",{className:"altrp-chart"},n.a.createElement(O,{dataUrl:c,colorScheme:r.colorScheme}));default:return n.a.createElement(n.a.Fragment,null)}}}}]);
//# sourceMappingURL=83f6b447bc230fe946dc.bundle.js.map