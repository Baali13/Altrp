(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{129:function(e,t,r){(e.exports=r(17)(!1)).push([e.i,"",""])},206:function(e,t,r){var n=r(129);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0},o=r(18)(n,a);n.locals&&(e.exports=n.locals),e.hot.accept(129,(function(){var t=r(129);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var r,n=0;for(r in e){if(!t||e[r]!==t[r])return!1;n++}for(r in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},306:function(e,t,r){"use strict";r.r(t);var n=r(93),a=r.n(n),o=r(8),c=r.n(o),l=r(10),i=r.n(l),s=r(12),u=r.n(s),p=r(44),d=r.n(p),f=r(0),m=r.n(f),b=r(204),h=r(152),g=(r(206),r(20)),v=r(7),y=(r(33),r(298)),w=r(19);r(25);function O(){return window.iconsManager||(window.iconsManager=new y.default),window.iconsManager}var j=r(3),E=r.n(j),S=r(4),P=r.n(S),k=r(1),N=r.n(k),C=r(5),D=r.n(C),x=r(6),M=r.n(x),A=r(2),R=r.n(A);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R()(e);if(t){var a=R()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return M()(this,r)}}var V=function(e){D()(o,e);var t,r,n=K(o);function o(e){var t;return E()(this,o),(t=n.call(this,e)).resource=new w.a({route:t.props.route}),t.state={value:t.props.value||"",disabled:!t.props.value},t.changeValue=t.changeValue.bind(N()(t)),t.onChange=t.onChange.bind(N()(t)),t.onKeyDown=t.onKeyDown.bind(N()(t)),t}return P()(o,[{key:"componentDidMount",value:(r=u()(i.a.mark((function e(){var t,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.resource.get(this.props.resourceid);case 4:t=e.sent,this.setState((function(e){return H(H({},e),{},{value:t[r.props.resourceid]||"",disabled:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.changeValue(e)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState((function(e){return H(H({},e),{},{value:t})})),_.isFunction(this.props.changevalue)&&this.props.changevalue(t)}},{key:"changeValue",value:(t=u()(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.value,this.setState((function(e){return H(H({},e),{},{disabled:!0})})),e.next=4,this.resource.put(this.props.resourceid,{value:r,column_value:r});case 4:e.sent,this.setState((function(e){return H(H({},e),{},{disabled:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.className;this.state.disabled&&(e+=" pointer-event-none");var t=H({},this.props);return delete t.changevalue,m.a.createElement("input",a()({},t,{className:e,onBlur:this.changeValue,onKeyDown:this.onKeyDown,onChange:this.onChange,value:this.state.value}))}}]),o}(f.Component);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.settings,r=e.query,n=e.data;e.currentModel;if(!t.tables_columns||!t.tables_columns.length)return m.a.createElement("div",{children:"Please Add Column"});var o={};t.tables_columns.forEach((function(e){e.column_is_default_sorted&&!o.order_by&&(o.order_by=e.accessor,o.order=_.get(e,"column_is_default_sorted_direction","ASC"))}));var c,l,s,p=Object(f.useState)(1),y=d()(p,2),w=y[0],j=y[1],E=r.getCounterStart(w),S=[],P=Object(f.useState)({}),k=d()(P,2),N=k[0],C=k[1],D=Object(f.useState)(o),x=d()(D,2),M=x[0],A=x[1],R=Object(f.useState)({}),I=d()(R,2),H=I[0],K=I[1],F=Object(f.useState)({}),T=d()(F,2),Q=T[0],z=T[1],B=JSON.stringify(H),G=Object(f.useCallback)(function(){var e=u()(i.a.mark((function e(t){var n,a,o,c,l,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:1,a=s.length>2?s[2]:void 0,o=s.length>3?s[3]:void 0,c={page:n},l=JSON.stringify(o),a&&(c=_.assign(a,c)),l.length>2&&(c.filters=l),e.abrupt("return",r.getQueried(c));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());if(r.pageSize){var q=Object(h.b)([r.dataSourceName,w,M,H,r.getParams()],G,{forceFetchOnMount:!0}),L=q.status,U=q.resolvedData,W=q.latestData,X=q.error;S=U||S,c=L,l=X,s=W,Object(f.useEffect)((function(){(null==W?void 0:W.hasMore)&&h.a.prefetchQuery([r.dataSourceName,w+1],G)}),[W,G,w,M,H])}else{var Y=Object(h.c)([r.dataSourceName,r.getParams()],(function(){return r.getResource().getQueried(J(J({},M),{},{filters:B}))}),{forceFetchOnMount:!0}),Z=Y.status,$=Y.data,ee=Y.error;S=$,c=Z,l=ee}var te;te=function(e){var t=[],r=e.tables_columns;return(r=r||[]).forEach((function(e){e.column_name&&e.accessor&&(e._accessor=e.accessor,t.push(e))})),t}(t),S.length||(S=n),_.isArray(S)||(S=[S]),S=S.map((function(e){return e.id===N.rowId?(e[N.column]=N.value,J({},e)):e}));var re=Object(b.useTable)({columns:m.a.useMemo((function(){return te||[]}),[t.tables_columns]),data:m.a.useMemo((function(){return S||[]}),[S])}),ne=re.getTableProps,ae=re.getTableBodyProps,oe=re.headerGroups,ce=re.rows,le=re.prepareRow,ie=function(e){A({order_by:e,order:M&&M.order_by===e?"DESC"===M.order?"ASC":"DESC":"ASC"})},se=function(e,t){j(1);var r=J({},H);t?r[e]=t:delete r[e],K(r)};return m.a.createElement(m.a.Fragment,null,m.a.createElement("table",a()({className:"altrp-table"},ne()),m.a.createElement("thead",{className:"altrp-table-head"},function(e){var t=e.additional_rows;if(!_.isArray(t))return"";return t.map((function(e){return e.additional_cells=e.additional_cells||[],m.a.createElement("tr",{key:"additional-row-".concat(e.id)},e.additional_cells.map((function(t){return t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,m.a.createElement("th",{key:"additional-cell-".concat(e.id,"-").concat(t.id),role:"columnheader",className:"altrp-table-th",colSpan:t.colspan,rowSpan:t.rowspan},t.title)})))}))}(t),oe.map((function(e){return m.a.createElement("tr",a()({},e.getHeaderGroupProps(),{className:"altrp-table-tr"}),e.headers.map((function(e){return function(e){var t=e.column,r=e.sortSetting,n=e.sortingHandler,o=e.filterSetting,c=e.filterHandler,l=t.column_width,i=t.column_header_alignment,s=J({},t.getHeaderProps()),u={};l&&(u.width=l);i&&(u.textAlign=i);s.className="altrp-table-th",t.column_is_sorted&&(s.onClick=function(){return n(t._accessor)},s.className+=" clickable");t.column_width&&(s.width=t.column_width+"%");var p=t.render("column_name");return m.a.createElement("th",a()({},s,{style:u}),p,r&&t.column_is_sorted&&r.order_by===t._accessor&&("DESC"===r.order?O().renderIcon("chevron",{className:"rotate-180 sort-icon "}):O().renderIcon("chevron",{className:"sort-icon"})),t.column_is_filtered&&m.a.createElement("label",{className:"altrp-label"},m.a.createElement("input",{type:"text",onClick:function(e){e.stopPropagation()},onChange:function(e){e.stopPropagation();var r=e.target.value;c(t._accessor,r)},value:o[t._accessor]||"",className:"altrp-field"})))}({column:e,sortSetting:M,sortingHandler:ie,filterSetting:H,filterHandler:se})})))}))),m.a.createElement("tbody",a()({},ae(),{className:"altrp-table-tbody ".concat(t.table_style_table_striple_style?" altrp-table-tbody--striped":"")}),"error"===c?m.a.createElement("tr",null,m.a.createElement("td",null,l.message)):"loading"===c?m.a.createElement("tr",null,m.a.createElement("td",null,"Loading")):ce.map((function(e,r){return le(e),m.a.createElement("tr",a()({},e.getRowProps(),{className:"altrp-table-tr ".concat(t.table_hover_row?"altrp-table-background":"")}),e.cells.map((function(r,n){var o=r.render("Cell"),c=Object(v.c)()?"a":g.b,l=r.column.column_body_alignment?{textAlign:r.column.column_body_alignment}:{},i=J({},r.getCellProps()),s=r.value,u="";if(te[n].column_is_editable&&te[n].column_edit_url){var p=Object(v.f)(te[n].column_edit_url,e.original);u=m.a.createElement(V,{className:"altrp-inherit altrp-table-td__double-click-content",route:p,resourceid:"",changevalue:function(t){C({value:t,rowId:e.original.id,column:te[n]._accessor})},value:s}),i.onDoubleClick=function(){Q.column===te[n]._accessor&&Q.rowId===e.original.id?z({}):z({column:te[n]._accessor,rowId:e.original.id})}}var d="altrp-table-td";return Q.column===te[n]._accessor&&e.original.id===Q.rowId&&(d+=" altrp-table-td_double-clicked"),t.table_hover_row||(d+=" altrp-table-background"),_.isObject(r.value)&&(o=""),o=te[n].column_link&&e.original.id?m.a.createElement(c,{to:Object(v.f)(te[n].column_link,e.original),className:"altrp-inherit altrp-table-td__default-content"},o):m.a.createElement("span",{className:"altrp-inherit altrp-table-td__default-content"},o),"##"===r.column._accessor.trim()&&(o=E++),m.a.createElement("td",a()({},i,{className:d,style:l}),o,u)})))})))),"prev-next"===r.paginationType&&r.pageSize?m.a.createElement("div",{className:"altrp-pagination"},m.a.createElement("button",{className:"altrp-pagination__previous",onClick:function(){j((function(e){return Math.max(e-1,0)})),z({}),C({})},disabled:1===w},t.prev_text||"Previous Page"),m.a.createElement("div",{className:"altrp-pagination__count"},t.current_page_text||"Current Page:",w),m.a.createElement("button",{className:"altrp-pagination__next",onClick:function(){C({}),z({}),j((function(e){return s&&s.hasMore?e+1:e}))},disabled:!s||!s.hasMore},t.next_text||"Next Page")):"")}}}]);
//# sourceMappingURL=54856925497bb66d6f2b.bundle.js.map