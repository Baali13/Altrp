(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{66:function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r),i=n(4),a=n.n(i),u=function(){function t(e){if(o()(this,t),this.route=e.route,!this.route)throw"Нужен route"}return a()(t,[{key:"get",value:function(t){if(!t)throw'Get only by "id"';var e=this.route+"/"+t;return fetch(e,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"getAll",value:function(){var t=this.route;return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"post",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t._token=_token,e=e||{"Content-Type":"application/json"};var n={method:"POST",body:JSON.stringify(t),headers:e};return fetch(this.route,n).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"postFiles",value:function(t,e){String(Math.random()).slice(2);e=e||"image";var n={"X-CSRF-TOKEN":_token},r=new FormData;console.log(t);for(var o=0;o<t.length;o++)t[o].size>10485760||0!==t[o].type.indexOf(e)?console.log(t[o]):r.append("files[".concat(o,"]"),t[o]);var i={method:"POST",body:r,headers:n};return fetch(this.route,i).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"put",value:function(t,e){e._token=_token;var n={method:"put",body:JSON.stringify(e),headers:{"X-CSRF-TOKEN":_token,"Content-Type":"application/json"}},r=this.route+"/"+t;return fetch(r,n).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"delete",value:function(t){var e={method:"delete",headers:{"X-CSRF-TOKEN":_token,"Content-Type":"application/json"}},n=this.route+"/"+t;return fetch(n,e).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"getOptions",value:function(){var t=this.route+"/options";return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}}]),t}(),s=function t(){o()(this,t)},c=function(){function t(){o()(this,t)}return a()(t,null,[{key:"areaFabric",value:function(e){var n=new t;return n.settings=e.settings,n.id=e.id,n.template=new s,n.template.data=JSON.parse(e.template.data),n.template.id=e.template.id,n}}]),t}();function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=function(){function t(e,n){o()(this,t),this.id=e,this.path=n}return a()(t,null,[{key:"routeFabric",value:function(e){var n=new t(e.id,e.path);n.areas=[];var r,o=f(e.areas);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.areas.push(c.areaFabric(i))}}catch(t){o.e(t)}finally{o.f()}return n}}]),t}(),p=n(44),y=n(40);function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m=function(){function t(){o()(this,t),this.resource=new u({route:"/ajax/routes"}),this.loadRoutes()}return a()(t,[{key:"loadRoutes",value:function(){this.resource.getAll().then((function(t){var e,n=[],r=d(t.pages);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(h.routeFabric(o))}}catch(t){r.e(t)}finally{r.f()}p.a.dispatch(Object(y.b)(n))})).catch((function(t){console.error(t)}))}}]),t}();e.default=new m}}]);
//# sourceMappingURL=4.bundle.js.map