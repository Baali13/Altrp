{"version":3,"sources":["widgets/index.js","widgets/Table/sourceTypes.js","widgets/Table/helpers/getDataFromApi.js","hooks/useWidgetSettings.js","widgets/Button/index.js","widgets/Divider/index.js","widgets/Image/index.js","widgets/Link/index.js","widgets/News/index.js","../node_modules/react-bootstrap/esm/Table.js","widgets/Table/index.js","components/painter/controls/WysiwygInlineControl.js","widgets/Text/index.js"],"names":["sourceTypes","API","CUSTOM","RENDER","sourceTypesList","name","value","getDataFromApi","api","a","axios","req","data","useWidgetSettings","property","defaultValue","dispatch","useDispatch","sections","useSelector","present","selectedWidget","sectionIndex","columnIndex","rowIndex","isNumber","widget","columns","settings","mutate","get","params","newSettings","set","changeWidget","ButtonTag","props","text","Divider","style","borderTopWidth","parseInt","size","borderTopColor","color","breakAfter","Image","alt","src","width","Link","className","isButton","href","url","target","News","console","log","image","title","map","item","index","key","Table","React","forwardRef","_ref","ref","bsPrefix","striped","bordered","borderless","hover","variant","responsive","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","dataFrom","variable","rows","useState","header","setHeader","setData","useLayoutEffect","Object","keys","row","keyRow","entries","dangerouslySetInnerHTML","__html","String","renderData","WysiwygInlineControl","onChange","setText","editable","setEditable","draggable","onDoubleClick","onDragStart","e","stopPropagation","preventDefault","onEditorChange","content","onBlur","inline","disabled","init","menubar","contextmenu","plugins","toolbar","table_toolbar","Text"],"mappings":"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","file":"static/js/8.8f3b4be6.chunk.js","sourcesContent":["export { default as Button } from \"./Button\";\nexport { default as Divider } from \"./Divider\";\nexport { default as Image } from \"./Image\";\nexport { default as Link } from \"./Link\";\nexport { default as News } from \"./News\";\nexport { default as Table } from \"./Table\";\nexport { default as Text } from \"./Text\";\n","export const sourceTypes = {\n  API: \"api\",\n  CUSTOM: \"custom\",\n  RENDER: \"rendering\",\n};\n\nexport const sourceTypesList = [\n  { name: \"API\", value: sourceTypes.API },\n  { name: \"В ручную\", value: sourceTypes.CUSTOM },\n  { name: \"Для рендеринга\", value: sourceTypes.RENDER },\n];\n","import axios from \"axios\";\n\nconst getDataFromApi = async (api) => {\n  const req = await axios(api);\n  return req.data;\n};\n\nexport default getDataFromApi;\n","import mutate from \"dot-prop-immutable\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { changeWidget } from \"../store/sections/actions\";\nimport { isNumber } from \"../helpers/number\";\n\nconst useWidgetSettings = (property, defaultValue) => {\n  const dispatch = useDispatch();\n  // Получаем секции\n  const sections = useSelector(({ sections }) => sections.present.sections);\n\n  // Получаем позицию выбранного виджета в массиве\n  const { sectionIndex, columnIndex, rowIndex } = useSelector(\n    ({ sections }) => sections.present.selectedWidget\n  );\n\n  // Если виджет не выбран то выводим undefined\n  if (!isNumber(sectionIndex)) return [{}, () => {}];\n\n  // Получаем данные виджета\n  const widget = sections[sectionIndex].columns[columnIndex][rowIndex];\n\n  let settings = {};\n\n  // Если указано конкретное свойство, возвращаем только его\n  if (widget && property) {\n    //console.log(\"widget.params\", widget.params);\n    settings = mutate.get(widget.params, property) || defaultValue;\n  } else if (widget) {\n    settings = widget.params;\n  }\n\n  // Записываем новые настройки\n  const setSettings = (params) => {\n    if (property) {\n      const newSettings = mutate.set(widget.params, property, params);\n      dispatch(changeWidget(newSettings));\n    } else {\n      dispatch(changeWidget(params));\n    }\n  };\n\n  return [settings, setSettings];\n};\n\nexport default useWidgetSettings;\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nconst ButtonTag = (props) => {\n  return <Button {...props}>{props.text}</Button>;\n};\n\nexport default ButtonTag;\n","import React from \"react\";\n\nconst Divider = (props) => {\n  return (\n    <hr\n      style={{\n        borderTopWidth: parseInt(props.size) || 2,\n        borderTopColor: props.color,\n        breakAfter: props.breakAfter,\n      }}\n    />\n  );\n};\n\nexport default Divider;\n","import React from \"react\";\n\nconst Image = (props) => {\n  return <img alt={props.alt} src={props.src} width={props.width} />;\n};\n\nexport default Image;\n","import React from \"react\";\n\nconst Link = (props) => {\n  return (\n    <a\n      className={props.isButton ? \"btn btn-primary\" : \"\"}\n      href={props.url}\n      target={props.target}\n    >\n      {props.text}\n    </a>\n  );\n};\n\nexport default Link;\n","import React from \"react\";\n\nimport \"./news.scss\";\n\nconst News = (props) => {\n  console.log(\"News init\");\n  //const news = await axios.get(`/api/posts/${props.category}`).data;\n  const news = [\n    {\n      image: \"https://picsum.photos/seed/1/300/200\",\n      title: \"Новость номер 1\",\n      text:\n        \"Текст новости почти без форматирования и тэгов! <b>Но они понадобяться.</b>\",\n    },\n    {\n      image: \"https://picsum.photos/seed/2/300/200\",\n      title: \"Новость номер 2\",\n      text:\n        \"Текст новости почти без форматирования и тэгов! <b>Но они понадобяться.</b>\",\n    },\n    {\n      image: \"https://picsum.photos/seed/3/300/200\",\n      title: \"Новость номер 3\",\n      text:\n        \"Текст новости почти без форматирования и тэгов! <b>Но они понадобяться.</b>\",\n    },\n  ];\n\n  return news.map((item, index) => (\n    <div className=\"news\" key={index}>\n      <div className=\"news__image\">\n        <img src={item.image} alt={item.title} />\n      </div>\n      <div className=\"news__body\">\n        <h2 className=\"news__body-title\">{item.title}</h2>\n        <div className=\"news__body-text\">{item.text}</div>\n      </div>\n    </div>\n  ));\n};\n\nexport default News;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React, { useLayoutEffect, useState } from \"react\";\nimport { Table as T } from \"react-bootstrap\";\nimport { sourceTypes } from \"./sourceTypes\";\nimport getDataFromApi from \"./helpers/getDataFromApi\";\n\nconst Table = ({\n  dataFrom,\n  api,\n  variable,\n  columns,\n  rows,\n  striped,\n  variant,\n  bordered,\n  size,\n  hover,\n  borderless,\n}) => {\n  const [header, setHeader] = useState(columns || []);\n  const [data, setData] = useState(rows || []);\n\n  useLayoutEffect(() => {\n    if (dataFrom === sourceTypes.API && api) {\n      (async () => {\n        const data = await getDataFromApi(api);\n        if (data) {\n          setHeader(Object.keys(data[0]));\n          setData(data);\n        }\n      })();\n    }\n  }, [api, dataFrom]);\n\n  const renderData = () => {\n    switch (dataFrom) {\n      case sourceTypes.RENDER:\n        return (\n          <>\n            @foreach(${variable} as $item)\n            {data.map((row, keyRow) => (\n              <tr key={keyRow}>\n                {Object.entries(row).map(([key, value]) => (\n                  <td\n                    key={key}\n                    dangerouslySetInnerHTML={{\n                      __html: `{{ $item->${value} }}`,\n                    }}\n                  ></td>\n                ))}\n              </tr>\n            ))}\n            @endforeach\n          </>\n        );\n\n      default:\n        return data.map((row, keyRow) => (\n          <tr key={keyRow}>\n            {Object.entries(row).map(([key, value]) => (\n              <td key={key}>{String(value)}</td>\n            ))}\n          </tr>\n        ));\n    }\n  };\n\n  return (\n    <T\n      size={size}\n      variant={variant}\n      striped={striped}\n      bordered={bordered}\n      hover={hover}\n      borderless={borderless}\n    >\n      <thead>\n        <tr>\n          {header.map((item, index) => (\n            <th key={index}>{item}</th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>{renderData()}</tbody>\n    </T>\n  );\n};\n\nexport default Table;\n","import React, { useState } from \"react\";\nimport { Editor } from \"@tinymce/tinymce-react\";\n\nimport \"tinymce/tinymce.min.js\";\nimport \"tinymce/icons/default\";\nimport \"tinymce/themes/silver\";\nimport \"tinymce/plugins/insertdatetime\";\nimport \"tinymce/plugins/table\";\nimport \"tinymce/plugins/autolink\";\nimport \"tinymce/plugins/code\";\n\nimport \"tinymce/skins/ui/oxide/skin.min.css\";\nimport \"tinymce/skins/ui/oxide/content.inline.min.css\";\n\nconst WysiwygInlineControl = ({ value, onChange }) => {\n  const [text, setText] = useState(value);\n  const [editable, setEditable] = useState(false);\n\n  return (\n    <div\n      draggable\n      onDoubleClick={() => setEditable(true)}\n      onDragStart={(e) => {\n        if (editable) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }}\n    >\n      <Editor\n        value={text}\n        onEditorChange={(content) => setText(content)}\n        onBlur={() => onChange(text)}\n        inline={true}\n        disabled={!editable}\n        init={{\n          menubar: false,\n          contextmenu: false,\n          plugins: [\"autolink insertdatetime table code\"],\n          toolbar: `styleselect table insertdatetime | bold italic underline | align | forecolor | bullist numlist | outdent indent |\n           undo redo | removeformat code`,\n          table_toolbar: \"\",\n        }}\n      />\n    </div>\n  );\n};\n\nexport default WysiwygInlineControl;\n","import React from \"react\";\nimport useWidgetSettings from \"../../hooks/useWidgetSettings\";\nimport WysiwygInlineControl from \"../../components/painter/controls/WysiwygInlineControl\";\n\nconst Text = (props) => {\n  const [, setText] = useWidgetSettings(\"text\");\n\n  return <WysiwygInlineControl value={props.text} onChange={(text) => setText(text)} />;\n};\n\nexport default Text;\n"],"sourceRoot":""}