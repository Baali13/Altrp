{"version":3,"sources":["webpack:///./resources/modules/admin/src/sass/components/admin-pagination.scss","webpack:///./resources/modules/editor/src/sass/assets-browser.scss","webpack:///./resources/modules/admin/src/svgs/left.svg","webpack:///./resources/modules/editor/src/js/classes/AltrpModel.js","webpack:///./resources/modules/editor/src/js/classes/Resource.js","webpack:///./resources/modules/admin/src/js/store/modal-settings/reducers.js","webpack:///./resources/modules/admin/src/js/store/admin-state/reducers.js","webpack:///./resources/modules/admin/src/js/store/admin-logo/reducers.js","webpack:///./resources/modules/admin/src/js/store/ace-editor/reducers.js","webpack:///./resources/modules/admin/src/js/store/reducers.js","webpack:///./resources/modules/admin/src/js/store/store.js","webpack:///./resources/modules/admin/src/js/store/modal-settings/actions.js","webpack:///./resources/modules/editor/src/js/classes/AltrpUser.js","webpack:///./resources/modules/front-app/src/js/store/current-user/reducers.js","webpack:///./resources/modules/front-app/src/js/store/current-user/actions.js","webpack:///./resources/modules/front-app/src/js/store/current-model/reducers.js","webpack:///./resources/modules/front-app/src/js/store/current-model/actions.js","webpack:///./resources/modules/admin/src/sass/admin-style.scss?e3af","webpack:///./resources/modules/admin/src/sass/components/admin-pagination.scss?b53c","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?44cc","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./resources/modules/admin/src/svgs/admin__logo.svg","webpack:///./resources/modules/admin/src/components/AdminLogo.js","webpack:///./resources/modules/admin/src/svgs/bars.svg","webpack:///./resources/modules/admin/src/components/AdminTable.js","webpack:///./resources/modules/admin/src/components/AllPages.js","webpack:///./resources/modules/admin/src/js/helpers.js","webpack:///./resources/modules/admin/src/components/Updates.js","webpack:///./resources/modules/admin/src/components/AutoUpdateInput.js","webpack:///./resources/modules/admin/src/components/StylesSettings.js","webpack:///./resources/modules/admin/src/components/settings/Import.js","webpack:///./resources/modules/admin/src/components/AdminSettings.js","webpack:///./resources/modules/admin/src/svgs/assets.svg","webpack:///./resources/modules/admin/src/svgs/dashboard.svg","webpack:///./resources/modules/admin/src/svgs/pages.svg","webpack:///./resources/modules/admin/src/svgs/plugins.svg","webpack:///./resources/modules/admin/src/svgs/reports.svg","webpack:///./resources/modules/admin/src/svgs/settings.svg","webpack:///./resources/modules/admin/src/svgs/tables.svg","webpack:///./resources/modules/admin/src/svgs/templates.svg","webpack:///./resources/modules/admin/src/svgs/users.svg","webpack:///./resources/modules/admin/src/svgs/vector.svg","webpack:///./resources/modules/admin/src/svgs/user.svg","webpack:///./resources/modules/admin/src/components/users/Users.js","webpack:///./resources/modules/admin/src/components/altrp-select/AltrpSelect.js","webpack:///./resources/modules/admin/src/components/users/UserForm.js","webpack:///./resources/modules/admin/src/components/users/AddUserPage.js","webpack:///./resources/modules/admin/src/components/users/EditUserPage.js","webpack:///./resources/modules/admin/src/components/users/UsersTools.js","webpack:///./resources/modules/admin/src/components/Assets.js","webpack:///./resources/modules/admin/src/components/dashboard/widgetTypes.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/Spinner.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/EmptyWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/services/getWidgetData.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicBarChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicPieChart.js","webpack:///./resources/modules/admin/src/components/dashboard/Spinner.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicAreaChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicLineChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicTableWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicDonutChart.js","webpack:///./resources/modules/admin/src/components/dashboard/WidgetDiagram.js","webpack:///./resources/modules/admin/src/components/dashboard/dataSources.js","webpack:///./resources/modules/admin/src/components/dashboard/EditWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/AddWidget.js","webpack:///./resources/modules/admin/src/components/Dashboard.js","webpack:///./resources/modules/admin/src/components/Plugins.js","webpack:///./resources/modules/admin/src/components/Reports.js","webpack:///./resources/modules/admin/src/components/Tables.js","webpack:///./resources/modules/admin/src/svgs/right.svg","webpack:///./resources/modules/admin/src/components/Pagination.js","webpack:///./resources/modules/admin/src/components/Templates.js","webpack:///./resources/modules/admin/src/svgs/times.svg","webpack:///./resources/modules/admin/src/components/AdminModal.js","webpack:///./resources/modules/admin/src/components/AddPage.js","webpack:///./resources/modules/admin/src/svgs/bell.svg","webpack:///./resources/modules/admin/src/svgs/logout.svg","webpack:///./resources/modules/admin/src/components/UserTopPanel.js","webpack:///./resources/modules/editor/src/js/store/current-element/reducers.js","webpack:///./resources/modules/editor/src/js/store/template-status/reducers.js","webpack:///./resources/modules/editor/src/js/store/element-drag/reducers.js","webpack:///./resources/modules/editor/src/js/store/element-drag/actions.js","webpack:///./resources/modules/editor/src/js/store/current-context-element/reducers.js","webpack:///./resources/modules/editor/src/js/store/dynamic-content/reducers.js","webpack:///./resources/modules/editor/src/js/store/controller-value/reducers.js","webpack:///./resources/modules/editor/src/js/store/setting-section/reducers.js","webpack:///./resources/modules/editor/src/js/store/active-settings-tab/reducers.js","webpack:///./resources/modules/editor/src/js/store/state-section/reducers.js","webpack:///./resources/modules/editor/src/js/store/responsive-switcher/reducers.js","webpack:///./resources/modules/editor/src/js/store/template-data/reducers.js","webpack:///./resources/modules/editor/src/js/store/reducers.js","webpack:///./resources/modules/editor/src/js/store/current-element/actions.js","webpack:///./resources/modules/editor/src/js/store/current-context-element/actions.js","webpack:///./resources/modules/editor/src/js/store/template-status/actions.js","webpack:///./resources/modules/editor/src/js/store/dynamic-content/actions.js","webpack:///./resources/modules/editor/src/js/store/controller-value/actions.js","webpack:///./resources/modules/editor/src/js/store/setting-section/actions.js","webpack:///./resources/modules/editor/src/js/store/active-settings-tab/actions.js","webpack:///./resources/modules/editor/src/js/store/state-section/actions.js","webpack:///./resources/modules/editor/src/js/store/responsive-switcher/actions.js","webpack:///./resources/modules/editor/src/js/store/template-data/actions.js","webpack:///./resources/modules/editor/src/js/store/store.js","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/js/helpers.js","webpack:///./resources/modules/admin/src/components/Models.js","webpack:///./resources/modules/admin/src/components/models/EditModelForm.js","webpack:///./resources/modules/admin/src/components/models/EditModel.js","webpack:///./resources/modules/admin/src/components/models/FieldCalculationLogic.js","webpack:///./resources/modules/admin/src/components/models/AddFieldForm.js","webpack:///./resources/modules/admin/src/components/models/EditField.js","webpack:///./resources/modules/admin/src/components/models/AddRelationForm.js","webpack:///./resources/modules/admin/src/components/models/AddRelation.js","webpack:///./resources/modules/admin/src/components/models/AddDataSourceForm.js","webpack:///./resources/modules/admin/src/components/models/AddDataSource.js","webpack:///./resources/modules/admin/src/components/sql-builder/AggregateComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/JoinComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/helpers.js","webpack:///./resources/modules/admin/src/components/sql-builder/ConditionComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/OrderByComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/SQLBuilderForm.js","webpack:///./resources/modules/admin/src/components/SQLBuilder.js","webpack:///./resources/modules/admin/src/components/models/SqlEditor.js","webpack:///./resources/modules/admin/src/components/AccessOptions.js","webpack:///./resources/modules/admin/src/components/access/RoleForm.js","webpack:///./resources/modules/admin/src/components/access/RolePage.js","webpack:///./resources/modules/admin/src/components/access/PermissionForm.js","webpack:///./resources/modules/admin/src/components/access/PermissionPage.js","webpack:///./resources/modules/admin/src/components/tables/TableForm.js","webpack:///./resources/modules/admin/src/components/tables/AddTable.js","webpack:///./resources/modules/admin/src/components/tables/EditTable.js","webpack:///./resources/modules/admin/src/components/tables/MigrationsTable.js","webpack:///./resources/modules/admin/src/components/tables/AddModelPage.js","webpack:///./resources/modules/admin/src/components/tables/AccessorsPage.js","webpack:///./resources/modules/admin/src/components/tables/AddControllerPage.js","webpack:///./resources/modules/admin/src/components/tables/SettingTable.js","webpack:///./resources/modules/admin/src/components/tables/AddMigrationPage.js","webpack:///./resources/modules/admin/src/components/AdminVersion.js","webpack:///./resources/modules/admin/src/components/SQLEditors.js","webpack:///./resources/modules/admin/src/Admin.js","webpack:///./resources/modules/admin/src/js/store/admin-state/actions.js","webpack:///./resources/modules/editor/src/js/store/assets-browser/actions.js","webpack:///./resources/modules/admin/src/js/store/admin-logo/actions.js","webpack:///./resources/modules/editor/src/js/store/assets-browser/reducers.js","webpack:///./resources/modules/admin/src/js/store/ace-editor/actions.js","webpack:///./resources/modules/editor/src/js/consts.js","webpack:///./resources/modules/admin/src/sass/admin-style.scss","webpack:///./resources/modules/front-app/src/js/helpers.js"],"names":["escape","module","exports","push","i","styles","props","width","height","fill","xmlns","d","stroke","strokeWidth","AltrpModel","data","this","cloneDeep","name","defaultValue","get","Resource","route","id","url","fetch","method","headers","then","res","ok","Promise","reject","text","status","json","searchString","indexOf","_token","options","body","JSON","stringify","files","fileType","String","Math","random","slice","formData","FormData","console","log","length","size","type","append","params","queryString","defaultState","fields","active","title","submitButton","submit","success","adminEnable","window","admin_logo","AceEditor","combineReducers","modalSettings","state","action","SET_MODAL_SETTINGS","TOGGLE_MODAL","adminState","SET_DISABLED","SET_ENABLE","adminLogo","SET_LOGO","logoData","assetsManagerSettings","assetsSettingsReducer","aceEditorReducer","SET_ACE","store","createStore","rootReducer","setModalSettings","settings","toggleModal","AltrpUser","getProperty","permissions","ownPermissions","_","find","ownPermission","role","parseInt","roles","ownRoles","ownRole","isArray","hasPermissions","hasRoles","defaultModel","currentUserReducer","user","currentModelReducer","model","content","transform","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","keys","Object","resolve","cx","cy","r","AdminLogo","href","target","className","assetType","renderAsset","Component","connect","AdminTable","filterByKeyboard","isFunction","value","search","onChange","changeHandler","columns","column","rows","row","index","tag","children","editUrl","Link","to","pathname","is_button","button","onClick","is_boolean","toString","React","createElement","quickActions","quickAction","item","replace","confirm","resource","response","after","AllPages","getPages","getAll","setState","pages","redirect","location","assign","iconsManager","IconsManager","logout","post","titleToName","str","split","char","isUndefined","join","transliterate","toLowerCase","objectDeepCleaning","collection","Array","hasOwnProperty","deleteEmptyPropsDeep","deleteProps","forEach","isEmpty","Updates","needUpdate","updateAltrp","bind","dispatch","setAdminDisable","result","setNeedUpdate","setAdminEnable","setTimeout","document","reload","updateMessage","AutoUpdateInput","disabled","changeValue","onKeyDown","resourceid","keyCode","newValue","changevalue","put","column_value","inputProps","onBlur","StylesSettings","htmlFor","Import","AdvancedSettings","lazy","AdminSettings","switchTab","activeTab","hash","selectedIndex","onSelect","fallback","attr","viewBox","data-name","Users","role_filter","users_result","placeholder","aria-controls","full_name","email","last_login_at","renderScrollbar","autoHeight","AltrpSelect","loadOptions","callback","optionsResource","optionsRoute","customStyles","menuPortal","base","zIndex","selectProps","onInputChange","noOptionsMessage","menuPortalTarget","menuPlacement","menuPosition","components","MenuList","captureMenuScroll","UserForm","changeRolesHandler","usermeta","_roles","changePermissionsHandler","permission","_permissions","errors","redirectAfterSave","redirectAfterError","redirect_error_url","rolesOptions","permissionsOptions","saveUser","user_data","usermeta_data","preventDefault","usermeta_resource","source","field","redirect_url","onSubmit","required","password","password_confirmation","first_name","second_name","patronymic","closeMenuOnSelect","filter","isMulti","p","AddUserPage","withRouter","EditUserPage","user_id","match","UsersTools","defaultChecked","Assets","onDragOver","onDragLeave","onDrop","deleteClick","uploaderClasses","assets","itemDeleteClasses","assetId","currentTarget","dataset","assetid","newAssets","Number","postFiles","concat","stopPropagation","updateAssets","dataTransfer","UploadIcon","getIconComponent","CloseIcon","multiple","asset","style","data-assetid","TABLE","widgetTypes","Spinner","EmptyWidget","obj","reduce","encodeURIComponent","getWidgetData","axios","DynamicBarChart","widget","useState","isLoading","setIsLoading","setData","getData","useCallback","charts","useEffect","entries","label","series","colorScheme","bar","gradient","stops","stopOpacity","legend","orientation","DynamicPieChart","explode","fontSize","fontFill","DynamicAreaChart","color","newData","Date","xAxis","tickSeries","format","firstDate","shift","lastDate","pop","diff","formatDistanceStrict","unit","locale","ru","markLine","line","area","DynamicLineChart","sortData","order","varA","toUpperCase","varB","comparison","DynamicTableWidget","sort","summary","useMemo","acc","isVertical","DynamicDonutChart","doughnut","WidgetDiagram","EditWidget","diagram","onSave","show","setShow","setWidget","Modal","onHide","animation","centered","Header","closeButton","Title","Body","Row","Col","Form","Group","controlId","Label","Control","as","custom","schemes","dataSources","Check","checked","Footer","Button","variant","WidgetParams","Dashboard","diagrams","setDiagrams","showEditForm","setShowEditForm","showAddForm","setShowAddForm","selectedWidget","setSelectedWidget","addDiagram","getDiagrams","parse","showSettingsModal","findIndex","itemIndex","AddWidget","Plugins","Reports","useDispatch","reports","setReports","class","function","open","preview","getReports","Tables","modules","setModules","urlModules","Pagination","currentPage","num","changePage","pageCount","setCurrentPage","altrp_version","itemsCount","Templates","templates","allTemplates","templateAreas","activeTemplateArea","templateTypesResource","changeActiveArea","generateTemplateJSON","areaId","setActiveArea","updateTemplates","getQueried","page","pageSize","template","template_area","element","file","Blob","URL","createObjectURL","download","appendChild","click","substr","getAreasOptions","tabClasses","data-area","downloadJSONFile","fillRule","clipRule","AdminModal","storeSubscribe","subscribe","getState","valid","errorMessage","error","modalClasses","data-field","data-error","option","AddPage","models","model_resource","templateResource","savePage","getOptions","models_res","pageData","path","template_id","model_id","defaultOptions","UserTopPanel","currentElement","CONSTANTS","TEMPLATE_UPDATED","dragState","contentData","currentTab","SCREENS","currentContextElement","templateStatus","elementDrag","dynamicContentState","controllerValue","settingSectionMenu","newState","elementName","tab","sectionID","currentState","currentScreen","screen","currentModel","templateData","currentUser","composeWithDevTools","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","getAssets","selectedAsset","mediaAssets","mediaResource","getIconsList","assetname","setActiveTab","assetsToggle","onChoose","classes","buttonClasses","data-tab","AssetContent","assetProps","iconComponent","src","filename","data-assetname","columnsModel","columnsDataSource","Models","getDataSources","dataSourcesSearch","dataSourcesResource","dataSourcesCurrentPage","itemsPerPage","preset","s","data_sources","dataSourcesPageCount","getModels","modelsSearch","modelsResource","modelsCurrentPage","modelsPageCount","changeSearchHandler","changeDataSourcesSearchHandler","modelsCount","dataSourcesCount","pagination","dataSource","ceil","EditModelForm","submitHandler","deleteHandler","titleChangeHandler","persist","prevProps","created_at","updated_at","parent_model_id","description","table_id","isDisabled","soft_deletes","time_stamps","submitText","edit","EditModel","updateFields","fieldsResource","updateRelations","relationsResource","relations","updateQueries","queriesResource","queries","history","bounded_model","sql_editors","relation","query","FieldCalculationLogic","rightType","is1stString","is2ndString","right","string","fieldId","string_1","fieldId_1","string_2","fieldId_2","rightTypeHandler","rightChangeHandler","setRight","_state","fieldsOptions","deleteItemHandler","left","operator","operatorChangeHandler","includes","fieldTypeOptions","attributeOptions","inputTipeOptions","AddFieldForm","isAlways","is_label","is_title","is_auth","length_value","default","attribute","input_type","null","indexed","editable","calculation","calculation_logic","itemChangeHandler","addItemHandler","filedsResource","modelId","fieldsOptionsResource","substring","isNaN","default_","_null","splice","readOnly","EditField","modelTitle","relationTypeOptions","deleteUpdateOptions","AddRelationForm","modelsOptions","add_belong_to","always_with","local_key","foreign_key","onDelete","onUpdate","selfFieldsOptions","foreignFieldsOptions","updateForeignFieldOptions","target_model_id","changeTargetModel","modelName","_relationTypeOptions","hideAddBelongTo","renderLocalKey","renderForeignKey","AddRelation","typeOptions","mockedOptions","AddDataSourceForm","with","multipleSelectChangeHandler","array","AddDataSource","AggregateComponent","alias","columnsOptions","tablesOptions","tableId","JoinComponent","targetColumnOptions","target_table","source_column","target_column","sourceColumnOptions","getDatePickerFormat","getMomentFormat","conditionTypeOptions","dateTypesOptions","ConditionComponent","isDateVar","dateValueFormatChange","moment","isFirst","condition_type","or","not","values","first_column","second_column","selected","_d","showTimeSelect","showYearPicker","showTimeSelectOnly","showMonthYearPicker","dateFormat","OrderByComponent","SQLBuilderForm","changeGroupBy","group_by","_group_by","changeColumns","_columns","c","changeRelations","_relations","changeRoles","access","changePermission","valueChangeHandler","aggregateToggle","isAggregateRaw","aggregates","conditionAddHandler","conditions","offsetDeleteHandler","offset","limitDeleteHandler","limit","setRelations","setColumns","joins","order_by","relationsOptions","selfFields","counter","selfFieldsResource","sqlResource","aggregateChangeHandler","aggregateAddHandler","aggregateDeleteHandler","joinChangeHandler","joinAddHandler","joinDeleteHandler","conditionChangeHandler","orderByChangeHandler","orderByAddHandler","orderByDeleteHandler","condition","trim","conditionDeleteHandler","f","SQLBuilder","SqlEditor","aceEditorObserver","storeState","sql","alert","sqlEditorResource","message","paged","is_object","auth","editor","mode","theme","setOptions","showPrintMargin","enableLiveAutocompletion","rolesResource","permissionsResource","AccessOptions","getRoles","getPermissions","RoleForm","display_name","isEditing","Boolean","RolePage","PermissionForm","PermissionPage","TableForm","saveTable","AddTable","EditTable","setting_url","MigrationsTable","migrations","table","table_columns","migrations_resource","table_resource","table_res","AddModelPage","relationship_types","addModalShow","onDeleteClick","default_relationship","model_class","accessors_table_columns","addAccessorModalShow","onDeleteAccessorClick","default_accessor","formula","modal_toogle","actual_columns","fillable_columns","user_cols","fillable_cols","relationships","pk","accessors","selected_relationship","relationship","selected_accessor","accessor","save_model_resource","accessors_resource","addFillableColumn","deleteFillableColumn","addUserColsColumn","deleteUserColsColumn","onChangeRelationship","saveModel","addRelationship","getModalClasses","columns_res","model_data","setCols","accessors_data","accsessors","cols","$push","$splice","field_name","getTime","$set","AccessorsPage","addAccessor","AddControllerPage","prefix","namespace","controller_resource","save_controller_resource","saveController","addRelation","deleteRelation","controller_res","setRelation","SettingTable","AddMigrationPage","column_types","default_column","places","unique","default_key","source_table_id","key_actions","addModalColumnShow","onDeleteColumnClick","table_keys","addModalKeyShow","onDeleteKeyClick","column_modal_toggle","key_modal_toggle","rename_columns","selected_column","selected_key","migration_resource","onChangeColumn","onChangeKey","addColumn","addKey","changeName","saveMigration","isShowField","keys_res","modal_toggle","val","charAt","name_value","main_url","AdminVersion","_export","initPaginationProps","SQLEditors","sql_editorsPagination","sql_editorsResource","sql_editor","ReactDOM","pagesMenuShow","toggleMenu","updateAdminState","adminClasses","exact","component","ASSETS_SHOW","ASSETS_TOGGLE","assetsShow","setAdminLogo","media","setAceEditor","TEMPLATE_NEED_UPDATE","TEMPLATE_SAVING","DEFAULT_BREAKPOINT","icon","mediaQuery","renderIcon","backgroundImage"],"mappings":"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","file":"a8e686e4f8bdb34c31b8.bundle.js","sourcesContent":["var escape = require(\"../../../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pagination{display:flex;align-items:center;padding:20px 0}.pagination__version{font-family:Roboto;font-style:italic;font-weight:normal;font-size:13px;line-height:15px;color:#8E94AA;margin-right:437px}.pagination__link{text-decoration:none;font-weight:400;font-family:Roboto;font-style:italic;font-size:13px;line-height:15px;color:#673daa}.pagination__text{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.pagination__move{width:30px;height:30px;padding:0;display:flex;justify-content:center;align-items:center;border:1px solid #8E94AA;box-sizing:border-box;cursor:pointer;border-radius:2px}.pagination__buttons{display:flex;align-items:center}.pagination__indicator{display:flex;justify-content:center;align-items:center;width:43px;height:30px;background:#FFFFFF;border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px}.pagination__prev{background-image:url(\" + escape(require(\"../../svgs/left.svg\")) + \");background-size:7.5px 4px;margin:0 7px}.pagination__map{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.pagination__next{margin-right:7.5px}.pagination__disabled{opacity:.5;cursor:auto}.right__arrow{transform:rotate(-180deg)}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap-grid.min.css\"), \"\");\n\n// module\nexports.push([module.id, \"html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto, sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:0.2s;-moz-transition-duration:0.2s;-ms-transition-duration:0.2s;-o-transition-duration:0.2s;transition-duration:0.2s;font-family:Roboto, sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8E94AA}.btn_disabled{background-color:#8E94AA;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=\\\"checkbox\\\"]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87CA00;color:#fff;font-weight:bold}.btn_failure{background-color:#FF4E6E;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-disabled{pointer-events:none}.pointer-event-none{pointer-events:none}.altrp-inherit{font-family:inherit;font-size:inherit;font-style:inherit;line-height:inherit;color:inherit;text-decoration:inherit;text-transform:inherit}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}.assets-browser{display:none}.assets-browser_active{position:fixed;display:flex;top:0;bottom:0;right:0;left:0;z-index:1000}.assets-browser__bg{position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(52,59,76,0.2);z-index:50}.assets-browser-content{position:absolute;top:5%;bottom:5%;left:5%;right:5%;padding-bottom:60px;z-index:100;border:1px solid #D5D7DE;border-radius:3px;background-color:#fff}.assets-browser__close.btn{position:absolute;top:0;right:0;padding:10px;-webkit-transform:scale(2);-moz-transform:scale(2);-ms-transform:scale(2);-o-transform:scale(2);transform:scale(2);background-color:transparent}.assets-browser__close.btn .icon{margin:0;width:auto;height:auto}.assets-browser-top{padding:20px 20px 0;background-color:#F7F8F9}.assets-browser-top .caption{font-size:22px}.assets-browser-nav{margin-left:-20px;margin-right:-20px;padding-left:5px;padding-right:5px;border-bottom:1px solid #D5D7DE}.assets-browser__tab{margin-bottom:-1px;background-color:transparent;border-top:1px solid transparent;border-left:1px solid transparent;border-right:1px solid transparent}.assets-browser__tab_active{border-top:1px solid #D5D7DE;border-left:1px solid #D5D7DE;border-right:1px solid #D5D7DE;background-color:#fff}.assets-browser-bottom{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:center;justify-content:flex-end;height:60px;padding-right:20px;border-top:1px solid #D5D7DE}.assets-browser-choose-frame{display:flex;align-content:flex-start;align-items:flex-start;flex-wrap:wrap;padding:20px 20px 20px 10px;height:calc( 100% - 96.5px);overflow:auto}.asset-choose{position:relative;cursor:pointer;margin-bottom:10px;margin-left:10px;border:1px solid #D5D7DE}.asset-choose__content{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-o-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.asset-choose_selected{box-shadow:inset 0 0 0 3px #fff,inset 0 0 0 7px #71d7f7}.asset-choose_icon{width:calc(5% - 10px);padding-top:calc(5% - 10px)}.asset-choose_media{width:calc(10% - 10px);padding-top:calc(10% - 10px)}.asset-choose_media .asset-choose__content{top:10px;left:10px;width:calc(100% - 20px);height:calc(100% - 20px);transform:none;object-fit:contain;object-position:center;background-color:#F7F8F9}\\n\", \"\"]);\n\n// exports\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"7\" height=\"10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M6 1.5L2 5l4 4\" stroke=\"#8E94AA\" strokeWidth=\"1.5\" /></svg>);","/**\r\n * Имеет интерфейс для доступы к свойствам data (любой вложенности)\r\n * @class AltrpModel\r\n */\r\nimport {cloneDeep, get} from \"lodash\";\r\n\r\nclass AltrpModel {\r\n  constructor(data = {}) {\r\n    this.data = cloneDeep(data);\r\n  }\r\n\r\n  /**\r\n   * Возваращает объект данных\r\n   * @return {*}\r\n   */\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  getProperty(name, defaultValue = '') {\r\n    return get(this.data, name, defaultValue);\r\n  }\r\n}\r\n\r\nexport default AltrpModel","import queryString from 'query-string';\r\n/**\r\n * @class Resource\r\n * */\r\nexport const MAX_FILE_SIZE = 10485760;\r\n\r\nclass Resource {\r\n\r\n\r\n  /**\r\n   * @member {Object} routes\r\n   * @member {string} routes.get\r\n   * @member {string} routes.post\r\n   * @member {string} routes.create\r\n   * @member {string} routes.getAll\r\n   */\r\n  constructor(data){\r\n\r\n    this.route = data.route;\r\n    if(! this.route){\r\n      throw 'Нужен route';\r\n    }\r\n\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  get(id){\r\n    if(! id){\r\n      throw 'Get only by \"id\"';\r\n    }\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route + '/' + id;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * простой запрос\r\n   * @return {Promise}\r\n   * */\r\n  getAll(){\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Запрос со строкой для поиска вхождений\r\n   * @param {string} searchString\r\n   * @return {Promise}\r\n   * */\r\n  search(searchString){\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url;\r\n    if(this.route.indexOf('?') === -1){\r\n      url = this.route + `?s=${searchString}`;\r\n    } else {\r\n      url = this.route + `&s=${searchString}`;\r\n    }\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @param {any} data\r\n   * @param {object | null} headers\r\n   * @return {Promise}\r\n   * */\r\n  post(data = {}, headers){\r\n    headers = headers || {\r\n      'X-CSRF-TOKEN': _token,\r\n      'Content-Type': 'application/json',\r\n      'Accept': 'application/json',\r\n    };\r\n    let options = {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers,\r\n    };\r\n    return fetch(this.route, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @param {FileList} files\r\n   * @param {string} fileType\r\n   * @return {Promise}\r\n   * */\r\n  postFiles(files, fileType){\r\n    // data._token = _token;\r\n    let boundary = String(Math.random()).slice(2);\r\n    fileType = fileType || 'image';\r\n    let headers = {\r\n      'X-CSRF-TOKEN': _token,\r\n      // 'Content-Type': 'multipart/form-data; boundary=' + boundary\r\n    };\r\n    let formData = new FormData();\r\n    console.log(files);\r\n    for (let i = 0; i < files.length; i++) {\r\n      if(files[i].size > MAX_FILE_SIZE || files[i].type.indexOf(fileType) !== 0){\r\n        console.log(files[i]);\r\n        continue;\r\n      }\r\n      formData.append(`files[${i}]`, files[i]);\r\n    }\r\n    let options = {\r\n      method: 'POST',\r\n      body: formData,\r\n      headers,\r\n    };\r\n    return fetch(this.route, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  put(id, data){\r\n    let options = {\r\n      method: 'put',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'X-CSRF-TOKEN': _token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + (id ? '/' + id : '');\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  delete(id = ''){\r\n\r\n    let options = {\r\n      method: 'delete',\r\n      headers: {\r\n        'X-CSRF-TOKEN': _token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + (id ? '/' + id : '');\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  getOptions(){\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + '/options';\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * GET запрос с параметрами\r\n   * @param {object} params\r\n   * @return {Promise}\r\n   * */\r\n  async getQueried(params){\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = `${this.route}?${queryString.stringify(params)}`;\r\n    let res =  await fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n    // console.log(res);\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default Resource;","import {SET_MODAL_SETTINGS, TOGGLE_MODAL} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  fields: [],\r\n  active: false,\r\n  title: 'Modal',\r\n  submitButton: 'Submit',\r\n  submit: function(data){\r\n    console.log(data);\r\n  },\r\n  success: (res)=>{\r\n    console.log(res);\r\n  }\r\n};\r\n\r\nexport function modalSettingsReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_MODAL_SETTINGS:{\r\n      state = {\r\n        fields: action.fields,\r\n        title: action.title || defaultState.title,\r\n        submit: action.submit || defaultState.submit,\r\n        submitButton: action.submitButton || defaultState.submitButton,\r\n        success: action.success || defaultState.success,\r\n        active: action.active,\r\n      };\r\n    }break;\r\n    case TOGGLE_MODAL:{\r\n      state = {\r\n        ...defaultState,\r\n        active: ! state.active,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_DISABLED, SET_ENABLE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  adminEnable: true\r\n};\r\n\r\nexport function changeEnableState(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_DISABLED:{\r\n      state = {\r\n          ...state,\r\n        adminEnable: false\r\n      };\r\n    }break;\r\n    case SET_ENABLE:{\r\n      state = {\r\n        ...state,\r\n        adminEnable: true\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_LOGO} from \"./actions\";\r\n\r\nconst defaultState = window.admin_logo ? window.admin_logo : {};\r\n\r\nexport function adminLogoReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_LOGO:{\r\n      state = {\r\n          ...action.logoData\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_ACE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  AceEditor: null\r\n};\r\n\r\nexport function aceEditorReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_ACE:{\r\n      state = {\r\n        AceEditor: action.AceEditor\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {combineReducers} from 'redux';\r\nimport {modalSettingsReducer} from \"./modal-settings/reducers\";\r\nimport {changeEnableState} from \"./admin-state/reducers\";\r\nimport {adminLogoReducer} from \"./admin-logo/reducers\";\r\nimport {assetsSettingsReducer} from \"../../../../editor/src/js/store/assets-browser/reducers\";\r\nimport {aceEditorReducer} from \"./ace-editor/reducers\";\r\n\r\n\r\nexport default combineReducers({\r\n  modalSettings: modalSettingsReducer,\r\n  adminState: changeEnableState,\r\n  adminLogo: adminLogoReducer,\r\n  assetsManagerSettings: assetsSettingsReducer,\r\n  aceEditorReducer: aceEditorReducer,\r\n});\r\n","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nconst store = createStore(rootReducer);\r\nexport default store;","export const SET_MODAL_SETTINGS = 'SET_MODAL_SETTINGS';\r\nexport const TOGGLE_MODAL = 'TOGGLE_MODAL';\r\n\r\nexport function setModalSettings(settings){\r\n  return {\r\n    ...settings,\r\n    type: SET_MODAL_SETTINGS,\r\n  }\r\n}\r\n\r\nexport function toggleModal(){\r\n  return {\r\n    type: TOGGLE_MODAL,\r\n  }\r\n}\r\n","/**\r\n * Имеет интерфейс пользователя\r\n * @class AltrpUser\r\n */\r\n\r\nimport AltrpModel from \"./AltrpModel\";\r\n\r\nclass AltrpUser extends AltrpModel{\r\n  /**\r\n   * Проверяет является ли пользователь гостем\r\n   * @return {boolean}\r\n   */\r\n  isGuest(){\r\n    return this.getProperty('is_guest', false)\r\n  }\r\n  /**\r\n   * Проверяет является ли авторизованным пользователем\r\n   * @return {boolean}\r\n   */\r\n  isAuth(){\r\n    return this.getProperty('created_at', false)\r\n  }\r\n\r\n  /**\r\n   * Проверяет наличие permission у пользователя\r\n   * @param {[]} permissions\r\n   * $return {boolean}\r\n   */\r\n  hasPermissions(permissions = []){\r\n    let ownPermissions = this.getProperty('permissions', []);\r\n    return _.find(ownPermissions, ownPermission => {\r\n      return _.find(permissions, role => {\r\n        return parseInt(role) === parseInt(ownPermission.id);\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * Проверяет наличие роли у пользователя\r\n   * @param {[]} roles\r\n   * $return {boolean}\r\n   */\r\n  hasRoles(roles = []){\r\n    let ownRoles = this.getProperty('roles', []);\r\n    return _.find(ownRoles, ownRole => {\r\n      return _.find(roles, role => {\r\n        return parseInt(role) === parseInt(ownRole.id);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Проверяет доступ пользователя по необходимым роля и разрешениям\r\n   * @param {[]} permissions\r\n   * @param {[]} roles\r\n   * $return {boolean}\r\n   *\r\n   */\r\n  checkUserAllowed(permissions = [], roles = []){\r\n    if(! this.getProperty('created_at', false)){\r\n      return false;\r\n    }\r\n    roles = _.isArray(roles) ? roles : [];\r\n    permissions = _.isArray(permissions) ? permissions : [];\r\n    if(! (permissions.length || roles.length)){\r\n      return true;\r\n    }\r\n    if(this.hasPermissions(permissions)){\r\n      return true;\r\n    }\r\n    if(this.hasRoles(roles)){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default AltrpUser","import {CHANGE_CURRENT_USER} from './actions'\r\nimport AltrpUser from \"../../../../../editor/src/js/classes/AltrpUser\";\r\n\r\nconst defaultModel = {\r\n  \r\n};\r\n\r\nexport function currentUserReducer(user, action) {\r\n  user = user || defaultModel;\r\n  switch (action.type) {\r\n    case CHANGE_CURRENT_USER:{\r\n      user = action.user;\r\n    }break;\r\n  }\r\n  if(user instanceof AltrpUser){\r\n    return user;\r\n  }\r\n  return new AltrpUser(user);\r\n}","export const CHANGE_CURRENT_USER = 'CHANGE_CURRENT_USER';\r\n\r\nexport function changeCurrentUser(user) {\r\n  return {\r\n    type: CHANGE_CURRENT_USER,\r\n    user: user || {},\r\n  };\r\n}\r\n\r\n","import {CHANGE_CURRENT_MODEL} from './actions'\r\nimport AltrpModel from \"../../../../../editor/src/js/classes/AltrpModel\";\r\n\r\nconst defaultModel = {\r\n  \r\n};\r\n\r\nexport function currentModelReducer(model, action) {\r\n  model = model || defaultModel;\r\n  switch (action.type) {\r\n    case CHANGE_CURRENT_MODEL:{\r\n      model = action.model;\r\n    }break;\r\n  }\r\n  if(model instanceof AltrpModel){\r\n    return model;\r\n  }\r\n  return new AltrpModel(model);\r\n}","export const CHANGE_CURRENT_MODEL = 'CHANGE_CURRENT_MODEL';\r\n\r\nexport function changeCurrentModel(model) {\r\n  return {\r\n    type: CHANGE_CURRENT_MODEL,\r\n    model\r\n  };\r\n}\r\n\r\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var map = {\n\t\"./af\": 166,\n\t\"./af.js\": 166,\n\t\"./ar\": 167,\n\t\"./ar-dz\": 168,\n\t\"./ar-dz.js\": 168,\n\t\"./ar-kw\": 169,\n\t\"./ar-kw.js\": 169,\n\t\"./ar-ly\": 170,\n\t\"./ar-ly.js\": 170,\n\t\"./ar-ma\": 171,\n\t\"./ar-ma.js\": 171,\n\t\"./ar-sa\": 172,\n\t\"./ar-sa.js\": 172,\n\t\"./ar-tn\": 173,\n\t\"./ar-tn.js\": 173,\n\t\"./ar.js\": 167,\n\t\"./az\": 174,\n\t\"./az.js\": 174,\n\t\"./be\": 175,\n\t\"./be.js\": 175,\n\t\"./bg\": 176,\n\t\"./bg.js\": 176,\n\t\"./bm\": 177,\n\t\"./bm.js\": 177,\n\t\"./bn\": 178,\n\t\"./bn.js\": 178,\n\t\"./bo\": 179,\n\t\"./bo.js\": 179,\n\t\"./br\": 180,\n\t\"./br.js\": 180,\n\t\"./bs\": 181,\n\t\"./bs.js\": 181,\n\t\"./ca\": 182,\n\t\"./ca.js\": 182,\n\t\"./cs\": 183,\n\t\"./cs.js\": 183,\n\t\"./cv\": 184,\n\t\"./cv.js\": 184,\n\t\"./cy\": 185,\n\t\"./cy.js\": 185,\n\t\"./da\": 186,\n\t\"./da.js\": 186,\n\t\"./de\": 187,\n\t\"./de-at\": 188,\n\t\"./de-at.js\": 188,\n\t\"./de-ch\": 189,\n\t\"./de-ch.js\": 189,\n\t\"./de.js\": 187,\n\t\"./dv\": 190,\n\t\"./dv.js\": 190,\n\t\"./el\": 191,\n\t\"./el.js\": 191,\n\t\"./en-au\": 192,\n\t\"./en-au.js\": 192,\n\t\"./en-ca\": 193,\n\t\"./en-ca.js\": 193,\n\t\"./en-gb\": 194,\n\t\"./en-gb.js\": 194,\n\t\"./en-ie\": 195,\n\t\"./en-ie.js\": 195,\n\t\"./en-il\": 196,\n\t\"./en-il.js\": 196,\n\t\"./en-in\": 197,\n\t\"./en-in.js\": 197,\n\t\"./en-nz\": 198,\n\t\"./en-nz.js\": 198,\n\t\"./en-sg\": 199,\n\t\"./en-sg.js\": 199,\n\t\"./eo\": 200,\n\t\"./eo.js\": 200,\n\t\"./es\": 201,\n\t\"./es-do\": 202,\n\t\"./es-do.js\": 202,\n\t\"./es-us\": 203,\n\t\"./es-us.js\": 203,\n\t\"./es.js\": 201,\n\t\"./et\": 204,\n\t\"./et.js\": 204,\n\t\"./eu\": 205,\n\t\"./eu.js\": 205,\n\t\"./fa\": 206,\n\t\"./fa.js\": 206,\n\t\"./fi\": 207,\n\t\"./fi.js\": 207,\n\t\"./fil\": 208,\n\t\"./fil.js\": 208,\n\t\"./fo\": 209,\n\t\"./fo.js\": 209,\n\t\"./fr\": 210,\n\t\"./fr-ca\": 211,\n\t\"./fr-ca.js\": 211,\n\t\"./fr-ch\": 212,\n\t\"./fr-ch.js\": 212,\n\t\"./fr.js\": 210,\n\t\"./fy\": 213,\n\t\"./fy.js\": 213,\n\t\"./ga\": 214,\n\t\"./ga.js\": 214,\n\t\"./gd\": 215,\n\t\"./gd.js\": 215,\n\t\"./gl\": 216,\n\t\"./gl.js\": 216,\n\t\"./gom-deva\": 217,\n\t\"./gom-deva.js\": 217,\n\t\"./gom-latn\": 218,\n\t\"./gom-latn.js\": 218,\n\t\"./gu\": 219,\n\t\"./gu.js\": 219,\n\t\"./he\": 220,\n\t\"./he.js\": 220,\n\t\"./hi\": 221,\n\t\"./hi.js\": 221,\n\t\"./hr\": 222,\n\t\"./hr.js\": 222,\n\t\"./hu\": 223,\n\t\"./hu.js\": 223,\n\t\"./hy-am\": 224,\n\t\"./hy-am.js\": 224,\n\t\"./id\": 225,\n\t\"./id.js\": 225,\n\t\"./is\": 226,\n\t\"./is.js\": 226,\n\t\"./it\": 227,\n\t\"./it-ch\": 228,\n\t\"./it-ch.js\": 228,\n\t\"./it.js\": 227,\n\t\"./ja\": 229,\n\t\"./ja.js\": 229,\n\t\"./jv\": 230,\n\t\"./jv.js\": 230,\n\t\"./ka\": 231,\n\t\"./ka.js\": 231,\n\t\"./kk\": 232,\n\t\"./kk.js\": 232,\n\t\"./km\": 233,\n\t\"./km.js\": 233,\n\t\"./kn\": 234,\n\t\"./kn.js\": 234,\n\t\"./ko\": 235,\n\t\"./ko.js\": 235,\n\t\"./ku\": 236,\n\t\"./ku.js\": 236,\n\t\"./ky\": 237,\n\t\"./ky.js\": 237,\n\t\"./lb\": 238,\n\t\"./lb.js\": 238,\n\t\"./lo\": 239,\n\t\"./lo.js\": 239,\n\t\"./lt\": 240,\n\t\"./lt.js\": 240,\n\t\"./lv\": 241,\n\t\"./lv.js\": 241,\n\t\"./me\": 242,\n\t\"./me.js\": 242,\n\t\"./mi\": 243,\n\t\"./mi.js\": 243,\n\t\"./mk\": 244,\n\t\"./mk.js\": 244,\n\t\"./ml\": 245,\n\t\"./ml.js\": 245,\n\t\"./mn\": 246,\n\t\"./mn.js\": 246,\n\t\"./mr\": 247,\n\t\"./mr.js\": 247,\n\t\"./ms\": 248,\n\t\"./ms-my\": 249,\n\t\"./ms-my.js\": 249,\n\t\"./ms.js\": 248,\n\t\"./mt\": 250,\n\t\"./mt.js\": 250,\n\t\"./my\": 251,\n\t\"./my.js\": 251,\n\t\"./nb\": 252,\n\t\"./nb.js\": 252,\n\t\"./ne\": 253,\n\t\"./ne.js\": 253,\n\t\"./nl\": 254,\n\t\"./nl-be\": 255,\n\t\"./nl-be.js\": 255,\n\t\"./nl.js\": 254,\n\t\"./nn\": 256,\n\t\"./nn.js\": 256,\n\t\"./oc-lnc\": 257,\n\t\"./oc-lnc.js\": 257,\n\t\"./pa-in\": 258,\n\t\"./pa-in.js\": 258,\n\t\"./pl\": 259,\n\t\"./pl.js\": 259,\n\t\"./pt\": 260,\n\t\"./pt-br\": 261,\n\t\"./pt-br.js\": 261,\n\t\"./pt.js\": 260,\n\t\"./ro\": 262,\n\t\"./ro.js\": 262,\n\t\"./ru\": 263,\n\t\"./ru.js\": 263,\n\t\"./sd\": 264,\n\t\"./sd.js\": 264,\n\t\"./se\": 265,\n\t\"./se.js\": 265,\n\t\"./si\": 266,\n\t\"./si.js\": 266,\n\t\"./sk\": 267,\n\t\"./sk.js\": 267,\n\t\"./sl\": 268,\n\t\"./sl.js\": 268,\n\t\"./sq\": 269,\n\t\"./sq.js\": 269,\n\t\"./sr\": 270,\n\t\"./sr-cyrl\": 271,\n\t\"./sr-cyrl.js\": 271,\n\t\"./sr.js\": 270,\n\t\"./ss\": 272,\n\t\"./ss.js\": 272,\n\t\"./sv\": 273,\n\t\"./sv.js\": 273,\n\t\"./sw\": 274,\n\t\"./sw.js\": 274,\n\t\"./ta\": 275,\n\t\"./ta.js\": 275,\n\t\"./te\": 276,\n\t\"./te.js\": 276,\n\t\"./tet\": 277,\n\t\"./tet.js\": 277,\n\t\"./tg\": 278,\n\t\"./tg.js\": 278,\n\t\"./th\": 279,\n\t\"./th.js\": 279,\n\t\"./tk\": 280,\n\t\"./tk.js\": 280,\n\t\"./tl-ph\": 281,\n\t\"./tl-ph.js\": 281,\n\t\"./tlh\": 282,\n\t\"./tlh.js\": 282,\n\t\"./tr\": 283,\n\t\"./tr.js\": 283,\n\t\"./tzl\": 284,\n\t\"./tzl.js\": 284,\n\t\"./tzm\": 285,\n\t\"./tzm-latn\": 286,\n\t\"./tzm-latn.js\": 286,\n\t\"./tzm.js\": 285,\n\t\"./ug-cn\": 287,\n\t\"./ug-cn.js\": 287,\n\t\"./uk\": 288,\n\t\"./uk.js\": 288,\n\t\"./ur\": 289,\n\t\"./ur.js\": 289,\n\t\"./uz\": 290,\n\t\"./uz-latn\": 291,\n\t\"./uz-latn.js\": 291,\n\t\"./uz.js\": 290,\n\t\"./vi\": 292,\n\t\"./vi.js\": 292,\n\t\"./x-pseudo\": 293,\n\t\"./x-pseudo.js\": 293,\n\t\"./yo\": 294,\n\t\"./yo.js\": 294,\n\t\"./zh-cn\": 295,\n\t\"./zh-cn.js\": 295,\n\t\"./zh-hk\": 296,\n\t\"./zh-hk.js\": 296,\n\t\"./zh-mo\": 297,\n\t\"./zh-mo.js\": 297,\n\t\"./zh-tw\": 298,\n\t\"./zh-tw.js\": 298\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 434;","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"100\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M50.004 7.797l-2.407 5.525c0 1.333.306 2.36.927 3.065.204.238.519.46.952.667l-.697 1.962a3.67 3.67 0 01-1.616-1.089 6.62 6.62 0 01-.808-1.187c-.544.82-1.156 1.387-1.854 1.686-.527.237-1.173.352-1.947.352-1.557 0-2.858-.498-3.887-1.502C37.553 16.211 37 14.77 37 12.946c0-.636.042-1.21.128-1.708.085-.498.238-.973.45-1.418.451-.904 1.055-1.594 1.829-2.069.774-.475 1.667-.713 2.687-.713.944 0 1.76.17 2.45.499.97.46 1.684 1.21 2.126 2.252l1.42-2.804 1.914.812zM45.403 13.3a1 1 0 00.025-.268v-.169a.317.317 0 00-.025-.122c0-.973-.306-1.84-.91-2.598-.613-.759-1.285-1.134-2.025-1.134-.875 0-1.59.337-2.126 1.019-.587.736-.876 1.763-.876 3.088 0 1.21.298 2.138.902 2.774.536.567 1.216.858 2.032.858.57 0 1.038-.153 1.387-.46.578-.52 1.122-1.509 1.616-2.988zM61.97 18.617h-2.517l-2.62-6.445-.62-1.77-.647 1.816-2.543 6.399h-2.688l4.627-11.05a39.743 39.743 0 01-.485-1.165 3.354 3.354 0 00-.255-.52c-.323-.46-.842-.69-1.548-.69-.246 0-.723.069-1.437.206l.28-2.13c.358-.1.647-.168.868-.207.221-.038.442-.061.663-.061 1.327 0 2.365.62 3.105 1.854.28.43.663 1.257 1.156 2.483l4.66 11.28zM72.363 9.238h-3.59v6.107c0 .444.018.728.043.858.034.123.12.238.28.338.154.068.358.107.605.107.187 0 .544-.039 1.088-.107l.374 2.022c-.28.054-.663.108-1.156.146a16.56 16.56 0 01-1.02.061c-.775 0-1.378-.107-1.82-.322a1.994 1.994 0 01-.962-.95c-.093-.207-.161-.482-.204-.835-.042-.345-.068-.82-.068-1.418V9.238l-1.667-.023c-.357 0-.689.145-.995.437-.093.1-.212.252-.374.46l-1.616-1.48c.306-.375.57-.65.79-.835.681-.56 1.413-.835 2.204-.835l8.096.023v2.253h-.008zM84.26 9.674c.417.904.622 1.947.622 3.127 0 1.226-.222 2.283-.672 3.172a5.093 5.093 0 01-1.965 2.107 5.39 5.39 0 01-2.798.774c-.604 0-1.08-.053-1.437-.168-.494-.154-.995-.453-1.506-.897V23h-2.798l.026-10.696c0-2.154.808-3.702 2.432-4.629 1.004-.567 2.144-.858 3.428-.858 1.063 0 1.998.245 2.815.743.8.49 1.42 1.196 1.854 2.115zm-2.797-.046c-.579-.636-1.267-.958-2.084-.958-.8 0-1.514.337-2.126 1.02-.29.337-.519.804-.68 1.41a7.628 7.628 0 00-.247 1.969c0 1.333.289 2.314.876 2.942.587.629 1.284.935 2.084.935.833 0 1.547-.322 2.151-.958.29-.337.519-.781.68-1.356a6.845 6.845 0 00.247-1.877c0-.682-.076-1.288-.22-1.817a3.324 3.324 0 00-.681-1.31zM99.306 9.192l-1.387-.023-.025 9.448h-2.62v-9.44h-4.303v9.448h-2.568V9.199c-.154 0-.34.054-.57.154a3.502 3.502 0 00-.774.551l-1.71-1.54c.63-.56 1.191-.92 1.667-1.096.477-.176 1.02-.26 1.616-.26h10.674v2.184z\" fill=\"#fff\" /><circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#D9FF8D\" /><path d=\"M17.603 7.85l-1.926 4.42c0 1.067.245 1.888.742 2.452.163.19.415.368.762.533l-.558 1.57a2.936 2.936 0 01-1.293-.87 5.287 5.287 0 01-.646-.951c-.435.656-.925 1.11-1.483 1.349-.422.19-.939.282-1.558.282-1.245 0-2.286-.399-3.11-1.202-.89-.852-1.333-2.005-1.333-3.463 0-.51.034-.969.102-1.368.068-.398.19-.778.36-1.134.361-.723.844-1.275 1.463-1.655.62-.38 1.334-.57 2.15-.57.756 0 1.409.135 1.96.399.776.367 1.347.968 1.7 1.802L16.073 7.2l1.53.65zm-3.68 4.402a.8.8 0 00.02-.215v-.135a.254.254 0 00-.02-.098c0-.779-.246-1.471-.729-2.078-.49-.607-1.027-.907-1.62-.907-.7 0-1.271.27-1.7.815-.47.588-.701 1.41-.701 2.47 0 .969.238 1.71.721 2.22.429.453.973.686 1.626.686.456 0 .83-.122 1.11-.368.462-.416.897-1.207 1.292-2.39z\" fill=\"#343B4C\" /></svg>);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport DefaultLogo from '../svgs/admin__logo.svg'\r\nimport {renderAsset} from \"../../../front-app/src/js/helpers\";\r\n\r\nclass AdminLogo extends Component {\r\n  constructor(props){\r\n    super(props);\r\n  }\r\n  render(){\r\n    return <a href='/' target=\"_blank\" className=\"admin__logo\">{this.props.adminLogo.assetType\r\n        ? renderAsset(this.props.adminLogo)\r\n        : <DefaultLogo />}\r\n    </a>;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    adminLogo: state.adminLogo\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AdminLogo);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"19\" height=\"14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fill=\"#fff\" d=\"M0 0h19v2H0zM0 6h19v2H0V6zM0 12h19v2H0z\" /></svg>);","import React, {Component} from \"react\";\r\nimport {Link} from 'react-router-dom'\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nclass AdminTable extends Component {\r\n\r\n  /**\r\n   * Фильтр по ыыеденной строк\r\n   * @param {{}} e\r\n   */\r\n  filterByKeyboard = (e) => {\r\n\r\n    if (_.isFunction(this.props.filterByKeyboard)) {\r\n      this.props.filterByKeyboard(e.target.value);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {search} = this.props;\r\n    return <div className=\"admin-table\">\r\n      {search && <div className=\"admin-table\">\r\n        <input value={search.value} onChange={search.changeHandler} type=\"text\" className=\"form-group\"/>\r\n      </div>}\r\n      <table>\r\n        <thead className=\"admin-table-head\">\r\n        <tr className=\"admin-table-row\">\r\n          <td className=\"admin-table__td admin-table__td_check\"><input type=\"checkbox\"/></td>\r\n          {this.props.columns.map(column =>\r\n              <td className=\"admin-table__td \" key={column.name} title={column.name}>{column.title}</td>)}\r\n        </tr>\r\n        </thead>\r\n        <tbody className=\"admin-table-body\">\r\n        {\r\n          this.props.rows.map((row) =>\r\n              <tr className=\"admin-table-row\" key={row.id} title={row.id}>\r\n                <td className=\"admin-table__td admin-table__td_check\" key={'choose' + row.id} title={'choose' + row.id}>\r\n                  <input type=\"checkbox\"/></td>\r\n                {\r\n                  this.props.columns.map((column, index) => {\r\n                        let tag = 'span';\r\n                        let props = {\r\n                          className: 'td__content',\r\n                          children: [row[column.name]]\r\n                        };\r\n                        if (column.url && row.url) {\r\n                          tag = 'a';\r\n                          props.href = row.url;\r\n                          if (column.target) {\r\n                            props.target = column.target;\r\n                          }\r\n                        }\r\n                        if (column.editUrl && row.editUrl) {\r\n                          tag = (column.tag === 'Link') ? Link : 'a';\r\n                          props.href = row.editUrl;\r\n                          if (column.tag === 'Link') {\r\n                            props.to = {\r\n                              pathname: row.editUrl,\r\n                              data: row\r\n                            }\r\n                          }\r\n                          if (column.target) {\r\n                            props.target = column.target;\r\n                          }\r\n                        }\r\n                        if (column.is_button) {\r\n                          tag = 'button';\r\n                          props.title = column.button.title;\r\n                          props.children = column.button.title;\r\n                          props.onClick = () => {\r\n                            column.button.function(row)\r\n                          };\r\n                        }\r\n                        if (column.is_boolean) {\r\n                          props.children = [row[column.name].toString()];\r\n                        }\r\n\r\n                        return <td className=\"admin-table__td td\" key={column.name + row.id} title={column.name + row.id}>\r\n\r\n                          {React.createElement(tag, props)}\r\n                          {index === 0 && <span className=\"quick-action-menu\">\r\n                    {this.props.quickActions && this.props.quickActions.map((quickAction, index) => {\r\n                      let item = '';\r\n                      switch (quickAction.tag) {\r\n                        case 'a': {\r\n                          let href = quickAction.props.href.replace(':id', row.id);\r\n\r\n                          item = <a\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              href={href}\r\n                          >{quickAction.title}</a>;\r\n                        }\r\n                          break;\r\n                        case 'Link': {\r\n                          let href = quickAction.props.href.replace(':id', row.id);\r\n\r\n                          item = <Link\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              to={href}\r\n                          >{quickAction.title}</Link>;\r\n                        }\r\n                        break;\r\n                        case 'button':\r\n                          let route = quickAction.route.replace(':id', row.id);\r\n                          item = <button\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              onClick={async () => {\r\n                                if (quickAction.confirm) {\r\n                                  if (!await confirm(quickAction.confirm)) {\r\n                                    return;\r\n                                  }\r\n                                }\r\n                                const resource = new Resource({route});\r\n                                if (_.isFunction(resource[quickAction.method])) {\r\n                                  let response;\r\n                                  switch (quickAction.method) {\r\n                                    case 'get':\r\n                                      response = await resource[quickAction.method](row.id);\r\n                                      break;\r\n\r\n                                    default:\r\n                                      response = await resource[quickAction.method]();\r\n                                      break;\r\n                                  }\r\n                                  _.isFunction(quickAction.after) ? quickAction.after(response) : ''\r\n                                }\r\n                              }}\r\n                          >{quickAction.title}</button>;\r\n                          break;\r\n                          // case 'button': {\r\n                          //   let route = quickAction.route.replace(':id', row.id);\r\n                          //   item = <button\r\n                          //       className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                          //       {...quickAction.props || {}}\r\n                          //       onClick={async () => {\r\n                          //         if (quickAction.confirm) {\r\n                          //           if (!await confirm(quickAction.confirm)) {\r\n                          //             return;\r\n                          //           }\r\n                          //         }\r\n                          //         let resource = new Resource({route: route});\r\n                          //         if (_.isFunction(resource[quickAction.method])) {\r\n                          //           await resource[quickAction.method]();\r\n                          //           _.isFunction(quickAction.after) ? quickAction.after() : ''\r\n                          //         }\r\n                          //       }}\r\n                          //   >{quickAction.title}</button>;\r\n                          // }\r\n                          // break;\r\n\r\n                        default:\r\n                          break;\r\n                      }\r\n                      return <span className=\"quick-action-menu__item_wrapper\" key={index + row.id}>{item}</span>;\r\n                    })}\r\n                  </span>}\r\n                        </td>\r\n                      }\r\n                  )\r\n                }\r\n              </tr>)\r\n        }\r\n        </tbody>\r\n      </table>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default AdminTable","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport AdminTable from \"./AdminTable\";\r\n\r\n\r\nexport default class AllPages extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      pages: [],\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/pages'});\r\n  }\r\n\r\n  getPages = async () => {\r\n    let res = await this.resource.getAll();\r\n    this.setState(state => {\r\n      return { ...state, pages: res }\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getPages();\r\n  }\r\n\r\n  render(){\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Pages</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Pages</span>\r\n        </div>\r\n        <Link className=\"btn\" to=\"/admin/pages/add\">Add New</Link>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({this.state.pages.length || '0'})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AdminTable columns={[\r\n            {\r\n              name: 'title',\r\n              title: 'Title',\r\n              editUrl: true,\r\n              tag: 'Link'\r\n            },\r\n            {\r\n              name: 'author',\r\n              title: 'Author'\r\n            },\r\n            {\r\n              name: 'path',\r\n              title: 'Path',\r\n              url: true,\r\n              target: '_blank',\r\n            },\r\n          ]} \r\n          quickActions={[\r\n            {\r\n            tag: 'button',\r\n            route: `/admin/ajax/pages/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: this.getPages,\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n           }\r\n          ]}\r\n          rows={this.state.pages}/>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}","import IconsManager from \"../../../editor/src/js/classes/modules/IconsManager\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport { isEmpty } from \"lodash\";\r\n\r\nexport function redirect(url) {\r\n  url = url || '/';\r\n  window.location.assign(url);\r\n}\r\nexport function generateId() {\r\n  return '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n/**\r\n * @return {IconsManager}\r\n* */\r\nexport function iconsManager() {\r\n  if (!window.iconsManager) {\r\n    window.iconsManager = new IconsManager();\r\n  }\r\n  return window.iconsManager;\r\n}\r\n\r\nexport async function logout() {\r\n  let res = await (new Resource({ route: '/logout' })).post();\r\n  redirect(res.location)\r\n}\r\n\r\nexport function pageReload() {\r\n  document.location.reload(true);\r\n}\r\n\r\nconst a = { \"Ё\": \"Yo\", \"Й\": \"I\", \"Ц\": \"Ts\", \"У\": \"U\", \"К\": \"K\", \"Е\": \"E\", \"Н\": \"N\", \"Г\": \"G\", \"Ш\": \"Sh\", \"Щ\": \"Sch\", \"З\": \"Z\", \"Х\": \"H\", \"Ъ\": \"\", \"ё\": \"yo\", \"й\": \"i\", \"ц\": \"ts\", \"у\": \"u\", \"к\": \"k\", \"е\": \"e\", \"н\": \"n\", \"г\": \"g\", \"ш\": \"sh\", \"щ\": \"sch\", \"з\": \"z\", \"х\": \"h\", \"ъ\": \"\", \"Ф\": \"F\", \"Ы\": \"I\", \"В\": \"V\", \"А\": \"a\", \"П\": \"P\", \"Р\": \"R\", \"О\": \"O\", \"Л\": \"L\", \"Д\": \"D\", \"Ж\": \"ZH\", \"Э\": \"E\", \"ф\": \"f\", \"ы\": \"i\", \"в\": \"v\", \"а\": \"a\", \"п\": \"p\", \"р\": \"r\", \"о\": \"o\", \"л\": \"l\", \"д\": \"d\", \"ж\": \"zh\", \"э\": \"e\", \"Я\": \"Ya\", \"Ч\": \"CH\", \"С\": \"S\", \"М\": \"M\", \"И\": \"I\", \"Т\": \"T\", \"Ь\": \"\", \"Б\": \"B\", \"Ю\": \"YU\", \"я\": \"ya\", \"ч\": \"ch\", \"с\": \"s\", \"м\": \"m\", \"и\": \"i\", \"т\": \"t\", \"ь\": \"\", \"б\": \"b\", \"ю\": \"yu\" };\r\n\r\n/**\r\n * Транслитерация\r\n * @param {string}str\r\n * @return {string}\r\n */\r\nexport function transliterate(str) {\r\n  return str.split('').map(function (char) {\r\n    return _.isUndefined(a[char]) ? char : a[char];\r\n  }).join(\"\");\r\n}\r\n\r\n/**\r\n * Парсит строку в name для БД\r\n * @param {string}str\r\n * @return {string}\r\n */\r\nexport function titleToName(str) {\r\n  str = transliterate(str);\r\n  return str.toLowerCase().replace(/^\\d+/, '').replace(/[^\\d\\w]/g, '_');\r\n\r\n}\r\n/** @function objectDeepCleaning\r\n  * Удаляет все свойства id, и чистит settings\r\n  * @param {object} collection\r\n  * @return {object} Объект после удаления всех свойств id, и чистки settings\r\n */\r\nexport function objectDeepCleaning(collection) {\r\n  if (typeof collection !== \"object\" || collection === null) return collection;\r\n  if (collection.id) delete collection.id;\r\n\r\n  if (Array.isArray(collection)) {\r\n    for (let index = 0; index < collection.length; index++) {\r\n      const element = collection[index];\r\n      objectDeepCleaning(element);\r\n    }\r\n  } else {\r\n    if (collection.hasOwnProperty(\"settings\")) deleteEmptyPropsDeep(collection.settings);\r\n    if (isEmpty(collection.settings)) delete collection.settings; // удаляем settings, если оно - пустой объект\r\n    for (const key in collection) {\r\n      if (collection.hasOwnProperty(key)) {\r\n        const element = collection[key];\r\n        objectDeepCleaning(element);\r\n      }\r\n    }\r\n  }\r\n  return collection;\r\n}\r\n/** @function deleteEmptyPropsDeep\r\n  * Удаляет в объекте все свойства, значения которых - null, или \"\", или {}\r\n  * @param {object} collection\r\n */\r\nexport function deleteEmptyPropsDeep(collection) {\r\n  const deleteProps = [];\r\n  for (const key in collection) {\r\n    if (collection[key] === null || collection[key] === \"\") {\r\n      deleteProps.push(key);\r\n    }\r\n    deleteProps.forEach(key => delete collection[key]);\r\n\r\n    if (typeof collection[key] === \"object\") {\r\n      deleteEmptyPropsDeep(collection[key]);\r\n      if (isEmpty(collection[key])) delete collection[key];\r\n    }\r\n  }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {setAdminDisable, setAdminEnable} from \"../js/store/admin-state/actions\";\r\nimport store from '../js/store/store';\r\nimport {pageReload} from \"../js/helpers\";\r\n\r\n/**\r\n * Компонент вкладки обновления админки\r\n * @class\r\n */\r\nclass Updates extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      needUpdate: false,\r\n    };\r\n    this.updateAltrp = this.updateAltrp.bind(this);\r\n  }\r\n  async componentDidMount(){\r\n    store.dispatch(setAdminDisable());\r\n    let res = await (new Resource({route:'/admin/ajax/check_update'})).post( {});\r\n    if(res.result){\r\n      this.setNeedUpdate();\r\n    }\r\n    store.dispatch(setAdminEnable());\r\n  }\r\n\r\n  /**\r\n   * Вызывается, если нужно обновление\r\n   */\r\n  setNeedUpdate() {\r\n    this.setState(state => {\r\n      return {...state, needUpdate: true};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Вызывается, если не нужно обновление\r\n   */\r\n  setDontNeedUpdate() {\r\n    this.setState(state => {\r\n      return {...state, needUpdate: false};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Отправляет запрос на обноление приложения\r\n   */\r\n  async updateAltrp(){\r\n    store.dispatch(setAdminDisable());\r\n    let res = await (new Resource({route:'/admin/ajax/update_altrp'})).post( {});\r\n    setTimeout(()=>{\r\n          res.result ? pageReload() : this.setNeedUpdate();\r\n        }\r\n    ,1300);\r\n    // store.dispatch(setAdminEnable());\r\n  }\r\n\r\n  render() {\r\n    let data = {\r\n      updateMessage: 'You have the latest version of Altrp.',\r\n    };\r\n    if (this.state.needUpdate) {\r\n      data.updateMessage = 'A fresh version of Altrp is available for updating.';\r\n    }\r\n    return <div className=\"admin-updates p-4\">\r\n      <div className=\"admin-caption mt-1\">\r\n        {data.updateMessage}\r\n      </div>\r\n      {\r\n        this.state.needUpdate ?\r\n          <button className=\"btn_success btn\" onClick={this.updateAltrp}>Update</button>\r\n          :  <button className=\"btn\">Re-install Now</button>}\r\n    </div>\r\n\r\n  }\r\n}\r\n\r\nexport default Updates;","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nclass AutoUpdateInput extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.resource = new Resource({\r\n      route: this.props.route,\r\n    });\r\n\r\n    this.state = {\r\n      value: this.props.value || '',\r\n      disabled: ! this.props.value,\r\n    };\r\n    this.changeValue = this.changeValue.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n  }\r\n  async componentDidMount(){\r\n    if(this.props.value !== undefined){\r\n      return;\r\n    }\r\n    let res = await this.resource.get(this.props.resourceid);\r\n    this.setState(state=>{\r\n      return{...state,\r\n        value: res[this.props.resourceid] || '',\r\n        disabled: false,\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * При нажатии на enter тоже обновдем данные\r\n   * @param e\r\n   */\r\n  onKeyDown(e){\r\n    if(e.keyCode === 13){\r\n      this.changeValue(e);\r\n    }\r\n  }\r\n\r\n  onChange(e){\r\n    let newValue = e.target.value;\r\n    this.setState(state=>{\r\n      return{...state,\r\n        value: newValue,\r\n      }\r\n    });\r\n    if(_.isFunction(this.props.changevalue)){\r\n      this.props.changevalue(newValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Запрос на именение поля\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n  async changeValue(e){\r\n    let newValue = e.target.value;\r\n    this.setState(state=>{\r\n      return{...state,\r\n        disabled: true,\r\n      }\r\n    });\r\n    let res = await this.resource.put(this.props.resourceid, {value: newValue, column_value: newValue});\r\n    this.setState(state=>{\r\n      return{...state,\r\n        disabled: false,\r\n      }\r\n    });\r\n  }\r\n  render(){\r\n    let {className} = this.props;\r\n    if(this.state.disabled){\r\n      className += ' pointer-event-none';\r\n    }\r\n    const inputProps = {...this.props};\r\n    delete inputProps.changevalue;\r\n    return<input{...inputProps} className={className}\r\n                onBlur={this.changeValue}\r\n                onKeyDown={this.onKeyDown}\r\n                onChange={this.onChange}\r\n                value={this.state.value}/>\r\n  }\r\n}\r\n\r\nexport default AutoUpdateInput","import React, {Component} from \"react\";\r\nimport AutoUpdateInput from \"./AutoUpdateInput\";\r\n\r\nclass StylesSettings extends Component {\r\n  render() {\r\n    return <div className=\"admin-styles-settings\">\r\n      <table>\r\n        <tbody className=\"admin-settings-table-row\">\r\n        <tr className=\"admin-settings-table-row\">\r\n          <td className=\"admin-settings-table__td row-text\" width=\"10%\">\r\n            <label htmlFor=\"settings-container-width\">\r\n              Container Width\r\n            </label>\r\n          </td>\r\n          <td className=\"admin-settings-table__td\">\r\n            <AutoUpdateInput type=\"number\"\r\n                             route=\"/admin/ajax/settings\"\r\n                             resourceid=\"container_width\"\r\n                             id=\"settings-container-width\"\r\n                             className=\"form__input w-25\"/>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default StylesSettings","// import React, {Component} from \"react\";\r\n\r\nclass Import extends Component {\r\n\r\n}\r\n\r\nexport default Import","import React, {Component, Suspense} from \"react\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport Updates from \"./Updates\";\r\nimport StylesSettings from \"./StylesSettings\";\r\nimport Import from \"./settings/Import\";\r\nconst AdvancedSettings = React.lazy(()=>import('./AdvancedSettings'));\r\n\r\n\r\nexport default class AdminSettings extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.switchTab = this.switchTab.bind(this);\r\n    this.state = {\r\n      activeTab: parseInt(window.location.hash[1]) || 0,\r\n    };\r\n  }\r\n\r\n  switchTab(activeTab){\r\n    window.location.hash = activeTab + '';\r\n    this.setState(state=>{return{ ...state,activeTab }})\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\"><a className=\"admin-breadcrumbs__link\" href=\"#\">Settings</a><span\r\n            className=\"admin-breadcrumbs__separator\">/</span><span\r\n            className=\"admin-breadcrumbs__current\">Builder</span></div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={this.state.activeTab}\r\n              onSelect={this.switchTab}\r\n        >\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Tab>\r\n              GENERAL\r\n            </Tab>\r\n            <Tab>\r\n              STYLE\r\n            </Tab>\r\n            <Tab >\r\n              INTEGRATIONS\r\n            </Tab>\r\n            <Tab >\r\n              ADVANCED\r\n            </Tab>\r\n            <Tab >\r\n              UPDATES\r\n            </Tab>\r\n            <Tab >\r\n              IMPORT\r\n            </Tab>\r\n          </TabList>\r\n          <TabPanel>\r\n            <table>\r\n              <tbody className=\"admin-table-body\">\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Post Types</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Pages<br/>\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>News\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Disable Default Colors</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Checking this box will disable\r\n                  Builder's Default Colors, and make Builder inherit the colors from your CSS file\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Disable Default Fonts</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Checking this box will disable\r\n                  Builder’s Default Fonts, and make Builder inherit the fonts from your CSS file\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td header-text\">Improve builder</td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Usage Data Sharing</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Become a super contributor by\r\n                  opting in to share non-sensitive plugin data and to get our updates. Learn more\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td\">\r\n                  <button className=\"admin-settings-button btn btn-sm\" type=\"button\">Save Changes</button>\r\n                </td>\r\n              </tr>\r\n\r\n              </tbody>\r\n            </table>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <StylesSettings/>\r\n          </TabPanel>\r\n          <TabPanel>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Suspense fallback={'Loading'}>\r\n              <AdvancedSettings/>\r\n            </Suspense>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Updates attr={'attr'}/>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Import />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M15.63 1.79h-1v12.48a.36.36 0 01-.36.36H1.79v1a.37.37 0 00.37.37h13.47a.36.36 0 00.37-.37V2.16a.37.37 0 00-.37-.37z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13.79 13.42V.37a.37.37 0 00-.37-.37H.37A.36.36 0 000 .37v13.05a.37.37 0 00.37.37h13.05a.38.38 0 00.37-.37zM10 2.71a1.4 1.4 0 11-1.4 1.4 1.4 1.4 0 011.4-1.4zm-8.8 9.91C1.27 11 2.1 8 3.3 6.83s2-.13 2.72.9a27.9 27.9 0 001.73 2.32c.81.81 1.49-.41 2.34-.81 1.23-.59 2.24 2.46 2.5 3.39z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.73 10.85\" {...props}><g data-name=\"Слой 2\"><path d=\"M8.87 0A8.88 8.88 0 000 8.87a9.67 9.67 0 00.16 1.69.37.37 0 00.36.29h16.69a.36.36 0 00.36-.29A8.88 8.88 0 008.87 0zm0 1a.93.93 0 11-.66 1.58A.93.93 0 018.87 1zM2 9.79a.93.93 0 11.92-.92.93.93 0 01-.92.92zm2.63-5.16a.88.88 0 01-.63.28.94.94 0 01-.95-.91.92.92 0 01.95-.95.94.94 0 01.91.95.88.88 0 01-.28.63zm5.78 5.09a2.33 2.33 0 11-3-3.58c1-.83 6.74-2.57 6.74-2.57S11.4 8.9 10.41 9.72zm5.37.07a.93.93 0 11.92-.92.93.93 0 01-.92.92z\" fill=\"#fff\" data-name=\"Слой 1\" /></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13 17.35\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M10.33 15.72H1.6V2.64H.47a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.47h9.39a.47.47 0 00.47-.47z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13 .47a.47.47 0 00-.47-.47H3.14a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.46h9.39a.44.44 0 00.33-.14.43.43 0 00.14-.32z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17 16.96\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M4.31 2.67A.43.43 0 004 2.54a.41.41 0 00-.31.14c-2.54 2.8-1.16 8.86-1 9.46L.12 14.7A.41.41 0 000 15a.42.42 0 00.12.3l1.54 1.53a.41.41 0 00.6 0l2.55-2.55a17.77 17.77 0 004.19.51c1.65 0 3.91-.26 5.3-1.52a.5.5 0 00.14-.31.46.46 0 00-.13-.31zM8 5.19a.44.44 0 00.3.12.42.42 0 00.3-.12L11.76 2a1.17 1.17 0 00.34-.83 1.18 1.18 0 00-.34-.84 1.16 1.16 0 00-.84-.33 1.15 1.15 0 00-.84.35L6.92 3.51a.42.42 0 000 .6zM16.65 5.24a1.2 1.2 0 00-1.67 0l-3.17 3.17a.44.44 0 000 .6l1.08 1.07a.41.41 0 00.6 0l3.16-3.16a1.18 1.18 0 000-1.68z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M16.14 10H8.06L8 6V1.5c0-.5-.29-.39-.48-.37a8.46 8.46 0 109.31 9.64.69.69 0 00-.69-.79z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M10.38 0a.37.37 0 00-.27.09.36.36 0 00-.11.25V8h7.65a.36.36 0 00.25-.11.32.32 0 00.1-.25A8 8 0 0010.38 0z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17 16.6\" {...props}><g data-name=\"Слой 2\"><path d=\"M16.66 8.49l-1.5-.34a6.68 6.68 0 00-.55-2.49l1.16-1a.42.42 0 00.06-.61l-1.59-2A.41.41 0 0014 2a.46.46 0 00-.32.09L12.5 3a6.72 6.72 0 00-2.3-1.11V.43A.44.44 0 009.76 0H7.23a.43.43 0 00-.43.43v1.45A6.77 6.77 0 004.45 3l-1.14-.88A.46.46 0 003 2a.41.41 0 00-.29.16l-1.58 2a.44.44 0 00.07.61l1.18.93a6.56 6.56 0 00-.53 2.5l-1.5.35a.38.38 0 00-.27.19.43.43 0 00-.08.34l.57 2.46a.43.43 0 00.52.33l1.55-.36a6.66 6.66 0 001.57 1.93l-.69 1.45a.42.42 0 000 .33.45.45 0 00.22.25L6 16.56a.43.43 0 00.19 0h.15a.45.45 0 00.24-.23l.71-1.47a6.78 6.78 0 002.46 0l.71 1.47a.45.45 0 00.58.2l2.27-1.11a.39.39 0 00.22-.25.42.42 0 000-.33l-.7-1.45a6.67 6.67 0 001.56-1.94l1.54.34a.43.43 0 00.52-.33L17 9a.44.44 0 00-.34-.51zm-5.3-.16A2.86 2.86 0 118.5 5.47a2.86 2.86 0 012.86 2.86z\" fill=\"#fff\" data-name=\"Слой 1\" /></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M0 .2A.2.2 0 01.2 0h3.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 .2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2zM0 6.2A.2.2 0 01.2 6h3.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 6.2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M14.67 0H.33A.31.31 0 000 .28v3.09a.31.31 0 00.33.28h14.34a.31.31 0 00.33-.28V.28a.31.31 0 00-.33-.28zM9 5H6a.32.32 0 00-.33.32v2.22a.32.32 0 00.33.32h3a.32.32 0 00.33-.32V5.28A.32.32 0 009 5zM9 9.15H6a.32.32 0 00-.33.32v5.21A.32.32 0 006 15h3a.32.32 0 00.33-.32V9.47A.32.32 0 009 9.15zM14.67 5h-3a.32.32 0 00-.33.32V10a.32.32 0 00.33.32h3A.32.32 0 0015 10V5.28a.32.32 0 00-.33-.28zM3.37 5h-3a.32.32 0 00-.37.28V10a.32.32 0 00.33.32h3A.32.32 0 003.7 10V5.28A.32.32 0 003.37 5zM3.37 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.29.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.29-.32zM14.67 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.33.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.33-.32z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18.51 15.26\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13.52 14.52a9.31 9.31 0 01-4 .74A15.11 15.11 0 015 14.52h-.09v-2.68a3.23 3.23 0 013.22-3.22h2.26a3.23 3.23 0 013.22 3.22v2.64zM6.16 7.63a4.56 4.56 0 00-2.7 3.81v.85A15.49 15.49 0 010 11.61s0-.14 0 0V8.9a3.08 3.08 0 013.08-3.1h2.34a3.92 3.92 0 00.74 1.83zM11.6 5.29a2.39 2.39 0 01-2.34 2.43 2.39 2.39 0 01-2.34-2.43 2.39 2.39 0 012.34-2.44 2.39 2.39 0 012.34 2.44zM5.57 4.46a2.35 2.35 0 01-1.2.33 2.38 2.38 0 112.38-2.38 3.33 3.33 0 00-1.18 2.05zM13.09 5.77h2.34a3.09 3.09 0 013.07 3.1v2.71c0-.14 0 0 0 0a15.57 15.57 0 01-3.43.68v-.85a4.56 4.56 0 00-2.7-3.81 3.92 3.92 0 00.72-1.83zM11.75 2.43v-.05a2.39 2.39 0 112.39 2.38 2.32 2.32 0 01-1.2-.33 3.39 3.39 0 00-1.19-2z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg height=\"40\" viewBox=\"0 0 1792 1792\" width=\"40\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10L407 759q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"31\" height=\"31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M11.124 24.386l-4.415 2.492c-.26.146-.492.325-.709.521C8.574 29.645 11.897 31 15.528 31c3.603 0 6.905-1.335 9.472-3.55a3.911 3.911 0 00-.778-.54l-4.728-2.445a1.873 1.873 0 01-.997-1.67v-1.919a7.36 7.36 0 00.447-.595 11.42 11.42 0 001.47-3.064 1.53 1.53 0 001.053-1.462v-2.049c0-.45-.194-.853-.495-1.135V9.609S21.56 5 15.528 5s-5.444 4.609-5.444 4.609v2.962a1.55 1.55 0 00-.495 1.135v2.049c0 .54.274 1.015.685 1.289.495 2.229 1.79 3.832 1.79 3.832v1.873c0 .681-.361 1.31-.94 1.637z\" fill=\"#F7F8F9\" /><path d=\"M15.765.002C7.207-.144.15 6.676.002 15.236c-.083 4.853 2.08 9.215 5.524 12.115.226-.196.467-.377.736-.523l4.625-2.523a1.89 1.89 0 00.984-1.658v-1.895s-1.357-1.624-1.875-3.88a1.555 1.555 0 01-.717-1.305v-2.074c0-.456.203-.864.518-1.15V9.346S9.18 4.68 15.5 4.68s5.703 4.666 5.703 4.666v2.999c.316.285.518.693.518 1.15v2.073c0 .698-.468 1.284-1.103 1.48a11.397 11.397 0 01-1.54 3.103c-.17.24-.329.444-.468.602v1.943c0 .715.404 1.37 1.044 1.69l4.953 2.475c.297.149.565.337.813.546a15.46 15.46 0 005.578-11.64C31.145 7.205 24.325.148 15.765.002z\" fill=\"#8E94AA\" /></svg>);","import React, {Component} from \"react\";\r\nimport PluginSvg from \"../../svgs/plugins.svg\";\r\nimport VectorSvg from '../../svgs/vector.svg';\r\nimport UserSvg from '../../svgs/user.svg';\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nexport default class Users extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n            role_filter: \"all\",\r\n            search: \"\",\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/users'});\r\n        \r\n        /*\r\n        \r\n        \r\n        this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        \r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);\r\n        \r\n        \r\n        this.addColumn = this.addColumn.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        */\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let users_result = await this.resource.getAll();\r\n        this.setState(state=>{\r\n            return{...state, data: users_result};\r\n        });\r\n    }\r\n    \r\n        \r\n  render(){\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <a className=\"admin-breadcrumbs__link\" href=\"#\">Users</a>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">All Users</span>\r\n                </div>\r\n                <Link className=\"btn\" to={\"/admin/users/new/\"}>Add New</Link>\r\n                <div className=\"admin-filters\">\r\n                    <span className=\"admin-filters__current\">All (4)</span>\r\n                    <span className=\"admin-filters__separator\">|</span>\r\n                    <a className=\"admin-filters__link\" href=\"#\">Administrator (1)</a>\r\n                    <span className=\"admin-filters__separator\">|</span>\r\n                    <a className=\"admin-filters__link\" href=\"#\">Editor (3)</a>\r\n                </div>\r\n            </div>\r\n                <div className=\"admin-panel\">\r\n                    <form className=\"admin-users-form form-bulk-left\">\r\n                        <select className=\"form-control input-sm\">\r\n                            <option value=\"1\">Bulk Actions</option>\r\n                        </select>\r\n                        <button className=\"btn btn_bare admin-users-button\">Apply</button>\r\n                    </form>\r\n                    <form className=\"admin-users-form form-bulk-right\" >\r\n                        <select className=\"form-control input\">\r\n                            <option value=\"1\">Change role on...</option>\r\n\r\n                        </select>\r\n                        <button className=\"btn btn_bare admin-users-button\">Change</button>\r\n                    </form>\r\n                    <form className=\"admin-users-form form-bulk-search\" >\r\n                        <input type=\"search\" className=\"form-control input-sm\" placeholder=\"\" aria-controls=\"example1\"/>\r\n                        <button type=\"search\" className=\"btn btn_bare admin-users-button\">Search Users</button>\r\n                    </form>\r\n                </div>\r\n            <div className=\"admin-users-table\">\r\n                <table className=\"table\">\r\n                    <thead className=\"admin-users-table-head\">\r\n                        <tr className=\"admin-table-row\">\r\n                            <td className=\"admin-table__td admin-table__td_check\">\r\n                                <input className=\"input-users\" type=\"checkbox\"/>\r\n                                Username\r\n                                <VectorSvg className=\"vector-svg\"/>\r\n                            </td>\r\n                            <td className=\"admin-table__td \">Name</td>\r\n                            <td className=\"admin-table__td \">Email</td>\r\n                            <td className=\"admin-table__td \">Role<VectorSvg className=\"vector-svg role-svg\"/></td>\r\n                            <td className=\"admin-table__td \">Post</td>\r\n                            <td className=\"admin-table__td \">Last Enter</td>\r\n                            <td className=\"admin-table__td \">Status</td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"admin-table-body\">\r\n                    {\r\n                    \r\n                        this.state.data.map((row, idx) => \r\n                            \r\n                            <tr className=\"admin-table-row\" key={row.id}>\r\n                                <td className=\"admin-table__td admin-table__td_check \">\r\n                                    <input className=\"input-users\" type=\"checkbox\"/>\r\n                                    <UserSvg className=\"users-svg\"/>\r\n                                    <Link to={\"/admin/users/user/\"+row.id}>{row.name}</Link>\r\n                                </td>\r\n                                <td className=\"admin-table__td \">{row.full_name}</td>\r\n                                <td className=\"admin-table__td \"><a>{row.email}</a></td>\r\n                                <td className=\"admin-table__td \"><a>{row.roles.map((value) => {return value.name}).join(\", \")}</a></td>\r\n                                <td className=\"admin-table__td \">2</td>\r\n                                <td className=\"admin-table__td \">{row.last_login_at}</td>\r\n                                <td className=\"admin-table__td \">Enable</td>\r\n                            </tr>\r\n                        \r\n                        )\r\n                        \r\n                    }   \r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  }\r\n\r\n}\r\n","import React, {Component} from \"react\";\r\nimport AsyncSelect from \"react-select/async\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport Select from \"react-select\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\n\r\nconst renderScrollbar = (props) => {\r\n  return <Scrollbars autoHeight >{props.children}</Scrollbars>;\r\n};\r\n\r\nclass AltrpSelect extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      options: props.options || [],\r\n    };\r\n    if(props.optionsRoute){\r\n      this.optionsResource = new Resource({route: props.optionsRoute});\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  async componentDidMount(){\r\n\r\n  }\r\n  /**\r\n   * изменение значения\r\n   */\r\n  onChange(){\r\n\r\n  }\r\n  /**\r\n   * изменение в инпуте\r\n   */\r\n  onInputChange(){\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  loadOptions = async (searchString, callback)=>{\r\n    let options = [];\r\n    if(this.optionsResource){\r\n      options = await this.optionsResource.search(searchString);\r\n    }\r\n    this.setState(state=>({\r\n      ...state,\r\n      options\r\n    }));\r\n    return callback(options);\r\n  };\r\n  /**\r\n   *\r\n   */\r\n\r\n  render(){\r\n    const customStyles = {\r\n      menuPortal: base => ({ ...base, zIndex: 99999 }),\r\n      // option: (provided, state) => ({\r\n      //   ...provided,\r\n      //   backgroundColor: state.isSelected ?\r\n      //     background.selected.color :\r\n      //     state.isFocused ? background.focused.color : background.normal.color\r\n      // })\r\n    };\r\n\r\n    let selectProps = {\r\n      onChange: this.onChange,\r\n      onInputChange: this.onInputChange,\r\n      options: this.state.options || [],\r\n      placeholder: this.props.placeholder,\r\n      loadOptions: this.loadOptions,\r\n      noOptionsMessage: this.props.noOptionsMessage || (() => \"not found\"),\r\n      styles: customStyles,\r\n      menuPortalTarget: document.body,\r\n      menuPlacement: 'auto',\r\n      menuPosition: 'absolute',\r\n      components: { MenuList: renderScrollbar },\r\n      captureMenuScroll: false\r\n    };\r\n    \r\n    _.assign(selectProps, this.props);\r\n    if( this.optionsResource){\r\n      return <AsyncSelect {...selectProps} />\r\n    } else {\r\n      return <Select {...selectProps} />\r\n    }\r\n  }\r\n}\r\n\r\nexport default AltrpSelect\r\n\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n//import TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass UserForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.id,\r\n      user: {},\r\n      usermeta: {},\r\n      errors: [],\r\n      redirectAfterSave: false,\r\n      redirectAfterError: false,\r\n      redirect_error_url: \"/admin/users\",\r\n      rolesOptions: [],\r\n      permissionsOptions: []\r\n    };\r\n\r\n    if (!this.state.id) {\r\n      console.log(this.props.id)\r\n    }\r\n\r\n    this.resource = new Resource({ route: '/admin/ajax/users' });\r\n    this.rolesOptions = new Resource({ route: '/admin/ajax/role_options' });\r\n    this.permissionsOptions = new Resource({ route: '/admin/ajax/permissions_options' });\r\n\r\n    this.saveUser = this.saveUser.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const rolesOptions = await this.rolesOptions.getAll();\r\n    this.setState(state => ({ ...state, rolesOptions }));\r\n    const permissionsOptions = await this.permissionsOptions.getAll();\r\n    this.setState(state => ({ ...state, permissionsOptions }));\r\n    if (!this.state.id) {\r\n      return;\r\n    }\r\n\r\n    if (this.state.id) {\r\n\r\n      let user_data = await this.resource.get(this.state.id);\r\n\r\n      this.setState(state => {\r\n        return { ...state, user: user_data }\r\n      }, async () => {\r\n        let usermeta_data = await this.resource.get(this.state.id + \"/usermeta\");\r\n\r\n        this.setState(state => {\r\n          return { ...state, usermeta: usermeta_data }\r\n        });\r\n\r\n      });\r\n    }\r\n  }\r\n\r\n  async saveUser(e) {\r\n    e.preventDefault();\r\n    let res, usermeta_resource, usermeta_res;\r\n\r\n    if (this.state.id) {\r\n      res = await this.resource.put(this.state.id, this.state.user);\r\n    } else {\r\n      res = await this.resource.post(this.state.user);\r\n    }\r\n    console.log(res);\r\n\r\n\r\n\r\n    if (res) {\r\n\r\n      //Обновление меты\r\n\r\n      usermeta_resource = new Resource({ route: '/admin/ajax/users/' + res.id + \"/usermeta\" });\r\n\r\n      usermeta_res = await usermeta_resource.post(this.state.usermeta);\r\n\r\n      if (usermeta_res) {\r\n        this.setState(state => {\r\n          return { ...state, redirectAfterSave: true }\r\n        });\r\n      }\r\n      else {\r\n        this.setState(state => {\r\n          return { ...state, redirectAfterError: true, redirect_error_url: this.state.redirect_error_url + \"/user/\" + res.id }\r\n        });\r\n      }\r\n\r\n\r\n    } else {\r\n      /*this.setState(state=>{\r\n          return {...state, value: {}}\r\n      });*/\r\n    }\r\n  }\r\n\r\n  changeValue(e, source = \"user\") {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state[source][field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  changeRolesHandler = roles => {\r\n    this.setState({\r\n      usermeta: {\r\n        ...this.state.usermeta,\r\n        roles: roles ? roles.map(role => role.value) : []\r\n      },\r\n      user:{\r\n        ...this.state.user,\r\n        _roles: roles ? roles.map(role => role.value) : []\r\n      }\r\n    })\r\n  };\r\n\r\n  changePermissionsHandler = permissions => {\r\n    this.setState({\r\n      usermeta: {\r\n        ...this.state.usermeta,\r\n        permissions: permissions ? permissions.map(permission => permission.value) : []\r\n      },\r\n      user:{\r\n        ...this.state.user,\r\n        _permissions: permissions ? permissions.map(permission => permission.value) : []\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const { rolesOptions, permissionsOptions } = this.state;\r\n    const { _roles: roles = [], _permissions: permissions = [] } = this.state.user;\r\n    if (this.state.redirectAfterSave) {\r\n      return <Redirect to={this.props.redirect_url} />\r\n    }\r\n    if (this.state.redirectAfterError) {\r\n      return <Redirect to={this.state.redirect_error_url} />\r\n    }\r\n    return <form className=\"admin-form\" onSubmit={this.saveUser}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-name\">Name</label>\r\n        <input type=\"text\" id=\"name\" name=\"name\" required={1}\r\n          value={this.state.user.name || ''}\r\n               disabled={this.props.id}\r\n          onChange={(e) => { this.changeValue(e) }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-title\">Email</label>\r\n        <input type=\"email\" id=\"email\" name=\"email\" required={1}\r\n          value={this.state.user.email || ''}\r\n          onChange={(e) => { this.changeValue(e) }}\r\n               disabled={this.props.id}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      {!this.state.id ?\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"page-description\">Password</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" required={1}\r\n            value={this.state.user.password || ''}\r\n            onChange={(e) => { this.changeValue(e) }}\r\n            className=\"form-control\" />\r\n        </div> : null}\r\n      {!this.state.id ?\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"page-description\">Confirm Password</label>\r\n          <input type=\"password\" id=\"password_confirmation\" name=\"password_confirmation\" required={1}\r\n            value={this.state.user.password_confirmation || ''}\r\n            onChange={(e) => { this.changeValue(e) }}\r\n            className=\"form-control\" />\r\n        </div> : null}\r\n\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">First Name</label>\r\n        <input type=\"text\" id=\"first_name\" name=\"first_name\"\r\n          value={this.state.usermeta.first_name || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">Second Name</label>\r\n        <input type=\"text\" id=\"second_name\" name=\"second_name\"\r\n          value={this.state.usermeta.second_name || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">Patronymic</label>\r\n        <input type=\"text\" id=\"patronymic\" name=\"patronymic\"\r\n          value={this.state.usermeta.patronymic || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"roles\">Roles</label>\r\n        <AltrpSelect id=\"roles\"\r\n          closeMenuOnSelect={false}\r\n          value={_.filter(rolesOptions, r => roles && roles.indexOf(r.value) >= 0)}\r\n          isMulti={true}\r\n          onChange={this.changeRolesHandler}\r\n          options={rolesOptions} />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"permissions\">Permissions</label>\r\n        <AltrpSelect id=\"permissions\"\r\n          value={_.filter(permissionsOptions, p => permissions && permissions.indexOf(p.value) >= 0)}\r\n          closeMenuOnSelect={false}\r\n          isMulti={true}\r\n          onChange={this.changePermissionsHandler}\r\n          options={permissionsOptions} />\r\n      </div>\r\n\r\n      <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default UserForm;","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport UserForm from \"./UserForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddUserPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      redirectAfterSave: false,\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/users'});\r\n    \r\n    //this.savePage = this.savePage.bind(this);\r\n  }\r\n  /*async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n    let id = this.props.location.pathname.split('/');\r\n    id = id[id.length - 1];\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }*/\r\n  /*async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }*/\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/users\"/>\r\n    }\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to={\"/admin/users\"}>Users</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Users</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-users-form\">\r\n                <UserForm redirect_url=\"/admin/users\"/>\r\n            </div>\r\n        </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddUserPage);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport UserForm from \"./UserForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass EditUserPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        user_id: this.props.match.params.id,\r\n        redirectAfterSave: false,\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/users/user'});\r\n    \r\n    //this.savePage = this.savePage.bind(this);\r\n  }\r\n  /*async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n    let id = this.props.location.pathname.split('/');\r\n    id = id[id.length - 1];\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }*/\r\n  /*async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }*/\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/users\"/>\r\n    }\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to={\"/admin/users\"}>Users</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Users</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-users-form\">\r\n                <UserForm redirect_url=\"/admin/users\" id={this.state.user_id} />\r\n            </div>\r\n        </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditUserPage);","import React, {Component} from \"react\";\r\nimport PluginSvg from \"../../svgs/plugins.svg\";\r\n\r\nexport default class UsersTools extends Component{\r\n  render(){ return <div id=\"content\">\r\n\r\n          <div className=\"admin-heading-users\">\r\n            <div className=\"admin-breadcrumbs\">\r\n              <a className=\"admin-breadcrumbs__link\" href=\"#\">Users</a>\r\n              <span className=\"admin-breadcrumbs__separator\">/</span>\r\n              <span className=\"admin-breadcrumbs__current\">Tools</span>\r\n            </div>\r\n          </div>\r\n\r\n          <ul className=\"nav nav-tabs\">\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link active\" href=\"#\">Tools</a>\r\n            </li>\r\n          </ul>\r\n          <div className=\"border border-top-0\">\r\n            <div className=\"row d-flex\">\r\n              <div className=\"col-sm-8 d-flex change-role\">\r\n\r\n                <span>Change role</span>\r\n                <select className=\"form-control form-control-sm\">\r\n                  <option value=\"1\">Editor</option>\r\n                  <option value=\"2\">Moderator</option>\r\n                </select>\r\n                <div className=\"form-check form-check-inline\">\r\n                  <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkbox__1\"/>\r\n                    <label className=\"form-check-label\" htmlFor=\"checkbox__1\">Readable features</label>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"row group-table border border-bottom-0 border-left-0 border-right-0 no-gutters\">\r\n              <div className=\"col-3\">\r\n                <span className=\"text-group\">Groups</span>\r\n                <span className=\"text-total\">(Total/Allowed)</span>\r\n              </div>\r\n              <div className=\"col-6 form-check form-check-inline\">\r\n                <input className=\"form-check-input\" type=\"checkbox\" id=\"checkbox__2\"/>\r\n                  <label className=\"form-check-label\" htmlFor=\"checkbox__2\">Fast filter:</label>\r\n\r\n                  <input type=\"search\" className=\"search-tools form-control-sm\" placeholder=\"\"\r\n                         aria-controls=\"example1\"/>\r\n                    <input className=\"form-check-input\" type=\"checkbox\" id=\"checkbox__3\"/>\r\n                      <label className=\"form-check-label\" htmlFor=\"checkbox__3\">Only Allowed</label>\r\n\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <form action=\"#\" className=\"form-tools\">\r\n                  <button type=\"submit\" className=\"btn-tools\">Save Changes</button>\r\n                </form>\r\n\r\n              </div>\r\n            </div>\r\n            <div className=\"row group-table-trees border border-bottom-0 border-left-0 border-right-0 no-gutters\">\r\n              <div className=\"col-3\">\r\n                <div className=\"treeview\">\r\n                  <ul>\r\n                    <li>\r\n                      <div>\r\n                        <p>\r\n                          <a href=\"#\" className=\"core\">Core (112/2)</a>\r\n                        </p>\r\n                      </div>\r\n                      <ul>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Dashboard (10/1)</a>\r\n                            </p>\r\n                            <p className=\"form-group-p\"><a href=\"#\">Rename</a><span> | </span><a\r\n                              href=\"#\">Copy</a><span> | </span><a href=\"#\">Delete</a></p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Assets (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Tables (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Templates (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Reports (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Users (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Plugins (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li className=\"cl\">\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Setings (42/5)</a>\r\n                            </p>\r\n                          </div>\r\n                          <ul className=\"l\">\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Builder (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Import/Export (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Integration (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Sender (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Acquiring (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Tuner (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                          </ul>\r\n                        </li>\r\n                      </ul>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n\r\n              </div>\r\n              <div className=\"col-6 form-check form-check-group\">\r\n                <fieldset className=\"form-group\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm-10\">\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios1\" value=\"option1\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios1\">\r\n                            Create Template\r\n                          </label>\r\n                          <p className=\"form-group-p\"><a href=\"#\">Rename</a><span> | </span><a\r\n                            href=\"#\">Copy</a><span> | </span><a href=\"#\">Delete</a></p>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios2\" value=\"option2\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios2\">\r\n                            Duplicate Template\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios3\" value=\"option3\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios3\">\r\n                            Activate / Deactivate Widgets\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios4\" value=\"option4\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios4\">\r\n                            Setup Integration\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios5\" value=\"option5\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios5\">\r\n                            Import / Export Templates\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios6\" value=\"option6\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios6\">\r\n                            Delete Template\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios7\" value=\"option7\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios7\">\r\n                            Edit Template\r\n                          </label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </fieldset>\r\n              </div>\r\n              <div className=\"col-3 \">\r\n                <form action=\"#\" className=\"group-vertical\">\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Rename Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Delete Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Group</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Permission</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Tools Export</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Tools Import</button>\r\n                </form>\r\n                <form action=\"#\" className=\"dangerous\">\r\n                  <span>Warning! that “Reset” action could be dangerous</span>\r\n                  <button type=\"submit\" className=\"btn-danger\">RESET</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {iconsManager} from \"../js/helpers\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\n\r\n\r\nexport default class Assets extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.onDragOver = this.onDragOver.bind(this);\r\n    this.onDragLeave = this.onDragLeave.bind(this);\r\n    this.onDrop = this.onDrop.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.deleteClick = this.deleteClick.bind(this);\r\n    this.state = {\r\n      uploaderClasses: 'admin-assets__uploader uploader',\r\n      assets: [],\r\n      itemDeleteClasses: 'item__delete',\r\n    };\r\n    this.resource  = new Resource({route: '/admin/ajax/media'});\r\n  }\r\n  deleteClick(e){\r\n    let assetId = e.currentTarget.dataset.assetid;\r\n    this.setState(state=>{\r\n      return{...state, itemDeleteClasses: 'item__delete altrp-disabled'}\r\n    });\r\n    this.resource.delete(assetId).then(res=>{\r\n      if(res.success){\r\n        let newAssets = [...this.state.assets];\r\n        newAssets = _.filter(newAssets, item => !(item.id===Number(assetId)));\r\n        this.setState(state=>{\r\n          return{...state, assets: newAssets, itemDeleteClasses: 'item__delete'};\r\n        })\r\n      }\r\n    });\r\n  }\r\n  updateAssets(files){\r\n    this.resource.postFiles(files).then(res=>{\r\n      if(res.length){\r\n        let newAssets = res.concat(this.state.assets);\r\n        this.setState(state=>{\r\n          return{...state, assets: newAssets}\r\n        })\r\n      }\r\n    })\r\n  }\r\n  onDrop(e){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.updateAssets(e.dataTransfer.files);\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader'}\r\n    });\r\n  }\r\n  componentDidMount(){\r\n    this.resource.getAll().then(res=>{\r\n      this.setState(state=>{\r\n        return {...state, assets: res}\r\n      })\r\n    });\r\n  }\r\n  onChange(e){\r\n    this.updateAssets(e.target.files);\r\n  }\r\n  onDragOver(e){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader uploader_drag-over'}\r\n    });\r\n  }\r\n  onDragLeave(){\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader'}\r\n    });\r\n  }\r\n  render() {\r\n    let UploadIcon = iconsManager().getIconComponent('upload');\r\n    let CloseIcon = iconsManager().getIconComponent('close');\r\n    return <div className=\"admin-assets admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Assets</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Assets</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <div className={this.state.uploaderClasses}\r\n             onDragLeave={this.onDragLeave}\r\n             onDrop={this.onDrop}\r\n             onDragOver={this.onDragOver}>\r\n          <label className=\"uploader__label d-flex flex-column align-items-center\">\r\n            <UploadIcon width={100} height={100} className=\"icon\"/>\r\n            <input type=\"file\"\r\n                   accept=\"image/*\"\r\n                   multiple={true}\r\n                   onChange={this.onChange}\r\n                   className=\"uploader__input\"/>\r\n            <span className=\"uploader__text text text_bold\">\r\n              Drag or Choose File\r\n            </span>\r\n          </label>\r\n        </div>\r\n        <div className=\"admin-assets__list p-4 mt-4 assets-list d-flex flex-wrap\">\r\n          {\r\n            this.state.assets.map(asset=>{\r\n              return<div className=\"assets-list__item item col-1\" key={asset.id} >\r\n                <div className=\"item__background\"\r\n                     style={{'backgroundImage': `url('${asset.url}')`}}/>\r\n                <button className={this.state.itemDeleteClasses}\r\n                        data-assetid={asset.id}\r\n                        title=\"Delete\"\r\n                        onClick={this.deleteClick}>\r\n                  <CloseIcon className=\"item__delete-icon\"/>\r\n                </button>\r\n              </div>}\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n","export const BAR = \"CHART/BAR\";\r\nexport const PIE = \"CHART/PIE\";\r\nexport const DONUT = \"CHART/DONUT\";\r\nexport const AREA = \"CHART/AREA\";\r\nexport const LINE = \"CHART/LINE\";\r\nexport const TABLE = \"CHART/TABLE\";\r\n\r\nexport const widgetTypes = [\r\n  { name: \"Столбцы\", value: BAR },\r\n  { name: \"Круговая диаграмма\", value: PIE },\r\n  { name: \"Кольцевая диаграмма\", value: DONUT },\r\n  { name: \"Линии\", value: LINE },\r\n  { name: \"Графики\", value: AREA },\r\n  { name: \"Таблица\", value: TABLE },\r\n];\r\n\r\nexport const getTypeName = (value) => widgetTypes.find((w) => w.value === value).name;\r\n","import React from \"react\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-border\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nconst EmptyWidget = ({ text }) => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-container__text\">{text ? text : \"Нет данных\"}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyWidget;\r\n","import axios from \"axios\";\r\n\r\nexport const queryString = (obj = {}) =>\r\n  Object.keys(obj).reduce((str, key, i) => {\r\n    let delimiter, val;\r\n    delimiter = i === 0 ? \"?\" : \"&\";\r\n    key = encodeURIComponent(key);\r\n    val = encodeURIComponent(obj[key]);\r\n    return [str, delimiter, key, \"=\", val].join(\"\");\r\n  }, \"\");\r\n\r\nexport const getWidgetData = async (url, filter) => {\r\n  const params = queryString(filter);\r\n  try {\r\n    return await axios(url + params);\r\n  } catch (error) {\r\n    return { status: 500 };\r\n  }\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  BarChart,\r\n  BarSeries,\r\n  Bar,\r\n  Gradient,\r\n  GradientStop,\r\n  DiscreteLegend,\r\n  DiscreteLegendEntry,\r\n} from \"reaviz\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicBarChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <BarChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        series={\r\n          <BarSeries\r\n            colorScheme={widget.options.colorScheme}\r\n            bar={<Bar gradient={<Gradient stops={[<GradientStop stopOpacity={1} />]} />} />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicBarChart;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { PieChart, PieArcSeries, PieArcLabel, DiscreteLegend, DiscreteLegendEntry } from \"reaviz\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicPieChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data || []);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if ((! data) || data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <PieChart\r\n        height={height}\r\n        width={width}\r\n        data={data || []}\r\n        series={\r\n          <PieArcSeries\r\n            explode={widget.options.explode}\r\n            colorScheme={widget.options.colorScheme}\r\n            label={<PieArcLabel fontSize={12} fontFill=\"#000000\" />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicPieChart;\r\n","import React from \"react\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-border\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  AreaChart,\r\n  AreaSeries,\r\n  MarkLine,\r\n  Line,\r\n  LinearXAxis,\r\n  LinearXAxisTickSeries,\r\n  LinearXAxisTickLabel,\r\n  Area,\r\n  Gradient,\r\n  GradientStop,\r\n} from \"reaviz\";\r\n\r\nimport format from \"date-fns/format\";\r\nimport formatDistanceStrict from \"date-fns/formatDistanceStrict\";\r\nimport ru from \"date-fns/locale/ru\";\r\n\r\nimport Spinner from \"../Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicAreaChart = ({ widget, width = 300, height = 300, color = \"#FFD51F\" }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200 && typeof charts.data !== \"string\") {\r\n      const newData = charts.data.data.map((item) => {\r\n        const key = new Date(item.key);\r\n        if (key) {\r\n          return {\r\n            key,\r\n            data: item.data,\r\n          };\r\n        }\r\n      });\r\n      setData(newData);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const formattingDate = (d) => {\r\n    //  Первая дата\r\n    const firstDate = data.slice().shift();\r\n    // Последняя дата\r\n    const lastDate = data.slice().pop();\r\n    // Разница между датами в месяцах\r\n    const diff = parseInt(\r\n      formatDistanceStrict(firstDate.key, lastDate.key, {\r\n        unit: \"month\",\r\n      })\r\n    );\r\n\r\n    if (diff >= 0 && diff <= 12) {\r\n      return format(d, \"d LLL\", { locale: ru });\r\n    } else {\r\n      return format(d, \"d MMM yy\", { locale: ru });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (!Array.isArray(data) || data.length === 0) return <EmptyWidget />;\r\n\r\n  return (\r\n    <>\r\n      <AreaChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        xAxis={\r\n          <LinearXAxis\r\n            type=\"time\"\r\n            tickSeries={\r\n              <LinearXAxisTickSeries label={<LinearXAxisTickLabel format={formattingDate} />} />\r\n            }\r\n          />\r\n        }\r\n        series={\r\n          <AreaSeries\r\n            type={widget.options.type || \"standard\"}\r\n            markLine={<MarkLine strokeWidth={0} />}\r\n            line={<Line strokeWidth={0} />}\r\n            area={\r\n              <Area\r\n                gradient={<Gradient color={color} stops={[<GradientStop color={color} />]} />}\r\n              />\r\n            }\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicAreaChart;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  LineChart,\r\n  LineSeries,\r\n  Line,\r\n  LinearXAxis,\r\n  LinearXAxisTickSeries,\r\n  LinearXAxisTickLabel,\r\n} from \"reaviz\";\r\nimport format from \"date-fns/format\";\r\nimport formatDistanceStrict from \"date-fns/formatDistanceStrict\";\r\nimport ru from \"date-fns/locale/ru\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicLineChart = ({ widget, width = 300, height = 300, strokeWidth = 3 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      const newData = charts.data.data.map((item) => {\r\n        const key = new Date(item.key);\r\n        if (key) {\r\n          return {\r\n            key,\r\n            data: item.data,\r\n          };\r\n        }\r\n      });\r\n      setData(newData);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const formattingDate = (d) => {\r\n    //  Первая дата\r\n    const firstDate = data.slice().shift();\r\n    // Последняя дата\r\n    const lastDate = data.slice().pop();\r\n    // Разница между датами в месяцах\r\n    const diff = parseInt(\r\n      formatDistanceStrict(firstDate.key, lastDate.key, {\r\n        unit: \"month\",\r\n      })\r\n    );\r\n\r\n    if (diff >= 0 && diff <= 12) {\r\n      return format(d, \"d MMM\", { locale: ru });\r\n    } else {\r\n      return format(d, \"d MMM yy\", { locale: ru });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  return (\r\n    <>\r\n      <LineChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        xAxis={\r\n          <LinearXAxis\r\n            type=\"time\"\r\n            tickSeries={\r\n              <LinearXAxisTickSeries\r\n                label={\r\n                  <LinearXAxisTickLabel\r\n                    //fontSize={12}\r\n                    //fill=\"#000000\"\r\n                    format={formattingDate}\r\n                  />\r\n                }\r\n              />\r\n            }\r\n          />\r\n        }\r\n        series={\r\n          <LineSeries line={<Line strokeWidth={strokeWidth} />} colorScheme={widget.colorScheme} />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicLineChart;\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst sortData = (key, order = \"desc\") => {\r\n  return function innerSort(a, b) {\r\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\r\n      return 0;\r\n    }\r\n\r\n    const varA = typeof a[key] === \"string\" ? a[key].toUpperCase() : a[key];\r\n    const varB = typeof b[key] === \"string\" ? b[key].toUpperCase() : b[key];\r\n\r\n    let comparison = 0;\r\n    if (varA > varB) {\r\n      comparison = 1;\r\n    } else if (varA < varB) {\r\n      comparison = -1;\r\n    }\r\n    return order === \"desc\" ? comparison * -1 : comparison;\r\n  };\r\n};\r\n\r\nconst DynamicTableWidget = ({ widget }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data.sort(sortData(\"data\")));\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const summary = useMemo(() => data.reduce((acc, item) => acc + item.data, 0), [data]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  if (widget.options.isVertical) {\r\n    return (\r\n      <div className=\"widget-table\">\r\n        <table className=\"vertical-table\">\r\n          <tbody>\r\n            {data.map((item, key) => (\r\n              <tr key={key}>\r\n                <td>{item.key}</td>\r\n                <td>{item.data}</td>\r\n              </tr>\r\n            ))}\r\n            <tr>\r\n              <td>ИТОГО</td>\r\n              <td>{summary}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"widget-table\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {data.map((item, key) => (\r\n              <th key={key}>{item.key}</th>\r\n            ))}\r\n            <th>ИТОГО</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            {data.map((item, key) => (\r\n              <td key={key}>{item.data}</td>\r\n            ))}\r\n            <td>{summary}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicTableWidget;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { PieChart, PieArcSeries, PieArcLabel, DiscreteLegend, DiscreteLegendEntry } from \"reaviz\";\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicDonutChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <PieChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        series={\r\n          <PieArcSeries\r\n            doughnut={true}\r\n            colorScheme={widget.options.colorScheme}\r\n            label={<PieArcLabel fontSize={12} fontFill=\"#000000\" />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicDonutChart;\r\n","import React from \"react\";\r\n\r\nimport { BAR, PIE, LINE, AREA, TABLE, DONUT } from \"./widgetTypes\";\r\n\r\nimport DynamicBarChart from \"./widgets/DynamicBarChart\";\r\nimport DynamicPieChart from \"./widgets/DynamicPieChart\";\r\nimport DynamicAreaChart from \"./widgets/DynamicAreaChart\";\r\nimport DynamicLineChart from \"./widgets/DynamicLineChart\";\r\nimport DynamicTableWidget from \"./widgets/DynamicTableWidget\";\r\nimport DynamicDonutChart from \"./widgets/DynamicDonutChart\";\r\n\r\nconst WidgetDiagram = ({ widget, width = 360, height = 300 }) => {\r\n  switch (widget.type) {\r\n    case BAR:\r\n      return <DynamicBarChart width={width} height={height} widget={widget} />;\r\n    case PIE:\r\n      return <DynamicPieChart width={width} height={height} widget={widget} />;\r\n    case DONUT:\r\n      return <DynamicDonutChart width={width} height={height} widget={widget} />;\r\n    case LINE:\r\n      return <DynamicLineChart width={width} height={height} widget={widget} />;\r\n    case TABLE:\r\n      return <DynamicTableWidget width={width} height={height} widget={widget} />;\r\n    case AREA:\r\n      return <DynamicAreaChart width={width} height={height} widget={widget} />;\r\n    default:\r\n      return <></>;\r\n  }\r\n};\r\n\r\nexport default WidgetDiagram;\r\n","export default [\r\n  { name: \"Информация о шаблонах\", url: \"/admin/ajax/analytics\" },\r\n  { name: \"Пустые данные\", url: \"/admin/ajax/analytics/none\" },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { schemes } from \"reaviz\";\r\n\r\nimport dataSources from \"./dataSources\";\r\nimport { TABLE, widgetTypes } from \"./widgetTypes\";\r\nimport WidgetDiagram from \"./WidgetDiagram\";\r\n\r\nconst EditWidget = ({ diagram, onSave, show, setShow }) => {\r\n  const [widget, setWidget] = useState(diagram);\r\n\r\n  const handleSave = () => {\r\n    onSave(widget);\r\n    setShow(false);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={() => setShow(false)} animation={false} size=\"lg\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Редактировать виджет #{widget.id}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Row>\r\n          <Col>\r\n            <Form>\r\n              <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>Название виджета</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={widget.name}\r\n                  onChange={(e) => setWidget({ ...widget, name: e.target.value })}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Тип виджета</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.type}\r\n                  onChange={(e) => setWidget({ ...widget, type: e.target.value })}\r\n                >\r\n                  {widgetTypes.map(({ name, value }, key) => (\r\n                    <option key={key} value={value}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Цветовая схема</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.options.colorScheme}\r\n                  onChange={(e) =>\r\n                    setWidget({\r\n                      ...widget,\r\n                      options: { ...widget.options, colorScheme: e.target.value },\r\n                    })\r\n                  }\r\n                >\r\n                  {Object.keys(schemes).map((name, key) => (\r\n                    <option key={key}>{name}</option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Источник данных</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.source}\r\n                  onChange={(e) => setWidget({ ...widget, source: e.target.value })}\r\n                  required\r\n                >\r\n                  <option value=\"\">Выберите источник</option>\r\n                  {dataSources.map(({ name, url }, key) => (\r\n                    <option key={key} value={url}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              {widget.type === TABLE && (\r\n                <Form.Group>\r\n                  <Form.Check\r\n                    type=\"checkbox\"\r\n                    checked={widget.options.isVertical}\r\n                    label=\"Вертикальная таблица\"\r\n                    onChange={(e) =>\r\n                      setWidget({\r\n                        ...widget,\r\n                        options: { ...widget.options, isVertical: e.target.checked },\r\n                      })\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n              )}\r\n            </Form>\r\n          </Col>\r\n          <Col>\r\n            <Row>\r\n              <div className=\"widget-placeholder\">\r\n                {widget && <WidgetDiagram widget={widget} width={400} />}\r\n              </div>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setShow(false)}>\r\n          Закрыть\r\n        </Button>\r\n        <Button variant=\"warning\" onClick={handleSave} disabled={widget.name === \"\"}>\r\n          Сохранить изменения\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditWidget;\r\n","import React, { useState } from \"react\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { schemes } from \"reaviz\";\r\n\r\nimport dataSources from \"./dataSources\";\r\nimport { TABLE, widgetTypes } from \"./widgetTypes\";\r\nimport WidgetDiagram from \"./WidgetDiagram\";\r\n\r\nconst WidgetParams = ({ show, setShow, onSave }) => {\r\n  const [widget, setWidget] = useState({\r\n    name: \"\",\r\n    source: \"\",\r\n    type: TABLE,\r\n    options: {\r\n      colorScheme: \"Set1\",\r\n    },\r\n  });\r\n\r\n  const handleSave = () => {\r\n    // Скрываем модальку\r\n    setShow(false);\r\n    onSave(widget);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={() => setShow(false)} animation={false} size=\"lg\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Добавить виджет</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Row>\r\n          <Col>\r\n            <Form>\r\n              <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>Название виджета</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={widget.name}\r\n                  onChange={(e) => setWidget({ ...widget, name: e.target.value })}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Тип виджета</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.type}\r\n                  onChange={(e) => setWidget({ ...widget, type: e.target.value })}\r\n                >\r\n                  {widgetTypes.map(({ name, value }, key) => (\r\n                    <option key={key} value={value}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Цветовая схема</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.options.colorScheme}\r\n                  onChange={(e) =>\r\n                    setWidget({\r\n                      ...widget,\r\n                      options: { ...widget.options, colorScheme: e.target.value },\r\n                    })\r\n                  }\r\n                >\r\n                  {Object.keys(schemes).map((name, key) => (\r\n                    <option key={key}>{name}</option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Источник данных</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.source}\r\n                  onChange={(e) => setWidget({ ...widget, source: e.target.value })}\r\n                  required\r\n                >\r\n                  <option value=\"\">Выберите источник</option>\r\n                  {dataSources.map(({ name, url }, key) => (\r\n                    <option key={key} value={url}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              {widget.type === TABLE && (\r\n                <Form.Group>\r\n                  <Form.Check\r\n                    type=\"checkbox\"\r\n                    checked={widget.options?.isVertical}\r\n                    label=\"Вертикальная таблица\"\r\n                    onChange={(e) =>\r\n                      setWidget({\r\n                        ...widget,\r\n                        options: { ...widget.options, isVertical: e.target.checked },\r\n                      })\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n              )}\r\n            </Form>\r\n          </Col>\r\n          <Col>\r\n            <Row>\r\n              <div className=\"widget-placeholder\">\r\n                {widget.source && <WidgetDiagram widget={widget} width={400} />}\r\n              </div>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setShow(false)}>\r\n          Закрыть\r\n        </Button>\r\n        <Button variant=\"warning\" onClick={handleSave} disabled={widget.name === \"\"}>\r\n          Сохранить изменения\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WidgetParams;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { schemes } from \"reaviz\";\r\nimport axios from \"axios\";\r\n\r\nimport GearFill from \"react-bootstrap-icons/dist/icons/gear-fill\";\r\nimport TrashFill from \"react-bootstrap-icons/dist/icons/trash-fill\";\r\n\r\nimport WidgetDiagram from \"./dashboard/WidgetDiagram\";\r\nimport EditWidget from \"./dashboard/EditWidget\";\r\nimport AddWidget from \"./dashboard/AddWidget\";\r\n\r\nfunction Dashboard() {\r\n  const [diagrams, setDiagrams] = useState([]);\r\n\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [selectedWidget, setSelectedWidget] = useState({});\r\n\r\n  /*\r\n   * Показываем окно настроек\r\n   */\r\n  const showSettingsModal = (widget) => {\r\n    setSelectedWidget(widget);\r\n    setShowEditForm(true);\r\n  };\r\n\r\n  /*\r\n   * Удаляем диаграмму\r\n   */\r\n  const removeDiagram = ({ id }) => {\r\n    // Ищем индекс\r\n    const index = diagrams.findIndex((item) => item.id === id);\r\n    // Удаляем локально\r\n    setDiagrams(diagrams.filter((item, i) => (i !== index ? item : null)));\r\n    // Удаляем с сервера\r\n    axios.delete(\"/admin/ajax/diagrams/\" + id);\r\n  };\r\n\r\n  /*\r\n   * Добавляем диаграмму\r\n   */\r\n  const addDiagram = async (widget) => {\r\n    // Добавляем на сервер\r\n    const data = {\r\n      title: widget.name,\r\n      settings: JSON.stringify({ ...widget }),\r\n    };\r\n    const req = await axios.post(\"/admin/ajax/diagrams\", data);\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      // Добавляем в локальный стейт\r\n      setDiagrams([...diagrams, { ...widget, id: req.data.id }]);\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Обновляем диаграмму\r\n   */\r\n  const updateDiagram = (widget) => {\r\n    // Находим индекс виджета по id\r\n    const itemIndex = diagrams.findIndex((item) => item.id === widget.id);\r\n    // Обновляем локальные настройки\r\n    setDiagrams(diagrams.map((item, index) => (itemIndex === index ? widget : item)));\r\n    // Формируем данные для БД\r\n    const data = {\r\n      title: widget.name,\r\n      settings: JSON.stringify({ ...widget }),\r\n    };\r\n    // Отправляем новые настройки на сервер\r\n    axios.put(\"/admin/ajax/diagrams/\" + widget.id, data);\r\n  };\r\n\r\n  /*\r\n   * Получаем список диаграмм\r\n   */\r\n  const getDiagrams = useCallback(async () => {\r\n    const req = await axios(\"/admin/ajax/diagrams\");\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      // Приводим результат запроса к соотв. виду.\r\n      const diagrams = req.data.map((item) => {\r\n        const settings = JSON.parse(item.settings);\r\n        return { id: item.id, ...settings };\r\n      });\r\n      // Добавляем в локальный стейт\r\n      setDiagrams(diagrams);\r\n    }\r\n  }, [setDiagrams]);\r\n\r\n  /*\r\n   * Обновляем диаграммы при монтировании\r\n   */\r\n  useEffect(() => {\r\n    getDiagrams();\r\n  }, [getDiagrams]);\r\n\r\n  return (\r\n    <div className=\"admin-templates admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">\r\n            Analytics\r\n          </a>\r\n        </div>\r\n        <button onClick={() => setShowAddForm(true)} className=\"btn\">\r\n          Add Widget\r\n        </button>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <div className=\"charts\">\r\n          {diagrams.map((widget) => (\r\n            <div key={widget.id} className=\"card\" style={{ width: widget.width }}>\r\n              <div className=\"card-header\">\r\n                <div className=\"card-header__name\">{widget.name}</div>\r\n                <div className=\"card-header__buttons d-print-none\">\r\n                  <button\r\n                    className=\"d-none d-sm-inline-block\"\r\n                    type=\"button\"\r\n                    title=\"Настроить виджет\"\r\n                    onClick={() => showSettingsModal(widget)}\r\n                  >\r\n                    <GearFill color=\"#8E94AA\" />\r\n                  </button>\r\n                  <button\r\n                    className=\"d-none d-sm-inline-block\"\r\n                    type=\"button\"\r\n                    title=\"Удалить виджет\"\r\n                    onClick={() => removeDiagram(widget)}\r\n                  >\r\n                    <TrashFill color=\"#8E94AA\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <WidgetDiagram widget={widget} width={360} />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {showEditForm && (\r\n          <EditWidget\r\n            show={showEditForm}\r\n            setShow={setShowEditForm}\r\n            diagram={selectedWidget}\r\n            onSave={updateDiagram}\r\n          />\r\n        )}\r\n        {showAddForm && (\r\n          <AddWidget show={showAddForm} setShow={setShowAddForm} onSave={addDiagram} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","import React, {Component} from \"react\";\r\n\r\n\r\nexport default class Plugins extends Component{\r\n  render(){\r\n    return <div>Plugins</div>;\r\n  }\r\n\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setModalSettings, toggleModal } from \"../js/store/modal-settings/actions\";\r\n\r\nimport AdminTable from \"./AdminTable\";\r\n\r\nfunction Reports() {\r\n  const dispatch = useDispatch();\r\n  const [reports, setReports] = useState([]);\r\n\r\n  const openPreview = (item) => {\r\n    window.open(item.preview, \"_blank\");\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      name: \"id\",\r\n      title: \"ID\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"Name\",\r\n      url: true,\r\n      target: \"_blank\",\r\n    },\r\n    {\r\n      name: \"description\",\r\n      title: \"Description\",\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"Updated At\",\r\n    },\r\n    {\r\n      name: \"preview\",\r\n      title: \"Preview\",\r\n      is_button: true,\r\n      button: {\r\n        class: \"\",\r\n        function: openPreview,\r\n        title: \"Preview\",\r\n      },\r\n    },\r\n  ];\r\n\r\n  const showModal = () => {\r\n    const modalSettings = {\r\n      title: \"Add New Report\",\r\n      submitButton: \"Add\",\r\n      active: true,\r\n      submit: function(formData) {\r\n        return axios.post(\"/admin/ajax/reports\", formData);\r\n      },\r\n      fields: [\r\n        {\r\n          name: \"name\",\r\n          label: \"Report Name\",\r\n          required: true,\r\n        },\r\n        {\r\n          name: \"description\",\r\n          label: \"Description\",\r\n          required: true,\r\n        },\r\n      ],\r\n      success: function(res) {\r\n        setReports([...reports, res.data]);\r\n        dispatch(toggleModal());\r\n      },\r\n    };\r\n    dispatch(setModalSettings(modalSettings));\r\n  };\r\n\r\n  // Функция получения отчетов из БД\r\n  const getReports = async () => {\r\n    const req = await axios(\"/admin/ajax/reports\");\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      setReports(req.data);\r\n    }\r\n  };\r\n\r\n  // Получаем отчеты при рендере компонента\r\n  useEffect(() => {\r\n    getReports();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"admin-tables admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">\r\n            Reports\r\n          </a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Reports</span>\r\n        </div>\r\n        <button onClick={showModal} className=\"btn\">\r\n          Add New\r\n        </button>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({reports.length || \"0\"})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        {reports.length > 0 && <AdminTable columns={columns} rows={reports} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reports;\r\n","import React, {Component} from \"react\";\r\nimport AdminTable from \"./AdminTable\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\nexport default class Tables extends Component{\r\n\t\r\n\tconstructor(props) {\r\n            super(props);\r\n            this.state = {\r\n                editUrl: \"/admin/tables\",\r\n              tag: 'Link',\r\n                modules: [],\r\n                columns: [\r\n                    {\r\n                        name: 'title',\r\n                        title: 'Title',\r\n                        url: true,\r\n                      editUrl: true,\r\n                      tag : 'Link',\r\n                    },\r\n                    {\r\n                        name: 'name',\r\n                        title: 'Name',\r\n                        url: true,\r\n                      editUrl: true,\r\n                      tag : 'Link',\r\n                    },\r\n                    {\r\n                        name: 'description',\r\n                        title: 'Description',\r\n                    },\r\n                    {\r\n                        name: 'setting',\r\n                        title: 'Setting',\r\n                        url: true,\r\n                    },\r\n                    {\r\n                        name: 'updated_at',\r\n                        title: 'Updated At',\r\n                    },\r\n\t\t]\r\n            };\r\n            \r\n            this.resource = new Resource({\r\n                route: '/admin/ajax/tables'\r\n            });\r\n\t\t\r\n\t}\r\n\t\r\n\tasync componentDidMount(){\r\n            this.resource.getAll().then(modules=>{\r\n                this.setModules(modules);\r\n            });\r\n        }\r\n\t\r\n\tsetModules(modules){\r\n            console.log(modules);\r\n            let urlModules = modules.map((row) => {\r\n                row.editUrl = \"/admin/tables/edit/\" + row.id;\r\n                return row;\r\n            });\r\n            \r\n            console.log(urlModules);\r\n            this.setState((state) => {\r\n\t\treturn {modules: urlModules};\r\n            });\r\n        }\r\n\t\r\n\trender(){\r\n            return <div className=\"admin-tables admin-page\">\r\n                <div className=\"admin-heading\">\r\n                    <div className=\"admin-breadcrumbs\">\r\n                        <a className=\"admin-breadcrumbs__link\" href=\"#\">Tables</a>\r\n                        <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                        <span className=\"admin-breadcrumbs__current\">All Tables</span>\r\n                    </div>\r\n                    <Link className=\"btn\" to=\"/admin/tables/add\">Add New</Link>\r\n                    <div className=\"admin-filters\">\r\n                        <span className=\"admin-filters__current\">All ({this.state.modules.length || '0'})</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"admin-content\">\r\n                    <AdminTable columns={this.state.columns} rows={this.state.modules}/>\r\n                </div>\r\n            </div>;\r\n\t}\r\n\t\t\r\n    \r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"7\" height=\"10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1 8.5L5 5 1 1\" stroke=\"#343B4C\" strokeWidth=\"1.5\" /></svg>);","import React, {Component} from \"react\";\r\nimport Left from \"../svgs/left.svg\";\r\nimport Right from \"../svgs/right.svg\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport \"../sass/components/admin-pagination.scss\"\r\n\r\nclass Pagination extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      currentPage: 1,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Задает текущую страницу\r\n   * @param num\r\n   */\r\n  setCurrentPage(num) {\r\n    num = parseInt(num) || 1;\r\n    if(num <= 1) {\r\n      this.setState({currentPage: 1});\r\n      this.props.changePage(1);\r\n      return;\r\n    }\r\n    if(num >= this.props.pageCount) {\r\n      this.setState({currentPage: this.props.pageCount});\r\n      this.props.changePage(this.props.pageCount);\r\n      return;\r\n    }\r\n    this.setState({currentPage: num});\r\n    this.props.changePage(num)\r\n\r\n  }\r\n\r\n  /**\r\n   * надо проверить, чтобы при обновлении props.pageCount state.currentPage было меньше\r\n   */\r\n  componentDidUpdate(){\r\n\r\n    if(this.state.currentPage > this.props.pageCount){\r\n      this.setCurrentPage(this.props.currentPage || this.props.pageCount);\r\n    }\r\n  }\r\n  render(){\r\n    return<div className=\"pagination\">\r\n      <div className=\"version\">\r\n        <p className=\"pagination__version\">\r\n          {/*App creating*/}\r\n          {/*with*/}\r\n          {/*<a className=\"pagination__link\"*/}\r\n             {/*target=\"_blank\"*/}\r\n             {/*href=\"https://altrp.com/\">Altrp</a>*/}\r\n          {/*/*/}\r\n          Version {altrp_version} </p>\r\n      </div>\r\n      <div className=\"pagination__buttons\">\r\n        <p className=\"pagination__text\">{ this.props.itemsCount} Items</p>\r\n        <div className={this.state.currentPage <= 1 ? \" pagination__disabled pagination__toStart pagination__move\" : \"pagination__move pagination__toStart\"}\r\n        onClick={()=> this.setCurrentPage(1) }>\r\n          <Right className=\"right__arrow\" />\r\n          <Right className=\"right__arrow\" />\r\n        </div>\r\n        <div className={this.state.currentPage <= 1 ? \"pagination__disabled pagination__prev pagination__move\" : \"pagination__move pagination__prev\" } \r\n        onClick={()=> this.setCurrentPage(--this.state.currentPage) } ><Right className=\"right__arrow\" /> </div>\r\n        <input type=\"text\"\r\n               className=\"pagination__indicator\"\r\n               value={this.state.currentPage || 1}\r\n               onChange={e=> this.setCurrentPage(e.target.value.replace(/[^0-9]/g, '') || 1) } />\r\n        <div className=\"pagination__map\">of {this.props.pageCount}</div>\r\n        <div className={this.state.currentPage >= this.props.pageCount ? \"pagination__disabled pagination__next pagination__move\" : \"pagination__move pagination__next\"} onClick={()=>{\r\nthis.setCurrentPage(++this.state.currentPage);\r\n        }}> <Right/> </div>\r\n        <div className={this.state.currentPage >= this.props.pageCount ? \"pagination__disabled pagination__move\" : \"pagination__move\"}\r\n        onClick={()=> this.setCurrentPage(this.props.pageCount) }>\r\n          <Right/> <Right/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Pagination","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport AdminTable from \"./AdminTable\";\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport { generateId, redirect, objectDeepCleaning } from \"../js/helpers\";\r\nimport Pagination from \"./Pagination\";\r\n\r\n\r\nexport default class Templates extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      templates: [],\r\n      allTemplates: [],\r\n      templateAreas: [],\r\n      activeTemplateArea: {},\r\n      pageCount: 1,\r\n      currentPage: 1,\r\n    };\r\n    this.resource = new Resource({\r\n      route: '/admin/ajax/templates'\r\n    });\r\n    this.templateTypesResource = new Resource({\r\n      route: '/admin/ajax/areas'\r\n    });\r\n    this.onClick = this.onClick.bind(this);\r\n    this.changePage = this.changePage.bind(this);\r\n    this.changeActiveArea = this.changeActiveArea.bind(this);\r\n    this.generateTemplateJSON = this.generateTemplateJSON.bind(this);\r\n  }\r\n  changeActiveArea(e){\r\n    let areaId = parseInt(e.target.dataset.area);\r\n    let activeTemplateArea = {};\r\n    this.state.templateAreas.forEach(area=>{\r\n      if(area.id === areaId){\r\n        activeTemplateArea = area;\r\n      }\r\n    });\r\n    this.setActiveArea(activeTemplateArea)\r\n  }\r\n\r\n  /**\r\n   * Смена текущей страницы\r\n   */\r\n  changePage(currentPage){\r\n    this.updateTemplates(currentPage, this.state.activeTemplateArea);\r\n    this.setState(state => ({ ...state, currentPage}));\r\n  }\r\n\r\n  /**\r\n   * Сменить текущую область шаблона (вкладка)\r\n   * @param activeTemplateArea\r\n   */\r\n  setActiveArea(activeTemplateArea){\r\n    this.updateTemplates(1, activeTemplateArea);\r\n    this.setState(state=>{\r\n      return{...state, activeTemplateArea};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Метод для обновления списка шаблонов\r\n   * @param currentPage\r\n   * @param activeTemplateArea\r\n   */\r\n  updateTemplates(currentPage, activeTemplateArea){\r\n    this.resource.getQueried({\r\n      area: activeTemplateArea.name,\r\n      page: currentPage,\r\n      pageSize: 10,\r\n    }).then(res=>{\r\n      this.setState(state=> {\r\n        return {\r\n          ...state,\r\n          pageCount: res.pageCount,\r\n          templates: res.templates\r\n        }\r\n      });\r\n    });\r\n  }\r\n  /** @function generateTemplateJSON\r\n  * Генерируем контент файла template в формате JSON\r\n  * @param {object} template Данные, получаемые с сервера\r\n  * @return {strig} Строка в формате JSON\r\n  */\r\n  generateTemplateJSON(template) {\r\n    const data = objectDeepCleaning(JSON.parse(template.data))\r\n    const json = JSON.stringify({ \r\n      template_area: this.state.activeTemplateArea.name, \r\n      data\r\n    });\r\n    console.log(JSON.parse(json))\r\n    return json;\r\n  }\r\n  /** @function downloadJSONFile\r\n  * Скачиваем файл\r\n  * @param {object} template Данные, получаемые с сервера\r\n  */\r\n  downloadJSONFile(template) {\r\n    const element = document.createElement(\"a\");\r\n    const file = new Blob([this.generateTemplateJSON(template)], { type: 'text/plain' });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = `${template.name}.json`;\r\n    document.body.appendChild(element); // Required for this to work in FireFox\r\n    element.click();\r\n  }\r\n  async componentDidMount(){\r\n    let templateAreas = await this.templateTypesResource.getAll();\r\n    this.setActiveArea(templateAreas[0]);\r\n    this.setState(state=>{\r\n      return{...state,templateAreas}\r\n    });\r\n    this.updateTemplates(this.state.currentPage, this.state.activeTemplateArea)\r\n  }\r\n  onClick(){\r\n    let modalSettings = {\r\n      title: 'Add New Template',\r\n      submitButton: 'Add',\r\n      submit: function(formData){\r\n        let data = {\r\n          name: formData.title,\r\n          title: formData.title,\r\n          area: formData.area,\r\n          data:{\r\n            children: [],\r\n            id: generateId(),\r\n            name: \"root-element\",\r\n            settings: {},\r\n            type: \"root-element\",\r\n          }\r\n        };\r\n        return (new Resource({route:'/admin/ajax/templates'})).post(data)\r\n      },\r\n      fields: [\r\n        {\r\n          name: 'title',\r\n          label: 'Template Name',\r\n          required: true,\r\n        },\r\n        {\r\n          name: 'area',\r\n          label: 'Area Name',\r\n          required: true,\r\n          type: 'select',\r\n          options: this.getAreasOptions(),\r\n          defaultValue: this.state.activeTemplateArea.id\r\n        }\r\n      ],\r\n      success: function(res){\r\n        if(res.redirect && res.url){\r\n          redirect(res.url)\r\n        }\r\n      },\r\n      active: true,\r\n    };\r\n    store.dispatch(setModalSettings(modalSettings));\r\n  }\r\n  getAreasOptions(){\r\n    return this.state.templateAreas;\r\n  }\r\n  setTemplates(templates){\r\n    let allTemplates = templates;\r\n    templates = templates.filter(template=>{\r\n      return template.area === this.state.activeTemplateArea.name;\r\n    });\r\n    this.setState(state=>{\r\n      return{...state, templates, allTemplates};\r\n    });\r\n  }\r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Templates</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Templates</span>\r\n        </div>\r\n        <button onClick={this.onClick} className=\"btn\">Add New</button>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({this.state.allTemplates.length || ''})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <ul className=\"nav nav-pills admin-pills\">\r\n          {this.state.templateAreas.map(area=>{\r\n            let tabClasses = ['nav-link',];\r\n            if(this.state.activeTemplateArea.name === area.name){\r\n              tabClasses.push('active');\r\n            }\r\n            return<li className=\"nav-item\" key={area.id}>\r\n              <button className={tabClasses.join(' ')}\r\n                      onClick={this.changeActiveArea}\r\n                      data-area={area.id}>{area.title}</button>\r\n            </li>\r\n          })}\r\n        </ul>\r\n        <AdminTable columns={[\r\n          {\r\n            name: 'title',\r\n            title: 'Title',\r\n            url: true,\r\n            target: '_blank',\r\n          },\r\n          {\r\n            name: 'author',\r\n            title: 'Author',\r\n          },\r\n          ]}\r\n          rows={this.state.templates}\r\n          quickActions={[{ tag: 'a', props: {\r\n            href: '/admin/editor?template_id=:id',\r\n            target: '_blank',\r\n            // className: ''\r\n            },\r\n            title: 'Edit'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates/:id/reviews',\r\n            method: 'delete',\r\n            // className: ''\r\n            title: 'Clear History'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates',\r\n            method: 'get',\r\n            after: response => this.downloadJSONFile(response),\r\n            title: 'Export'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates/:id',\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateTemplates(this.state.currentPage, this.state.activeTemplateArea),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n        />\r\n        <Pagination pageCount={this.state.pageCount || 1}\r\n                    currentPage={this.state.currentPage}\r\n                    changePage={this.changePage}\r\n                    itemsCount={this.state.templates.length }\r\n        />\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"10\" height=\"11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M5.583 5.354L9.23 1.707 8.523 1 4.9 4.622 1.753 1.024 1 1.683l3.212 3.67L1 9.025l.753.659L4.9 6.085l3.622 3.622L9.23 9 5.583 5.354z\" fill=\"#343B4C\" /><path d=\"M9.23 1.707l.177.177.176-.177-.176-.177-.177.177zM5.583 5.354l-.176-.177-.177.177.177.176.176-.176zM8.523 1L8.7.823 8.523.646l-.177.177.177.177zM4.9 4.622l-.188.165.175.2.19-.188-.177-.177zM1.753 1.024L1.94.86 1.776.672l-.188.164.165.188zM1 1.683l-.165-.188-.188.164.165.188L1 1.683zm3.212 3.67l.188.165.144-.164-.144-.165-.188.165zM1 9.025L.812 8.86l-.165.188.188.164L1 9.024zm.753.659l-.165.188.188.165.165-.189-.188-.164zM4.9 6.085l.176-.177-.189-.189-.175.201.188.165zm3.622 3.622l-.177.177.177.177.177-.177-.177-.177zM9.23 9l.177.177L9.583 9l-.176-.177L9.23 9zm-.177-7.47L5.407 5.177l.353.353 3.647-3.646-.354-.354zm-.707-.353l.707.707.354-.354L8.7.823l-.354.354zM5.077 4.799L8.7 1.177 8.346.823 4.724 4.445l.353.354zm-3.513-3.61l3.149 3.598.376-.33L1.94.86l-.377.329zm-.4.682l.753-.659-.33-.376-.752.659.33.376zM4.4 5.189l-3.212-3.67-.376.328 3.212 3.671.376-.33zm-.376 0L.812 8.859l.376.33L4.4 5.519l-.376-.33zM.835 9.212l.753.659.33-.376-.753-.659-.33.376zm1.106.635L5.089 6.25l-.377-.33-3.148 3.598.377.33zm2.783-3.585l3.622 3.622.354-.354-3.623-3.622-.353.354zM8.7 9.884l.707-.707-.354-.354-.707.707.354.354zm.707-1.06L5.76 5.176l-.353.353 3.646 3.647.354-.354z\" fill=\"#000\" /></svg>);","import {connect} from \"react-redux\";\r\nimport React, {Component} from \"react\";\r\nimport TimesIcon from '../svgs/times.svg';\r\nimport store from \"../js/store/store\";\r\nimport {toggleModal} from \"../js/store/modal-settings/actions\";\r\n\r\n\r\nclass AdminModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.toggleModal = this.toggleModal.bind(this);\r\n    this.changeValue = this.changeValue.bind(this);\r\n    this.storeSubscribe = this.storeSubscribe.bind(this);\r\n    this.submit = this.submit.bind(this);\r\n    this.formData = {};\r\n    props.fields.forEach(field=>{\r\n      if(field.defaultValue){\r\n        this.formData[field.name] = field.defaultValue;\r\n      }\r\n    });\r\n    this.state = {\r\n      errors: [],\r\n    };\r\n    store.subscribe(this.storeSubscribe);\r\n  }\r\n  storeSubscribe(){\r\n    store.getState().modalSettings.fields.forEach(field=>{\r\n      if(field.defaultValue){\r\n        this.formData[field.name] = field.defaultValue;\r\n      }\r\n    });\r\n  }\r\n  submit() {\r\n    let valid = true;\r\n    let errors = this.props.fields.map(field => {\r\n      if (field.required &&\r\n          !this.formData[field.name]) {\r\n        valid = false;\r\n        return field.errorMessage || `Need complete this field`;\r\n      }\r\n    });\r\n    if (! valid) {\r\n      this.setState(state => {\r\n        return {...state, errors}\r\n      });\r\n      return;\r\n    }\r\n    this.props.submit(this.formData).then(this.props.success)\r\n  }\r\n\r\n  changeValue(e) {\r\n    let target = e.target;\r\n    this.formData[target.dataset.field] = target.value;\r\n    let errors = [...this.state.errors];\r\n    errors[target.dataset.error] = '';\r\n    this.setState(state => {\r\n      return {...state, errors}\r\n    });\r\n  }\r\n\r\n  toggleModal() {\r\n    store.dispatch(toggleModal());\r\n  }\r\n\r\n  render() {\r\n    let modalClasses = 'admin-modal';\r\n    if (this.props.active) {\r\n      modalClasses += ' admin-modal_active';\r\n    }\r\n    return <div className={modalClasses}>\r\n      <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n      <div className=\"admin-modal-content\">\r\n        <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n        <div className=\"admin-caption\">{this.props.title}</div>\r\n        <div className=\"admin-modal-form form\">\r\n          {\r\n            this.props.fields.map((field, idx) => <label className=\"form-label\"\r\n                                                         data-field={field.name}\r\n                                                         key={field.name}>{field.label}\r\n              {(field.type !== 'select') ?\r\n                  <input type={field.type || 'text'}\r\n                         className=\"form__input\"\r\n                         data-field={field.name}\r\n                         data-error={idx}\r\n                         defaultValue={field.defaultValue || ''}\r\n                         onChange={this.changeValue}/> :\r\n                  <select className=\"form__input\"\r\n                          data-field={field.name}\r\n                          data-error={idx}\r\n                          defaultValue={field.defaultValue || ''}\r\n                          onChange={this.changeValue}>\r\n                    <option value=\"\"/>\r\n                    {\r\n                      field.options.map(option =>\r\n                          <option key={option.id}\r\n                                  value={option.id}\r\n                                  children={option.title || option.name}/>)\r\n                    }\r\n                  </select>\r\n              }\r\n              {this.state.errors[idx] ? <span className=\"form-label__error\">{this.state.errors[idx]}</span> : ''}\r\n            </label>)\r\n          }\r\n          <div className=\"form-bottom\">\r\n            <button className=\"btn btn_success\" onClick={this.submit}>{this.props.submitButton}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.modalSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AdminModal);\r\n","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AltrpSelect from \"./altrp-select/AltrpSelect\";\r\n\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: {},\r\n      value: {},\r\n      redirectAfterSave: false,\r\n      templates: [],\r\n      models: [],\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/pages'});\r\n    this.model_resource = new Resource({route: '/admin/ajax/models_options'});\r\n    this.templateResource = new Resource({route: '/admin/ajax/templates'});\r\n    this.savePage = this.savePage.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Компонент загрузился\r\n   * получыаем данный страницы + опции для шаблона\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n\r\n    let models_res = await this.model_resource.getAll();\r\n    this.setState(state=>{\r\n      return{...state, models: models_res}\r\n    });\r\n    let id = this.props.match.params.id;\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Сохранить страницу или добавить новую\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n  async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n\r\n    let redirect = this.state.value.redirect;\r\n    redirect = (redirect || '').split('\\\\').join('/');\r\n    if(redirect){\r\n      redirect = (redirect[0] !== '/') ? `/${redirect}` : redirect;\r\n    }\r\n    this.state.value.redirect = redirect;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    if(field === 'redirect'){\r\n      value = value.split('\\\\').join('/');\r\n      if(value){\r\n        value = (value[0] !== '/') ? `/${value}` : value;\r\n      }\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/pages\"/>\r\n    }\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/pages\">Pages</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{this.state.value.title || 'Add New Page'}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <form className=\"admin-form\" onSubmit={this.savePage}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-title\">Title</label>\r\n            <input type=\"text\" id=\"page-title\" required={1}\r\n                   value={this.state.value.title || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'title')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-path\">Path</label>\r\n            <input type=\"text\" id=\"page-path\" required={1}\r\n                   value={this.state.value.path || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'path')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-template\">Content Template</label>\r\n            <select id=\"page-template\"\r\n                   value={this.state.value.template_id || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'template_id')}}\r\n                   className=\"form-control\">\r\n              <option value=\"\"/>\r\n              {\r\n                this.state.templates.map(template=>{\r\n                  return <option value={template.value} key={template.value}>{template.label}</option>\r\n                })\r\n              }\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-model\">Model</label>\r\n            <select id=\"page-model\"\r\n                   value={this.state.value.model_id || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'model_id')}}\r\n                   className=\"form-control\">\r\n              <option value=\"\"/>\r\n              {\r\n                this.state.models.map(model=>{\r\n                  return <option value={model.value} key={model.value}>{model.label}</option>\r\n                })\r\n              }\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-roles\">Roles</label>\r\n            <AltrpSelect id=\"page-roles\"\r\n                         isMulti={true}\r\n                         optionsRoute=\"/admin/ajax/role_options\"\r\n                         placeholder=\"All\"\r\n                         defaultOptions={[\r\n                           {\r\n                             value: 'guest',\r\n                             label: 'Guest',\r\n                           }\r\n                         ]}\r\n                         value={this.state.value.roles}\r\n                         onChange={value => {this.changeValue(value, 'roles')}}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"redirect\">Redirect</label>\r\n            <input type=\"text\" id=\"redirect\"\r\n                   value={this.state.value.redirect || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'redirect')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n        </form>\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddPage);\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"20\" height=\"22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M10 22a2.75 2.75 0 002.749-2.75H7.25A2.75 2.75 0 0010 22zm9.255-6.433c-.83-.892-2.383-2.234-2.383-6.63 0-3.338-2.341-6.01-5.498-6.667v-.895a1.375 1.375 0 10-2.748 0v.895C5.469 2.926 3.128 5.6 3.128 8.938c0 4.395-1.553 5.737-2.383 6.63a1.343 1.343 0 00-.37.932 1.376 1.376 0 001.38 1.375h16.49c.822 0 1.376-.67 1.38-1.375a1.342 1.342 0 00-.37-.933z\" fill=\"#8E94AA\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"18\" height=\"18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M11.625 13.5h-.75a.375.375 0 00-.375.375V16.5h-9v-15h9v2.625c0 .207.168.375.375.375h.75A.375.375 0 0012 4.125V1.5A1.5 1.5 0 0010.5 0h-9A1.5 1.5 0 000 1.5v15A1.5 1.5 0 001.5 18h9a1.5 1.5 0 001.5-1.5v-2.625a.375.375 0 00-.375-.375z\" fill=\"#8E94AA\" /><path d=\"M17.878 8.724l-4.5-4.125a.374.374 0 00-.628.276v.75c0 .106.045.208.124.279l2.607 2.346H4.875a.375.375 0 00-.375.375v.75c0 .208.168.375.375.375h10.606l-2.607 2.347a.375.375 0 00-.124.278v.75a.375.375 0 00.628.277l4.5-4.125a.374.374 0 000-.553z\" fill=\"#8E94AA\" /></svg>);","import React, {Component} from \"react\";\r\nimport BellIcon from './../svgs/bell.svg';\r\nimport UserIcon from './../svgs/user.svg';\r\nimport LogoutIcon from './../svgs/logout.svg';\r\nimport {logout} from \"../js/helpers\";\r\n\r\nclass UserTopPanel extends Component {\r\n  render(){\r\n    return<div className=\"admin-user-top-panel top-panel d-flex align-items-center\">\r\n      <a href=\"#\" className=\"top-panel-notification notification\">\r\n        <BellIcon className=\"notification__icon\"/>\r\n      </a>\r\n      <UserIcon className=\"top-panel__portrait\"/>\r\n      <div className=\"top-panel__greeting\">Hello, administrator</div>\r\n      <button className=\"top-panel-logout logout\" onClick={logout}>\r\n        <LogoutIcon className=\"logout__icon\"/>\r\n      </button>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default UserTopPanel","import {SET_CURRENT_ELEMENT} from './actions'\r\n\r\nconst defaultState = {\r\n  currentElement: {}\r\n};\r\n\r\nexport function currentElementReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_ELEMENT:{\r\n      state = {\r\n        currentElement: action.element,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import { CHANGE_TEMPLATE_STATUS } from \"./actions\";\r\nimport  CONSTANTS  from \"../../consts\";\r\n\r\nconst defaultState = {\r\n  status: CONSTANTS.TEMPLATE_UPDATED,\r\n};\r\n\r\nexport function templateStatusReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case CHANGE_TEMPLATE_STATUS:\r\n      return { ...state, status: action.status };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {START_DRAG, STOP_DRAG} from './actions'\r\n\r\nconst defaultState = {\r\n  dragState: STOP_DRAG\r\n};\r\n\r\nexport function elementDragReducer(state, action) {\r\n  if(! state){\r\n    return defaultState;\r\n  }\r\n  if(! action){\r\n    return{dragState: STOP_DRAG}\r\n  }\r\n  switch (action.type) {\r\n    case STOP_DRAG:{\r\n      state = {\r\n        dragState: STOP_DRAG,\r\n        element:null,\r\n      };\r\n    }break;\r\n    case START_DRAG:{\r\n      state = {\r\n        dragState: START_DRAG,\r\n        element: action.element\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","export const START_DRAG = 'START_DRAG';\r\nexport const STOP_DRAG = 'STOP_DRAG';\r\nexport const CHANGE_DRAG_STATE = 'CHANGE_DRAG_STATE';\r\n\r\nexport function startDrag(element) {\r\n  return {\r\n    type: START_DRAG,\r\n    element\r\n  };\r\n}\r\nexport function stopDrag() {\r\n  return {\r\n    type: STOP_DRAG,\r\n  };\r\n}\r\n\r\n\r\n","import {SET_CURRENT_CONTEXT_ELEMENT} from './actions'\r\n\r\nconst defaultState = {\r\n  currentElement: {}\r\n};\r\n\r\nexport function currentElementContextReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_CONTEXT_ELEMENT:{\r\n      state = {\r\n        currentElement: action.element,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SHOW_DYNAMIC_CONTENT, HIDE_DYNAMIC_CONTENT, TOGGLE_DYNAMIC_CONTENT} from './actions'\r\n\r\nconst defaultState = {\r\n  show: false,\r\n  params: {\r\n    type: 'text',\r\n  },\r\n  element: null,\r\n  onSelect: (contentData)=>{\r\n    console.log(contentData);\r\n  }\r\n};\r\n\r\nexport function dynamicContentReducer(state, action) {\r\n  state = state || {...defaultState};\r\n  switch (action.type) {\r\n    case SHOW_DYNAMIC_CONTENT:{\r\n      state = {\r\n        params: {...action.params},\r\n        element: action.element,\r\n        show: true,\r\n      };\r\n    }break;\r\n    case TOGGLE_DYNAMIC_CONTENT:{\r\n      state = {\r\n        params: {...action.params},\r\n        element: action.element,\r\n        show: ! state.show,\r\n      };\r\n    }break;\r\n    case HIDE_DYNAMIC_CONTENT:{\r\n      state = {\r\n          ...defaultState,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {CONTROLLER_VALUE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  value: '',\r\n  controlId: ''\r\n\r\n};\r\n\r\nexport function controllerReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case CONTROLLER_VALUE:{\r\n      state = {\r\n        ...action.data,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}\r\n","import {SET_ACTIVE_SECTION} from './actions';\r\n\r\nconst defaultState = {};\r\n\r\nexport function settingSectionMenuReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_SECTION:\r\n      let newState = {...state};\r\n      newState[action.elementName] = newState[action.elementName] || {};\r\n      /**\r\n       * При повторном клике сохраним null, чтобы ни одна не была открыта\r\n       */\r\n      if(newState[action.elementName][action.tab] !== action.sectionID){\r\n        newState[action.elementName][action.tab] = action.sectionID;\r\n      } else {\r\n        newState[action.elementName][action.tab] = null;\r\n      }\r\n      return newState;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import {SET_CURRENT_TAB} from \"./actions\"\r\n\r\nconst defaultState = {\r\n  currentTab: ''\r\n};\r\n\r\nexport function currentTabReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_TAB:{\r\n      state = {\r\n        currentTab: action.tab,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}\r\n","import { SET_CURRENT_STATE } from \"./actions\"\r\n\r\nconst defaultState = {\r\n  title: \"N\",\r\n  value: \"\",\r\n};\r\n\r\nexport function currentStateReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_CURRENT_STATE: {\r\n      state = {\r\n        ...state,\r\n        title: action.title,\r\n        value: action.value,\r\n      };\r\n    }\r\n      break;\r\n  }\r\n  return state;\r\n}\r\n","import { SET_CURRENT_SCREEN } from './actions'\r\nimport CONSTANTS from \"../../consts\";\r\n\r\nconst defaultState = CONSTANTS.SCREENS[0];\r\n\r\nexport function currentScreenReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_CURRENT_SCREEN: {\r\n      state = {\r\n        ...action.screen\r\n      };\r\n      return state;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}","import {SET_TEMPLATE_DATA} from './actions'\r\n\r\nconst defaultState = {\r\n};\r\n\r\nexport function templateDataReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_TEMPLATE_DATA:{\r\n      state = action.templateData;\r\n    }break;\r\n  }\r\n  return state;\r\n}","import { combineReducers } from 'redux';\r\nimport { currentElementReducer } from './current-element/reducers';\r\nimport { templateStatusReducer } from \"./template-status/reducers\";\r\nimport { elementDragReducer } from \"./element-drag/reducers\";\r\nimport { assetsSettingsReducer } from \"./assets-browser/reducers\";\r\nimport { currentElementContextReducer } from \"./current-context-element/reducers\";\r\nimport { dynamicContentReducer } from \"./dynamic-content/reducers\";\r\nimport { controllerReducer } from \"./controller-value/reducers\";\r\nimport { settingSectionMenuReducer } from \"./setting-section/reducers\"\r\nimport { currentTabReducer } from \"./active-settings-tab/reducers\";\r\nimport { currentStateReducer } from \"./state-section/reducers\";\r\nimport { currentScreenReducer } from './responsive-switcher/reducers';\r\nimport {currentModelReducer} from \"../../../../front-app/src/js/store/current-model/reducers\";\r\nimport {templateDataReducer} from \"./template-data/reducers\";\r\nimport {currentUserReducer} from \"../../../../front-app/src/js/store/current-user/reducers\";\r\n\r\nexport default combineReducers({\r\n  currentElement: currentElementReducer,\r\n  currentContextElement: currentElementContextReducer,\r\n  templateStatus: templateStatusReducer,\r\n  elementDrag: elementDragReducer,\r\n  assetsManagerSettings: assetsSettingsReducer,\r\n  dynamicContentState: dynamicContentReducer,\r\n  controllerValue: controllerReducer,\r\n  settingSectionMenu: settingSectionMenuReducer,\r\n  currentTab: currentTabReducer,\r\n  currentState: currentStateReducer,\r\n  currentScreen: currentScreenReducer,\r\n  currentModel: currentModelReducer,\r\n  templateData: templateDataReducer,\r\n  currentUser: currentUserReducer,\r\n});\r\n","export const SET_CURRENT_ELEMENT = 'SET_CURRENT_ELEMENT';\r\nexport const DROP_ELEMENT = 'ADD_CURRENT_ELEMENT';\r\n\r\nexport function setCurrentElement(element) {\r\n  return {\r\n    type: SET_CURRENT_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\nexport function dropCurrentElement(element) {\r\n  return {\r\n    type: DROP_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\n","export const SET_CURRENT_CONTEXT_ELEMENT = 'SET_CURRENT_CONTEXT_ELEMENT';\r\n\r\nexport function setCurrentContextElement(element) {\r\n  return {\r\n    type: SET_CURRENT_CONTEXT_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\n","export const CHANGE_TEMPLATE_STATUS = 'CHANGE_TEMPLATE_STATUS';\r\n\r\nexport function changeTemplateStatus(status) {\r\n  return {\r\n    type: CHANGE_TEMPLATE_STATUS,\r\n    status\r\n  };\r\n}\r\n\r\n","export const SHOW_DYNAMIC_CONTENT = 'SHOW_DYNAMIC_CONTENT';\r\nexport const HIDE_DYNAMIC_CONTENT = 'HIDE_DYNAMIC_CONTENT';\r\nexport const TOGGLE_DYNAMIC_CONTENT = 'TOGGLE_DYNAMIC_CONTENT';\r\n\r\n/**\r\n *\r\n * @param params\r\n * @param element - Элемент, на которые кликнули\r\n * @return {{type: string, params: *, element: *}}\r\n */\r\nexport function showDynamicContent(params, element) {\r\n  return {\r\n    type: SHOW_DYNAMIC_CONTENT,\r\n    params,\r\n    element\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param params\r\n * @param element - Элемент, на которые кликнули\r\n * @return {{type: string, params: *, element: *}}\r\n */\r\nexport function toggleDynamicContent(params, element) {\r\n  return {\r\n    type: TOGGLE_DYNAMIC_CONTENT,\r\n    params,\r\n    element\r\n  };\r\n}\r\n\r\nexport function closeDynamicContent() {\r\n  return {\r\n    type:  HIDE_DYNAMIC_CONTENT,\r\n  };\r\n}\r\n\r\n","export const CONTROLLER_VALUE = 'CONTROLLER_VALUE';\r\n/**\r\n *\r\n * @param {*} value\r\n * @param {string} controlId\r\n * @returns {{data: {controlId: *, value: *}, type: string}}\r\n */\r\nexport function controllerValue(value, controlId) {\r\n  return {\r\n    type: CONTROLLER_VALUE,\r\n    data: {\r\n      controlId,\r\n      value\r\n    }\r\n  };\r\n}\r\n\r\n","export const SET_ACTIVE_SECTION = \"SET_ACTIVE_SECTION\";\r\n\r\nexport function setActiveSection(elementName, tab, sectionID) {\r\n  return {\r\n    type: SET_ACTIVE_SECTION,\r\n    elementName,\r\n    tab,\r\n    sectionID\r\n  }\r\n}\r\n","export const SET_CURRENT_TAB = \"SET_CURRENT_TAB\";\r\n\r\nexport function setCurrentTab(tab) {\r\n  return {\r\n    type: SET_CURRENT_TAB,\r\n    tab\r\n  };\r\n}\r\n","export const SET_CURRENT_STATE = \"SET_CURRENT_STATE\";\r\n\r\nexport function setCurrentState(title, value) {\r\n  return {\r\n    type: SET_CURRENT_STATE,\r\n    title,\r\n    value,\r\n  };\r\n};\r\n","export const SET_CURRENT_SCREEN = \"SET_CURRENT_SCREEN\";\r\n\r\nexport function setCurrentScreen(screen) {\r\n  return {\r\n    type: SET_CURRENT_SCREEN,\r\n    screen\r\n  }\r\n}","export const SET_TEMPLATE_DATA = 'SET_TEMPLATE_DATA';\r\nexport function setTemplateData(templateData) {\r\n  return {\r\n    type: SET_TEMPLATE_DATA,\r\n    templateData\r\n  };\r\n}\r\n\r\n","import { createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nlet store = createStore(rootReducer, composeWithDevTools());\r\n\r\nexport default store;\r\n\r\n/**\r\n * Возвращает текущий элемент (тот который в данный момент редлактируется)\r\n * @return {BaseElement}\r\n */\r\nexport function getCurrentElement() {\r\n  return store.getState().currentElement.currentElement;\r\n}\r\n\r\nexport function getCurrentTab() {\r\n  return store.getState().currentTab.currentTab;\r\n}\r\n\r\nexport function getElementState() {\r\n  return store.getState().currentState;\r\n}\r\n\r\n/**\r\n * Возвращает текущие настройки окна редактора\r\n *\r\n * @return {{}} - объект содержит свойства:\r\n * name\r\n * icon\r\n * id\r\n * width\r\n * css\r\n *\r\n */\r\nexport function getCurrentScreen() {\r\n  return store.getState().currentScreen;\r\n}\r\n","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Times from \"../../../svgs/times.svg\";\r\nimport { assetsToggle } from \"../../store/assets-browser/actions\";\r\nimport { iconsManager } from \"../../helpers\";\r\nimport Resource from \"../Resource\";\r\nimport '../../../sass/assets-browser.scss';\r\n\r\n\r\nclass AssetsBrowser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      // activeTab: 'icons',\r\n      activeTab: \"media\",\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: \"icons\",\r\n          title: \"Icons Library\"\r\n        },\r\n        {\r\n          name: \"media\",\r\n          title: \"Media Library\"\r\n        }\r\n      ],\r\n      assets: this.getAssets(\"media\"),\r\n      // assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n      mediaAssets: []\r\n    };\r\n    this.mediaResource = new Resource({ route: \"/admin/ajax/media\" });\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      let res = await this.mediaResource.getAll();\r\n\r\n      this.setState(state => {\r\n        state = { ...state, mediaAssets: res };\r\n        if (state.activeTab === \"media\") {\r\n          state.assets = res;\r\n        }\r\n        return state;\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  }\r\n  getAssets(tab) {\r\n    if (!tab) {\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab) {\r\n      case \"icons\": {\r\n        return iconsManager().getIconsList();\r\n      }\r\n      case \"media\": {\r\n        return this.state ? this.state.mediaAssets : [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e) {\r\n    let selectedAsset = e.currentTarget.dataset.assetname;\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset };\r\n    });\r\n  }\r\n\r\n  tabClick(e) {\r\n    this.setActiveTab(e.target.dataset.tab);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.setState(state => {\r\n      return { ...state, activeTab: tab, assets: this.getAssets(tab) };\r\n    });\r\n  }\r\n\r\n  toggleBrowser() {\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  chooseAsset() {\r\n    let asset;\r\n    this.state.assets.forEach(item => {\r\n      if (item.name === this.state.selectedAsset) {\r\n        asset = item;\r\n      }\r\n    });\r\n    if (!asset) {\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`;\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render() {\r\n    let classes = \"assets-browser\";\r\n    if (this.props.active) {\r\n      classes += \" assets-browser_active\";\r\n    }\r\n    let buttonClasses = \"btn\";\r\n    if (!this.state.selectedAsset) {\r\n      buttonClasses += \" btn_disabled\";\r\n    } else {\r\n      buttonClasses += \" btn_success\";\r\n    }\r\n    return (\r\n      <div className={classes}>\r\n        <div className=\"assets-browser__bg\" onClick={this.toggleBrowser} />\r\n        <div className=\"assets-browser-content\">\r\n          <div className=\"assets-browser-top\">\r\n            <div className=\"caption\">Append Media</div>\r\n            <button className=\"btn btn_bare assets-browser__close\" onClick={this.toggleBrowser} >\r\n              <Times className=\"icon\"/>\r\n            </button>\r\n            <div className=\"assets-browser-nav\">\r\n              {this.state.tabs.map(tab => {\r\n                let tabClasses = \"assets-browser__tab\";\r\n                if (this.state.activeTab === tab.name) {\r\n                  tabClasses += \" assets-browser__tab_active\";\r\n                }\r\n                return (\r\n                  <button\r\n                    className={tabClasses}\r\n                    onClick={this.tabClick}\r\n                    key={tab.name}\r\n                    data-tab={tab.name}\r\n                  >\r\n                    {tab.title}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {this.state.assets.length ? (\r\n            <div className=\"assets-browser-choose-frame\">\r\n              {this.state.assets.map(asset => {\r\n                let AssetContent;\r\n                let classes = \"asset-choose\";\r\n                let assetProps = {\r\n                  className: \"asset-choose__content\"\r\n                };\r\n                if (this.state.activeTab === \"icons\") {\r\n                  AssetContent = asset.iconComponent;\r\n                  classes += \" asset-choose_icon\";\r\n                  // assetProps.viewBox = '0 0 20 20';\r\n                  // assetProps.viewport = '0 0 10 10';\r\n                  assetProps.width = \"20\";\r\n                  assetProps.height = \"20\";\r\n                }\r\n                if (this.state.activeTab === \"media\") {\r\n                  AssetContent = \"img\";\r\n                  assetProps.src = asset.url;\r\n                  classes += \" asset-choose_media\";\r\n                  asset.name = asset.filename;\r\n                  asset.assetType = \"media\";\r\n                }\r\n                if (this.state.selectedAsset === asset.name) {\r\n                  classes += \" asset-choose_selected\";\r\n                }\r\n                return (\r\n                  <div\r\n                    className={classes}\r\n                    data-assetname={asset.name}\r\n                    key={asset.name}\r\n                    onClick={this.selectAsset}\r\n                  >\r\n                    <AssetContent {...assetProps} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"assets-browser-bottom\">\r\n            <button className={buttonClasses} onClick={this.chooseAsset}>\r\n              Choose\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import {getCurrentScreen, getElementState} from \"./store/store\";\r\nimport {isEditor} from \"../../../front-app/src/js/helpers\";\r\nimport CONSTANTS from \"./consts\";\r\n\r\nexport function getTemplateId(){\r\n  return (new URL(window.location)).searchParams.get('template_id');\r\n}\r\n/**\r\n * @param {array} names\r\n * */\r\nexport function getClassNames(names) {\r\n  if(! names.length){\r\n    return '';\r\n  }\r\n  let result = '';\r\n  for(let cssClass of names){\r\n    result += cssClass + ' ';\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function settingToState(setting) {\r\n  if(! setting){\r\n    return{};\r\n  }\r\n    return {\r\n    value: setting.getValue(),\r\n    label: setting.getLabel(),\r\n  };\r\n}\r\n\r\nexport function getEditorContent(){\r\n  return window.frames[0].window.altrpEditorContent;\r\n}\r\n/**\r\n * @return {Editor}\r\n * */\r\nexport function getEditor() {\r\n  return window.altrpEditor || window.parent.altrpEditor;\r\n}\r\n\r\nexport function editorSetCurrentElement(element){\r\n  getEditor().modules.templateDataStorage.setCurrentElement(element);\r\n}\r\n/**\r\n * @return {TemplateDataStorage}\r\n * */\r\nexport function getTemplateDataStorage() {\r\n  return window.altrpEditor.modules.templateDataStorage\r\n}\r\n\r\n/**\r\n *\r\n * @return {ElementsFactory}\r\n */\r\nexport function getFactory() {\r\n  return getEditor().modules.elementsFactory;\r\n}\r\n/**\r\n * @param {Event} e\r\n * @param {HTMLElement} element\r\n * */\r\nexport function topOrBottomHover(e, element) {\r\n  let rect = element.getBoundingClientRect();\r\n  let y = e.clientY - rect.top;\r\n  return (y < (rect.height / 2)) ? 'top' : 'bottom';\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n  return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Генерирует суфикс для всех настроек\r\n * на основе elementState и разврешения\r\n * @param {Controller} controller\r\n * @return {string}\r\n */\r\nexport function getElementSettingsSuffix(controller) {\r\n  let suffix_1 = getElementState().value;\r\n  let suffix_2 = (getCurrentScreen().name === CONSTANTS.DEFAULT_BREAKPOINT) ? '' : getCurrentScreen().name;\r\n  if(! (suffix_2 || suffix_1)){\r\n    return '';\r\n  }\r\n  return `_${getElementState().value}_${getCurrentScreen().name}`\r\n}\r\n\r\n/**\r\n * Конвертируем RGBA в HEX формат\r\n * @param {String} строка в формате CSS-правила\r\n * @return {string}\r\n */\r\nexport function rgb2hex(rgb) {\r\n  if (rgb) rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\r\n  return (rgb && rgb.length === 4) ? \"#\" +\r\n    (\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +\r\n    (\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2) +\r\n    (\"0\" + parseInt(rgb[3], 10).toString(16)).slice(-2) : '';\r\n}\r\n\r\nexport function cutString(string, maxLength = 80) {\r\n  if (string.length <= maxLength) return string;\r\n  return string.slice(0, maxLength) + '...';\r\n}\r\n\r\nexport function sortOptions(options, sortDirection) {\r\n  options.sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase() ? 1 : b.label.toLowerCase() > a.label.toLowerCase() ? -1 : 0);\r\n  return sortDirection === \"asc\" ? options : options.reverse();\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Pagination from \"./Pagination\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columnsModel = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  },\r\n  {\r\n    name: 'updated_at',\r\n    title: 'Updated At'\r\n  }\r\n];\r\nconst columnsDataSource = [\r\n  {\r\n    name: 'name',\r\n    title: 'Name',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'model.title',\r\n    title: 'Model'\r\n  },\r\n  {\r\n    name: 'route',\r\n    title: 'Route'\r\n  },\r\n  {\r\n    name: 'type',\r\n    title: 'Type'\r\n  }\r\n];\r\n\r\nexport default class Models extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab: 0,\r\n      modelsCurrentPage: 1,\r\n      dataSourcesCurrentPage: 1,\r\n      models: [],\r\n      modelsSearch: '',\r\n      modelsPageCount: 1,\r\n      modelsCount: 0,\r\n      dataSources: [],\r\n      dataSourcesSearch: '',\r\n      dataSourcesPageCount: 1,\r\n      dataSourcesCount: 0,\r\n    };\r\n    this.switchTab = this.switchTab.bind(this);\r\n    this.changePage = this.changePage.bind(this);\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n    this.dataSourcesResource = new Resource({ route: '/admin/ajax/data_sources' });\r\n    this.itemsPerPage = 10;\r\n  }\r\n\r\n  switchTab(activeTab) {\r\n    this.setState(state => ({ ...state, activeTab }))\r\n  }\r\n\r\n  changePage(currentPage, pagination) {\r\n    this.setState(state => ({ ...state, [pagination]: { ...state[pagination], currentPage } }));\r\n  }\r\n\r\n  /**\r\n   * Обновить список источников данных\r\n   */\r\n  getDataSources = async (dataSourcesSearch) => {\r\n    let res = await this.dataSourcesResource.getQueried({\r\n      page: this.state.dataSourcesCurrentPage,\r\n      pageSize: this.itemsPerPage,\r\n      preset: false,\r\n      s: dataSourcesSearch\r\n    });\r\n    this.setState(state => {\r\n      return {\r\n        ...state,\r\n        dataSources: res.data_sources,\r\n        dataSourcesSearch,\r\n        dataSourcesPageCount: res.pageCount\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Обновить список моделей\r\n   */\r\n  getModels = async (modelsSearch) => {\r\n    let res = await this.modelsResource.getQueried({\r\n      page: this.state.modelsCurrentPage,\r\n      pageSize: this.itemsPerPage,\r\n      preset: false,\r\n      s: modelsSearch\r\n    });\r\n    this.setState(state => {\r\n      return {\r\n        ...state,\r\n        models: res.models,\r\n        modelsSearch,\r\n        modelsPageCount: res.pageCount\r\n      }\r\n    });\r\n  };\r\n\r\n  // slicePage = (array, page, itemsPerPage) => {\r\n  //   return array.slice(page * itemsPerPage - itemsPerPage, page * itemsPerPage);\r\n  // }\r\n\r\n  async componentDidMount() {\r\n    // get: /admin/ajax/models .then(models => {\r\n    //   this.setState({models});\r\n    // });\r\n    let models = await this.modelsResource.getAll();\r\n    this.setState(state => ({\r\n      ...state,\r\n      modelsCount: models.models.length\r\n    }));\r\n\r\n    let data_sources = await this.dataSourcesResource.getAll();\r\n    this.setState(state => ({\r\n      ...state,\r\n      dataSourcesCount: data_sources.data_sources.length\r\n    }));\r\n\r\n    this.getModels();\r\n    this.getDataSources();\r\n  }\r\n\r\n  /**\r\n   * фильтрация по строке\r\n   */\r\n  changeSearchHandler = e => {\r\n    let modelsSearch = e.target.value;\r\n    this.getModels(modelsSearch);\r\n\r\n  };\r\n\r\n  /**\r\n   * фильтрация по строке\r\n   */\r\n  changeDataSourcesSearchHandler = e => {\r\n    let dataSourcesSearch = e.target.value;\r\n    this.getDataSources(dataSourcesSearch);\r\n  };\r\n\r\n  render() {\r\n    const { activeTab, models, dataSources, modelsCurrentPage, dataSourcesCurrentPage, modelsSearch, dataSourcesSearch,\r\n      modelsPageCount, dataSourcesPageCount, modelsCount, dataSourcesCount } = this.state;\r\n\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Tables</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{activeTab === 0 ? 'All Models' : 'All Data Sources'}</span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/tables/${activeTab === 0 ? 'models' : 'data-sources'}/add`}>Add New</Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={activeTab} onSelect={this.switchTab}>\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Tab>\r\n              Models\r\n            </Tab>\r\n            <Tab>\r\n              Data Sources\r\n            </Tab>\r\n          </TabList>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columnsModel}\r\n              search={{\r\n                value: modelsSearch||'',\r\n                changeHandler:this.changeSearchHandler\r\n              }}\r\n              quickActions={[{\r\n                tag: 'Link', props: {\r\n                  href: '/admin/tables/models/edit/:id',\r\n                },\r\n                title: 'Edit'\r\n              }, {\r\n                tag: 'button',\r\n                route: '/admin/ajax/models/:id',\r\n                method: 'delete',\r\n                confirm: 'Are You Sure?',\r\n                after: () => {this.getModels()},\r\n                className: 'quick-action-menu__item_danger',\r\n                title: 'Trash'\r\n              }]}\r\n              rows={models.map(model => ({\r\n                ...model,\r\n                editUrl: '/admin/tables/models/edit/' + model.id\r\n              }))}\r\n            />\r\n            <Pagination pageCount={modelsPageCount || 1}\r\n              currentPage={modelsCurrentPage || 1}\r\n              changePage={modelsCurrentPage => {\r\n                if(this.state.modelsCurrentPage !== modelsCurrentPage){\r\n                  this.setState({modelsCurrentPage}, this.getModels)}\r\n                }\r\n              }\r\n              itemsCount={modelsCount}\r\n            />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columnsDataSource}\r\n              search={{\r\n                value: dataSourcesSearch||'',\r\n                changeHandler:this.changeDataSourcesSearchHandler\r\n              }}\r\n              rows={dataSources.map(dataSource => ({\r\n                ...dataSource,\r\n                editUrl: '/admin/tables/data-sources/edit/' + dataSource.id\r\n              }))}\r\n            />\r\n            <Pagination pageCount={Math.ceil(dataSources.length / this.itemsPerPage)}\r\n              currentPage={dataSourcesCurrentPage}\r\n              changePage={dataSourcesCurrentPage => this.setState({ dataSourcesCurrentPage })}\r\n              itemsCount={dataSources.length}\r\n            />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport { titleToName }from \"../../js/helpers\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n\r\nclass EditModelForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: {...this.props.model}\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.deleteHandler = this.deleteHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Сменить значение поля модели\r\n   * @param value\r\n   * @param field\r\n   */\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      return state\r\n    });\r\n  }\r\n\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state, value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Обновляем state при получении новых props (model)\r\n   */\r\n  componentDidUpdate(prevProps){\r\n    if(this.props !== prevProps){\r\n      this.setState(state => {\r\n        state = { ...state };\r\n        state.value = {...this.props.model};\r\n        return state\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Обработка формы\r\n   * @param e\r\n   */\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    if(_.isFunction(this.props.onSubmit)){\r\n      delete this.state.value.created_at;\r\n      delete this.state.value.updated_at;\r\n      this.props.onSubmit(this.state.value);\r\n    } else {\r\n      console.log(this.state.value);\r\n    }\r\n  }\r\n\r\n  async deleteHandler() {\r\n    // delete: /admin/ajax/models/{model_id}\r\n    let res = await (new Resource({route: '/admin/ajax/models'}).delete(this.props.model.id));\r\n    this.setState(state=>({...state, redirect: '/admin/tables/models/'}))\r\n  }\r\n\r\n  render() {\r\n    const model = this.state.value;\r\n    if(this.state.redirect){\r\n      return <Redirect to={this.state.redirect} push={true}/>\r\n    }\r\n    return <form className=\"admin-form row\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group col-12\">\r\n        <label htmlFor=\"page-title\">Model Title</label>\r\n        <input type=\"text\" id=\"page-title\" required\r\n          value={model.title || ''}\r\n          onChange={this.titleChangeHandler}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-name\">Model Name</label>\r\n        <input type=\"text\" id=\"page-name\" required\r\n          value={model.name || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-description\">Parent Model</label>\r\n        <input type=\"text\" id=\"page-description\"\r\n               value={model.parent_model_id || ''}\r\n               onChange={e => { this.changeValue(e.target.value, 'parent_model_id') }}\r\n               className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-description\">Model Description</label>\r\n        <input type=\"text\" id=\"page-description\"\r\n          value={model.description || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      {(model.id) ? '' : <div className=\"form-group col-12 \">\r\n        <label htmlFor=\"model-table_id\" className=\"label_checkbox\">Table</label>\r\n        <AltrpSelect\r\n            id=\"model-table_id\"\r\n            defaultOptions={[\r\n              {\r\n                value: '',\r\n                label: ' ',\r\n              }\r\n            ]}\r\n            value={this.state.value.table_id || ''}\r\n            isDisabled={model.id}\r\n            onChange={value => {this.changeValue(value, 'table_id')}}\r\n            optionsRoute=\"/admin/ajax/tables/options\"/>\r\n      </div>}\r\n      <div className=\"row col-12\">\r\n        <div className=\"form-group col-6 form-check-inline\">\r\n          <input type=\"checkbox\" id=\"page-soft_deletes\"\r\n            checked={model.soft_deletes}\r\n            onChange={e => { this.changeValue(e.target.checked, 'soft_deletes') }}\r\n            className=\"form-check-input form-check-input\" />\r\n          <label htmlFor=\"page-soft_deletes\" className=\"label_checkbox\">Soft Deletes</label>\r\n        </div>\r\n        <div className=\"form-group col-6 form-check-inline\">\r\n          <input type=\"checkbox\" id=\"page-time_stamps\"\r\n            checked={model.time_stamps}\r\n            onChange={e => { this.changeValue(e.target.checked, 'time_stamps') }}\r\n            className=\"form-check-input form-check-input_inline\" />\r\n          <label htmlFor=\"page-time_stamps\" className=\"label_checkbox\">Time Stamps</label>\r\n        </div>\r\n\r\n      </div>\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">{this.props.submitText}</button>\r\n        <Link to=\"/admin/tables/models\"><button className=\"btn\">Cancel</button></Link>\r\n        {this.props.edit\r\n            ? <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>Delete</button>\r\n            : ''}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default EditModelForm;\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter, Redirect } from \"react-router-dom\";\r\nimport EditModelForm from \"./EditModelForm\";\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  }\r\n];\r\n\r\n\r\nclass EditModel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { id } = this.props.match.params;\r\n    this.state = {\r\n      model: {\r\n        name: '',\r\n        title: '',\r\n        description: '',\r\n        bounded_model: '',\r\n        soft_deletes: false,\r\n        time_stamps: false\r\n      },\r\n      fields: null,\r\n      relations: null,\r\n      id,\r\n      queries: [],\r\n      // sql_editors: [],\r\n      // fields: [],\r\n      // relations: []\r\n    };\r\n\r\n    this.modelsResource = new Resource({route: '/admin/ajax/models'});\r\n    if(id){\r\n      this.fieldsResource = new Resource({route: `/admin/ajax/models/${id}/fields`});\r\n      this.relationsResource = new Resource({route: `/admin/ajax/models/${id}/relations`});\r\n      this.queriesResource = new Resource({route: `/admin/ajax/models/${id}/queries`});\r\n    }\r\n  }\r\n\r\n  updateFields = async() => {\r\n    let fields = await this.fieldsResource.getAll();\r\n    fields = fields.filter(({ name }) => name !== 'id');\r\n    this.setState(state => ({ ...state, fields }));\r\n  }\r\n\r\n  updateRelations = async() => {\r\n    let relations = await this.relationsResource.getAll();\r\n    this.setState(state => ({ ...state, relations }));\r\n  }\r\n\r\n  updateQueries = async () => {\r\n    let queries = await this.queriesResource.getAll();\r\n    this.setState(state => ({ ...state, queries }));\r\n  }\r\n\r\n  /**\r\n   * Загрузим данные модели\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount() {\r\n    // TODO: делать запросы асинхронно\r\n    if(this.state.id){\r\n      let model = await this.modelsResource.get(this.state.id);\r\n      let relations = await this.relationsResource.getAll();\r\n      let fields = await this.fieldsResource.getAll();\r\n      let queries = await this.queriesResource.getAll();\r\n      fields = fields.filter(({name}) => name !== 'id');\r\n      this.setState(state=>({\r\n          ...state,\r\n        model,\r\n        relations,\r\n        fields,\r\n        queries\r\n      }))\r\n    }\r\n  }\r\n  /**\r\n   * Обработка формы\r\n   * @return {*}\r\n   */\r\n  onSubmit = async (model) => {\r\n    let res;\r\n    if(this.state.id){\r\n      res = await this.modelsResource.put(this.state.id ,model);\r\n    } else {\r\n      res = await this.modelsResource.post(model);\r\n    }\r\n    this.props.history.push(\"/admin/tables/models\");\r\n  };\r\n  render() {\r\n    const { model, fields, relations, queries, sql_editors } = this.state;\r\n\r\n    const { id } = this.props.match.params;\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Tables / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{this.state.id ? 'Edit Model' : 'Add Model'}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <EditModelForm model={model}\r\n                       submitText={model.id ? 'Save' : 'Add'}\r\n                       edit={model.id}\r\n                       onSubmit={this.onSubmit}/>\r\n\r\n\r\n        {fields ?  <><h2 className=\"sub-header\">Fields</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          quickActions={[{ tag: 'Link', props: {\r\n              href: `/admin/tables/models/${id}/fields/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          } , {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${id}/fields/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateFields(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n          rows={fields.map(field => ({ ...field, editUrl: `/admin/tables/models/${model.id}/fields/edit/${field.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/fields/add`}>Add Field</Link>\r\n        </> : ''}\r\n        {relations ?<>\r\n        <h2 className=\"sub-header\">Relations</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          quickActions={[{ tag: 'Link', props: {\r\n              href: `/admin/tables/models/${id}/relations/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          } , {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${id}/relations/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateRelations(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n          rows={relations.map(relation => ({ ...relation, editUrl: `/admin/tables/models/${model.id}/relations/edit/${relation.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/relations/add`}>Add Relation</Link>\r\n        </> : ''}\r\n        {queries ? <>\r\n        <h2 className=\"sub-header\">Queries</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          rows={queries.map(query => ({ ...query, editUrl: `/admin/tables/models/${model.id}/queries/edit/${query.id}` }))}\r\n          quickActions={[{\r\n            tag: 'Link', props: {\r\n              href: `/admin/tables/models/${model.id}/queries/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          }, {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${model.id}/queries/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateQueries(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/queries/add`}>Add Query</Link>\r\n        </> : ''}\r\n        {sql_editors ? <>\r\n        <h2 className=\"sub-header\">SQL Editors</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          rows={sql_editors.map(query => ({ ...query, editUrl: `/admin/tables/models/${model.id}/sql_editors/edit/${query.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/sql_editors/add`}>Add Editor</Link>\r\n        </> : ''}\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditModel);","import React, { Component } from \"react\";\r\n\r\nclass FieldCalculationLogic extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rightType: \"string\",\r\n      is1stString: true,\r\n      is2ndString: true,\r\n      right: {\r\n        string: '',\r\n        fieldId: '',\r\n        string_1: '',\r\n        fieldId_1: '',\r\n        string_2: '',\r\n        fieldId_2: '',\r\n      }\r\n    };\r\n    this.rightTypeHandler = this.rightTypeHandler.bind(this);\r\n    this.rightChangeHandler = this.rightChangeHandler.bind(this);\r\n    this.setRight = this.setRight.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { right } = this.props.item;\r\n    if (right) {\r\n      typeof this.props.item.right === \"string\" ?\r\n        this.setState({ rightType: \"string\", right: { ...this.state.right, string: right } }) :\r\n        this.setState({ rightType: \"object\", right: { ...this.state.right, fieldId: right.id } })\r\n    }\r\n  }\r\n\r\n  rightTypeHandler(type) {\r\n    this.setState(_state => ({ rightType: type }), this.setRight)\r\n  }\r\n\r\n  rightChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      state.right[name] = value;\r\n      return state;\r\n    }, this.setRight)\r\n  }\r\n\r\n  operatorChangeHandler(value) {\r\n    switch (value) {\r\n      case \"not-null\":\r\n      case \"null\":\r\n        this.rightTypeHandler(\"null\");\r\n        break;\r\n      case \"between\":\r\n        this.rightTypeHandler(\"array\");\r\n        break;\r\n      default:\r\n        this.rightTypeHandler(\"string\");\r\n        break;\r\n    }\r\n    this.props.changeHandler({ value, name: \"operator\" });\r\n  }\r\n\r\n  setRight() {\r\n    const { rightType, is1stString, is2ndString, right } = this.state;\r\n    let value;\r\n\r\n    switch (rightType) {\r\n      case \"string\":\r\n        value = right.string;\r\n        break;\r\n      case \"object\":\r\n        value = { id: right.fieldId }\r\n        break;\r\n      case \"null\":\r\n        value = null\r\n        break;\r\n      case \"array\":\r\n        value = [\r\n          is1stString ? right.string_1 : { id: right.fieldId_1 },\r\n          is2ndString ? right.string_2 : { id: right.fieldId_2 }\r\n        ]\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.props.changeHandler({ name: \"right\", value });\r\n  }\r\n\r\n  render() {\r\n    const { item, index, fieldsOptions, changeHandler, deleteItemHandler } = this.props;\r\n    const { rightType, right, is1stString, is2ndString } = this.state;\r\n    return <>\r\n      <div className=\"flex-container\">\r\n        <p>if</p>\r\n        <button className=\"btn btn_failure\" type=\"button\" onClick={deleteItemHandler}>\r\n          Delete\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor={\"left\" + index}>Field Name</label>\r\n        <select className=\"form-control\" id={\"left\" + index} name=\"left\" required\r\n          value={item.left}\r\n          onChange={({ target: { value, name } }) => changeHandler({ value, name })}\r\n        >\r\n          <option disabled value=\"\" />\r\n          {fieldsOptions.map(({ value, label }) =>\r\n            <option value={value} key={value}>{label}</option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <p>Comparison Operators</p>\r\n\r\n      <div className=\"form-group\">\r\n        <select className=\"form-control\" name=\"operator\" required\r\n          value={item.operator}\r\n          onChange={({ target: { value } }) => this.operatorChangeHandler(value)}\r\n        >\r\n          <option value=\"\" disabled />\r\n          {/* <option value=\"not-null\">Not Null</option>\r\n          <option value=\"null\">Null</option> */}\r\n          <option value=\"==\">Equals</option>\r\n          <option value=\"<>\">Not Equals</option>\r\n          {/* <option value=\"between\">Between</option> */}\r\n          <option value=\">\">&gt;</option>\r\n          <option value=\">=\">&gt;=</option>\r\n          <option value=\"<\">&lt;</option>\r\n          <option value=\"<=\">&lt;=</option>\r\n        </select>\r\n      </div>\r\n\r\n      {[\"string\", \"object\"].includes(rightType) &&\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={rightType === \"string\"}\r\n                onChange={() => this.rightTypeHandler(\"string\")}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string\"\r\n              required={rightType === \"string\"}\r\n              value={right.string}\r\n              disabled={rightType !== \"string\"}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={rightType === \"object\"}\r\n                onChange={() => this.rightTypeHandler(\"object\")}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId\"\r\n              required={rightType === \"object\"}\r\n              value={right.fieldId}\r\n              disabled={rightType !== \"object\"}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>}\r\n\r\n      {rightType === \"array\" && <>\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={is1stString}\r\n                onChange={() => this.setState({ is1stString: true }, this.setRight)}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string_1\"\r\n              required={is1stString}\r\n              value={right.string_1}\r\n              disabled={!is1stString}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={!is1stString}\r\n                onChange={() => this.setState({ is1stString: false }, this.setRight)}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId_1\"\r\n              required={!is1stString}\r\n              value={right.fieldId_1}\r\n              disabled={is1stString}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"centred\">and</p>\r\n\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={is2ndString}\r\n                onChange={() => this.setState({ is2ndString: true }, this.setRight)}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string_2\"\r\n              required={is2ndString}\r\n              value={right.string_2}\r\n              disabled={!is2ndString}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={!is2ndString}\r\n                onChange={() => this.setState({ is2ndString: false }, this.setRight)}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId_2\"\r\n              required={!is2ndString}\r\n              value={right.fieldId_2}\r\n              disabled={is2ndString}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </>}\r\n\r\n      <p>Then = </p>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor={\"result\" + index}>Value</label>\r\n        <input type=\"text\" className=\"form-control\" id={\"result\" + index} name=\"result\" required\r\n          value={item.result}\r\n          onChange={({ target: { value, name } }) => changeHandler({ value, name })}\r\n        />\r\n      </div>\r\n      <p>E.g. [field_name]*[field_name] + 10</p>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default FieldCalculationLogic;\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\nimport FieldCalculationLogic from \"./FieldCalculationLogic\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { titleToName } from \"../../js/helpers\";\r\n\r\nconst fieldTypeOptions = [\r\n  {\r\n    value: 'string',\r\n    label: 'String'\r\n  },\r\n  {\r\n    value: 'integer',\r\n    label: 'integer'\r\n  },\r\n  {\r\n    value: 'bigInteger',\r\n    label: 'Big Integer'\r\n  },\r\n  {\r\n    value: 'float',\r\n    label: 'Float'\r\n  },\r\n  {\r\n    value: 'boolean',\r\n    label: 'Boolean'\r\n  },\r\n  {\r\n    value: 'text',\r\n    label: 'Text'\r\n  },\r\n  {\r\n    value: 'longText',\r\n    label: 'Long Text'\r\n  },\r\n  {\r\n    value: 'calculated',\r\n    label: 'Calculated'\r\n  },\r\n  {\r\n    value: 'date',\r\n    label: 'Date'\r\n  },\r\n  {\r\n    value: 'time',\r\n    label: 'Time'\r\n  },\r\n  {\r\n    value: 'year',\r\n    label: 'Year'\r\n  },\r\n  {\r\n    value: 'dateTime',\r\n    label: 'Datetime'\r\n  },\r\n  {\r\n    value: 'geometry',\r\n    label: 'Geometry'\r\n  },\r\n  {\r\n    value: 'json',\r\n    label: 'JSON'\r\n  },\r\n  {\r\n    value: 'binary',\r\n    label: 'Binary'\r\n  },\r\n];\r\nconst attributeOptions = [\r\n\r\n  {\r\n    value: 'unsigned',\r\n    label: 'UNSIGNED'\r\n  }\r\n];\r\nconst inputTipeOptions = ['textarea', 'text', 'number', 'slider', 'WYSIWYG', 'color', 'select', 'checkbox', 'radio button'];\r\n\r\n\r\nclass AddFieldForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isAlways: false,\r\n      fieldsOptions: [],\r\n      value: {\r\n        name: '',\r\n        title: '',\r\n        description: '',\r\n        is_label: false,\r\n        is_title: false,\r\n        is_auth: false,\r\n        type: 'string',\r\n        length_value: '',\r\n        default: '',\r\n        attribute: '',\r\n        input_type: 'text',\r\n        options: '',\r\n        null: false,\r\n        indexed: false,\r\n        editable: true,\r\n        calculation: '',\r\n        calculation_logic: [\r\n          { left: '', operator: '', result: '', right: '' }\r\n        ],\r\n      },\r\n      // value: this.props.field || {},\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.itemChangeHandler = this.itemChangeHandler.bind(this);\r\n    this.addItemHandler = this.addItemHandler.bind(this);\r\n    this.deleteItemHandler = this.deleteItemHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n\r\n    this.filedsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/fields` });\r\n    this.fieldsOptionsResource = new Resource({\r\n      route: `/admin/ajax/models/${this.props.match.params.modelId}/field_options`\r\n    });\r\n  }\r\n  /**\r\n   * новый field в props\r\n   * */\r\n  // componentDidUpdate(prevProps){\r\n  //   if(this.props !== prevProps){\r\n  //     this.setState(state => {\r\n  //       state = { ...state };\r\n  //       state.value = {...this.props.field};\r\n  //       return state\r\n  //     });\r\n  //   }\r\n  // }\r\n  /**\r\n   * Изменение данны с валидацией\r\n   * @param {string} value\r\n   * @param {string} field\r\n   */\r\n\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      if (field === 'default') {\r\n\r\n        if(state.value.size && value.length > state.value.size){\r\n          value = value.substring(0, parseInt(state.value.size))\r\n        }\r\n        switch (state.value.type) {\r\n          case 'boolean':{\r\n            if(value === ''){\r\n              value = null;\r\n            } else if (value != '0' && value != '1'){\r\n              value = 1;\r\n            }\r\n          }\r\n          break;\r\n          case 'bigInteger':{\r\n            if(!isNaN(value) && value !== '0'){\r\n              value = parseInt(value);\r\n            } else if(value === ''){\r\n              value = null;\r\n            } else {\r\n              value = '0';\r\n            }\r\n          }\r\n          break;\r\n          case 'integer':{\r\n            if(!isNaN(value) && value !== '0'){\r\n              value = parseInt(value);\r\n            } else if(value === ''){\r\n              value = null;\r\n            } else {\r\n              value = '0';\r\n            }\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state, value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: this.props.match.params.id ? state.value.name : titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    const { history, match } = this.props;\r\n    const { name, title, description, is_label, is_title, is_auth, type, size, default: default_, attribute, input_type,\r\n      options, null: _null, indexed, editable, calculation, calculation_logic } = this.state.value;\r\n\r\n    let data = {};\r\n\r\n    if (type === \"calculated\") {\r\n      this.state.isAlways ?\r\n        data = { title, description, type, calculation, name, } :\r\n        data = { title, description, type, calculation_logic, name, };\r\n    } else {\r\n      data = { name, title, description, is_label, is_title, is_auth, type, size, default: default_, attribute, input_type, null: _null, indexed, editable };\r\n      if (['select', 'checkbox', 'radio button'].includes(input_type)) {\r\n        data = { ...data, options };\r\n      }\r\n      console.log(default_);\r\n      if (['integer', 'bigInteger'].includes(type)) {\r\n        data.default = default_;\r\n      }\r\n    }\r\n\r\n    if (_.isFunction(this.props.onSubmit)) {\r\n      this.props.onSubmit(data);\r\n    }\r\n  }\r\n\r\n  addItemHandler() {\r\n    this.setState(state => {\r\n      state.value.calculation_logic\r\n        .push({ left: '', operator: '', result: '', right: '' });\r\n      return state;\r\n    })\r\n  }\r\n\r\n  deleteItemHandler(index) {\r\n    this.setState(state => {\r\n      state.value.calculation_logic.splice(index, 1);\r\n      return state;\r\n    })\r\n  }\r\n\r\n  itemChangeHandler({ name, value }, index) {\r\n    this.setState(state => {\r\n      state.value.calculation_logic[index][name] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { options } = await this.fieldsOptionsResource.getAll();\r\n\r\n    if (this.props.match.params.id) {\r\n      let value = await this.filedsResource.get(this.props.match.params.id);\r\n\r\n      if (typeof value.calculation_logic === 'string') {\r\n        value.calculation_logic = JSON.parse(value.calculation_logic);\r\n      }  \r\n      this.setState(state => ({ ...state, isAlways: value.calculation ? true : false ,  value: { ...state.value, ...value } }));\r\n    }\r\n    this.setState(state => ({ ...state, fieldsOptions: options }));\r\n  }\r\n\r\n  render() {\r\n    const { modelId } = this.props.match.params;\r\n    return <form className=\"admin-form field-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group \">\r\n        <label htmlFor=\"field-title\">Field Title</label>\r\n        <input type=\"text\" id=\"field-title\" required\r\n          value={this.state.value.title || ''}\r\n          onChange={this.titleChangeHandler}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group__inline-wrapper\">\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label htmlFor=\"field-name\">Field Name</label>\r\n          <input type=\"text\" id=\"field-name\" required readOnly={this.props.match.params.id}\r\n            value={this.state.value.name || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n        <div className=\"form-group form-group_width65\">\r\n          <label htmlFor=\"field-description\">Field Description</label>\r\n          <input type=\"text\" id=\"field-description\"\r\n            value={this.state.value.description || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"field-type\">Field Type</label>\r\n        <select id=\"field-type\" required\r\n          value={this.state.value.type || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'type') }}\r\n          className=\"form-control\"\r\n        >\r\n          <option value=\"\" />\r\n          {fieldTypeOptions.map(item =>\r\n            <option key={item.value} value={item.value}>\r\n              {item.label}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      {this.state.value.type === 'calculated' ?\r\n        <>\r\n          <div className=\"form-group col-6 form-check-inline\">\r\n            <input type=\"checkbox\" id=\"always\"\r\n              className=\"form-check-input\"\r\n              checked={this.state.isAlways}\r\n              onChange={e => this.setState({ isAlways: e.target.checked })}\r\n            />\r\n            <label htmlFor=\"always\" className=\"label_checkbox\">Always</label>\r\n          </div>\r\n\r\n          {this.state.isAlways ?\r\n            <>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"calculation\">Calculation</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"calculation\"\r\n                  value={this.state.value.calculation}\r\n                  onChange={e => { this.changeValue(e.target.value, 'calculation') }}\r\n                />\r\n              </div>\r\n              <p>E.g. [field_name]*[field_name] + 10</p>\r\n            </> :\r\n            <>\r\n              {this.state.value.calculation_logic.map((item, index) => <>\r\n                {index !== 0 && <hr />}\r\n                <FieldCalculationLogic\r\n                  item={item}\r\n                  index={index}\r\n                  fieldsOptions={this.state.fieldsOptions}\r\n                  key={index}\r\n                  changeHandler={item => this.itemChangeHandler(item, index)}\r\n                  deleteItemHandler={() => this.deleteItemHandler(index)}\r\n                />\r\n              </>)}\r\n              <button className=\"btn\" type=\"button\" onClick={this.addItemHandler}>\r\n                + Calculated Logic\r\n              </button>\r\n            </>}\r\n        </> :\r\n        <>\r\n          <div className=\"checkbox-group\">\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_label\"\r\n                checked={this.state.value.is_label}\r\n                onChange={e => { this.changeValue(e.target.checked, 'is_label') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_label\">As Label</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_title\"\r\n                checked={this.state.value.is_title}\r\n                onChange={e => { this.changeValue(e.target.checked, 'is_title') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_title\">As Title</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_auth\"\r\n                     checked={this.state.value.is_auth}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'is_auth') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_auth\">Set Auth</label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group__inline-wrapper\">\r\n            <div className=\"form-group form-group_width47\">\r\n              <label htmlFor=\"field-length_value\">Length/Value</label>\r\n              <input type=\"number\" id=\"field-length_value\"\r\n                value={this.state.value.size || ''}\r\n                onChange={e => { this.changeValue(+e.target.value, 'size') }}\r\n                className=\"form-control\" />\r\n            </div>\r\n\r\n            <div className=\"form-group form-group_width47\">\r\n              <label htmlFor=\"field-default\">Default</label>\r\n              <input type=\"text\" id=\"field-default\"\r\n                value={this.state.value.default || ''}\r\n                onChange={e => { this.changeValue(e.target.value, 'default') }}\r\n                className=\"form-control\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"field-attribute\">Attribute</label>\r\n            <select id=\"field-attribute\"\r\n              value={this.state.value.attribute || ''}\r\n              onChange={e => { this.changeValue(e.target.value, 'attribute') }}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" />\r\n              {attributeOptions.map(item =>\r\n                <option key={item.value} value={item.value}>\r\n                  {item.label}\r\n                </option>)}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"field-input_type\">Input Type</label>\r\n            <select id=\"field-input_type\" required\r\n              value={this.state.value.input_type || ''}\r\n              onChange={e => { this.changeValue(e.target.value, 'input_type') }}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {inputTipeOptions.map(item =>\r\n                <option key={item} value={item}>\r\n                  {item}\r\n                </option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {['select', 'checkbox', 'radio button'].includes(this.state.value.input_type) && <>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"field-options\">Options</label>\r\n              <textarea id=\"field-options\"\r\n                value={this.state.value.options || ''}\r\n                onChange={e => { this.changeValue(e.target.value, 'options') }}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <p>Enter each choice on a new line.</p>\r\n            <p>Fro more control, you may specify both a value and label like this:</p>\r\n            <p>red | Red</p>\r\n          </>}\r\n\r\n          <div className=\"checkbox-group\">\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-nullable\"\r\n                checked={this.state.value.null}\r\n                onChange={e => { this.changeValue(e.target.checked, 'null') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-nullable\">Nullable</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-indexed\"\r\n                checked={this.state.value.indexed}\r\n                onChange={e => { this.changeValue(e.target.checked, 'indexed') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-indexed\">Indexed</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-editable\"\r\n                checked={this.state.value.editable}\r\n                onChange={e => { this.changeValue(e.target.checked, 'editable') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-editable\">Editable</label>\r\n            </div>\r\n          </div>\r\n        </>\r\n      }\r\n      <div className=\"btn__wrapper btn_add\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to={`/admin/tables/models/edit/${modelId}`}>Cancel</Link>\r\n        {/* TODO: отображать кнопку если в форме редактируются данные\r\n          повесить обработчик удаления\r\n        <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddFieldForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport AddFieldForm from \"./AddFieldForm\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass EditField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelTitle: 'Model Title',\r\n      field: {},\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n    this.filedsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/fields` });\r\n  }\r\n  async componentDidMount() {\r\n    const { modelId } = this.props.match.params;\r\n    let model = await this.modelsResource.get(modelId);\r\n    this.setState({ modelTitle: model.title });\r\n  }\r\n\r\n  /**\r\n   * отправка данных\r\n   * @return {*}\r\n   */\r\n  onSubmit = async data => {\r\n    const { modelId } = this.props.match.params;\r\n    const { history } = this.props;\r\n    if (this.props.match.params.id) {\r\n      let res = await this.filedsResource.put(this.props.match.params.id, data);\r\n      history.push(`/admin/tables/models/edit/${modelId}`);\r\n    } else {\r\n      let res = await this.filedsResource.post(data);\r\n      history.push(`/admin/tables/models/edit/${modelId}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { modelTitle } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <Link className=\"admin-breadcrumbs__link\" to={`/admin/tables/models/edit/${modelId}`}>\r\n            {modelTitle}\r\n          </Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Field</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddFieldForm onSubmit={this.onSubmit} />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditField);","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {titleToName} from \"../../js/helpers\";\r\n\r\nconst relationTypeOptions = [\r\n  {\r\n    value: 'hasOne',\r\n    label: 'Has One'\r\n  },\r\n  {\r\n    value: 'belongsTo',\r\n    label: 'Belongs To'\r\n  },\r\n  {\r\n    value: 'hasMany',\r\n    label: 'Has Many'\r\n  },\r\n];\r\nconst deleteUpdateOptions = [\r\n  {\r\n    value: 'cascade',\r\n    label: 'cascade'\r\n  },\r\n  {\r\n    value: 'set null',\r\n    label: 'set null'\r\n  },\r\n  {\r\n    value: 'no action',\r\n    label: 'no action'\r\n  },\r\n  {\r\n    value: 'restrict',\r\n    label: 'restrict'\r\n  }\r\n];\r\n\r\nclass AddRelationForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelsOptions: [],\r\n      value: {\r\n        title: '',\r\n        description: '',\r\n        type: '',\r\n        model_id: this.props.match.params.modelId,\r\n        add_belong_to: false,\r\n        editable: true,\r\n        always_with: false,\r\n        local_key: '',\r\n        foreign_key: '',\r\n        onDelete: 'set null',\r\n        onUpdate: 'set null'\r\n      },\r\n      selfFieldsOptions: [],\r\n      foreignFieldsOptions: [],\r\n      relationTypeOptions,\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/model_options' });\r\n    this.relationsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/relations` });\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { options } = await this.modelsResource.getAll();\r\n    const { modelId, id } = this.props.match.params;\r\n    //Модель может ссылаться на саму себя\r\n    //options = options.filter(option=>(Number(option.value) !== Number(modelId)));\r\n    this.setState({ modelsOptions: options });\r\n    let fields = await (new Resource({route: `/admin/ajax/models/${modelId}/fields`})).getAll();\r\n    let selfFieldsOptions = fields.map(field=>({\r\n      label: field.title,\r\n      value: field.name,\r\n    }));\r\n    this.setState(state=>({...state, selfFieldsOptions}));\r\n    if(id){\r\n      let value = await this.relationsResource.get(id);\r\n      this.updateForeignFieldOptions(value.target_model_id);\r\n      this.changeTargetModel(value.target_model_id);\r\n      this.setState(state=>({...state, value}));\r\n    }\r\n  }\r\n  /**\r\n   * Проверяем значение при смене модели\r\n   * если модель это User, то скроем Add Reverse Relation\r\n   * и уберем из вариантов связей Has many\r\n   * @param {string} value\r\n   */\r\n  changeTargetModel(value) {\r\n    let modelName = '';\r\n    this.state.modelsOptions.forEach(option=>{\r\n      if(parseInt(option.value) === parseInt(value)){\r\n        modelName = option.label;\r\n      }\r\n    });\r\n    let _relationTypeOptions = relationTypeOptions.filter(option=>{\r\n      if(modelName !== 'User'){\r\n        return true;\r\n      }\r\n      return option.value !== 'hasMany';\r\n    });\r\n    if(modelName === 'User'){\r\n      this.changeValue('hasOne', 'type');\r\n      this.changeValue(false, 'add_belong_to');\r\n    }\r\n    this.setState(state =>({...state, hideAddBelongTo:modelName === 'User', relationTypeOptions:_relationTypeOptions}));\r\n  }\r\n/**\r\n * Изменить значение\r\n * @param {*} value\r\n * @param {string} field\r\n */\r\n  changeValue(value, field) {\r\n  const { id } = this.props.match.params;\r\n\r\n  if(field === 'target_model_id'){\r\n    this.changeTargetModel(value);\r\n  }\r\n  this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      if(field === 'title' && ! id){\r\n        state.value.name = titleToName(value);\r\n      }\r\n      if((field === 'name')){\r\n        state.value.name = titleToName(value);\r\n      }\r\n      if(field === 'foreign_key'){\r\n        state.value[field] = titleToName(value);\r\n      }\r\n      if(field === 'target_model_id'){\r\n        this.updateForeignFieldOptions(value)\r\n      }\r\n      return state\r\n    })\r\n  }\r\n\r\n  /**\r\n   * При изменении модели для связи изменяем опции\r\n   * @param {string} modelId\r\n   */\r\n  async updateForeignFieldOptions(modelId){\r\n    let fields = await (new Resource({route: `/admin/ajax/models/${modelId}/fields`})).getAll();\r\n    let foreignFieldsOptions = fields.map(field=>({\r\n      label: field.title,\r\n      value: field.name,\r\n    }));\r\n    this.setState(state=>({...state, foreignFieldsOptions}))\r\n\r\n  }\r\n  /**\r\n   * Отправка данных\r\n   */\r\n  async submitHandler(e) {\r\n    e.preventDefault();\r\n    const { history, match } = this.props;\r\n    const data = this.state.value;\r\n    if (this.props.match.params.id) {\r\n      let res = await this.relationsResource.put(this.props.match.params.id, data);\r\n    } else {\r\n      let res = await this.relationsResource.post(data);\r\n    }\r\n    history.push(`/admin/tables/models/edit/${match.params.modelId}`);\r\n  }\r\n\r\n  /**\r\n   * вывод поля Local Key\r\n   */\r\n  renderLocalKey(){\r\n    const { id } = this.props.match.params;\r\n\r\n    return <div className=\"form-group form-group_width47\">\r\n      <label htmlFor=\"relation-local_key\">Local Key</label>\r\n      <select  id=\"relation-local_key\"\r\n             value={this.state.value.local_key || ''}\r\n             className=\"form-control\"\r\n             onChange={e => { this.changeValue(e.target.value, 'local_key') }}\r\n      >\r\n        <option disabled value=\"\" />\r\n        {this.state.selfFieldsOptions.map(({ value, label }) =>\r\n            <option key={value} value={value}>\r\n              {label}\r\n            </option>)}\r\n      </select>\r\n    </div>\r\n\r\n  }\r\n\r\n/**\r\n   * вывод поля Foreign Key\r\n   */\r\n  renderForeignKey(){\r\n    const { id } = this.props.match.params;\r\n\r\n    return<div className=\"form-group form-group_width47\">\r\n      <label htmlFor=\"relation-foreign_key\">Foreign Key</label>\r\n      <select id=\"relation-foreign_key\"\r\n        value={this.state.value.foreign_key || ''}\r\n        onChange={e => { this.changeValue(e.target.value, 'foreign_key') }}\r\n        className=\"form-control\"\r\n      >\r\n        <option disabled value=\"\" />\r\n        {this.state.foreignFieldsOptions.map(({ value, label }) =>\r\n          <option key={value} value={value}>\r\n            {label}\r\n          </option>)}\r\n      </select>\r\n    </div>\r\n  }\r\n\r\n\r\n  render() {\r\n    const { id } = this.props.match.params;\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"row\">\r\n        <div className=\"form-group col-12\">\r\n          <label htmlFor=\"relation-title\">Relation Title</label>\r\n          <input type=\"text\" id=\"relation-title\" required\r\n            value={this.state.value.title || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'title') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n          <label htmlFor=\"relation-title\">Relation Name</label>\r\n          <input type=\"text\" id=\"relation-title\" required readOnly={id}\r\n            value={this.state.value.name || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-8\">\r\n          <label htmlFor=\"relation-description\">Relation Description</label>\r\n          <input type=\"text\" id=\"relation-description\" readOnly={id}\r\n            value={this.state.value.description || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"relation-type\">Relation Type</label>\r\n          <select id=\"relation-type\" required disabled={id}\r\n            value={this.state.value.type}\r\n            onChange={e => { this.changeValue(e.target.value, 'type') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.relationTypeOptions.map(item =>\r\n              <option key={item.value} value={item.value}>\r\n                {item.label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"relation-model_id\">Model to Bound</label>\r\n          <select id=\"relation-model_id\" required\r\n            value={this.state.value.target_model_id || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'target_model_id') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"form-group col-4\">\r\n          {this.state.hideAddBelongTo || this.state.value.type === 'belongsTo' ? '' : <><input type=\"checkbox\" id=\"relation-add_belong_to\"\r\n            checked={this.state.value.add_belong_to} readOnly={id}\r\n            onChange={e => { this.changeValue(e.target.checked, 'add_belong_to') }}\r\n          />\r\n          <label className=\"checkbox-label\" htmlFor=\"relation-add_belong_to\">Add Reverse Relation</label></>}\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n          { (! ['hasMany', 'belongsTo'].includes(this.state.value.type)) ?\r\n              <><input type=\"checkbox\"\r\n                       id=\"field-editable\"\r\n                       checked={this.state.value.editable}\r\n                       onChange={e => { this.changeValue(e.target.checked, 'editable') }}\r\n          />\r\n            <label className=\"checkbox-label\" htmlFor=\"field-editable\">Editable</label></> : ''}\r\n\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n         <input type=\"checkbox\"\r\n                id=\"field-always_with\"\r\n                checked={this.state.value.always_with}\r\n                onChange={e => { this.changeValue(e.target.checked, 'always_with') }}\r\n          />\r\n            <label className=\"checkbox-label\" htmlFor=\"field-always_with\">Always With</label>\r\n        </div>\r\n      </div>\r\n      <div className=\"form-group__inline-wrapper\">\r\n        {this.renderLocalKey()}\r\n        {this.renderForeignKey()}\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"onDelete\">On Delete</label>\r\n          <select id=\"onDelete\" required\r\n            value={this.state.value.onDelete}\r\n            onChange={e => { this.changeValue(e.target.value, 'onDelete') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {deleteUpdateOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label.toUpperCase()}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"onUpdate\">On Update</label>\r\n          <select id=\"onUpdate\" required\r\n            value={this.state.value.onUpdate}\r\n            onChange={e => { this.changeValue(e.target.value, 'onUpdate') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {deleteUpdateOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label.toUpperCase()}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n       <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n        {/* <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddRelationForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport AddRelationForm from \"./AddRelationForm\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass AddRelation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelTitle: 'Model Title'\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n  }\r\n  \r\n  async componentDidMount() {\r\n    const { modelId } = this.props.match.params;\r\n    let model = await this.modelsResource.get(modelId);\r\n    this.setState({ modelTitle: model.title })\r\n  }\r\n\r\n  render() {\r\n    const { modelTitle } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <Link className=\"admin-breadcrumbs__link\" to={`/admin/tables/models/edit/${modelId}`}>\r\n            {modelTitle}\r\n          </Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Relation</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddRelationForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddRelation);","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst typeOptions = ['resource', 'Get Queried', 'create', 'read', 'update', 'delete', 'options'];\r\nconst mockedOptions = [\r\n  { value: 1, label: \"Model title 1\" },\r\n  { value: 2, label: \"Model title 2\" },\r\n  { value: 3, label: \"Model title 3\" },\r\n];\r\n\r\nclass AddDataSourceForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // modelsOptions: [],   TODO: заменить замоканые данные\r\n      modelsOptions: mockedOptions,\r\n      value: {\r\n        title: '',\r\n        description: '',\r\n        type: [],\r\n        model_id: '',\r\n        with: [],\r\n        route: '',\r\n        roles: []\r\n      },\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.multipleSelectChangeHandler = this.multipleSelectChangeHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // get: get: /admin/ajax/model_options .then(modelsOptions => {\r\n    //   this.setState({ modelsOptions });\r\n    // });\r\n  }\r\n\r\n  changeValue(value, field) {\r\n    console.log(value)\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  multipleSelectChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      const array = state.value[name];\r\n\r\n      if (array.includes(value)) {\r\n        const index = array.indexOf(value);\r\n        array.splice(index, 1);\r\n      } else {\r\n        array.push(value);\r\n      }\r\n      \r\n      return state;\r\n    })\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    // post: /admin/ajax/models (value)\r\n    console.log(this.state.value);\r\n  }\r\n\r\n  render() {\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label htmlFor=\"data-source-title\">Data Source Title</label>\r\n          <input type=\"text\" id=\"data-source-title\" required\r\n            value={this.state.value.title}\r\n            onChange={e => { this.changeValue(e.target.value, 'title') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width65\">\r\n          <label htmlFor=\"data-source-description\">Data Source Description</label>\r\n          <input type=\"text\" id=\"data-source-description\" required\r\n            value={this.state.value.description}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-type\">Data Source Type</label>\r\n        <select id=\"data-source-type\" required multiple\r\n          name=\"type\"\r\n          value={this.state.value.type}\r\n          onChange={this.multipleSelectChangeHandler}\r\n          className=\"form-control\"\r\n        >\r\n          <option disabled value=\"\" />\r\n          {typeOptions.map(item =>\r\n            <option key={item} value={item}>\r\n              {item}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"data-source-model_id\">Model</label>\r\n          <select id=\"data-source-model_id\" required\r\n            value={this.state.value.model_id}\r\n            onChange={e => { this.changeValue(e.target.value, 'model_id') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"data-source-with\">With</label>\r\n          <select id=\"data-source-with\" required multiple\r\n            name=\"with\"\r\n            value={this.state.value.with}\r\n            onChange={this.multipleSelectChangeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-route\">Route</label>\r\n        <input type=\"text\" id=\"data-source-route\" required\r\n          value={this.state.value.route}\r\n          onChange={e => { this.changeValue(e.target.value, 'route') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-roles\">Access</label>\r\n        <select id=\"data-source-roles\" required multiple\r\n          name=\"roles\"\r\n          value={this.state.value.roles}\r\n          onChange={this.multipleSelectChangeHandler}\r\n          className=\"form-control\"\r\n        >\r\n          <option disabled value=\"\" />\r\n          {this.state.modelsOptions.map(({ value, label }) =>\r\n            <option key={value} value={value}>\r\n              {label}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n        {/* <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default AddDataSourceForm;","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddDataSourceForm from \"./AddDataSourceForm\";\r\n\r\nclass AddDataSource extends Component {\r\n  render() {\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Data Source</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddDataSourceForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default AddDataSource;","import React, { Component } from \"react\";\r\n\r\nconst typeOptions = ['sum', 'min', 'max', 'avg', 'count', 'distinct', 'count_distinct'];\r\n\r\nclass AggregateComponent extends Component {\r\n  render() {\r\n    const { type, column, alias } = this.props.item;\r\n    const { columnsOptions, changeHandler } = this.props;\r\n    return <div className=\"form-segment form-group__inline-wrapper\">\r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Type\r\n          <select required name=\"type\"\r\n            value={type}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {typeOptions.map(type =>\r\n              <option key={type} value={type}>\r\n                {type}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Field\r\n          <select required name=\"column\"\r\n            value={column}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            <option value=\"*\">All</option>\r\n            {columnsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n      \r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Alias\r\n          <input type=\"text\" required name=\"alias\"\r\n            value={alias}\r\n            onChange={changeHandler}\r\n            className=\"form-control\" />\r\n        </label>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default AggregateComponent;","import React, { Component } from \"react\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst tablesOptions = tableId => new Resource({ route: `/admin/ajax/tables/${tableId}/columns` });\r\nclass JoinComponent extends Component {\r\n  state = {\r\n    targetColumnOptions: []\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { target_table } = this.props.item;\r\n    if (prevProps.item.target_table !== target_table) {\r\n      tablesOptions(target_table).getAll()\r\n        .then(targetColumnOptions => this.setState({ targetColumnOptions }));\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { target_table } = this.props.item;\r\n    if (target_table) {\r\n      tablesOptions(target_table).getAll()\r\n        .then(targetColumnOptions => this.setState({ targetColumnOptions }));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { type, target_table, source_column, operator, target_column } = this.props.item;\r\n    const { changeHandler, tablesOptions, sourceColumnOptions } = this.props;\r\n    const { targetColumnOptions } = this.state;\r\n    return <div className=\"form-segment\">\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Type\r\n            <select required name=\"type\"\r\n              value={type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              <option value=\"inner_join\">Inner Join</option>\r\n              <option value=\"left_join\">Left Join</option>\r\n              <option value=\"right_join\">Right Join</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Target Table\r\n          <select required name=\"target_table\"\r\n              value={target_table}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {tablesOptions.map(({ value, label }) =>\r\n                <option disabled={value === target_table} value={value} key={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Source Column\r\n          <select required name=\"source_column\"\r\n              value={source_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {sourceColumnOptions.map(({ label, value }) => <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Operator\r\n            <select required name=\"operator\"\r\n              value={operator}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" disabled />\r\n              <option value=\"=\">Equals</option>\r\n              <option value=\"!=\">Not Equals</option>\r\n              <option value=\"like\">Like</option>\r\n              <option value=\">\">&gt;</option>\r\n              <option value=\">=\">&gt;=</option>\r\n              <option value=\"<\">&lt;</option>\r\n              <option value=\"<=\">&lt;=</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Target Column\r\n            <select required name=\"target_column\"\r\n              value={target_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\">{!target_table ? 'Choose Table First' : ''}</option>\r\n              {targetColumnOptions.map(({ id, title }) => <option value={id} key={id}>{title}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default JoinComponent;","/** @function getDateFormat\r\n  * @param {string} type тип поля where_date\r\n  * @return {string} формат отображаемых данных\r\n */\r\nexport function getDatePickerFormat(type) {\r\n  switch (type) {\r\n    case 'datetime':\r\n      return \"yyyy/MM/dd h:mm:ss\";\r\n    case 'date':\r\n      return \"yyyy/MM/dd\";\r\n    case 'time':\r\n      return \"h:mm:ss\";\r\n    case 'day':\r\n      return \"dd\";\r\n    case 'month':\r\n      return \"MM\";\r\n    case 'year':\r\n      return \"yyyy\";\r\n\r\n    default:\r\n      return \"yyyy\";\r\n  }\r\n}\r\n\r\n/** @function getDateFormat\r\n * Функция схожа с getDateFormat, с тем различием\r\n что moment запрашивает дату в формате DD - заглавные буквы\r\n * @param {string} type - тип поля where_date\r\n * @return {string | undefined} формат строки, получаемой из объекта Date\r\n */\r\nexport function getMomentFormat(type) {\r\n  switch (type) {\r\n    case 'datetime':\r\n      return \"YYYY/MM/DD H:mm:ss\";\r\n    case 'date':\r\n      return \"YYYY/MM/DD\";\r\n    case 'time':\r\n      return \"H:mm:ss\";\r\n    case 'day':\r\n      return \"DD\";\r\n    case 'month':\r\n      return \"MM\";\r\n    case 'year':\r\n      return \"YYYY\";\r\n\r\n    default:\r\n      return \"YYYY\";\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport moment from \"moment\";\r\nimport { getDatePickerFormat, getMomentFormat } from \"./helpers\";\r\n\r\nconst conditionTypeOptions = ['where', 'or_where', 'where_between', 'where_in', 'where_date', 'where_column'];\r\nconst dateTypesOptions = [\r\n  { value: 'datetime', label: 'Date - Time' },\r\n  { value: 'date', label: 'Date' },\r\n  { value: 'time', label: 'Time' },\r\n  { value: 'day', label: 'Day' },\r\n  { value: 'month', label: 'Month' },\r\n  { value: 'year', label: 'Year' }\r\n];\r\n\r\nclass ConditionComponent extends Component {\r\n  state = { isDateVar: false }\r\n\r\n  dateValueFormatChange = () => {\r\n    const { isDateVar } = this.state;\r\n\r\n    this.props.changeHandler({\r\n      target: {\r\n        value: isDateVar ? moment(new Date()).format(getMomentFormat(this.props.item.type)) : '',\r\n        name: \"value\"\r\n      }\r\n    });\r\n    this.setState({ isDateVar: !isDateVar });\r\n  }\r\n\r\n  render() {\r\n    const { columnsOptions, changeHandler, isFirst } = this.props;\r\n    const { condition_type, column, operator, value, or, not, values, type,\r\n      first_column, second_column } = this.props.item;\r\n    const { isDateVar } = this.state;\r\n\r\n    return <div className=\"form-segment\">\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Condition Type\r\n            <select required name=\"condition_type\"\r\n              value={condition_type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {conditionTypeOptions.map(type =>\r\n                <option key={type} value={type} disabled={isFirst && type === 'or_where'}>\r\n                  {type}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        {condition_type && condition_type !== \"where_column\" && <div className=\"form-group form-group_width30\">\r\n          <label>Field\r\n            <select required name=\"column\"\r\n              value={column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>}\r\n\r\n        {['where', 'or_where', 'where_column'].includes(condition_type) &&\r\n          <div className=\"form-group form-group_width30\">\r\n            <label>Operator\r\n              <select required name=\"operator\"\r\n                value={operator}\r\n                onChange={changeHandler}\r\n                className=\"form-control\"\r\n              >\r\n                <option value=\"\" disabled />\r\n                <option value=\"=\">Equals</option>\r\n                <option value=\"!=\">Not Equals</option>\r\n                <option value=\"like\">Like</option>\r\n                <option value=\">\">&gt;</option>\r\n                <option value=\">=\">&gt;=</option>\r\n                <option value=\"<\">&lt;</option>\r\n                <option value=\"<=\">&lt;=</option>\r\n              </select>\r\n            </label>\r\n          </div>}\r\n\r\n        {['where_between', 'where_in', 'where_column'].includes(condition_type) && <>\r\n          {!isFirst && <div className=\"form-group form-group_checkbox form-group_width15\">\r\n            <label className=\"label_checkbox\">\r\n              <input type=\"checkbox\" name=\"or\"\r\n                className=\"form-check-input\"\r\n                checked={or}\r\n                onChange={changeHandler}\r\n              /> Or\r\n            </label>\r\n          </div>}\r\n\r\n          {condition_type !== 'where_column' && <div className=\"form-group form-group_checkbox form-group_width15\">\r\n            <label className=\"label_checkbox\">\r\n              <input type=\"checkbox\" name=\"not\"\r\n                className=\"form-check-input\"\r\n                checked={not}\r\n                onChange={changeHandler}\r\n              /> Not\r\n            </label>\r\n          </div>}\r\n        </>}\r\n\r\n        {condition_type === \"where_date\" && <div className=\"form-group form-group_width30\">\r\n          <label>Type\r\n            <select id=\"type\" required name=\"type\"\r\n              value={type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {dateTypesOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>{label}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>}\r\n      </div>\r\n\r\n      {['where', 'or_where'].includes(condition_type) &&\r\n        <div className=\"form-group\">\r\n          <label>Value\r\n            <input type=\"text\" required name=\"value\"\r\n              value={value}\r\n              onChange={changeHandler}\r\n              className=\"form-control\" />\r\n          </label>\r\n        </div>}\r\n\r\n      {['where_between'].includes(condition_type) &&\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value 1\r\n              <input type=\"text\" required name=\"value1\"\r\n                value={values[0] || ''}\r\n                onChange={changeHandler}\r\n                className=\"form-control\" />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value 2\r\n              <input type=\"text\" required name=\"value2\"\r\n                value={values[1] || ''}\r\n                onChange={changeHandler}\r\n                className=\"form-control\" />\r\n            </label>\r\n          </div>\r\n        </div>}\r\n\r\n      {condition_type === \"where_in\" && <>\r\n        <div className=\"form-group\">\r\n          <label>Values\r\n            <textarea required name=\"values\"\r\n              value={values.join(\", \")}\r\n              onChange={changeHandler}\r\n              className=\"form-control\" />\r\n          </label>\r\n        </div>\r\n        <p>Comma Separated</p>\r\n      </>}\r\n\r\n      {condition_type === \"where_date\" && <div className=\"row\">\r\n        <div className=\"form-group col-6\">\r\n          <label>Operator\r\n              <select required name=\"operator\"\r\n              value={operator}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" disabled />\r\n              <option value=\"=\">Equals</option>\r\n              <option value=\"!=\">Not Equals</option>\r\n              <option value=\">\">&gt;</option>\r\n              <option value=\">=\">&gt;=</option>\r\n              <option value=\"<\">&lt;</option>\r\n              <option value=\"<=\">&lt;=</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className={`form-group col-6 ${[\"day\", \"month\"].includes(type) ? \"hide-blocks\" : \"\"}`}>\r\n          <label className=\"w-auto mb-0\">Value</label>\r\n          <label className=\"label_checkbox float-right w-auto\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isDateVar}\r\n              onChange={this.dateValueFormatChange}\r\n            /> Set Variable\r\n            </label>\r\n          {isDateVar ?\r\n            <input type=\"text\" required name=\"value\"\r\n              value={value}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            /> :\r\n            <DatePicker selected={moment(value, getMomentFormat(type))._d}\r\n              showTimeSelect={[\"datetime\", \"time\"].includes(type)}\r\n              showYearPicker={type === \"year\"}\r\n              showTimeSelectOnly={type === \"time\"}\r\n              showMonthYearPicker={type === \"month\"}\r\n              dateFormat={getDatePickerFormat(type)}\r\n              className=\"form-control\"\r\n              onChange={value => changeHandler({\r\n                target: {\r\n                  value: moment(value).format(getMomentFormat(type)),\r\n                  name: \"value\"\r\n                }\r\n              })}\r\n            />}\r\n        </div>\r\n      </div>}\r\n\r\n      {condition_type === \"where_column\" && <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>First Field\r\n            <select required name=\"first_column\"\r\n\r\n              value={first_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Second Field\r\n            <select required name=\"second_column\"\r\n              value={second_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default ConditionComponent;","import React, { Component } from \"react\";\r\n\r\nclass OrderByComponent extends Component {\r\n  render() {\r\n    const { type, column } = this.props.item;\r\n    const { columnsOptions, changeHandler } = this.props;\r\n\r\n    return <div className=\"form-segment form-group__inline-wrapper\">\r\n      <div className=\"form-group form-group_width47\">\r\n        <label>Field\r\n          <select required name=\"column\"\r\n            value={column}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {columnsOptions.map(({ value, label }) =>\r\n              <option key={value} value={label}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group form-group_width47\">\r\n        <label>Type\r\n          <select required name=\"type\"\r\n            value={type}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            {/*<option disabled value=\"\" />*/}\r\n            <option value=\"asc\">Asc</option>\r\n            <option value=\"desc\">Desc</option>\r\n          </select>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default OrderByComponent;","import React, { Component, Fragment } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { titleToName } from \"../../js/helpers\";\r\nimport AggregateComponent from \"./AggregateComponent\";\r\nimport JoinComponent from \"./JoinComponent\";\r\nimport ConditionComponent from \"./ConditionComponent\";\r\nimport OrderByComponent from \"./OrderByComponent\";\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\nimport { getMomentFormat } from \"./helpers\";\r\n\r\nclass SQLBuilderForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { modelId, id } = this.props.match.params;\r\n    this.state = {\r\n      value: {\r\n        title: \"\",\r\n        name: \"\",\r\n        columns: [],\r\n        aggregates: [],\r\n        joins: [],\r\n        conditions: [],\r\n        relations: [],\r\n        order_by: [],\r\n        access: { roles: [], permissions: [] },\r\n        group_by: [],\r\n        // offset: 'REQUEST:pageSize * (REQUEST:page - 1)',\r\n        // limit: 'REQUEST:pageSize'\r\n      },\r\n      relationsOptions: [],\r\n      rolesOptions: [],\r\n      permissionsOptions: [],\r\n      tablesOptions: [],\r\n      selfFields: [],\r\n      selfFieldsOptions: [],\r\n      isAggregateRaw: false\r\n      // isOffsetDisable: true,\r\n      // isLimitDisable: true\r\n    };\r\n    this.counter = 0;\r\n    this.rolesOptions = new Resource({ route: '/admin/ajax/role_options' });\r\n    this.permissionsOptions = new Resource({ route: '/admin/ajax/permissions_options' });\r\n    this.tablesOptions = new Resource({ route: '/admin/ajax/tables_options' });\r\n    this.selfFieldsResource = new Resource({ route: `/admin/ajax/models/${modelId}/fields` });\r\n    this.relationsResource = new Resource({ route: `/admin/ajax/models/${modelId}/relations` });\r\n    this.sqlResource = new Resource({ route: `/admin/ajax/models/${modelId}/queries` });\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.multipleSelectChangeHandler = this.multipleSelectChangeHandler.bind(this);\r\n    this.aggregateChangeHandler = this.aggregateChangeHandler.bind(this);\r\n    this.aggregateAddHandler = this.aggregateAddHandler.bind(this);\r\n    this.aggregateDeleteHandler = this.aggregateDeleteHandler.bind(this);\r\n    this.joinChangeHandler = this.joinChangeHandler.bind(this);\r\n    this.joinAddHandler = this.joinAddHandler.bind(this);\r\n    this.joinDeleteHandler = this.joinDeleteHandler.bind(this);\r\n    this.conditionChangeHandler = this.conditionChangeHandler.bind(this);\r\n    this.orderByChangeHandler = this.orderByChangeHandler.bind(this);\r\n    this.orderByAddHandler = this.orderByAddHandler.bind(this);\r\n    this.orderByDeleteHandler = this.orderByDeleteHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n  }\r\n\r\n  /**\r\n   * запросы опций для селектов\r\n   *\r\n   */\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params\r\n    if (id) {\r\n      const value = await this.sqlResource.get(id);\r\n      this.setState(state => ({ ...state, value }));\r\n    }\r\n    const rolesOptions = await this.rolesOptions.getAll();\r\n    this.setState(state => ({ ...state, rolesOptions }));\r\n    const permissionsOptions = await this.permissionsOptions.getAll();\r\n    this.setState(state => ({ ...state, permissionsOptions }));\r\n    const tablesOptions = await this.tablesOptions.getAll();\r\n    this.setState(state => ({ ...state, tablesOptions }));\r\n    const selfFields = await this.selfFieldsResource.getAll();\r\n    let selfFieldsOptions = selfFields.map(field => {\r\n      return {\r\n        label: field.title,\r\n        value: field.name,\r\n      };\r\n    });\r\n    this.setState(state => ({ ...state, selfFields, selfFieldsOptions }));\r\n    const relations = await this.relationsResource.getAll();\r\n    let relationsOptions = relations.map(relation => {\r\n      return {\r\n        label: relation.title,\r\n        value: relation.name,\r\n      };\r\n    });\r\n    this.setState(state => ({ ...state, relationsOptions }));\r\n  }\r\n\r\n  /**\r\n   * Добавляет поля из добавленных связей\r\n   * @return {Promise<void>}\r\n   */\r\n  async addForeignFields() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Смена группировки\r\n   */\r\n  changeGroupBy = (group_by) => {\r\n    let _group_by = [];\r\n    if (group_by) group_by.forEach(r => {\r\n      _group_by.push(r.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.group_by = _group_by;\r\n      return newState;\r\n    });\r\n  };\r\n  /**\r\n   * Смена колонок\r\n   */\r\n  changeColumns = (columns) => {\r\n    let _columns = [];\r\n    if (columns) columns.forEach(c => {\r\n      _columns.push(c.value)\r\n    });\r\n    this.setState(state => ({ ...state, value: { ...state.value, columns: _columns } }));\r\n  };\r\n  /**\r\n   * Смена связей\r\n   */\r\n  changeRelations = (relations) => {\r\n    let _relations = [];\r\n    if (relations) relations.forEach(r => {\r\n      _relations.push(r.value)\r\n    });\r\n    this.setState(state => ({ ...state, value: { ...state.value, relations: _relations } }));\r\n  };\r\n  /**\r\n   * Смена ролей\r\n   */\r\n  changeRoles = (roles) => {\r\n    let _roles = [];\r\n    if (roles) roles.forEach(r => {\r\n      _roles.push(r.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.access.roles = _roles;\r\n      return newState;\r\n    });\r\n  };\r\n  /**\r\n   * Смена разрешений\r\n   */\r\n  changePermission = (permissions) => {\r\n    let _permissions = [];\r\n    if (permissions) permissions.forEach(p => {\r\n      _permissions.push(p.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.access.permissions = _permissions;\r\n      return newState;\r\n    });\r\n  };\r\n\r\n  valueChangeHandler = ({ target: { value, name } }) => {\r\n    this.setState(state => ({ ...state, value: { ...state.value, [name]: value } }));\r\n  }\r\n\r\n  // обработчик изменения поля title, изменяющий значение поля name\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state,\r\n      value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  // обработчики событий для массива aggregates\r\n  aggregateChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates[index] = { ...state.value.aggregates[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateAddHandler() {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates.push({ type: '', column: '', alias: ''/* , id: this.counter */ });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateToggle = () => {\r\n    this.setState(state => ({\r\n      isAggregateRaw: !state.isAggregateRaw,\r\n      value: {\r\n        ...state.value,\r\n        aggregates: state.isAggregateRaw ? [{ type: '', column: '', alias: '' }] : ''\r\n      }\r\n    }));\r\n  }\r\n\r\n  // обработчики событий для массива joins\r\n  joinChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins[index] = { ...state.value.joins[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  joinAddHandler() {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins.push({\r\n        type: '', target_table: '', source_column: '', operator: '', target_column: ''\r\n      });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  joinDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  // обработчики событий для массива conditions\r\n  conditionAddHandler = () => {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      conditions.push({ condition_type: '' });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  conditionChangeHandler({ target: { value, name, checked } }, index) {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      let condition;\r\n      if (name === 'condition_type') {\r\n        switch (value) {\r\n          case 'where':\r\n          case 'or_where':\r\n            condition = { condition_type: value, column: '', operator: '', value: '' };\r\n            break;\r\n          case 'where_between':\r\n          case 'where_in':\r\n            condition = index === 0 ?\r\n              { condition_type: value, not: false, column: '', values: [] } :\r\n              { condition_type: value, or: false, not: false, column: '', values: [] };\r\n            break;\r\n          case 'where_date':\r\n            condition = { condition_type: value, type: 'year', column: '', value: '2020' };\r\n            break;\r\n          case 'where_column':\r\n            condition = index === 0 ?\r\n              { condition_type: value, first_column: '', operator: '', second_column: '' } :\r\n              { condition_type: value, or: false, first_column: '', operator: '', second_column: '' };\r\n            break;\r\n\r\n          default:\r\n            throw new Error('invalid condition type');\r\n        }\r\n      } else {\r\n        switch (name) {\r\n          case 'value1':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              values: [value, state.value.conditions[index].values[1]]\r\n            };\r\n            break;\r\n          case 'value2':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              values: [state.value.conditions[index].values[0], value]\r\n            };\r\n            break;\r\n          case 'values':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: value.split(',').map(item => item.trim())\r\n            };\r\n            break;\r\n          case 'type':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              type: value,\r\n              value: moment(new Date()).format(getMomentFormat(value))\r\n            };\r\n            break;\r\n          case 'operator':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: value\r\n            };\r\n            condition.condition_type === 'where_column' ?\r\n              condition.second_column = condition.second_column || '' :\r\n              condition.value = condition.value || ''\r\n            break;\r\n\r\n          default:\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: ['or', 'not'].includes(name) ? checked : value\r\n            };\r\n            break;\r\n        }\r\n\r\n      }\r\n      conditions[index] = condition;\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  conditionDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      conditions.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  // обработчики событий для массива orderBy\r\n  orderByChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by[index] = { ...state.value.order_by[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    });\r\n  }\r\n\r\n  orderByAddHandler() {\r\n    // this.counter++;\r\n\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by.push({ type: 'asc', column: ''/* , id: this.counter */ });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    });\r\n  }\r\n\r\n  orderByDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    })\r\n  }\r\n\r\n  // обработчик изменения для multiple-селектов\r\n  multipleSelectChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      const array = [...state[name]];\r\n\r\n      if (array.includes(value)) {\r\n        const index = array.indexOf(value);\r\n        array.splice(index, 1);\r\n      } else {\r\n        array.push(value);\r\n      }\r\n\r\n      return { ...state, [name]: array };\r\n    })\r\n  }\r\n\r\n  offsetDeleteHandler = () => {\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      delete newState.value.offset;\r\n      return newState;\r\n    })\r\n  }\r\n\r\n  limitDeleteHandler = () => {\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      delete newState.value.offset;\r\n      delete newState.value.limit;\r\n      return newState;\r\n    })\r\n  }\r\n\r\n  submitHandler(e) {\r\n    const { modelId, id } = this.props.match.params;\r\n    e.preventDefault();\r\n\r\n    (id ?\r\n      this.sqlResource.put(id, this.state.value) :\r\n      this.sqlResource.post(this.state.value))\r\n      .then(() => this.props.history.push(`/admin/tables/models/edit/${modelId}`));\r\n  }\r\n\r\n  /**\r\n   * сохранить связи\r\n   */\r\n  setRelations = (relations) => {\r\n    let _relations = [];\r\n    relations.forEach(r => {\r\n      _relations.push(r.value);\r\n    });\r\n    this.setState(state => ({ ...state, relations: _relations }))\r\n  };\r\n  /**\r\n   * сохранить колонки\r\n   */\r\n  setColumns = (columns) => {\r\n    let _columns = [];\r\n    columns.forEach(c => {\r\n      _columns.push(c.value)\r\n    });\r\n    this.setState(state => ({ ...state, columns: _columns }))\r\n  };\r\n\r\n  render() {\r\n    const { title, name, relations, columns, aggregates, joins, conditions, order_by, group_by, offset, limit } = this.state.value;\r\n    const { roles, permissions } = this.state.value.access;\r\n    const { selfFieldsOptions, permissionsOptions, relationsOptions, rolesOptions, tablesOptions, isAggregateRaw /* isOffsetDisable, isLimitDisable  */ } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"row\">\r\n        <div className=\"form-group  col-6\">\r\n          <label htmlFor=\"title\">Title</label>\r\n          <input type=\"text\" id=\"title\" required name=\"title\"\r\n            value={title}\r\n            onChange={this.titleChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6 \">\r\n          <label htmlFor=\"name\">Name</label>\r\n          <input type=\"text\" id=\"name\" required name=\"name\"\r\n            value={name}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6\">\r\n          <label htmlFor=\"relations\">With</label>\r\n          <AltrpSelect\r\n            closeMenuOnSelect={false}\r\n            onChange={this.changeRelations}\r\n            value={_.filter(relationsOptions, r => relations.indexOf(r.value) >= 0)}\r\n            options={relationsOptions}\r\n            isMulti={true} />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6\">\r\n          <label htmlFor=\"columns\">Fields</label>\r\n\r\n          <AltrpSelect\r\n            closeMenuOnSelect={false}\r\n            onChange={this.changeColumns}\r\n            value={_.filter(selfFieldsOptions, c => columns.indexOf(c.value) >= 0)}\r\n            options={selfFieldsOptions}\r\n            isMulti={true} />\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Access</h2>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"roles\">Roles</label>\r\n\r\n          <AltrpSelect id=\"roles\"\r\n            closeMenuOnSelect={false}\r\n            value={_.filter(rolesOptions, r => roles.indexOf(r.value) >= 0)}\r\n            isMulti={true}\r\n            onChange={this.changeRoles}\r\n            options={rolesOptions} />\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"permissions\">Permissions</label>\r\n          <AltrpSelect id=\"roles\"\r\n            value={_.filter(permissionsOptions, p => permissions.indexOf(p.value) >= 0)}\r\n            closeMenuOnSelect={false}\r\n            isMulti={true}\r\n            onChange={this.changePermission}\r\n            options={permissionsOptions} />\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Joins</h2>\r\n      {joins.map((item, index) => <Fragment key={index}>\r\n        {index !== 0 && <hr />}\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.joinDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        <JoinComponent item={item}\r\n          tablesOptions={tablesOptions}\r\n          sourceColumnOptions={selfFieldsOptions}\r\n          changeHandler={e => this.joinChangeHandler(e, index)}\r\n        />\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.joinAddHandler}>\r\n          + New Join\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Aggregates</h2>\r\n\r\n      {(!!aggregates.length || isAggregateRaw) &&\r\n        <div className=\"text-center\">\r\n          <button className={`btn ${isAggregateRaw ? 'btn_success' : ''}`} type=\"button\" onClick={this.aggregateToggle}>\r\n            Aggregate Raw\r\n          </button>\r\n        </div>}\r\n\r\n      {isAggregateRaw ?\r\n        <div className=\"form-group\">\r\n          <input type=\"text\" id=\"aggregates\" required name=\"aggregates\"\r\n            value={aggregates}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div> :\r\n        aggregates.map((item, index) => <Fragment key={index}>\r\n          {index !== 0 && <hr />}\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.aggregateDeleteHandler(index)}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <AggregateComponent item={item}\r\n            columnsOptions={selfFieldsOptions}\r\n            changeHandler={e => this.aggregateChangeHandler(e, index)}\r\n          />\r\n        </Fragment>)}\r\n\r\n      {!isAggregateRaw && <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.aggregateAddHandler}>\r\n          + New Aggregate\r\n        </button>\r\n      </div>}\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Conditions</h2>\r\n\r\n      {conditions.map((condition, index) => <Fragment key={index}>\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.conditionDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        {index !== 0 && <hr />}\r\n        <ConditionComponent\r\n          item={condition}\r\n          isFirst={index === 0}\r\n          columnsOptions={selfFieldsOptions}\r\n          changeHandler={e => this.conditionChangeHandler(e, index)}\r\n        />\r\n\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.conditionAddHandler}>\r\n          + New Condition\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Order By</h2>\r\n\r\n      {order_by.map((item, index) => <Fragment key={index}>\r\n        {index !== 0 && <hr />}\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.orderByDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        <OrderByComponent\r\n          item={item}\r\n          columnsOptions={selfFieldsOptions}\r\n          changeHandler={e => this.orderByChangeHandler(e, index)}\r\n        />\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.orderByAddHandler}>\r\n          + New Order\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Group By</h2>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"group_by\">Fields</label>\r\n\r\n        <AltrpSelect\r\n          id=\"group_by\"\r\n          closeMenuOnSelect={false}\r\n          onChange={this.changeGroupBy}\r\n          value={_.filter(selfFieldsOptions, f => group_by.indexOf(f.value) >= 0)}\r\n          options={selfFieldsOptions}\r\n          isMulti={true} />\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Pagination Settings</h2>\r\n\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\"\r\n          onClick={() => this.setState({ value: { ...this.state.value, limit: 'REQUEST:pageSize' } })}\r\n        >\r\n          Add Limit\r\n        </button>\r\n      </div>\r\n\r\n      {limit && <div className=\"centred mt-3\">\r\n        <button className=\"btn btn_success\" type=\"button\"\r\n          onClick={() => this.setState({ value: { ...this.state.value, offset: 'REQUEST:pageSize * (REQUEST:page - 1)' } })}\r\n        >\r\n          Add Offset\r\n        </button>\r\n      </div>}\r\n\r\n      <div className=\"row\">\r\n        {offset && <div className=\"form-group  col-6\">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={this.offsetDeleteHandler}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <label htmlFor=\"offset\">Offset</label>\r\n          {/* <label className=\"label_checkbox float-right\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isOffsetDisable}\r\n              onChange={() => this.setState({ isOffsetDisable: !isOffsetDisable })}\r\n            /> Blocked\r\n          </label> */}\r\n          <input type=\"text\" id=\"offset\" required name=\"offset\"\r\n            value={offset}\r\n            // disabled={isOffsetDisable}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>}\r\n\r\n        {limit && <div className=\"form-group col-6 \">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={this.limitDeleteHandler}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <label htmlFor=\"limit\">Limit</label>\r\n          {/* <label className=\"label_checkbox float-right\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isLimitDisable}\r\n              onChange={() => this.setState({ isLimitDisable: !isLimitDisable })}\r\n            /> Blocked\r\n          </label> */}\r\n          <input type=\"text\" id=\"limit\" required name=\"limit\"\r\n            value={limit}\r\n            // disabled={isLimitDisable}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>}\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper btn_add centred\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Save</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(SQLBuilderForm);\r\n","import React, { Component } from \"react\";\r\nimport SQLBuilderForm from \"./sql-builder/SQLBuilderForm\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass SQLBuilder extends Component {\r\n  render() {\r\n    return <div className=\"admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">SQL</a>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <SQLBuilderForm />\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default withRouter(SQLBuilder);","import React, {Component} from \"react\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {titleToName} from \"../../js/helpers\";\r\nimport store from '../../js/store/store';\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n\r\nclass SqlEditor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let storeState = store.getState();\r\n    this.state = {\r\n      modelTitle: 'Model Title',\r\n      value: {\r\n        paged: false,\r\n        is_object: false,\r\n        auth: false,\r\n      },\r\n      modelsOptions: [],\r\n      AceEditor: storeState.aceEditorReducer.AceEditor\r\n    };\r\n    this.sqlEditorResource = new Resource({route: `/admin/ajax/sql_editors`});\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/model_options' });\r\n\r\n    store.subscribe(this.aceEditorObserver);\r\n  }\r\n\r\n  /**\r\n   * AceEditor загрузился\r\n   */\r\n  aceEditorObserver = () => {\r\n    let storeState = store.getState();\r\n    this.setState(state=>({\r\n        ...state,\r\n      AceEditor: storeState.aceEditorReducer.AceEditor\r\n    }))\r\n  };\r\n  /**\r\n   * Компонент загрузился\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount() {\r\n    const {id} = this.props.match.params;\r\n    let { options } = await this.modelsResource.getAll();\r\n    options = options.filter(option=>(option.label !== 'User'));\r\n    this.setState({ modelsOptions: options });\r\n    if(id){\r\n      let value = await this.sqlEditorResource.get(id);\r\n      this.editor = null;\r\n      this.setState(state=>({\r\n          ...state,\r\n        value,\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Имзенить поле\r\n   * @param {*} value\r\n   * @param {string} field\r\n   */\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      if(field === 'name'){\r\n        state.value[field] = titleToName(value);\r\n      }else{\r\n        state.value[field] = value;\r\n      }\r\n      if(field === 'title') {\r\n        state.value.name = titleToName(value);\r\n      }\r\n      return state\r\n    })\r\n  }\r\n  /**\r\n   * отправка данных\r\n   * @return {*}\r\n   */\r\n  onSubmit = async e => {\r\n    const {id} = this.props.match.params;\r\n    e.preventDefault();\r\n    let res;\r\n    if(! this.state.value.sql){\r\n      return alert('Заполните SQL Query');\r\n    }\r\n    if(id){\r\n      res = await this.sqlEditorResource.put(id, this.state.value);\r\n    } else {\r\n      res = await this.sqlEditorResource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.props.history.push('/admin/tables/sql_editors');\r\n    } else {\r\n      alert(res.message);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {id} = this.props.match.params;\r\n    console.log(this.state.value.sql);\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/sql_editors\">All  SQL Editors</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n\r\n          <span className=\"admin-breadcrumbs__current\">Add SQL Query</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <form className=\"admin-form field-form\" onSubmit={this.onSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"form-group col-6\">\r\n              <label htmlFor=\"field-title\">Title</label>\r\n              <input type=\"text\" id=\"field-title\" required\r\n                     value={this.state.value.title || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'title')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group col-6\">\r\n              <label htmlFor=\"field-name\">Name</label>\r\n              <input type=\"text\" id=\"field-name\" required readOnly={id}\r\n                     value={this.state.value.name || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'name')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"field-name\">Description</label>\r\n              <input type=\"text\" id=\"field-description\"\r\n                     value={this.state.value.description || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'description')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            {/*<div className=\"form-group col-12\">*/}\r\n              {/*<input type=\"checkbox\" id=\"relation-paged\"*/}\r\n                     {/*checked={this.state.value.paged}*/}\r\n                     {/*onChange={e => { this.changeValue(e.target.checked, 'paged') }}*/}\r\n              {/*/>*/}\r\n              {/*<label className=\"checkbox-label\" htmlFor=\"relation-paged\">Paged</label>*/}\r\n            {/*</div>*/}\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"relation-model_id\">Model</label>\r\n              <select id=\"relation-model_id\" required disabled={id}\r\n                      value={this.state.value.model_id || ''}\r\n                      onChange={e => { this.changeValue(e.target.value, 'model_id') }}\r\n                      className=\"form-control\"\r\n              >\r\n                <option disabled value=\"\" />\r\n                {this.state.modelsOptions.map(({ value, label }) =>\r\n                    <option key={value} value={value}>\r\n                      {label}\r\n                    </option>)}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <input type=\"checkbox\" id=\"field-auth\"\r\n                     checked={this.state.value.auth} value={this.state.value.auth}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'auth') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-auth\">Auth</label>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <input type=\"checkbox\" id=\"field-is_object\"\r\n                     checked={this.state.value.is_object} value={this.state.value.is_object}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'is_object') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_object\">As Object</label>\r\n            </div>\r\n            {!this.state.value.auth ? '' : <><div className=\"form-group col-4\">\r\n              <label htmlFor=\"field-roles\">Roles</label>\r\n              <AltrpSelect id=\"field-roles\"\r\n                           isMulti={true}\r\n                           optionsRoute=\"/admin/ajax/role_options\"\r\n                           placeholder=\"All\"\r\n                           defaultOptions={[\r\n                             {\r\n                               value: null,\r\n                               label: 'All',\r\n                             }\r\n                           ]}\r\n                           value={this.state.value.roles}\r\n                           onChange={value => {this.changeValue(value, 'roles')}}\r\n              />\r\n            </div>\r\n            <div className=\"form-group col-4\">\r\n              <label htmlFor=\"field-permissions\">Permissions</label>\r\n              <AltrpSelect id=\"field-permissions\"\r\n                           isMulti={true}\r\n                           optionsRoute=\"/admin/ajax/permissions_options\"\r\n                           placeholder=\"All\"\r\n                           defaultOptions={[\r\n                             {\r\n                               value: null,\r\n                               label: 'All',\r\n                             }\r\n                           ]}\r\n                           value={this.state.value.permissions}\r\n                           onChange={value => {this.changeValue(value, 'permissions')}}\r\n              />\r\n            </div></>}\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"field-name\">SQL Query</label>\r\n              {this.state.AceEditor && (this.editor = (this.editor || <this.state.AceEditor\r\n                  mode=\"sql\"\r\n                  theme=\"textmate\"\r\n                  onChange={value => {\r\n                    this.changeValue(value, 'sql')\r\n                  }}\r\n                  className=\"field-ace\"\r\n                  name=\"aceEditor\"\r\n                  height=\"15em\"\r\n                  setOptions={{\r\n                    value: this.state.value.sql || ''\r\n                  }}\r\n                  showPrintMargin={false}\r\n                  style={{\r\n                    width: '100%'\r\n                  }}\r\n                  enableLiveAutocompletion={true} />))}\r\n            </div>\r\n          </div>\r\n          <div className=\"btn__wrapper btn_add\">\r\n            <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n            <Link className=\"btn\" to={`/admin/tables/sql_editors`}>Cancel</Link>\r\n            {/* TODO: отображать кнопку если в форме редактируются данные\r\n          повесить обработчик удаления\r\n        <button className=\"btn btn_failure\">Delete</button> */}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(SqlEditor);\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport { Link, withRouter } from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'name',\r\n    title: 'Name',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'display_name',\r\n    title: 'Display Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  }\r\n];\r\n\r\nconst rolesResource = new Resource({ route: '/admin/ajax/roles' });\r\nconst permissionsResource = new Resource({ route: '/admin/ajax/permissions' });\r\n\r\nclass AccessOptions extends Component {\r\n  state = {\r\n    roles: [],\r\n    permissions: [],\r\n  };\r\n  /**\r\n   * Список ролей\r\n   */\r\n  getRoles = async () => {\r\n    const roles = await rolesResource.getAll();\r\n    this.setState({ roles });\r\n  }\r\n  /**\r\n   * Список permissions\r\n   */\r\n  getPermissions = async () => {\r\n    const permissions = await permissionsResource.getAll();\r\n    this.setState({ permissions });\r\n  }\r\n\r\n  // slicePage = (array, page, itemsPerPage) => {\r\n  //   return array.slice(page * itemsPerPage - itemsPerPage, page * itemsPerPage);\r\n  // }\r\n\r\n  componentDidMount() {\r\n    this.getRoles();\r\n    this.getPermissions();\r\n  }\r\n\r\n  render() {\r\n    const { roles, permissions } = this.state;\r\n    const activeTab = this.props.location.pathname === \"/admin/access/roles\" ? 0 : 1;\r\n\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Access</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {activeTab === 0 ? 'All Roles' : 'All Permissions'}\r\n          </span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/access/${activeTab === 0 ? 'roles' : 'permissions'}/add`}>\r\n          Add New\r\n        </Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={activeTab} onSelect={() => {}}>\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Link to=\"/admin/access/roles\"><Tab>Roles</Tab></Link>\r\n            <Link to=\"/admin/access/permissions\"><Tab>Permissions</Tab></Link>\r\n          </TabList>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columns}\r\n              quickActions={[\r\n                {\r\n                  tag: 'Link',\r\n                  props: { href: '/admin/access/roles/edit/:id' },\r\n                  title: 'Edit'\r\n                },\r\n                {\r\n                  tag: 'button',\r\n                  route: '/admin/ajax/roles/:id',\r\n                  method: 'delete',\r\n                  confirm: 'Are You Sure?',\r\n                  after: () => this.getRoles(),\r\n                  className: 'quick-action-menu__item_danger',\r\n                  title: 'Trash'\r\n                }\r\n              ]}\r\n              rows={roles.map(role => ({\r\n                ...role,\r\n                editUrl: '/admin/access/roles/edit/' + role.id\r\n              }))}\r\n            />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columns}\r\n              quickActions={[\r\n                {\r\n                  tag: 'Link',\r\n                  props: { href: '/admin/access/permissions/edit/:id' },\r\n                  title: 'Edit'\r\n                },\r\n                {\r\n                  tag: 'button',\r\n                  route: '/admin/ajax/permissions/:id',\r\n                  method: 'delete',\r\n                  confirm: 'Are You Sure?',\r\n                  after: () => this.getPermissions(),\r\n                  className: 'quick-action-menu__item_danger',\r\n                  title: 'Trash'\r\n                }\r\n              ]}\r\n              rows={permissions.map(permission => ({\r\n                ...permission,\r\n                editUrl: '/admin/access/permissions/edit/' + permission.id\r\n              }))}\r\n            />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default withRouter(AccessOptions);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst rolesResource = new Resource({ route: '/admin/ajax/roles' });\r\n\r\nclass RoleForm extends Component {\r\n  state = {\r\n    name: '',\r\n    display_name: '',\r\n    description: ''\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    if (id) {\r\n      const { name, display_name, description } = await rolesResource.get(id);\r\n      this.setState({ name, display_name, description });\r\n    }\r\n  }\r\n\r\n  changeHandler = ({ target: { value, name } }) => {\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  deleteHandler = () => {\r\n    const { id } = this.props.match.params;\r\n    rolesResource.delete(id)\r\n      .then(() => this.props.history.push('/admin/access/roles'));\r\n  }\r\n\r\n  submitHandler = e => {\r\n    const { id } = this.props.match.params;\r\n    e.preventDefault();\r\n    (id ? rolesResource.put(id, this.state) : rolesResource.post(this.state))\r\n      .then(() => this.props.history.push('/admin/access/roles'));\r\n  }\r\n\r\n  render() {\r\n    const { name, display_name, description } = this.state;\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"name\">Name</label>\r\n        <input type=\"text\" id=\"name\" required name=\"name\"\r\n          value={name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"display_name\">Display Name</label>\r\n        <input type=\"text\" id=\"display_name\" name=\"display_name\"\r\n          value={display_name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input type=\"text\" id=\"description\" required name=\"description\"\r\n          value={description}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link to=\"/admin/access/roles\"><button className=\"btn\">Cancel</button></Link>\r\n        {isEditing && <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>\r\n          Delete\r\n        </button>}\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(RoleForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport RoleForm from \"./RoleForm\";\r\n\r\nclass RolePage extends Component {\r\n  render() {\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/access\">Access / All Roles</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {isEditing ? 'Edit Role' : 'Add New Role'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <RoleForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(RolePage);","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst permissionsResource = new Resource({ route: '/admin/ajax/permissions' });\r\n\r\nclass PermissionForm extends Component {\r\n  state = {\r\n    name: '',\r\n    display_name: '',\r\n    description: ''\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    if (id) {\r\n      const { name, display_name, description } = await permissionsResource.get(id);\r\n      this.setState({ name, display_name, description });\r\n    }\r\n  }\r\n\r\n  changeHandler = ({ target: { value, name } }) => {\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  deleteHandler = () => {\r\n    const { id } = this.props.match.params;\r\n    permissionsResource.delete(id)\r\n      .then(() => this.props.history.push('/admin/access/permissions'));\r\n  }\r\n\r\n  submitHandler = e => {\r\n    const { id } = this.props.match.params;\r\n    e.preventDefault();\r\n    (id ? permissionsResource.put(id, this.state) : permissionsResource.post(this.state))\r\n      .then(() => this.props.history.push('/admin/access/permissions'));\r\n  }\r\n\r\n  render() {\r\n    const { name, display_name, description } = this.state;\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"name\">Name</label>\r\n        <input type=\"text\" id=\"name\" required name=\"name\"\r\n          value={name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"display_name\">Display Name</label>\r\n        <input type=\"text\" id=\"display_name\" name=\"display_name\"\r\n          value={display_name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input type=\"text\" id=\"description\" required name=\"description\"\r\n          value={description}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link to=\"/admin/access/permissions\"><button className=\"btn\">Cancel</button></Link>\r\n        {isEditing && <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>\r\n          Delete\r\n        </button>}\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(PermissionForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport PermissionForm from \"./PermissionForm\";\r\n\r\nclass PermissionPage extends Component {\r\n  render() {\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/access\">Access / All Permissions</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {isEditing ? 'Edit Permission' : 'Add New Permission'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <PermissionForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(PermissionPage);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n//import TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass TableForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: {},\r\n            errors: [],\r\n            redirectAfterSave: false,\r\n        };\r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.saveTable = this.saveTable.bind(this);\r\n    }\r\n    async componentDidMount(){\r\n        let id = this.props.id;\r\n        \r\n        if(id){\r\n            let pageData = await this.resource.get(id);\r\n            this.setState(state=>{\r\n                return{...state, value:pageData, id: id}\r\n            });\r\n        }\r\n    }\r\n    async saveTable(e){\r\n        e.preventDefault();\r\n        let res;\r\n\r\n        if(this.state.id){\r\n            res = await this.resource.put(this.state.id, this.state.value);\r\n        } else {\r\n            res = await this.resource.post(this.state.value);\r\n        }\r\n\r\n        if(res){\r\n            this.setState(state=>{\r\n                return {...state, redirectAfterSave: true}\r\n            });\r\n        } else {\r\n            this.setState(state=>{\r\n                return {...state, value: {}}\r\n            });\r\n        }\r\n    }\r\n    changeValue(value, field){\r\n        this.setState(state=>{\r\n            state = {...state};\r\n            state.value[field] = value;\r\n            return state\r\n        })\r\n    }\r\n    render() {\r\n        if(this.state.redirectAfterSave){\r\n            return <Redirect to={this.props.redirect_url}/>\r\n        }\r\n        return <form className=\"admin-form\" onSubmit={this.saveTable}>\r\n        \r\n            \r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-name\">Name</label>\r\n                <input type=\"text\" id=\"page-name\" required={1}\r\n                    value={this.state.value.name || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'name')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-title\">Title</label>\r\n                <input type=\"text\" id=\"page-title\" required={1}\r\n                    value={this.state.value.title || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'title')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-description\">Description</label>\r\n                <input type=\"text\" id=\"page-description\" required={1}\r\n                    value={this.state.value.description || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'description')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n        </form>;\r\n    }\r\n}\r\n\r\nexport default TableForm;","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddTable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            redirect_url: \"/admin/tables\",\r\n        };\r\n    }\r\n    async componentDidMount(){\r\n        let id = this.props.match.params.id;\r\n        \r\n        this.setState((state) => ({\r\n            table_id: id\r\n        }));\r\n    }\r\n\t\r\n    render() {\r\n        return <div className=\"admin-pages admin-page\">\r\n            <div className=\"admin-heading\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Table</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-content\">\r\n                <TableForm id={this.state.table_id} redirect_url={this.state.redirect_url}/>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(AddTable);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass EditTable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            redirect_url: \"/admin/tables\",\r\n            table_id: this.props.match.params.id,\r\n            setting_url: \"/admin/tables/edit/\"+this.props.match.params.id+\"/setting\"\r\n        };\r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n    }\r\n    render() {\r\n        if(this.state.redirectAfterSave){\r\n            return <Redirect to=\"/admin/tables\"/>\r\n        }\r\n        return <div className=\"admin-pages admin-page\">\r\n            <div className=\"admin-heading\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Edit Table</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-content\">\r\n                <TableForm id={this.state.table_id} redirect_url={this.state.redirect_url}/>\r\n                <div>\r\n                    <Link to={ this.state.setting_url }>Settings</Link>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(EditTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\n\r\nclass MigrationsTable extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            migrations: [],\r\n            table: {},\r\n            table_columns: [\r\n                {name: 'name',title: 'Name',},\r\n                {name: 'status',title: 'Status',},\r\n                {name: 'created_at',title: 'Created At',},\r\n            ],\r\n        };\r\n        \r\n        this.migrations_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        this.table_resource = new Resource({route: '/admin/ajax/tables'});\r\n    }\r\n    async componentDidMount(){\r\n        let res = await this.migrations_resource.getAll();\r\n        this.setState(state=>{\r\n            return{...state, migrations:res}\r\n        });\r\n        \r\n        let table_res = await this.table_resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res}\r\n        });\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n          <AdminTable columns={this.state.table_columns} rows={this.state.migrations}/>\r\n        </div>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(MigrationsTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AddModelPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        /**\r\n         * Типы связей\r\n         */\r\n        this.relationship_types = [\r\n            {id: \"hasMany\",name: \"hasMany\"},\r\n            {id: \"hasOne\",name: \"hasOne\"},\r\n            {id: \"belongsTo\",name: \"belongsTo\"},\r\n            {id: \"belongsToMany\",name: \"belongsToMany\"},\r\n            {id: \"hasOneThrough\",name: \"hasOneThrough\"},\r\n            {id: \"hasManyThrough\",name: \"hasManyThrough\"},\r\n            {id: \"morphTo\",name: \"morphTo\"},\r\n            {id: \"morphOne\",name: \"morphOne\"},\r\n            {id: \"morphMany\",name: \"morphMany\"},\r\n            {id: \"morphToMany\",name: \"morphToMany\"},\r\n            {id: \"morphedByMany\",name: \"morphedByMany\"},\r\n        ];\r\n        \r\n        /**\r\n         * Настройки таблицы связей\r\n         */\r\n        this.table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'type',title: 'Type',},\r\n            {name: 'model_class',title: 'Model Class',},\r\n            {name: 'foreign_key',title: 'Foreign Key',},\r\n            {name: 'local_key',title: 'Local Key',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Связь по умолчанию\r\n         * @type type\r\n         */\r\n        const default_relationship = {\r\n            id: \"\",\r\n            name: '',\r\n            title: '',\r\n            type: \"hasMany\",\r\n            model_class: '',\r\n            foreign_key: '',\r\n            local_key: '',\r\n        };\r\n        \r\n        /**\r\n         * Настройки таблицы формул\r\n         */\r\n        this.accessors_table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'formula',title: 'Formula',},\r\n            {name: 'status',title: 'Status',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addAccessorModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteAccessorClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Формула по умолчанию\r\n         * @type type\r\n         */\r\n        const default_accessor = {\r\n            id: \"\",\r\n            name: '',\r\n            formula: '',\r\n            description: \"\",\r\n        };\r\n        \r\n        this.state = {\r\n            modal_toogle: false,\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            actual_columns: [],\r\n            fillable_columns: [],\r\n            user_cols: [],\r\n            data: {\r\n                description: \"\",\r\n                fillable_cols: [],\r\n                user_cols: [],\r\n                table_id: this.props.match.params.id,\r\n                path: \"\",\r\n                name: \"\",\r\n                relationships: [],\r\n                pk: \"\",\r\n                time_stamps: false,\r\n                soft_deletes: false\r\n            },\r\n            accessors: [],\r\n            default_relationship: default_relationship,\r\n            selected_relationship: null,\r\n            relationship: default_relationship,\r\n            default_accessor: default_accessor,\r\n            selected_accessor: null,\r\n            accessor: default_accessor,\r\n        };\r\n        \r\n        \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/model'});\r\n        this.save_model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models'});\r\n        this.accessors_resource = false;\r\n        \r\n        this.addFillableColumn = this.addFillableColumn.bind(this);\r\n        this.deleteFillableColumn = this.deleteFillableColumn.bind(this);\r\n        this.addUserColsColumn = this.addUserColsColumn.bind(this);\r\n        this.deleteUserColsColumn = this.deleteUserColsColumn.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onChangeRelationship = this.onChangeRelationship.bind(this);\r\n        this.saveModel = this.saveModel.bind(this);\r\n        \r\n        this.addRelationship = this.addRelationship.bind(this);\r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        \r\n        this.addAccessorModalShow = this.addAccessorModalShow.bind(this);\r\n        this.onDeleteAccessorClick = this.onDeleteAccessorClick.bind(this);\r\n        \r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let columns_res = await this.resource.get(this.state.table_id+\"/columns\");\r\n        this.setState(state=>{\r\n            return{...state, actual_columns: columns_res, fillable_columns: columns_res, user_cols: columns_res};\r\n        });\r\n        \r\n        let model_data = await this.resource.get(this.state.table_id+\"/model\");\r\n        \r\n        if(model_data) {\r\n             \r\n            \r\n            \r\n            let model = {\r\n                description: model_data.description,\r\n                fillable_cols: this.setCols(model_data.fillable_cols),\r\n                user_cols: this.setCols(model_data.user_cols),\r\n                table_id: model_data.table_id,\r\n                path: model_data.path !== null ? model_data.path : \"\",\r\n                name: model_data.name,\r\n                relationships: model_data.table.relationships,\r\n                pk: model_data.pk,\r\n                time_stamps: model_data.time_stamps,//1 == model_data.time_stamps ? true : false,\r\n                soft_deletes: model_data.soft_deletes//1 == model_data.soft_deletes ? true : false,\r\n            }\r\n            \r\n            this.accessors_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models/'+model_data.id+\"/accessors\"});\r\n            let accessors_data = await this.accessors_resource.getAll();\r\n\r\n            this.setState(state=>{\r\n                return{...state, data: model, accsessors: accessors_data};\r\n            }, () => {\r\n                \r\n            });\r\n        }\r\n                \r\n        \r\n        \r\n        /*\r\n        let keys_res = await this.resource.get(this.state.table_id+\"/keys\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, keys: keys_res}};\r\n        });*/\r\n    }\r\n    \r\n    setCols(value) {\r\n        \r\n        let cols = [];\r\n        \r\n        if(!value) return cols;\r\n        \r\n        if(value == null || value == \"\") return cols;\r\n        \r\n        \r\n        value.replace(/'/g,\"\");\r\n        return value.split(\",\");\r\n    }\r\n    \r\n    addFillableColumn(e) {\r\n        \r\n        let value = e.target.value;\r\n        \r\n        let itemIndex = this.state.data.fillable_cols.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This column has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  fillable_cols: update(state.data.fillable_cols, {$push: [value]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    deleteFillableColumn(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.data.fillable_cols.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This column not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  fillable_cols: update(state.data.fillable_cols, {$splice: [[itemIndex, 1]]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    \r\n    addUserColsColumn(e) {\r\n        \r\n        let value = e.target.value;\r\n        \r\n        let itemIndex = this.state.data.user_cols.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This column has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  user_cols: update(state.data.user_cols, {$push: [value]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    deleteUserColsColumn(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.data.user_cols.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This column not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  user_cols: update(state.data.user_cols, {$splice: [[itemIndex, 1]]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        this.setState({ ...this.state, data:{...this.state.data, [field_name]: value}});\r\n    }\r\n    onChangeRelationship(e) {\r\n        let field_name = e.target.name;\r\n        this.setState({ ...this.state, relationship:{...this.state.relationship, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    async saveModel(e) {\r\n        e.preventDefault();\r\n        \r\n        if(this.state.data.name == \"\") {\r\n            alert(\"Enter model name!\");\r\n            return;\r\n        }\r\n        \r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        \r\n        let data = {...this.state.data};\r\n        /*data.time_stamps = String(true) == model.time_stamps ? true : false;\r\n        data.soft_deletes = String(true) == model.soft_deletes ? true : false;*/\r\n        data._token = _token;\r\n\r\n\r\n        console.log(this.state.data)\r\n        /*let data = {\r\n            model: model,\r\n            \r\n        };*/\r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.save_model_resource.post(data);\r\n        \r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n    }\r\n    \r\n    addRelationship(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.relationship};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_relationship == null) {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {[state.selected_relationship]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal();\r\n        });\r\n    }\r\n    getModalClasses() {\r\n        let modalClasses = 'admin-modal';\r\n        if (this.state.modal_toogle) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    toggleModal() {\r\n        this.setState((state) => {\r\n            return { ...state, modal_toogle: !state.modal_toogle}\r\n        })\r\n    }\r\n    addModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.relationships.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_relationship: null, relationship: state.default_relationship}\r\n            }\r\n            else {\r\n                return { ...state, selected_relationship: itemIndex, relationship: state.data.relationships[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    onDeleteClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.relationships.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  relationships: update(this.state.data.relationships, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    addAccessorModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.relationships.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_relationship: null, relationship: state.default_relationship}\r\n            }\r\n            else {\r\n                return { ...state, selected_relationship: itemIndex, relationship: state.data.relationships[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    onDeleteAccessorClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.relationships.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  relationships: update(this.state.data.relationships, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <form>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Name\r\n                            <input className='form__input' type=\"text\" name=\"name\" value={this.state.data.name}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Description\r\n                            <input className='form__input' type=\"text\" name=\"description\" value={this.state.data.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Soft Deletes\r\n                            <input className='form__input' type=\"checkbox\" checked={this.state.data.soft_deletes ? 1 : 0} name=\"soft_deletes\" onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Timestamps\r\n                            <input className='form__input' type=\"checkbox\" checked={this.state.data.time_stamps ? 1 : 0}  name=\"time_stamps\" onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Fillable\r\n                            <select className=\"form__input\" name='add_fillable' onChange={(e) => {this.addFillableColumn(e)}}>\r\n                                <option value=\"\"/>\r\n                                {\r\n                                  this.state.fillable_columns.map(option =>\r\n                                      <option key={option.id}\r\n                                              value={option.name}\r\n                                              children={option.title}/>)\r\n                                }\r\n                            </select>\r\n                        </label>\r\n                        <div>\r\n                            {\r\n                                this.state.data.fillable_cols.map(option =>\r\n                                <div key={option}>\r\n                                    <button className=\"btn\" onClick={(e) => {this.deleteFillableColumn(e,option)}}>{option}</button>\r\n                                </div>  )\r\n                                }\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            User Cols\r\n                            <select className=\"form__input\" name='add_user_cols' onChange={(e) => {this.addUserColsColumn(e)}}>\r\n                                <option value=\"\"/>\r\n                                {\r\n                                  this.state.user_cols.map(option =>\r\n                                      <option key={option.id}\r\n                                              value={option.name}\r\n                                              children={option.title}/>)\r\n                                }\r\n                            </select>\r\n                        </label>\r\n                        <div>\r\n                            {\r\n                                this.state.data.user_cols.map(option =>\r\n                                <div key={option}>\r\n                                    <button className=\"btn\" onClick={(e) => {this.deleteUserColsColumn(e,option)}}>{option}</button>\r\n                                </div>  )\r\n                                }\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Path\r\n                            <input className='form__input' type=\"text\" name=\"path\" value={this.state.data.path}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <label className='form-label'>\r\n                        Primary Key\r\n                        <select className=\"form__input\" name='pk'  value={this.state.data.pk} onChange={(e) => {this.onChange(e)}}>\r\n                            <option value=\"\"/>\r\n                            {\r\n                              this.state.actual_columns.map(option =>\r\n                                  <option key={option.id}\r\n                                          value={option.name}\r\n                                          children={option.title || option.name}/>)\r\n                            }\r\n                        </select>\r\n                    </label>\r\n                </form>\r\n            </div>\r\n            <div>\r\n                <AdminTable columns={this.table_columns} rows={this.state.data.relationships}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addModalShow}>Add Relationship</button>\r\n            </div>\r\n            <div>\r\n                <form className=\"admin-form\" onSubmit={this.saveModel}>\r\n                    <button className=\"btn btn_success\">Save</button>\r\n                </form>\r\n            </div>\r\n            <div>\r\n                <hr />\r\n            </div>\r\n            <div>\r\n                <AdminTable columns={this.accessors_table_columns} rows={this.state.accessors}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addAccessorModalShow}>Add Accessor</button>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses()}>\r\n                <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Relationship</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addRelationship}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.relationship.name} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Model Class\r\n                                <input className='form__input' type=\"text\" name=\"model_class\" value={this.state.relationship.model_class}  onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                type\r\n                                <select className=\"form__input\" value={this.state.relationship.type} name='type'  onChange={(e) => {this.onChangeRelationship(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.relationship_types.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                foreign key\r\n                                <input className='form__input' type=\"text\" name=\"foreign_key\"  value={this.state.relationship.foreign_key} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                local key\r\n                                <input className='form__input' type=\"text\" name=\"local_key\" value={this.state.relationship.local_key} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add col</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddModelPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AccessorsPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        /**\r\n         * Настройки таблицы формул\r\n         */\r\n        this.table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'formula',title: 'Formula',},\r\n            {name: 'status',title: 'Status',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Формула по умолчанию\r\n         * @type type\r\n         */\r\n        const default_accessor = {\r\n            id: \"\",\r\n            name: '',\r\n            formula: '',\r\n            description: \"\",\r\n        };\r\n        \r\n        this.state = {\r\n            modal_toogle: false,\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            data: [],\r\n            default_accessor: default_accessor,\r\n            selected_accessor: null,\r\n            accessor: default_accessor,\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/model'});\r\n        this.accessors_resource = false;\r\n        \r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onChange = this.onChange.bind(this);\r\n        \r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        this.addAccessor = this.addAccessor.bind(this);\r\n        \r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let model_data = await this.model_resource.get(\" \");\r\n        \r\n        if(model_data) {\r\n             \r\n            this.accessors_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models/'+model_data.id+\"/accessors\"});\r\n            let accessors_data = await this.accessors_resource.getAll();\r\n\r\n            this.setState(state=>{\r\n                return{...state, model: model_data, data: accessors_data};\r\n            }, () => {\r\n                \r\n            });\r\n        }\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        this.setState({ ...this.state, accessor: {...this.state.accessor, [field_name]: value}});\r\n    }\r\n    \r\n    async addAccessor(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.accessor};\r\n        \r\n        if(obj.name == \"\") {\r\n            alert(\"Enter accessor name!\");\r\n            return;\r\n        }\r\n        \r\n        obj._token = _token;\r\n        \r\n        let res;\r\n        \r\n        if(this.state.selected_accessor == null) {\r\n            res = await this.accessors_resource.post(obj);\r\n        }\r\n        else {\r\n            res = await this.accessors_resource.put(obj.id, obj);\r\n        }\r\n        \r\n        \r\n        if(res){\r\n            \r\n            this.setState((state) => {\r\n                if(state.selected_accessor == null) {\r\n                    return { ...state, data: update(state.data, {$push: [res]})};\r\n                }\r\n                else {\r\n                    return { ...state, data: update(state.data, {[state.selected_accessor]: {$set: res}})};\r\n                }\r\n            }, () => {\r\n                this.toggleModal();\r\n            });\r\n            \r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n        /*\r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_relationship == null) {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {[state.selected_relationship]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal();\r\n        });*/\r\n    }\r\n    \r\n    getModalClasses() {\r\n        let modalClasses = 'admin-modal';\r\n        if (this.state.modal_toogle) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    toggleModal() {\r\n        this.setState((state) => {\r\n            return { ...state, modal_toogle: !state.modal_toogle}\r\n        })\r\n    }\r\n    addModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_accessor: null, accessor: state.default_accessor}\r\n            }\r\n            else {\r\n                return { ...state, selected_accessor: itemIndex, accessor: state.data[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    async onDeleteClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                let res;\r\n                res = await this.accessors_resource.delete(e.id);\r\n                \r\n                if(res) {\r\n                    this.setState((state) => {\r\n                        return { ...state, data: update(this.state.data, {$splice: [[itemIndex, 1]]})};\r\n                    }, () => {\r\n                        alert(\"Success\");\r\n                    });\r\n                }\r\n                else {\r\n                    alert(\"Error\")\r\n                }\r\n            \r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <AdminTable columns={this.table_columns} rows={this.state.data}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addModalShow}>Add Accessor</button>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses()}>\r\n                <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Accessor</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addAccessor}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.accessor.name} onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                description\r\n                                <input className='form__input' type=\"text\" name=\"description\" value={this.state.accessor.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                formula\r\n                                <input className='form__input' type=\"text\" name=\"formula\" value={this.state.accessor.formula}  onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        \r\n                        <button className=\"btn btn_success\">Add accessor</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AccessorsPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AddControllerPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            relationships: [],\r\n            relation: \"\",\r\n            data: {\r\n                description: \"\",\r\n                prefix: \"\",\r\n                namespace: \"\",\r\n                relations: \"\",\r\n            },\r\n            \r\n        };\r\n        \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.controller_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/controller'});\r\n        this.save_controller_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/controllers'});\r\n        \r\n        \r\n        this.onChange = this.onChange.bind(this);\r\n        this.saveController = this.saveController.bind(this);\r\n        \r\n        this.addRelation = this.addRelation.bind(this);\r\n        this.deleteRelation = this.deleteRelation.bind(this);\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let controller_res = await this.resource.get(this.state.table_id+\"/controller\");\r\n        \r\n        \r\n        \r\n        if(controller_res) {\r\n            \r\n            \r\n            controller_res.description = (controller_res.description == null) ? \"\" : controller_res.description;\r\n            controller_res.prefix = (controller_res.prefix == null) ? \"\" : controller_res.prefix;\r\n            controller_res.namespace = (controller_res.namespace == null) ? \"\" : controller_res.namespace;\r\n            \r\n            controller_res.relation = this.setCols(controller_res.relations);\r\n            \r\n            this.setState(state=>{\r\n                return{...state, data: controller_res};\r\n            }, () => {\r\n                \r\n                this.setState(state=>{\r\n                    return{...state, relationships: controller_res.relation};\r\n                })\r\n                \r\n            });\r\n        }\r\n        \r\n    }\r\n    \r\n    setCols(value) {\r\n        \r\n        let cols = [];\r\n        \r\n        if(!value) return cols;\r\n        \r\n        if(value == null || value == \"\") return cols;\r\n        \r\n        \r\n        value.replace(/'/g,\"\");\r\n        return value.split(\",\");\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        \r\n        if(field_name === \"relation\") {\r\n            return this.setState({ ...this.state, relation: e.target.value});\r\n        }\r\n        \r\n        this.setState({ ...this.state, data:{...this.state.data, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    async saveController(e) {\r\n        e.preventDefault();\r\n        \r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        \r\n        let data = {...this.state.data};\r\n        data._token = _token;\r\n        \r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.save_controller_resource.post(data);\r\n        \r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n    }\r\n    \r\n    addRelation(e) {\r\n        e.preventDefault();\r\n        let value = this.state.relation;\r\n       \r\n        let itemIndex = this.state.relationships.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This relation has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, relationships: update(state.relationships, {$push: [value]})};\r\n        }, () => {\r\n            console.log(this.state)\r\n            this.setRelation();\r\n            \r\n        });\r\n    }\r\n    \r\n    \r\n    deleteRelation(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.relationships.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This relation not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, relationships: update(state.relationships, {$splice: [[itemIndex, 1]]})};\r\n        }, () => {\r\n            this.setRelation();\r\n        });\r\n    }\r\n    \r\n    setRelation() {\r\n        let relations = this.state.relationships.join(\";\");\r\n            \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...this.state.data, relations: relations}};\r\n        }, () => {\r\n            console.log(this.state)\r\n        }) \r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <form className=\"admin-form\"  onSubmit={this.saveController}>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Description\r\n                            <input className='form__input' type=\"text\" name=\"description\" value={this.state.data.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Prefix\r\n                            <input className='form__input' type=\"text\" name=\"prefix\" value={this.state.data.prefix}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Namespace\r\n                            <input className='form__input' type=\"text\" name=\"namespace\" value={this.state.data.namespace}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Relations\r\n                            <div className=\"input-group\">\r\n                                <input className='form__input' type=\"text\" name=\"relation\" value={this.state.relation}  onChange={(e) => {this.onChange(e)}}/>\r\n                                <button onClick={(e) => {this.addRelation(e)}}>Добавить</button>    \r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        {\r\n                            this.state.relationships.map(option =>\r\n                            <div key={option}>\r\n                                <button className=\"btn\" onClick={(e) => {this.deleteRelation(e,option)}}>{option}</button>\r\n                            </div>  )\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        <button className=\"btn btn_success\">Save</button>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddControllerPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport MigrationsTable from \"./MigrationsTable\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\n\r\nimport AddModelPage from \"./AddModelPage\";\r\nimport AccessorsPage from \"./AccessorsPage\";\r\nimport AddControllerPage from \"./AddControllerPage\";\r\n\r\n/*\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';*/\r\n\r\n\r\n\r\n//import AdminTable from \"../AdminTable\";\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\n\r\nclass SettingTable extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n        }  \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        /*this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        this.onEditClick = this.onEditClick.bind(this);\r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);*/\r\n    }\r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res}\r\n        });\r\n    }\r\n   \r\n   \r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n        <div className=\"admin-heading\">\r\n            <div className=\"admin-breadcrumbs\">\r\n                <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id}>{this.state.table.title}</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <span className=\"admin-breadcrumbs__current\">Setting</span>\r\n            </div>\r\n        </div>\r\n        <div className=\"admin-content\">\r\n            <Tabs selectedIndex={this.state.activeTab} onSelect={this.switchTab}>\r\n                <TabList className=\"nav nav-pills admin-pills\">\r\n                    <Tab>Migration</Tab>\r\n                    <Tab>Model</Tab>\r\n                    <Tab>Controller</Tab>\r\n                    <Tab>Routes</Tab>\r\n                    <Tab>Accessors</Tab>\r\n                </TabList>\r\n                <TabPanel>\r\n                    <MigrationsTable/>\r\n                    <div>\r\n                        <Link className=\"btn\" to={\"/admin/tables/edit/\"+this.state.table_id+\"/setting/migrations/add\"}>Add New</Link>\r\n                    </div>\r\n                </TabPanel>\r\n                <TabPanel>\r\n                    <AddModelPage/>\r\n                </TabPanel>\r\n                <TabPanel>\r\n                    <AddControllerPage/>\r\n                </TabPanel>\r\n                  <TabPanel>\r\n                  </TabPanel>\r\n                <TabPanel>\r\n                    <AccessorsPage/>\r\n                </TabPanel>  \r\n            </Tabs>\r\n            \r\n        </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(SettingTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\n\r\n\r\nclass AddMigrationPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        //Типы  полей\r\n        this.column_types = [\r\n            {id: \"id\",name: \"Identifier\",fields:[]},\r\n            {id: \"foreignId\",name: \"Foreign Id\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"boolean\",name: \"Boolean\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"date\",name: \"Date\",fields:[\"nullable\",\"default\",\"size\",\"unique\",\"current\"]},\r\n            {id: \"datetime\",name: \"Datetime\",fields:[\"nullable\",\"default\",\"size\",\"unique\",\"current\"]},\r\n            {id: \"decimal\",name: \"Decimal\",fields:[\"nullable\",\"default\",\"size\",\"places\"]},\r\n            {id: \"integer\",name: \"Integer\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"longtext\",name: \"Long Text\",fields:[\"nullable\",\"default\",\"unique\"]},\r\n            {id: \"string\",name: \"String\",fields:[\"nullable\",\"default\",\"size\",\"unique\"]},\r\n            {id: \"text\",name: \"Text\",fields:[\"nullable\",\"default\",\"unique\"]},\r\n            {id: \"timestamps\",name: \"Timestamps\",fields:[\"size\"]},\r\n        ];\r\n        \r\n        //Значения колонки по умолчанию\r\n        const default_column = {\r\n            id: \"\",\r\n            name: '',\r\n            title: '',\r\n            description: '',\r\n            type: \"string\",\r\n            size: 191,\r\n            places: 0,\r\n            default: \"\",\r\n            null: false,\r\n            unique: false,\r\n        };\r\n        \r\n        //Значения ключа по умолчанию\r\n        const default_key = {\r\n            id: \"\",\r\n            target_table: \"\",\r\n            source_table_id: this.props.match.params.id,\r\n            target_column: \"\",\r\n            source_column: \"\",\r\n            onDelete: \"restrict\",\r\n            onUpdate: \"restrict\",\r\n        };\r\n        \r\n        //Типы действий для onDelete и onUpdate\r\n        this.key_actions = [\r\n            {id: \"restrict\", name: \"RESTRICT\"},\r\n            {id: \"cascade\", name: \"CASCADE\"},\r\n            {id: \"set null\", name: \"SET NULL\"},\r\n            {id: \"no action\", name: \"NO ACTION\"},\r\n        ];\r\n        \r\n        //Колонки для таблицы полей\r\n        this.table_columns = [\r\n            {name: 'title',title: 'Title',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'type',title: 'Type',},\r\n            {name: 'size',title: 'Size',},\r\n            {name: 'default',title: 'Default',},\r\n            {name: 'null',title: 'Nullable',is_boolean: true},\r\n            {name: 'unique',title: 'Unique',is_boolean: true},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalColumnShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteColumnClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        //Колонки для таблицы полей\r\n        this.table_keys = [\r\n            {name: 'target_table',title: 'Target Table',},\r\n            {name: 'target_column',title: 'Target Column',},\r\n            {name: 'source_column',title: 'Source Column',},\r\n            {name: 'onDelete',title: 'onDelete',},\r\n            {name: 'onUpdate',title: 'onUpdate',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalKeyShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteKeyClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ],\r\n        \r\n        \r\n        this.state = {\r\n            column_modal_toggle: false,\r\n            key_modal_toggle: false,\r\n            table: {},\r\n            table_id: this.props.match.params.id,\r\n            data: {\r\n                columns: [],\r\n                keys: [],\r\n                rename_columns: [],\r\n            },\r\n            name: \"\",\r\n            default_column: default_column,\r\n            selected_column: null,\r\n            column: default_column,\r\n            default_key: default_key,\r\n            selected_key: null,\r\n            key: default_key\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        \r\n        this.addModalColumnShow = this.addModalColumnShow.bind(this);\r\n        this.addModalKeyShow = this.addModalKeyShow.bind(this);\r\n        \r\n        this.onChangeColumn = this.onChangeColumn.bind(this);\r\n        this.onChangeKey = this.onChangeKey.bind(this);\r\n        \r\n        this.addColumn = this.addColumn.bind(this);\r\n        this.addKey = this.addKey.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onDeleteColumnClick = this.onDeleteColumnClick.bind(this);\r\n        this.onDeleteKeyClick = this.onDeleteKeyClick.bind(this);\r\n        \r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);\r\n        \r\n        this.isShowField = this.isShowField.bind(this);\r\n        \r\n        \r\n        \r\n        \r\n    }\r\n    \r\n    //Подгрузка данных\r\n    async componentDidMount(){\r\n        //Получаем данные о таблице\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        //Получаем данные о колонках\r\n        let columns_res = await this.resource.get(this.state.table_id+\"/columns\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, columns: columns_res}};\r\n        });\r\n        //Получаем данные о ключах\r\n        let keys_res = await this.resource.get(this.state.table_id+\"/keys\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, keys: keys_res}};\r\n        });\r\n    }\r\n    \r\n    //Получаем класс для модального окна\r\n    getModalClasses(type) {\r\n        \r\n        let modal_toggle = type+\"_modal_toggle\";\r\n        \r\n        let modalClasses = 'admin-modal';\r\n        if (this.state[modal_toggle]) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    \r\n    //Получаем класс для модального окна\r\n    isShowField(field_name) {\r\n        \r\n        let state = false;\r\n        \r\n        let type = this.column_types.find(item => item.id === this.state.column.type);\r\n        \r\n        if(type) {\r\n            \r\n            let index = type.fields.indexOf(field_name);\r\n            \r\n            if(index > -1)  {\r\n                state = true;\r\n            }\r\n            \r\n        }\r\n        return state;\r\n    }\r\n    \r\n    //Меняем переменную для открытия той или иной модали\r\n    toggleModal(type) {\r\n        let modal_toggle = type+\"_modal_toggle\";\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, [modal_toggle]: !state[modal_toggle]}\r\n        }, () => {console.log(this.state)})\r\n    }\r\n    \r\n    \r\n    addModalColumnShow(e) {\r\n        let itemIndex = this.state.data.columns.indexOf(e);\r\n        \r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_column: null, column: state.default_column}\r\n            }\r\n            else {\r\n                return { ...state, selected_column: itemIndex, column: state.data.columns[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal(\"column\");\r\n        });\r\n    }\r\n    \r\n    addModalKeyShow(e) {\r\n        let itemIndex = this.state.data.keys.indexOf(e);\r\n        \r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_key: null, key: state.default_key}\r\n            }\r\n            else {\r\n                return { ...state, selected_key: itemIndex, key: state.data.keys[itemIndex]}\r\n            }\r\n        }, () => { \r\n            this.toggleModal(\"key\");\r\n        });\r\n    }\r\n    \r\n    //Добавление столбца\r\n    addColumn(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.column};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_column == null) {\r\n                return { ...state, data: { ...state.data,  columns: update(state.data.columns, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  columns: update(state.data.columns, {[state.selected_column]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal(\"column\");\r\n        });\r\n    }\r\n    \r\n    //Добавление ключа\r\n    addKey(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.key};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_key == null) {\r\n                return { ...state, data: { ...state.data,  keys: update(state.data.keys, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  keys: update(state.data.keys, {[state.selected_key]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal(\"key\");\r\n        });\r\n    }\r\n    \r\n    onDeleteColumnClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.columns.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  columns: update(this.state.data.columns, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    onDeleteKeyClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.keys.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  keys: update(this.state.data.keys, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Изменение значений при работе с модальным окном\r\n     * @param {type} e\r\n     * @returns {undefined}\r\n     */\r\n    onChangeColumn(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        if(field_name === \"name\") {\r\n            \r\n        \r\n            let val = e.target.value.replace(\"_\", \" \");\r\n            value = val.charAt(0).toUpperCase() + val.slice(1); \r\n            \r\n            let title = this.state.column.title;\r\n            let description = this.state.column.description;\r\n            \r\n            if(title === \"\" || title === value.slice(0, value.length - 1)) {\r\n                title = value;\r\n            }\r\n            if(description === \"\" || description === value.slice(0, value.length - 1)) {\r\n                description = value; \r\n            }\r\n            \r\n            this.setState({ ...this.state, column:{...this.state.column, [field_name]: e.target.value, title: title, description: description }});\r\n            return;\r\n        }\r\n        \r\n        this.setState({ ...this.state, column:{...this.state.column, [field_name]: value}}, () => {console.log(this.state)});\r\n    }\r\n    onChangeKey(e) {\r\n        let field_name = e.target.name;\r\n        console.log(e.target.value);\r\n        this.setState({ ...this.state, key:{...this.state.key, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    \r\n    changeName(e) {\r\n        let target = e.target;\r\n        let name_value = target.value\r\n        this.setState( (state) => {\r\n            return {name: name_value}\r\n        });\r\n    }\r\n    async saveMigration(e) {\r\n        e.preventDefault();\r\n        \r\n        if(this.state.name == \"\") {\r\n            alert(\"Enter migration name!\");\r\n            return;\r\n        }\r\n        \r\n        let url = this.state.main_url + \"/migrations\";\r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        console.log(this.state.data)\r\n        let data = {\r\n            name: this.state.name,\r\n            data: JSON.stringify(this.state.data),\r\n            _token: _token\r\n        };\r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.migration_resource.post(data);\r\n        console.log(res)\r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            \r\n            alert(\"Error\");\r\n        }\r\n    }\r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n        <div className=\"admin-heading\">\r\n            <div className=\"admin-breadcrumbs\">\r\n                <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id}>{this.state.table.title}</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id+\"/setting\"}>Setting</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <span className=\"admin-breadcrumbs__current\">Add New Migration</span>\r\n            </div>\r\n        </div>\r\n        <div className=\"admin-content\">\r\n            <div>\r\n                <input type=\"text\" placeholder=\"Enter migration name...\" onChange={this.changeName}/>\r\n            </div>\r\n            <AdminTable columns={this.table_columns} rows={this.state.data.columns}/>\r\n            <div>\r\n                <button onClick={(e) => this.addModalColumnShow(e)}>Add Column</button>\r\n            </div>\r\n            <AdminTable columns={this.table_keys} rows={this.state.data.keys}/>\r\n            <div>\r\n                <button onClick={(e) => this.addModalKeyShow(e)}>Add Key</button>\r\n            </div>\r\n            \r\n            \r\n            <div className={this.getModalClasses(\"key\")}>\r\n                <div className=\"admin-modal__bg\" onClick={() => this.toggleModal(\"key\")}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={() => this.toggleModal(\"key\")}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Key</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addKey}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                id\r\n                                <input className='form__input' type=\"text\" name=\"id\" value={this.state.key.id} onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Target Table\r\n                                <input className='form__input' type=\"text\" name=\"target_table\" value={this.state.key.target_table} onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Source Column\r\n                                <input className='form__input' type=\"text\" name=\"source_column\" value={this.state.key.source_column}  onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Target Column\r\n                                <input className='form__input' type=\"text\" name=\"target_column\" value={this.state.key.target_column}  onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                onUpdate\r\n                                <select className=\"form__input\" value={this.state.key.onUpdate} name='onUpdate'  onChange={(e) => {this.onChangeKey(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.key_actions.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                onDelete\r\n                                <select className=\"form__input\" value={this.state.key.onDelete} name='onDelete'  onChange={(e) => {this.onChangeKey(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.key_actions.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add key</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses(\"column\")}>\r\n                <div className=\"admin-modal__bg\" onClick={() => this.toggleModal(\"column\")}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={() => this.toggleModal(\"column\")}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Column</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addColumn}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.column.name} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                type\r\n                                <select className=\"form__input\" value={this.state.column.type} name='type'  onChange={(e) => {this.onChangeColumn(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.column_types.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        {this.isShowField(\"size\") ? <div>\r\n                            <label className='form-label'>\r\n                                size\r\n                                <input className='form__input' type=\"text\" name=\"size\"  value={this.state.column.size} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"places\") ? <div>\r\n                            <label className='form-label'>\r\n                                places\r\n                                <input className='form__input' type=\"text\" name=\"places\"  value={this.state.column.places} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"default\") ? <div>\r\n                            <label className='form-label'>\r\n                                default\r\n                                <input className='form__input' type=\"text\" name=\"default\" value={this.state.column.default} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"unique\") ? <div>\r\n                            <label className='form-label'>\r\n                                <input className='form__input' type=\"checkbox\" name=\"unique\" checked={this.state.column.unique ? 1 : 0} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                                unique\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"nullable\") ? <div>\r\n                            <label className='form-label'>\r\n                                <input className='form__input' type=\"checkbox\" name=\"null\" checked={this.state.column.null ? 1 : 0} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                                nullable\r\n                            </label>\r\n                        </div> : null}\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                title\r\n                                <input className='form__input' type=\"text\" name=\"title\" value={this.state.column.title}  onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                description\r\n                                <input className='form__input' type=\"text\" name=\"description\" value={this.state.column.description}  onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add col</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            <div>\r\n                \r\n            </div>\r\n            <div>\r\n                <form className=\"admin-form\" onSubmit={this.saveMigration}>\r\n                    <button className=\"btn btn_success\">Save</button>\r\n                </form>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddMigrationPage);","import React, {Component} from \"react\";\r\n\r\nclass AdminVersion extends Component {\r\n  render(){\r\n    return<div children={`Version: ${altrp_version}`} className=\"admin__version\"/>\r\n  }\r\n}\r\n\r\nexport default AdminVersion","import React, {Component} from \"react\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Pagination from \"./Pagination\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  },\r\n  {\r\n    name: 'updated_at',\r\n    title: 'Updated At'\r\n  }\r\n];\r\nconst columnsDataSource = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'route',\r\n    title: 'Route'\r\n  },\r\n  {\r\n    name: 'type',\r\n    title: 'Type'\r\n  }\r\n];\r\nconst initPaginationProps = {\r\n  pageCount: 1,\r\n  currentPage: 1,\r\n};\r\n\r\n\r\nexport default class SQLEditors extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      sql_editorsPagination: initPaginationProps,\r\n      sql_editors: [],\r\n    };\r\n    this.changePage = this.changePage.bind(this);\r\n    this.sql_editorsResource = new Resource({route: '/admin/ajax/sql_editors'});\r\n  }\r\n\r\n  changePage(currentPage, pagination) {\r\n    this.setState(state => ({...state, [pagination]: {...state[pagination], currentPage}}));\r\n  }\r\n\r\n  /**\r\n   * Обновить список Sql-редакторов\r\n   */\r\n  updateSqlEditors() {\r\n\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let sql_editors = await this.sql_editorsResource.getAll();\r\n    sql_editors = sql_editors.sql_editors;\r\n    this.setState(state => ({\r\n      ...state,\r\n      sql_editors\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const { sql_editors, sql_editorsPagination} = this.state;\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">SQL Editors</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">SQL Editors</span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/tables/sql_editors/add`}>Add New</Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n\r\n        {/* TODO: что делать с колoнкой с чекбоксами? */}\r\n        <AdminTable\r\n            columns={columns}\r\n            quickActions={[{\r\n              tag: 'Link', props: {\r\n                href: '/admin/tables/sql_editors/edit/:id',\r\n              },\r\n              title: 'Edit'\r\n            }, {\r\n              tag: 'button',\r\n              route: '/admin/ajax/sql_editors/:id',\r\n              method: 'delete',\r\n              confirm: 'Are You Sure?',\r\n              // after: () => this.updateModels(this.state.currentPage, this.state.activeTemplateArea),\r\n              className: 'quick-action-menu__item_danger',\r\n              title: 'Trash'\r\n            }]}\r\n            rows={sql_editors.map(sql_editor => ({\r\n              ...sql_editor,\r\n              editUrl: '/admin/tables/sql_editors/edit/' + sql_editor.id\r\n            }))}\r\n        />\r\n        <Pagination pageCount={sql_editorsPagination.pageCount}\r\n                    currentPage={sql_editorsPagination.currentPage}\r\n                    changePage={currentPage => this.changePage(currentPage, \"sql_editorsPagination\")}\r\n                    itemsCount={sql_editors.length}\r\n        />\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport './sass/admin-style.scss';\r\nimport {hot} from \"react-hot-loader\";\r\nimport AdminLogo from './components/AdminLogo';\r\nimport Bars from './svgs/bars.svg';\r\nimport AllPages from './components/AllPages';\r\nimport AdminSettings from './components/AdminSettings';\r\nimport AssetSvg from './svgs/assets.svg';\r\nimport DashboardSvg from './svgs/dashboard.svg';\r\nimport PagesSvg from './svgs/pages.svg';\r\nimport PluginSvg from './svgs/plugins.svg';\r\nimport ReportSvg from './svgs/reports.svg';\r\nimport SettingSvg from './svgs/settings.svg';\r\nimport TableSvg from './svgs/tables.svg';\r\nimport TemplateSvg from './svgs/templates.svg';\r\nimport UserSvg from './svgs/users.svg';\r\nimport store from './js/store/store';\r\nimport {Provider} from 'react-redux'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport Users from \"./components/users/Users\";\r\nimport AddUserPage from \"./components/users/AddUserPage\";\r\nimport EditUserPage from \"./components/users/EditUserPage\";\r\nimport UsersTools from \"./components/users/UsersTools\";\r\nimport Assets from \"./components/Assets\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport Plugins from \"./components/Plugins\";\r\nimport Reports from \"./components/Reports\";\r\nimport Tables from \"./components/Tables\";\r\nimport Templates from \"./components/Templates\";\r\nimport AdminModal from \"./components/AdminModal\";\r\nimport AddPage from \"./components/AddPage\";\r\nimport UserTopPanel from \"./components/UserTopPanel\";\r\nimport AssetsBrowser from \"../../editor/src/js/classes/modules/AssetsBrowser\";\r\nimport Models from \"./components/Models\";\r\nimport EditModel from \"./components/models/EditModel\";\r\nimport EditField from \"./components/models/EditField\";\r\nimport AddRelation from \"./components/models/AddRelation\";\r\nimport AddDataSource from \"./components/models/AddDataSource\";\r\nimport SQLBuilder from \"./components/SQLBuilder\";\r\nimport SqlEditor from \"./components/models/SqlEditor\";\r\nimport AccessOptions from \"./components/AccessOptions\";\r\nimport RolePage from \"./components/access/RolePage\";\r\nimport PermissionPage from \"./components/access/PermissionPage\";\r\n\r\nimport AddTable from \"./components/tables/AddTable\";\r\nimport EditTable from \"./components/tables/EditTable\";\r\nimport SettingTable from \"./components/tables/SettingTable\";\r\nimport AddMigrationPage from \"./components/tables/AddMigrationPage\";\r\nimport AdminVersion from \"./components/AdminVersion\";\r\nimport SQLEditors from \"./components/SQLEditors\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nwindow.React = React;\r\nwindow.ReactDOM = ReactDOM;\r\nwindow.Component = React.Component;\r\n\r\nclass Admin extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      adminState: {\r\n        adminEnable: true,\r\n      },\r\n      pagesMenuShow: false,\r\n    };\r\n    this.toggleMenu = this.toggleMenu.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    store.subscribe(this.updateAdminState.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Срабатвыает, когда меняется adminState в store\r\n   */\r\n  updateAdminState(){\r\n    let adminState = store.getState().adminState;\r\n    this.setState(state=>{\r\n      return{...state,adminState:{...adminState}}\r\n    })\r\n  }\r\n  toggleMenu(){\r\n    this.setState(state=>{\r\n      return {...state, pagesMenuShow: !state.pagesMenuShow}\r\n    })\r\n  }\r\n  render() {\r\n    let adminClasses = ['admin'];\r\n    if(!this.state.adminState.adminEnable){\r\n      adminClasses.push('pointer-event-none');\r\n    }\r\n    if(this.state.pagesMenuShow){\r\n      adminClasses.push('admin_pages-show');\r\n    }\r\n    return <Provider store={store}>\r\n      <div className={adminClasses.join(' ')}>\r\n        <Router>\r\n          <nav className=\"admin-nav\">\r\n            <div className=\"admin-nav-top\">\r\n              <AdminLogo/>\r\n              <Bars className=\"admin__bars\" onClick={this.toggleMenu}/>\r\n            </div>\r\n            <div className=\"admin-nav-main\">\r\n\r\n            <ul className=\"admin-nav-list\">\r\n\r\n                <li>\r\n                  <Link to=\"/admin/dashboard\" className=\"admin-nav-list__link\">\r\n                    <DashboardSvg className=\"icon\"/>\r\n                    <span>Dashboard</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/assets\" className=\"admin-nav-list__link\">\r\n                    <AssetSvg className=\"icon\"/>\r\n                    <span>Assets</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  {/*<Link to=\"/admin/tables\" className=\"admin-nav-list__link\">*/}\r\n                    {/*<TableSvg className=\"icon\"/>*/}\r\n                    {/*<span>Tables</span>*/}\r\n                  {/*</Link>*/}\r\n\r\n                  <Link to=\"/admin/tables/models\" className=\"admin-nav-list__link\">\r\n                    <TableSvg className=\"icon\"/>\r\n                    <span>Tables</span>\r\n                  </Link>\r\n                  <ul className=\"admin-nav-sublist\">\r\n\r\n                    <li>\r\n\r\n                      <Link to=\"/admin/tables/sql_editors\" className=\"admin-nav-list__link\">\r\n                        <TableSvg className=\"icon\"/>\r\n                        <span>SQL Editors</span>\r\n                      </Link>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/templates\" className=\"admin-nav-list__link\">\r\n                    <TemplateSvg className=\"icon\"/>\r\n                    <span>Templates</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/reports\" className=\"admin-nav-list__link\">\r\n                    <ReportSvg className=\"icon\"/>\r\n                    <span>Reports</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/users\" className=\"admin-nav-list__link\">\r\n                    <UserSvg className=\"icon\"/>\r\n                    <span>Users</span>\r\n                  </Link>\r\n                </li>                \r\n                <li>\r\n                  <Link to=\"/admin/tools\" className=\"admin-nav-list__link\">\r\n                    <span>Tools</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/access/roles\" className=\"admin-nav-list__link\">\r\n                    <UserSvg className=\"icon\" />\r\n                    <span>Access</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/plugins\" className=\"admin-nav-list__link\">\r\n                    <PluginSvg className=\"icon\"/>\r\n                    <span>Plugins</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/settings\" className=\"admin-nav-list__link\">\r\n                    <SettingSvg className=\"icon\"/>\r\n                    <span>Settings</span>\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n              <ul className=\"admin-nav-list admin-nav-list_pages\">\r\n                <li>\r\n                  <Link to=\"/admin/pages\" className=\"admin-nav-list__link\">\r\n                    <PagesSvg className=\"icon\"/>\r\n                    <span>Pages</span>\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <AdminVersion/>\r\n          </nav>\r\n          <Switch>\r\n            <Route path=\"/admin/\" exact>\r\n              <Redirect to=\"/admin/dashboard\"/>\r\n            </Route>\r\n            <Route path=\"/admin/settings\">\r\n              <AdminSettings/>\r\n            </Route>\r\n            <Route path=\"/admin/users\" exact>\r\n              <Users/>\r\n            </Route>\r\n            <Route path=\"/admin/users/new\" exact>\r\n              <AddUserPage/>\r\n            </Route>\r\n            <Route path=\"/admin/users/user/:id\">\r\n              <EditUserPage/>\r\n            </Route>\r\n            \r\n            <Route path=\"/admin/tools\">\r\n              <UsersTools/>\r\n            </Route>\r\n            <Route path=\"/admin/assets\">\r\n              <Assets/>\r\n            </Route>\r\n            <Route path=\"/admin/dashboard\">\r\n              <Dashboard/>\r\n            </Route>\r\n            <Route path=\"/admin/plugins\">\r\n              <Plugins/>\r\n            </Route>\r\n            <Route path=\"/admin/reports\">\r\n              <Reports/>\r\n            </Route>\r\n            <Route path=\"/admin/tables\" exact>\r\n              <Tables/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/edit/:id\"  component={EditTable} exact>\r\n              <EditTable/>   \r\n            </Route>\r\n            <Route path=\"/admin/tables/edit/:id/setting\" component={SettingTable} exact/>\r\n            <Route path=\"/admin/tables/edit/:id/setting/migrations/add\" component={AddMigrationPage} />\r\n            <Route path=\"/admin/tables/add\">\r\n              <AddTable/>\r\n            </Route>\r\n            <Route path=\"/admin/templates\">\r\n              <Templates/>\r\n            </Route>\r\n            <Route path=\"/admin/pages\" exact>\r\n              <AllPages/>\r\n            </Route>\r\n            <Route path=\"/admin/pages/edit/:id\">\r\n              <AddPage/>\r\n            </Route>\r\n            <Route path=\"/admin/pages/add\">\r\n              <AddPage/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models\" exact>\r\n              <Models />\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors\" exact>\r\n              <SQLEditors />\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors/add\">\r\n              <SqlEditor/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors/edit/:id\">\r\n              <SqlEditor/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/add\">\r\n              <EditModel />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/edit/:id\" exact>\r\n              <EditModel />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/fields/add\">\r\n              <EditField/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/fields/edit/:id\">\r\n              <EditField/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/relations/add\">\r\n              <AddRelation />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/relations/edit/:id\">\r\n              <AddRelation />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/queries/add\">\r\n              <SQLBuilder/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/queries/edit/:id\">\r\n              <SQLBuilder />\r\n            </Route>\r\n            <Route path=\"/admin/tables/data-sources/add\">\r\n              <AddDataSource />\r\n            </Route>\r\n\r\n            <Route path=\"/admin/access/roles/add\">\r\n              <RolePage />\r\n            </Route>\r\n            <Route path=\"/admin/access/roles/edit/:id\">\r\n              <RolePage />\r\n            </Route>\r\n            <Route path=\"/admin/access/permissions/add\">\r\n              <PermissionPage />\r\n            </Route>\r\n            <Route path=\"/admin/access/permissions/edit/:id\">\r\n              <PermissionPage />\r\n            </Route>\r\n            <Route path=\"/admin/access\">\r\n              <AccessOptions />\r\n            </Route>            \r\n          </Switch>\r\n        </Router>\r\n        <AdminModal/>\r\n        <UserTopPanel/>\r\n        <AssetsBrowser/>\r\n      </div>\r\n    </Provider>;\r\n  }\r\n}\r\n\r\nlet _export;\r\nif (process.env.NODE_ENV === 'production') {\r\n  _export = Admin;\r\n} else {\r\n  _export = hot(module)(Admin);\r\n}\r\n\r\nexport default _export;\r\n","export const SET_DISABLED = 'SET_DISABLED';\r\nexport const SET_ENABLE = 'SET_ENABLE';\r\n\r\nexport function setAdminDisable(){\r\n  return {\r\n    type: SET_DISABLED,\r\n  }\r\n}\r\n\r\nexport function setAdminEnable(){\r\n  return {\r\n    type: SET_ENABLE,\r\n  }\r\n}\r\n","export const ASSETS_SHOW = 'ASSETS_SHOW';\r\nexport const ASSETS_TOGGLE = 'ASSETS_TOGGLE';\r\n\r\nexport function assetsShow(settings) {\r\n  settings.active = true;\r\n  return {\r\n    type: ASSETS_SHOW,\r\n    settings\r\n  };\r\n}\r\n\r\nexport function assetsToggle() {\r\n  return {\r\n    type: ASSETS_TOGGLE,\r\n  };\r\n}\r\n\r\n","export const SET_LOGO = 'SET_LOGO';\r\n\r\nexport function setAdminLogo(logoData){\r\n  return {\r\n    logoData,\r\n    type: SET_LOGO,\r\n  }\r\n}\r\n\r\n","import {ASSETS_SHOW, ASSETS_TOGGLE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  onChoose: function (media) {\r\n    console.log(media);\r\n  },\r\n  active: false,\r\n};\r\n\r\nexport function assetsSettingsReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case ASSETS_SHOW:{\r\n      state = {\r\n        ...action.settings,\r\n      };\r\n    }break;\r\n    case ASSETS_TOGGLE:{\r\n      state = {...state};\r\n      state.active = !state.active;\r\n    }break;\r\n  }\r\n  return state;\r\n}","export const SET_ACE = 'SET_ACE';\r\n\r\nexport function setAceEditor(AceEditor){\r\n  return {\r\n    AceEditor,\r\n    type: SET_ACE,\r\n  }\r\n}\r\n\r\n","const CONSTANTS = {\r\n  TEMPLATE_UPDATED: 'TEMPLATE_UPDATED',\r\n  TEMPLATE_NEED_UPDATE: 'TEMPLATE_NEED_UPDATE',\r\n  TEMPLATE_SAVING: 'TEMPLATE_SAVING',\r\n  DEFAULT_BREAKPOINT: 'DEFAULT_BREAKPOINT',\r\n  SCREENS: [\r\n\r\n    {\r\n      icon: 'wide_screen',\r\n      name: 'DEFAULT_BREAKPOINT',\r\n      id: 1,\r\n      width: '100%',\r\n      mediaQuery: ''\r\n    },\r\n    {\r\n      icon: 'desktop',\r\n      name: \"Desktop\",\r\n      id: 2,\r\n      width: '1440px',\r\n      mediaQuery: '@media screen and (max-width: 1440px)'\r\n    },\r\n    {\r\n      icon: 'laptop',\r\n      name: \"Laptop\",\r\n      id: 3,\r\n      width: '1024px',\r\n      mediaQuery: '@media screen and (max-width: 1024px)'\r\n    },\r\n    {\r\n      icon: 'tablet',\r\n      name: \"Tablet\",\r\n      id: 4,\r\n      width: '768px',\r\n      mediaQuery: '@media screen and (max-width: 768px)'\r\n    },\r\n    {\r\n      icon: 'big_phone',\r\n      name: \"Big-Phone\",\r\n      id: 5,\r\n      width: '450px',\r\n      mediaQuery: '@media screen and (max-width: 450px)'\r\n    },\r\n    {\r\n      icon: 'small_phone',\r\n      name: \"Small-Phone\",\r\n      id: 6,\r\n      width: '320px',\r\n      mediaQuery: '@media screen and (max-width: 320px)'\r\n    },\r\n  ]\r\n};\r\nexport default CONSTANTS;","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap.css\"), \"\");\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap-grid.min.css\"), \"\");\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;700&display=swap);\", \"\"]);\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!react-datepicker/dist/react-datepicker.css\"), \"\");\n\n// module\nexports.push([module.id, \"html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto, sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:0.2s;-moz-transition-duration:0.2s;-ms-transition-duration:0.2s;-o-transition-duration:0.2s;transition-duration:0.2s;font-family:Roboto, sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8E94AA}.btn_disabled{background-color:#8E94AA;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=\\\"checkbox\\\"]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87CA00;color:#fff;font-weight:bold}.btn_failure{background-color:#FF4E6E;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-disabled{pointer-events:none}.pointer-event-none{pointer-events:none}.altrp-inherit{font-family:inherit;font-size:inherit;font-style:inherit;line-height:inherit;color:inherit;text-decoration:inherit;text-transform:inherit}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat, Arial, sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:#8E94AA}.admin-breadcrumbs__link:hover{color:#315EFB}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px;margin-left:5px;margin-right:5px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}.admin-filters{margin-left:20px;margin-right:20px;font-size:15px;font-family:Roboto, Arial, sans-serif}.admin-filters__link{text-decoration:none;color:#8E94AA}.admin-filters__link:hover{color:#315EFB}.admin-filters__separator{margin-left:5px;margin-right:5px}.admin-filters__current{font-size:15px}.btn{display:inline-block;padding:6px 12px;background:#E9E9EB;border:1.5px solid #3C455B;border-radius:2px;font-family:Roboto, Arial, sans-serif;font-weight:500;font-size:15px;line-height:18px;text-decoration:none;color:#3C455B}.btn:hover{background:#3C455B;color:white}.btn_success{background-color:#87CA00;border-color:#87CA00}.btn_success:hover{border-color:#343B4C}.form-bottom{display:flex;justify-content:flex-end}.form-label{position:relative;margin-bottom:13px;font-size:13px;display:block;width:100%}.form-label select.form__input,.form-label .form__input[type=\\\"text\\\"]{margin-top:5px;font-size:13px;border:1px solid #D5D7DE}.form-label__error{position:absolute;left:0;top:100%;font-size:12px;line-height:13px;color:#FF4E6E}select.form__input,input[type=\\\"number\\\"].form__input,input[type=\\\"text\\\"].form__input{width:100%;padding:10px;line-height:16px;font-size:14px}.admin-pills .nav-item{background-color:transparent}.admin-pills .nav-link{border:1px solid #D5D7DE;border-radius:3px 3px 0 0;margin-bottom:-1px;background-color:#E6E9EC;font-family:Montserrat, sans-serif;font-size:16px;font-weight:bold;color:#8E94AA}.admin-pills .nav-link.active{background-color:#fff;border-bottom-color:#fff;color:#343B4C}.admin-user-top-panel{position:absolute;top:0;right:0;height:62px;padding-right:27px}.top-panel-notification{margin-right:19px}.top-panel__portrait{margin-right:7px}.top-panel__greeting{margin-right:14px;font-size:15px;color:#8E94AA}.top-panel-logout{background-color:transparent;border:none;padding:0}.admin-table{width:100%;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden}.admin-table .admin-table__td{height:65px;position:relative}.admin-table .admin-table__td_check{width:45px;text-align:center}.admin-table table{border-collapse:collapse;width:100%}.admin-table-head{background-color:#fff;border-bottom:1px solid #D5D7DE}.admin-table-head .admin-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343B4C}.admin-table-body .admin-table-row:nth-child(2n){background-color:#F7F8F9}.admin-table-body .admin-table-row:nth-child(2n+1){background-color:#fff}.admin-table-body .admin-table-row .quick-action-menu{display:none;position:absolute;bottom:4px;left:0}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper::after{content:\\\" | \\\";color:#8E94AA}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper:last-child::after{content:\\\"\\\"}.admin-table-body .admin-table-row:hover .quick-action-menu{display:inline-block}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item{font-size:12px;color:#8E94AA;padding:0;background-color:transparent}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item.quick-action-menu__item_danger{color:#cf0025}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item:hover{text-decoration:underline}.admin-modal{display:flex;opacity:0;z-index:-1000;position:fixed;top:0;bottom:0;right:0;left:0;align-items:center;justify-content:center}.admin-modal_active{display:flex;opacity:1;z-index:1000;background-color:rgba(52,59,76,0.2)}.admin-modal_active .admin-modal-content{transform:translate(0, 0vh)}.admin-modal-content{width:320px;position:relative;padding:25px;background-color:#fff;border:1px solid #D5D7DE;-webkit-box-shadow:0px 4px 5px rgba(0,0,0,0.04);-moz-box-shadow:0px 4px 5px rgba(0,0,0,0.04);box-shadow:0px 4px 5px rgba(0,0,0,0.04);border-radius:3px;z-index:100;transform:translate(0, -50vh);transition-duration:.5s}.admin-modal__close{position:absolute;top:0;right:0;padding:10px;border:none;background-color:transparent}.admin-modal__close .icon{width:auto;height:auto;margin:0;display:block}.admin-modal__bg{position:absolute;top:0;bottom:0;left:0;right:0;z-index:50}.uploader{padding:48px;background-color:#fff;border:1px solid #D5D7DE;border-radius:5px;-webkit-transition-duration:.5s;-moz-transition-duration:.5s;-ms-transition-duration:.5s;-o-transition-duration:.5s;transition-duration:.5s;color:#8E94AA}.uploader .icon{width:auto;height:auto;fill:#8E94AA;margin:0;transition-duration:inherit}.uploader__input{display:none}.uploader_drag-over{padding:44px;border:5px solid #71d7f7;color:#71d7f7}.uploader_drag-over .icon{fill:#71d7f7}.item{position:relative}.item__delete{position:absolute;top:0;right:0;padding:10px;border:none;background-color:transparent}.item__delete-icon{transform:scale(1.2)}.item__background{position:absolute;top:5px;bottom:5px;left:5px;right:5px;background-position:center;-webkit-background-size:contain;background-size:contain;background-repeat:no-repeat;background-color:#F7F8F9}.assets-list{background-color:#fff}.assets-list__item{padding-top:8.333333%}.admin-settings{width:100%;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden}.admin-settings .nav{margin-bottom:-1px}.admin-settings .admin-settings-table__td{height:65px;padding:8px 16px}.admin-settings .admin-settings-table__td_check{width:45px;text-align:center}.admin-settings .header-text{text-transform:uppercase;font-weight:600;font-size:16px;line-height:20px}.admin-settings .row-text{font-family:Roboto;font-style:normal;font-weight:bold;font-size:15px;line-height:18px}.admin-settings .admin-settings-button{line-height:5px;width:163px;height:30px;left:315px;top:448px;background:#87CA00;border:1.5px solid #87CA00;box-sizing:border-box;border-radius:2px}.admin-settings table{border-collapse:collapse;width:100%}.admin-settings table .admin-table__td_check{margin-right:10px}.admin-settings-head{background-color:#fff;border-bottom:1px solid #D5D7DE}.admin-settings-head .admin-settings-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343B4C}.admin-settings-body .admin-settings-table-row:nth-child(2n){background-color:#F7F8F9}.admin-settings-body .admin-settings-table-row:nth-child(2n+1){background-color:#fff}.react-tabs__tab-panel{width:100%;padding:10px;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden;background-color:#fff}.nav-pills .react-tabs__tab{margin-right:16px;padding:0.5rem 1rem;border:1px solid #D5D7DE;border-radius:3px 3px 0 0;background-color:#E6E9EC;font-family:Montserrat, sans-serif;font-size:16px;font-weight:bold;color:#8E94AA}.nav-pills .react-tabs__tab--selected{background-color:#fff;border-bottom-color:#fff;color:#343B4C}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #D5D7DE;height:75vh;border-radius:3px;overflow:hidden}.admin-users .table{border-bottom:1px solid #D5D7DE;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274BC8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.admin-users .table .role-svg{transform:rotate(180deg)}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}#content{width:100%;height:100vh;margin:12px}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat, Arial, sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:grey}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}#description{border-radius:0px 3px 3px 3px;border-top:none !important}.nav{margin-top:10px}.nav-item a{font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase}.change-role{line-height:50px;padding:35px 8px 8px 8px;align-items:center}.form-control-sm{margin:0 35px 0 20px;background:#FFFFFF;border:1px solid #343B4C !important;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px}.form-check{padding-left:1.2rem !important}.form-check-inline{margin-right:0 !important}.form-check-label{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.form-check-label:hover{color:#007bff}.col-3{align-self:center}.col-6{padding-bottom:8px;padding-top:10px;border-top:0;border-bottom:0;margin:0 !important}.form-group{margin-top:14px !important}fieldset{padding-top:12px}.treeview{margin-top:-50px;padding:0;clear:both;font-family:Arial, sans-serif;width:100%;height:70vh}.treeview *{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#8E94AA}.treeview ul{overflow:hidden;width:100%;margin:0;padding:0 0 1.5em 0;list-style-type:none}.treeview ul ul{overflow:visible;width:auto;margin:0 0 0 0;padding:0 0 0 1.5em}.treeview ul.l{border-left:1px solid;margin-left:-1px}ul{overflow:hidden}.treeview li{position:relative;padding-left:1.2em}.treeview+ul{margin-left:30px;padding-top:10px}.treeview li{margin-bottom:.8em}.treeview li{margin:0;padding:0}.treeview li li{margin:0 0 0 0.5em;border-left:1px solid;padding:0}.treeview li div{position:relative;height:1.5em;min-height:16px;height:1.9em}.treeview li li div{border-bottom:1px solid}.treeview li p{position:absolute;z-index:1;top:0.8em;top:1.2em;left:.95em;width:100%;margin:0;border-bottom:1px dashed;padding:0}.treeview li p.form-group-p{margin-left:7.8rem}.treeview a{padding:0.1em 0.2em;white-space:nowrap;height:1px}.treeview a:hover{padding:0.1em 0.2em;white-space:nowrap;height:1px;text-decoration:none}.treeview img.i{border-right:2px solid;border-bottom:0.5em solid;margin-bottom:-0.5em;vertical-align:middle}.treeview a.sc{position:absolute;top:0.06em;margin-left:-1em;padding:0;text-decoration:none}.treeview li p,.treeview img.i,.treeview .sc{background:#ffffff}.treeview ul.l,.treeview li p,.treeview img.i{border-color:#ffffff}.treeview ul li li,.treeview ul li li div{border-color:#999999}.treeview a,.treeview a.sc,.treeview a.sc:hover{color:#8E94AA}.treeview a.core{color:#343B4C}.treeview a:hover{color:#f97c13}.group-table{height:50px;align-items:center}.group-table .text-group{margin:0 0 0 15px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343B4C}.group-table .text-total{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.col input .search-tools{height:30px;border:1px solid #ced4da}.form-tools button{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#87CA00;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3C455B}.form-tools button:hover{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#b5ea49;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3C455B}.group-table-trees{height:75vh}.form-check-group{margin-top:16px}.form-group-p{margin:0;margin-left:10px;display:inline-block}.form-group-p a{font-family:Roboto;font-style:normal;font-weight:normal;font-size:11px;line-height:14px;color:#8E94AA;text-decoration:none !important}.form-group-p span{margin:0;font-size:12px;line-height:14px;color:#8E94AA}.form-group-p a:last-child{color:#fc394d}.form-group-p a:last-child:hover{color:#fa011a}.group-vertical{display:grid;width:80%;margin:25px auto}.group-vertical button{margin-top:5px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;text-align:center;color:#3C455B}.dangerous{display:grid;width:80%;justify-content:center;margin:350px auto auto auto}.dangerous span{width:195px;font-family:Roboto;font-style:normal;font-weight:bold;font-size:12px;line-height:14px;margin:0 19px;color:#8E94AA}.dangerous button{margin:5px auto;width:195px;height:40px;left:1651px;top:889px;background:#FF4E6E;border:1px solid #FF4E6E;box-sizing:border-box;border-radius:2px;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-align:center;color:#FFFFFF}.admin-logo{width:100%;height:41px;background-color:#2A2D36}.logo{margin:8px 15px}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #D5D7DE;height:75vh;border-radius:3px;overflow:hidden}.admin-users .table{border-bottom:1px solid #D5D7DE;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274BC8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.admin-users .table .role-svg{transform:rotate(180deg)}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}.btn__wrapper .btn{margin-right:20px}.btn_add{margin-top:20px}.form-group__inline-wrapper{display:flex;justify-content:space-between}.form-group__inline-wrapper__divider,.form-group__inline-wrapper .form-group_checkbox{align-self:flex-end}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width65{flex-basis:65%}.form-group.form-group_width47{flex-basis:47.5%}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width15{flex-basis:15%}.sub-header{margin:30px 0;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343B4C}.field-form p,.admin-form p{color:#242424;display:block;font-family:inherit}.field-form .checkbox-group,.admin-form .checkbox-group{display:flex}.field-form .checkbox-group .form-group,.admin-form .checkbox-group .form-group{flex-grow:1}.centred{text-align:center}.checkbox-label{margin-left:10px}.flex-container{display:flex;justify-content:space-between;align-items:baseline}.label_checkbox{margin-bottom:0;cursor:pointer}.disabling-radio{margin-left:15px}.charts{display:flex;flex-wrap:wrap}.charts .card{margin-right:10px;margin-bottom:10px;min-height:300px;min-width:450px;padding:20px;border:0}.charts .card-body{padding:0}.charts .card-body .spinner-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.charts .card-body .widget-table{overflow:auto;width:100%;height:100%}.charts .card-body .widget-table table{width:100%;font-size:0.8rem}.charts .card-body .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666666;width:50%;font-weight:600}.charts .card-body .widget-table table thead th,.charts .card-body .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,0.125);padding:0.3rem 0.5rem}.charts .card-body .widget-table table thead{background-color:#f0f0f0;color:#666666;font-weight:600}.charts .card-header{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0.7rem;border-bottom:none;background-color:transparent;margin-bottom:10px}.charts .card-header__name{width:80%;font-size:1.2rem;color:#2a2d36;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.charts .card-header__buttons button{border:0;background:transparent;padding:0 7px}.widget-placeholder{width:100%;height:420px;border:1px solid #dedede;overflow:hidden;border-radius:2px;margin-right:15px;padding:20px}.widget-placeholder .widget-table{overflow:auto;width:100%;height:100%}.widget-placeholder .widget-table table{width:100%;font-size:0.8rem}.widget-placeholder .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666666;width:50%;font-weight:600}.widget-placeholder .widget-table table thead th,.widget-placeholder .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,0.125);padding:0.3rem 0.5rem}.widget-placeholder .widget-table table thead{background-color:#f0f0f0;color:#666666;font-weight:600}.form-group .react-datepicker-wrapper{width:100%}.hide-blocks .react-datepicker__header{display:none}.form-segment .form-group label{width:100%}.from-segment .form-group_checkbox{margin-bottom:25px}.admin{display:flex;min-height:100vh;padding-left:271px}.admin__logo{width:120px;height:44px;padding-left:12px;display:flex;align-items:center;justify-content:center}.admin__logo img{max-width:100%;max-height:100%}.admin-nav{position:fixed;top:0;left:0;bottom:0;overflow-x:hidden;overflow-y:auto;height:100vh;background-color:#2A2D36;width:271px;flex-shrink:0}.admin-nav-top{display:flex;justify-content:space-between;align-items:center;width:271px;padding-right:5px}.admin-nav-top .nav-logo{background-color:#2a2d36}.admin-nav-list{margin-top:10px}.admin-nav-list__link{display:flex;padding:6px;color:#fff;font-size:17px;font-weight:500}.admin-nav-list__link:hover{color:#87CA00}.admin-nav-list__link:hover path{fill:#87CA00}.admin-nav-list__link svg{position:relative;top:1px;margin:3px 16px 0 7px}.admin-nav-list_pages{position:absolute;top:44px;left:0;right:0;bottom:0;background-color:#2A2D36;transform:translate(100%, 0);transition-duration:0.3s}.admin-content{width:100%}.admin-caption{margin-bottom:15px;font-weight:600;font-size:18px}.admin__bars{margin:12px 12px;float:right;cursor:pointer}.admin_pages-show .admin-nav-list_pages{transform:translate(0, 0)}.admin__version{position:absolute;bottom:0;left:0;right:0;padding:5px;text-align:center;font-size:13px;color:#fff}.admin-form__subheader{text-transform:uppercase;margin-top:25px;font-weight:600;font-size:16px;line-height:20px}.icon{width:16px;height:16px;fill:white;margin-right:15px;display:inline-block;align-items:center}.admin-nav li{list-style-type:none;background:#343b4c}.admin-nav li:hover{background:#495267}ul{margin-left:0;padding-left:0}p{display:inline-block;color:white;font-weight:500;font-family:Montserrat, Arial, sans-serif}a{text-decoration:none}.admin-page{width:100%;display:flex;flex-direction:column}.admin-content{background-color:#F7F8F9;flex-grow:1;padding:13px 25px}.ace_editor{font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace}\\n\", \"\"]);\n\n// exports\n","import CONSTANTS from \"../../../editor/src/js/consts\";\r\n\r\nexport function getRoutes() {\r\n  return import('./classes/Routes.js');\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n    return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Устанавливаент заголовок страницы на фронтенде\r\n * @param {string} title\r\n */\r\nexport function setTitle(title){\r\n  let titleElement = document.title;\r\n  if(!defaultTitle){\r\n    defaultTitle = titleElement.innerHTML;\r\n  }\r\n  if(! title){\r\n    title = defaultTitle;\r\n  }\r\n  if(document.title !== title){\r\n    document.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * @return {boolean}\r\n * */\r\nexport function isEditor() {\r\n  return !!(window.altrpEditor || window.parent.altrpEditor);\r\n}\r\n\r\n/**\r\n * Переменная, в которой храниться измначальный заголовок\r\n * @var {string}\r\n */\r\nlet defaultTitle;\r\n\r\n/**\r\n * Парсит стрку вводимую пользователем для опций селекта\r\n * @param string\r\n */\r\nexport function parseOptionsFromSettings(string) {\r\n  if(! string){\r\n    return[];\r\n  }\r\n  let options = string.split('\\n');\r\n  options = options.map(option=>{\r\n    let value = option.split('|')[0];\r\n    value = value.trim();\r\n    let label = option.split('|')[1] || value;\r\n    label = label.trim();\r\n    return{\r\n      value,\r\n      label,\r\n    }\r\n  });\r\n  return options;\r\n}\r\n\r\n/**\r\n * Получает медиа запрос для css по имени настройки\r\n * @param {string} screenSettingName\r\n * @return {string}\r\n */\r\nexport function getMediaQueryByName(screenSettingName) {\r\n  let mediaQuery = '';\r\n  CONSTANTS.SCREENS.forEach(screen=>{\r\n    if(screen.name === screenSettingName){\r\n      mediaQuery = screen.mediaQuery;\r\n    }\r\n  });\r\n  return mediaQuery;\r\n}\r\n/**\r\n * Получает медиа запрос для css по имени настройки\r\n * @param {string} screenSettingName\r\n * @return {string}\r\n */\r\nexport function getMediaSettingsByName(screenSettingName) {\r\n  let screen = CONSTANTS.SCREENS[0];\r\n  CONSTANTS.SCREENS.forEach(_screen=>{\r\n    if(_screen.name === screenSettingName){\r\n      screen = _screen;\r\n    }\r\n  });\r\n  return screen;\r\n}\r\n\r\n/**\r\n *@param {string} URLTemplate\r\n *@param {{}} object\r\n */\r\nexport function parseURLTemplate(URLTemplate = '', object = {}){\r\n  let url = URLTemplate;\r\n  // columnEditUrl = columnEditUrl.replace(':id', row.original.id);\r\n  let idTemplates = url.match(/:([\\s\\S]+?)(\\/|$)/g);\r\n  if(! idTemplates){\r\n    return url;\r\n  }\r\n  idTemplates.forEach(idTemplate=>{\r\n    let replace = object[idTemplate.replace(/:|\\//g, '')] || '';\r\n    idTemplate = idTemplate.replace('/', '');\r\n    url = url.replace(new RegExp(idTemplate,'g'), replace);\r\n  });\r\n  return url;\r\n}\r\n\r\nexport function getWindowWidth() {\r\n  let window;\r\n  if(isEditor()) {\r\n    window = document.getElementById(\"editorWindow\").offsetWidth;\r\n  } else {\r\n    window = document.getElementById(\"front-app\").offsetWidth\r\n  }\r\n  return window\r\n}\r\n\r\nexport function renderAssetIcon(asset, props = null) {\r\n  if(asset) {\r\n    switch (asset.assetType) {\r\n      case 'icon': {\r\n        return iconsManager().renderIcon(asset.name)\r\n      }\r\n      case 'image': {\r\n        return React.createElement('img', {...props, src: asset.url})\r\n      }\r\n      case 'media': {\r\n        return React.createElement('img', {...props, src: asset.url})\r\n      }\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * @param {object} asset\r\n * @param {object} props\r\n * @return {React.DetailedReactHTMLElement<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> | React.DetailedReactHTMLElement<React.HTMLAttributes<T>, HTMLElement> | React.ReactSVGElement | React.DOMElement<React.DOMAttributes<T>, Element> | React.FunctionComponentElement<{}> | React.CElement<{}, React.ClassicComponent<{}, React.ComponentState>> | React.CElement<{}, React.Component<P, React.ComponentState>> | React.ReactElement<{}> | string}\r\n * @throws Исключение если иконка не найдена\r\n * */\r\nexport function renderAsset(asset, props = null) {\r\n  switch (asset.assetType) {\r\n    case 'icon': {\r\n      return iconsManager().renderIcon(asset.name)\r\n    }\r\n    case 'image': {\r\n      return React.createElement('img', {...props, src: asset.url})\r\n    }\r\n    case 'media': {\r\n      return React.createElement('img', {...props, src: asset.url})\r\n    }\r\n    case 'mediaBackground': {\r\n      return React.createElement('div', {...props, style:{backgroundImage: `url(${asset.url})`}})\r\n    }\r\n    case undefined: {\r\n      return React.createElement('img', {...props, src: '/img/nullImage.png'})\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * Парсим данный из строки в объект, если значение - путь, то берем значение из context\r\n * (если в context нет свойства, то не записываем)\r\n * @param {string} string\r\n * @param {AltrpModel} context\r\n */\r\nexport function parseParamsFromString(string, context = {}){\r\n  const params = {};\r\n\r\n  if(! string){\r\n    return params;\r\n  }\r\n  const lines = string.split('\\n');\r\n  lines.forEach((line)=>{\r\n    let [left, right] = line.split('|');\r\n    if(! left || ! right){\r\n      return;\r\n    }\r\n    left = left.trim();\r\n    right = right.trim();\r\n    if(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)){\r\n      if(context.getProperty(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)[0])){\r\n        params[left] = context.getProperty(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)[0]) || '';\r\n      } else {\r\n        params[left] = '';\r\n      }\r\n    } else {\r\n      params[left] = right;\r\n    }\r\n    if(_.isObject(params[left])){\r\n      delete params[left];\r\n    }\r\n  });\r\n  return params;\r\n}\r\n\r\n/**\r\n * Функция для проверки условий\r\n * @param {[]} conditions\r\n * @param {boolean} AND - логичекое И или ИЛИ\r\n * @param {AltrpModel} model\r\n * @return {boolean}\r\n */\r\nexport function conditionsChecker(conditions = [], AND = true, model){\r\n  if(! conditions.length){\r\n    return true;\r\n  }\r\n  let result = AND;\r\n  _.each(conditions, c =>{\r\n    if(AND){\r\n      result *= _conditionChecker(c, model);\r\n    } else {\r\n      result += _conditionChecker(c, model);\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\n/**\r\n * Функция для проверки одного условия\r\n * @param c\r\n * @param {AltrpModel} model\r\n * @return {boolean}\r\n */\r\nfunction _conditionChecker(c, model){\r\n  let result = 0;\r\n  const {\r\n     modelField,\r\n     operator,\r\n     value,\r\n  } = c;\r\n  switch(operator){\r\n    case 'empty':{\r\n      return ! model.getProperty(modelField, '');\r\n    }\r\n    case 'not_empty':{\r\n      return ! ! model.getProperty(modelField, '');\r\n    }\r\n    case '==':{\r\n      return _.isEqual(model.getProperty(modelField, ''), value );\r\n    }\r\n    case '<>':{\r\n      return ! _.isEqual(model.getProperty(modelField, ''), value );\r\n    }\r\n    case '>':{\r\n      return Number(model.getProperty(modelField, '')) > Number(value);\r\n    }\r\n    case '>=':{\r\n      return Number(model.getProperty(modelField, '')) >= Number(value);\r\n    }\r\n    case '<':{\r\n      return Number(model.getProperty(modelField, '')) < Number(value);\r\n    }\r\n    case '<=':{\r\n      return Number(model.getProperty(modelField, '')) <= Number(value);\r\n    }\r\n  }\r\n  return result;\r\n}"],"sourceRoot":""}