{"version":3,"sources":["webpack:///./resources/modules/admin/src/sass/components/admin-pagination.scss","webpack:///./resources/modules/editor/src/sass/assets-browser.scss","webpack:///./resources/modules/admin/src/svgs/left.svg","webpack:///./resources/modules/editor/src/js/classes/AltrpModel.js","webpack:///./resources/modules/editor/src/js/classes/Resource.js","webpack:///./resources/modules/admin/src/js/store/modal-settings/reducers.js","webpack:///./resources/modules/admin/src/js/store/admin-state/reducers.js","webpack:///./resources/modules/admin/src/js/store/admin-logo/reducers.js","webpack:///./resources/modules/admin/src/js/store/ace-editor/reducers.js","webpack:///./resources/modules/admin/src/js/store/reducers.js","webpack:///./resources/modules/admin/src/js/store/store.js","webpack:///./resources/modules/admin/src/js/store/modal-settings/actions.js","webpack:///./resources/modules/editor/src/js/classes/AltrpUser.js","webpack:///./resources/modules/front-app/src/js/store/current-user/reducers.js","webpack:///./resources/modules/front-app/src/js/store/current-user/actions.js","webpack:///./resources/modules/front-app/src/js/store/current-model/reducers.js","webpack:///./resources/modules/front-app/src/js/store/current-model/actions.js","webpack:///./resources/modules/admin/src/sass/admin-style.scss?e3af","webpack:///./resources/modules/admin/src/sass/components/admin-pagination.scss?b53c","webpack:///./resources/modules/editor/src/sass/assets-browser.scss?44cc","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./resources/modules/admin/src/svgs/admin__logo.svg","webpack:///./resources/modules/admin/src/components/AdminLogo.js","webpack:///./resources/modules/admin/src/svgs/bars.svg","webpack:///./resources/modules/admin/src/components/AdminTable.js","webpack:///./resources/modules/admin/src/components/AllPages.js","webpack:///./resources/modules/admin/src/js/helpers.js","webpack:///./resources/modules/admin/src/components/Updates.js","webpack:///./resources/modules/admin/src/components/AutoUpdateInput.js","webpack:///./resources/modules/admin/src/components/StylesSettings.js","webpack:///./resources/modules/admin/src/components/settings/Import.js","webpack:///./resources/modules/admin/src/components/settings/Export.js","webpack:///./resources/modules/admin/src/components/AdminSettings.js","webpack:///./resources/modules/admin/src/svgs/assets.svg","webpack:///./resources/modules/admin/src/svgs/dashboard.svg","webpack:///./resources/modules/admin/src/svgs/pages.svg","webpack:///./resources/modules/admin/src/svgs/plugins.svg","webpack:///./resources/modules/admin/src/svgs/reports.svg","webpack:///./resources/modules/admin/src/svgs/settings.svg","webpack:///./resources/modules/admin/src/svgs/tables.svg","webpack:///./resources/modules/admin/src/svgs/templates.svg","webpack:///./resources/modules/admin/src/svgs/users.svg","webpack:///./resources/modules/admin/src/svgs/vector.svg","webpack:///./resources/modules/admin/src/svgs/user.svg","webpack:///./resources/modules/admin/src/components/users/Users.js","webpack:///./resources/modules/admin/src/components/altrp-select/AltrpSelect.js","webpack:///./resources/modules/admin/src/components/users/UserForm.js","webpack:///./resources/modules/admin/src/components/users/AddUserPage.js","webpack:///./resources/modules/admin/src/components/users/EditUserPage.js","webpack:///./resources/modules/admin/src/components/users/UsersTools.js","webpack:///./resources/modules/admin/src/components/Assets.js","webpack:///./resources/modules/admin/src/components/dashboard/widgetTypes.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/Spinner.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/EmptyWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/services/getWidgetData.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicBarChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicPieChart.js","webpack:///./resources/modules/admin/src/components/dashboard/Spinner.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicAreaChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicLineChart.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicTableWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/widgets/DynamicDonutChart.js","webpack:///./resources/modules/admin/src/components/dashboard/WidgetDiagram.js","webpack:///./resources/modules/admin/src/components/dashboard/dataSources.js","webpack:///./resources/modules/admin/src/components/dashboard/EditWidget.js","webpack:///./resources/modules/admin/src/components/dashboard/AddWidget.js","webpack:///./resources/modules/admin/src/components/Dashboard.js","webpack:///./resources/modules/admin/src/components/Plugins.js","webpack:///./resources/modules/admin/src/components/Reports.js","webpack:///./resources/modules/admin/src/components/Tables.js","webpack:///./resources/modules/admin/src/svgs/right.svg","webpack:///./resources/modules/admin/src/components/Pagination.js","webpack:///./resources/modules/admin/src/components/Templates.js","webpack:///./resources/modules/admin/src/svgs/times.svg","webpack:///./resources/modules/admin/src/components/AdminModal.js","webpack:///./resources/modules/admin/src/components/AddPage.js","webpack:///./resources/modules/admin/src/svgs/bell.svg","webpack:///./resources/modules/admin/src/svgs/logout.svg","webpack:///./resources/modules/admin/src/components/UserTopPanel.js","webpack:///./resources/modules/editor/src/js/store/current-element/reducers.js","webpack:///./resources/modules/editor/src/js/store/template-status/reducers.js","webpack:///./resources/modules/editor/src/js/store/element-drag/reducers.js","webpack:///./resources/modules/editor/src/js/store/element-drag/actions.js","webpack:///./resources/modules/editor/src/js/store/current-context-element/reducers.js","webpack:///./resources/modules/editor/src/js/store/dynamic-content/reducers.js","webpack:///./resources/modules/editor/src/js/store/controller-value/reducers.js","webpack:///./resources/modules/editor/src/js/store/setting-section/reducers.js","webpack:///./resources/modules/editor/src/js/store/active-settings-tab/reducers.js","webpack:///./resources/modules/editor/src/js/store/state-section/reducers.js","webpack:///./resources/modules/editor/src/js/store/responsive-switcher/reducers.js","webpack:///./resources/modules/editor/src/js/store/template-data/reducers.js","webpack:///./resources/modules/editor/src/js/store/reducers.js","webpack:///./resources/modules/editor/src/js/store/current-element/actions.js","webpack:///./resources/modules/editor/src/js/store/current-context-element/actions.js","webpack:///./resources/modules/editor/src/js/store/template-status/actions.js","webpack:///./resources/modules/editor/src/js/store/dynamic-content/actions.js","webpack:///./resources/modules/editor/src/js/store/controller-value/actions.js","webpack:///./resources/modules/editor/src/js/store/setting-section/actions.js","webpack:///./resources/modules/editor/src/js/store/active-settings-tab/actions.js","webpack:///./resources/modules/editor/src/js/store/state-section/actions.js","webpack:///./resources/modules/editor/src/js/store/responsive-switcher/actions.js","webpack:///./resources/modules/editor/src/js/store/template-data/actions.js","webpack:///./resources/modules/editor/src/js/store/store.js","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/js/helpers.js","webpack:///./resources/modules/admin/src/components/Models.js","webpack:///./resources/modules/admin/src/components/models/EditModelForm.js","webpack:///./resources/modules/admin/src/components/models/EditModel.js","webpack:///./resources/modules/admin/src/components/models/FieldCalculationLogic.js","webpack:///./resources/modules/admin/src/components/models/AddFieldForm.js","webpack:///./resources/modules/admin/src/components/models/EditField.js","webpack:///./resources/modules/admin/src/components/models/AddRelationForm.js","webpack:///./resources/modules/admin/src/components/models/AddRelation.js","webpack:///./resources/modules/admin/src/components/models/AddDataSourceForm.js","webpack:///./resources/modules/admin/src/components/models/AddDataSource.js","webpack:///./resources/modules/admin/src/components/sql-builder/AggregateComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/JoinComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/helpers.js","webpack:///./resources/modules/admin/src/components/sql-builder/ConditionComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/OrderByComponent.js","webpack:///./resources/modules/admin/src/components/sql-builder/SQLBuilderForm.js","webpack:///./resources/modules/admin/src/components/SQLBuilder.js","webpack:///./resources/modules/admin/src/components/models/SqlEditor.js","webpack:///./resources/modules/admin/src/components/AccessOptions.js","webpack:///./resources/modules/admin/src/components/access/RoleForm.js","webpack:///./resources/modules/admin/src/components/access/RolePage.js","webpack:///./resources/modules/admin/src/components/access/PermissionForm.js","webpack:///./resources/modules/admin/src/components/access/PermissionPage.js","webpack:///./resources/modules/admin/src/components/tables/TableForm.js","webpack:///./resources/modules/admin/src/components/tables/AddTable.js","webpack:///./resources/modules/admin/src/components/tables/EditTable.js","webpack:///./resources/modules/admin/src/components/tables/MigrationsTable.js","webpack:///./resources/modules/admin/src/components/tables/AddModelPage.js","webpack:///./resources/modules/admin/src/components/tables/AccessorsPage.js","webpack:///./resources/modules/admin/src/components/tables/AddControllerPage.js","webpack:///./resources/modules/admin/src/components/tables/SettingTable.js","webpack:///./resources/modules/admin/src/components/tables/AddMigrationPage.js","webpack:///./resources/modules/admin/src/components/AdminVersion.js","webpack:///./resources/modules/admin/src/components/SQLEditors.js","webpack:///./resources/modules/admin/src/Admin.js","webpack:///./resources/modules/admin/src/js/store/admin-state/actions.js","webpack:///./resources/modules/editor/src/js/store/assets-browser/actions.js","webpack:///./resources/modules/admin/src/js/store/admin-logo/actions.js","webpack:///./resources/modules/editor/src/js/store/assets-browser/reducers.js","webpack:///./resources/modules/admin/src/js/store/ace-editor/actions.js","webpack:///./resources/modules/editor/src/js/consts.js","webpack:///./resources/modules/admin/src/sass/admin-style.scss","webpack:///./resources/modules/front-app/src/js/helpers.js"],"names":["escape","module","exports","push","i","styles","props","width","height","fill","xmlns","d","stroke","strokeWidth","AltrpModel","data","this","cloneDeep","name","defaultValue","get","Resource","route","id","url","fetch","method","headers","then","res","ok","Promise","reject","text","status","json","searchString","indexOf","_token","options","body","JSON","stringify","files","fileType","String","Math","random","slice","formData","FormData","length","size","type","console","log","append","params","queryString","defaultState","fields","active","title","submitButton","submit","success","adminEnable","window","admin_logo","AceEditor","combineReducers","modalSettings","state","action","SET_MODAL_SETTINGS","TOGGLE_MODAL","adminState","SET_DISABLED","SET_ENABLE","adminLogo","SET_LOGO","logoData","assetsManagerSettings","assetsSettingsReducer","aceEditorReducer","SET_ACE","store","createStore","rootReducer","setModalSettings","settings","toggleModal","AltrpUser","getProperty","permissions","_","isArray","ownPermissions","find","ownPermission","permission","parseInt","isString","roles","ownRoles","ownRole","role","isAuth","hasPermissions","hasRoles","defaultModel","currentUserReducer","user","currentModelReducer","model","content","transform","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","keys","Object","resolve","cx","cy","r","AdminLogo","href","target","className","assetType","renderAsset","Component","connect","AdminTable","filterByKeyboard","isFunction","value","search","onChange","changeHandler","columns","column","rows","row","index","tag","children","editUrl","Link","to","pathname","is_button","button","onClick","is_boolean","toString","React","createElement","quickActions","quickAction","item","replace","confirm","resource","response","after","AllPages","getPages","getAll","setState","pages","redirect","location","assign","iconsManager","IconsManager","logout","post","titleToName","str","split","char","isUndefined","join","transliterate","toLowerCase","objectDeepCleaning","collection","Array","hasOwnProperty","deleteEmptyPropsDeep","deleteProps","forEach","isEmpty","Updates","needUpdate","updateAltrp","bind","dispatch","setAdminDisable","result","setNeedUpdate","setAdminEnable","setTimeout","document","reload","updateMessage","AutoUpdateInput","disabled","changeValue","onKeyDown","resourceid","keyCode","newValue","changevalue","put","column_value","inputProps","onBlur","StylesSettings","htmlFor","Import","onSubmit","preventDefault","postFiles","inputFile","current","alert","message","createRef","ref","required","Export","AdvancedSettings","lazy","AdminSettings","switchTab","activeTab","hash","selectedIndex","onSelect","Suspense","fallback","attr","viewBox","data-name","Users","role_filter","users_result","placeholder","aria-controls","full_name","email","last_login_at","renderScrollbar","autoHeight","AltrpSelect","loadOptions","callback","optionsResource","optionsRoute","customStyles","menuPortal","base","zIndex","selectProps","onInputChange","noOptionsMessage","menuPortalTarget","menuPlacement","menuPosition","components","MenuList","captureMenuScroll","UserForm","changeRolesHandler","usermeta","_roles","changePermissionsHandler","_permissions","errors","redirectAfterSave","redirectAfterError","redirect_error_url","rolesOptions","permissionsOptions","saveUser","user_data","usermeta_data","usermeta_resource","source","field","redirect_url","password","password_confirmation","first_name","second_name","patronymic","closeMenuOnSelect","filter","isMulti","p","AddUserPage","withRouter","EditUserPage","user_id","match","UsersTools","defaultChecked","Assets","onDragOver","onDragLeave","onDrop","deleteClick","uploaderClasses","assets","itemDeleteClasses","assetId","currentTarget","dataset","assetid","newAssets","Number","concat","stopPropagation","updateAssets","dataTransfer","UploadIcon","getIconComponent","CloseIcon","multiple","asset","style","data-assetid","TABLE","widgetTypes","Spinner","EmptyWidget","obj","reduce","encodeURIComponent","getWidgetData","axios","DynamicBarChart","widget","useState","isLoading","setIsLoading","setData","getData","useCallback","charts","useEffect","entries","label","series","colorScheme","bar","gradient","stops","stopOpacity","legend","orientation","DynamicPieChart","explode","fontSize","fontFill","DynamicAreaChart","color","newData","Date","xAxis","tickSeries","format","firstDate","shift","lastDate","pop","diff","formatDistanceStrict","unit","locale","ru","markLine","line","area","DynamicLineChart","sortData","order","varA","toUpperCase","varB","comparison","DynamicTableWidget","sort","summary","useMemo","acc","isVertical","DynamicDonutChart","doughnut","WidgetDiagram","EditWidget","diagram","onSave","show","setShow","setWidget","Modal","onHide","animation","centered","Header","closeButton","Title","Body","Row","Col","Form","Group","controlId","Label","Control","as","custom","schemes","dataSources","Check","checked","Footer","Button","variant","WidgetParams","Dashboard","diagrams","setDiagrams","showEditForm","setShowEditForm","showAddForm","setShowAddForm","selectedWidget","setSelectedWidget","addDiagram","getDiagrams","parse","showSettingsModal","findIndex","itemIndex","AddWidget","Plugins","Reports","useDispatch","reports","setReports","class","function","open","preview","getReports","Tables","modules","setModules","urlModules","Pagination","currentPage","num","changePage","pageCount","setCurrentPage","altrp_version","itemsCount","Templates","templates","allTemplates","templateAreas","activeTemplateArea","templateTypesResource","changeActiveArea","generateTemplateJSON","areaId","setActiveArea","updateTemplates","getQueried","page","pageSize","template","template_area","element","file","Blob","URL","createObjectURL","download","appendChild","click","substr","getAreasOptions","tabClasses","data-area","downloadJSONFile","fillRule","clipRule","AdminModal","storeSubscribe","subscribe","getState","valid","errorMessage","error","modalClasses","data-field","data-error","option","AddPage","models","model_resource","templateResource","savePage","getOptions","models_res","pageData","path","model_id","defaultOptions","UserTopPanel","currentElement","CONSTANTS","TEMPLATE_UPDATED","dragState","contentData","currentTab","SCREENS","currentContextElement","templateStatus","elementDrag","dynamicContentState","controllerValue","settingSectionMenu","newState","elementName","tab","sectionID","currentState","currentScreen","screen","currentModel","templateData","currentUser","composeWithDevTools","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","getAssets","selectedAsset","mediaAssets","mediaResource","getIconsList","assetname","setActiveTab","assetsToggle","onChoose","classes","buttonClasses","data-tab","AssetContent","assetProps","iconComponent","src","filename","data-assetname","columnsModel","columnsDataSource","Models","getDataSources","dataSourcesSearch","dataSourcesResource","dataSourcesCurrentPage","itemsPerPage","preset","s","data_sources","dataSourcesPageCount","getModels","modelsSearch","modelsResource","modelsCurrentPage","modelsPageCount","changeSearchHandler","changeDataSourcesSearchHandler","modelsCount","dataSourcesCount","pagination","dataSource","ceil","EditModelForm","submitHandler","deleteHandler","titleChangeHandler","persist","prevProps","created_at","updated_at","parent_model_id","description","table_id","isDisabled","soft_deletes","time_stamps","submitText","edit","EditModel","updateFields","fieldsResource","updateRelations","relationsResource","relations","updateQueries","queriesResource","queries","history","bounded_model","sql_editors","relation","query","FieldCalculationLogic","rightType","is1stString","is2ndString","right","string","fieldId","string_1","fieldId_1","string_2","fieldId_2","rightTypeHandler","rightChangeHandler","setRight","_state","fieldsOptions","deleteItemHandler","left","operator","operatorChangeHandler","includes","fieldTypeOptions","attributeOptions","inputTipeOptions","AddFieldForm","isAlways","is_label","is_title","is_auth","length_value","default","attribute","input_type","null","indexed","editable","calculation","calculation_logic","itemChangeHandler","addItemHandler","filedsResource","modelId","fieldsOptionsResource","substring","isNaN","default_","_null","splice","readOnly","EditField","modelTitle","relationTypeOptions","deleteUpdateOptions","AddRelationForm","modelsOptions","add_belong_to","always_with","local_key","foreign_key","onDelete","onUpdate","selfFieldsOptions","foreignFieldsOptions","updateForeignFieldOptions","target_model_id","changeTargetModel","modelName","_relationTypeOptions","hideAddBelongTo","renderLocalKey","renderForeignKey","AddRelation","typeOptions","mockedOptions","AddDataSourceForm","with","multipleSelectChangeHandler","array","AddDataSource","AggregateComponent","alias","columnsOptions","tablesOptions","tableId","JoinComponent","targetColumnOptions","target_table","source_column","target_column","sourceColumnOptions","getDatePickerFormat","getMomentFormat","conditionTypeOptions","dateTypesOptions","ConditionComponent","isDateVar","dateValueFormatChange","moment","isFirst","condition_type","or","not","values","first_column","second_column","selected","_d","showTimeSelect","showYearPicker","showTimeSelectOnly","showMonthYearPicker","dateFormat","OrderByComponent","SQLBuilderForm","changeGroupBy","group_by","_group_by","changeColumns","_columns","c","changeRelations","_relations","changeRoles","access","changePermission","valueChangeHandler","aggregateToggle","isAggregateRaw","aggregates","conditionAddHandler","conditions","offsetDeleteHandler","offset","limitDeleteHandler","limit","setRelations","setColumns","joins","order_by","relationsOptions","selfFields","counter","selfFieldsResource","sqlResource","aggregateChangeHandler","aggregateAddHandler","aggregateDeleteHandler","joinChangeHandler","joinAddHandler","joinDeleteHandler","conditionChangeHandler","orderByChangeHandler","orderByAddHandler","orderByDeleteHandler","condition","trim","conditionDeleteHandler","f","SQLBuilder","SqlEditor","aceEditorObserver","storeState","sql","sqlEditorResource","paged","is_object","auth","editor","mode","theme","setOptions","showPrintMargin","enableLiveAutocompletion","rolesResource","permissionsResource","AccessOptions","getRoles","getPermissions","RoleForm","display_name","isEditing","Boolean","RolePage","PermissionForm","PermissionPage","TableForm","saveTable","AddTable","EditTable","setting_url","MigrationsTable","migrations","table","table_columns","migrations_resource","table_resource","table_res","AddModelPage","relationship_types","addModalShow","onDeleteClick","default_relationship","model_class","accessors_table_columns","addAccessorModalShow","onDeleteAccessorClick","default_accessor","formula","modal_toogle","actual_columns","fillable_columns","user_cols","fillable_cols","relationships","pk","accessors","selected_relationship","relationship","selected_accessor","accessor","save_model_resource","accessors_resource","addFillableColumn","deleteFillableColumn","addUserColsColumn","deleteUserColsColumn","onChangeRelationship","saveModel","addRelationship","getModalClasses","columns_res","model_data","setCols","accessors_data","accsessors","cols","$push","$splice","field_name","getTime","$set","AccessorsPage","addAccessor","AddControllerPage","prefix","namespace","controller_resource","save_controller_resource","saveController","addRelation","deleteRelation","controller_res","setRelation","SettingTable","AddMigrationPage","column_types","default_column","places","unique","default_key","source_table_id","key_actions","addModalColumnShow","onDeleteColumnClick","table_keys","addModalKeyShow","onDeleteKeyClick","column_modal_toggle","key_modal_toggle","rename_columns","selected_column","selected_key","migration_resource","onChangeColumn","onChangeKey","addColumn","addKey","changeName","saveMigration","isShowField","keys_res","modal_toggle","val","charAt","name_value","main_url","AdminVersion","_export","initPaginationProps","SQLEditors","sql_editorsPagination","sql_editorsResource","sql_editor","ReactDOM","pagesMenuShow","toggleMenu","updateAdminState","adminClasses","exact","component","ASSETS_SHOW","ASSETS_TOGGLE","assetsShow","setAdminLogo","media","setAceEditor","TEMPLATE_NEED_UPDATE","TEMPLATE_SAVING","DEFAULT_BREAKPOINT","icon","mediaQuery","renderIcon","backgroundImage"],"mappings":"6EAAA,IAAIA,EAAS,EAAQ,MACXC,EAAOC,QAAU,EAAQ,GAAR,EAAqE,IAKxFC,KAAK,CAACF,EAAOG,EAAI,y8BAA28BJ,EAAO,EAAQ,MAA0B,4SAA6S,M,qBCN1zCE,EAAUD,EAAOC,QAAU,EAAQ,GAAR,EAAkE,IAErFE,EAAE,EAAQ,KAAgG,IAGlHF,EAAQC,KAAK,CAACF,EAAOG,EAAI,soIAAyoI,M,4FCJlpI,wBACdC,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,IAAIC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,iBAAiBC,OAAO,UAAUC,YAAY,W,+ECE3IC,E,WACJ,aAAuB,IAAXC,EAAW,uDAAJ,GAAI,YACrBC,KAAKD,KAAOE,oBAAUF,G,8CAQtB,OAAOC,KAAKD,O,kCASFG,GAAyB,IAAnBC,EAAmB,uDAAJ,GAC/B,OAAOC,cAAIJ,KAAKD,KAAMG,EAAMC,O,KAIjBL,O,0HCxBTO,E,WAUJ,WAAYN,GAGV,GAHe,YAEfC,KAAKM,MAAQP,EAAKO,OACbN,KAAKM,MACR,KAAM,c,8CAONC,GACF,IAAKA,EACH,KAAM,mBAGR,IAOIC,EAAMR,KAAKM,MAAQ,IAAMC,EAC7B,OAAOE,MAAMD,EARC,CACZE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAKOC,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,+BASb,IAOIX,EAAMR,KAAKM,MACf,OAAOG,MAAMD,EARC,CACZE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAKOC,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,6BASRC,GACL,IAMIZ,EAMJ,OAJEA,GAD8B,IAA7BR,KAAKM,MAAMe,QAAQ,KACdrB,KAAKM,MAAL,aAAmBc,GAEnBpB,KAAKM,MAAL,aAAmBc,GAEpBX,MAAMD,EAZC,CACZE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBASOC,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,6BAQS,IAAnBpB,EAAmB,uDAAZ,GAAIY,EAAQ,uCACtBA,EAAUA,GAAW,CACnB,eAAgBW,OAChB,eAAgB,mBAChB,OAAU,oBAEZ,IAAIC,EAAU,CACZb,OAAQ,OACRc,KAAMC,KAAKC,UAAU3B,GACrBY,WAEF,OAAOF,MAAMT,KAAKM,MAAOiB,GAASX,MAAK,SAAAC,GACrC,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,gCAQLQ,EAAOC,GAEAC,OAAOC,KAAKC,UAAUC,MAAM,GAC3CJ,EAAWA,GAAY,QAMvB,IALA,IAAIjB,EAAU,CACZ,eAAgBW,QAGdW,EAAW,IAAIC,SACV9C,EAAI,EAAGA,EAAIuC,EAAMQ,OAAQ/C,IAC7BuC,EAAMvC,GAAGgD,KAhIW,UAgIiD,IAApCT,EAAMvC,GAAGiD,KAAKhB,QAAQO,GACxDU,QAAQC,IAAIZ,EAAMvC,IAGpB6C,EAASO,OAAT,gBAAyBpD,EAAzB,KAA+BuC,EAAMvC,IAEvC,IAAImC,EAAU,CACZb,OAAQ,OACRc,KAAMS,EACNtB,WAEF,OAAOF,MAAMT,KAAKM,MAAOiB,GAASX,MAAK,SAAAC,GACrC,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,0BAOXZ,EAAIR,GACN,IAAIwB,EAAU,CACZb,OAAQ,MACRc,KAAMC,KAAKC,UAAU3B,GACrBY,QAAS,CACP,eAAgBW,OAChB,eAAgB,qBAGhBd,EAAMR,KAAKM,OAASC,EAAK,IAAMA,EAAK,IACxC,OAAOE,MAAMD,EAAKe,GAASX,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,+BAMA,IAARZ,EAAQ,uDAAH,GAENgB,EAAU,CACZb,OAAQ,SACRC,QAAS,CACP,eAAgBW,OAChB,eAAgB,qBAGhBd,EAAMR,KAAKM,OAASC,EAAK,IAAMA,EAAK,IACxC,OAAOE,MAAMD,EAAKe,GAASX,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,mCAQb,IAMIX,EAAMR,KAAKM,MAAQ,WACvB,OAAOG,MAAMD,EAPC,CACZE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAIOC,MAAK,SAAAC,GAC9B,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,Y,oDASEsB,G,kFACXlB,EAAU,CACZb,OAAQ,MACRC,QAAS,CACP,eAAgB,qBAGhBH,E,UAASR,KAAKM,M,YAASoC,IAAYhB,UAAUe,I,SAChChC,MAAMD,EAAKe,GAASX,MAAK,SAAAC,GACxC,OAAc,IAAXA,EAAIC,GACEC,QAAQC,OAAOH,EAAII,OAAQJ,EAAIK,QAEjCL,EAAIM,U,cAJTN,E,yBAOGA,G,qGAKIR,O,soBC1Of,IAAMsC,EAAe,CACnBC,OAAQ,GACRC,QAAQ,EACRC,MAAO,QACPC,aAAc,SACdC,OAAQ,SAASjD,GACfuC,QAAQC,IAAIxC,IAEdkD,QAAS,SAACpC,GACRyB,QAAQC,IAAI1B,K,6kBCThB,IAAM8B,EAAe,CACnBO,aAAa,G,0OCDf,IAAMP,EAAeQ,OAAOC,WAAaD,OAAOC,WAAa,G,oBCAvDT,EAAe,CACnBU,UAAW,MCKEC,gCAAgB,CAC7BC,cJMK,SAA8BC,EAAOC,GAE1C,OADAD,EAAQA,GAASb,EACTc,EAAOpB,MACb,KAAKqB,IACHF,EAAQ,CACNZ,OAAQa,EAAOb,OACfE,MAAOW,EAAOX,OAASH,EAAaG,MACpCE,OAAQS,EAAOT,QAAUL,EAAaK,OACtCD,aAAcU,EAAOV,cAAgBJ,EAAaI,aAClDE,QAASQ,EAAOR,SAAWN,EAAaM,QACxCJ,OAAQY,EAAOZ,QAElB,MACD,KAAKc,IACHH,EAAQ,EAAH,KACAb,GADA,IAEHE,QAAUW,EAAMX,SAItB,OAAOW,GIzBPI,WHJK,SAA2BJ,EAAOC,GAEvC,OADAD,EAAQA,GAASb,EACTc,EAAOpB,MACb,KAAKwB,IACHL,EAAQ,OACDA,GADF,IAEHN,aAAa,IAEhB,MACD,KAAKY,IACHN,EAAQ,OACHA,GADA,IAEHN,aAAa,IAInB,OAAOM,GGXPO,UFPK,SAA0BP,EAAOC,GAEtC,OADAD,EAAQA,GAASb,EACTc,EAAOpB,MACb,KAAK2B,IACHR,E,iWAAQ,IACDC,EAAOQ,UAIlB,OAAOT,GEDPU,sBAAuBC,IACvBC,iBDPK,SAA0BZ,EAAOC,GAEtC,OADAD,EAAQA,GAASb,EACTc,EAAOpB,MACb,KAAKgC,IACHb,EAAQ,CACNH,UAAWI,EAAOJ,WAIxB,OAAOG,KEZHc,EAAQC,sBAAYC,GACXF,O,8vBCJR,IAAMZ,EAAqB,qBACrBC,EAAe,eAErB,SAASc,EAAiBC,GAC/B,cACKA,GADL,IAEErC,KAAMqB,IAIH,SAASiB,IACd,MAAO,CACLtC,KAAMsB,K,wkBCgFKiB,E,sIA/EX,OAAO5E,KAAK6E,YAAY,YAAY,K,+BAOpC,OAAO7E,KAAK6E,YAAY,cAAc,K,uCAQR,IAAjBC,EAAiB,uDAAH,GACtBC,EAAEC,QAAQF,KACbA,EAAc,CAACA,IAEjB,IAAIG,EAAiBjF,KAAK6E,YAAY,cAAe,IACrD,OAAOE,EAAEG,KAAKD,GAAgB,SAAAE,GAC5B,OAAOJ,EAAEG,KAAKJ,GAAa,SAAAM,GACzB,OAAGC,SAASD,GACHC,SAASD,KAAgBC,SAASF,EAAc5E,IAEtDwE,EAAEO,SAASF,GACLA,IAAeD,EAAcjF,UADtC,U,iCAWc,IAAXqF,EAAW,uDAAH,GACVR,EAAEC,QAAQO,KACbA,EAAQ,CAACA,IAEX,IAAIC,EAAWxF,KAAK6E,YAAY,QAAS,IACzC,OAAOE,EAAEG,KAAKM,GAAU,SAAAC,GACtB,OAAOV,EAAEG,KAAKK,GAAO,SAAAG,GACnB,OAAGL,SAASK,GACHL,SAASK,KAAUL,SAASI,EAAQlF,IAE1CwE,EAAEO,SAASI,GACLA,IAASD,EAAQvF,UAD1B,U,yCAcwC,IAA7B4E,EAA6B,uDAAf,GAAIS,EAAW,uDAAH,GACzC,QAAKvF,KAAK2F,WAGVJ,EAAQR,EAAEC,QAAQO,GAASA,EAAQ,KACnCT,EAAcC,EAAEC,QAAQF,GAAeA,EAAc,IACnC3C,SAAUoD,EAAMpD,WAG/BnC,KAAK4F,eAAed,MAGpB9E,KAAK6F,SAASN,S,UA9EGzF,GCJlBgG,EAAe,GAId,SAASC,EAAmBC,EAAMvC,GAEvC,OADAuC,EAAOA,GAAQF,EACPrC,EAAOpB,MACb,ICV+B,sBDW7B2D,EAAOvC,EAAOuC,KAGlB,OAAGA,aAAgBpB,EACVoB,EAEF,IAAIpB,EAAUoB,K,gFEdjBF,EAAe,GAId,SAASG,EAAoBC,EAAOzC,GAEzC,OADAyC,EAAQA,GAASJ,EACTrC,EAAOpB,MACb,ICVgC,uBDW9B6D,EAAQzC,EAAOyC,MAGnB,OAAGA,aAAiBpG,IACXoG,EAEF,IAAIpG,IAAWoG,K,oBEhBxB,IAAIC,EAAU,EAAQ,IAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAAClH,EAAOG,EAAI+G,EAAS,MAOhE,IAAI5E,EAAU,CAAC,KAAM,EAErB,eAPI6E,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEH,EAAS5E,GAEzF4E,EAAQI,SAAQtH,EAAOC,QAAUiH,EAAQI,QAG3CtH,EAAOuH,IAAIC,OAAO,IAA4H,WAC7I,IAAIC,EAAa,EAAQ,IAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACzH,EAAOG,EAAIsH,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXX,EAAQI,OAAQG,EAAWH,QAEjB,MAAM,IAAIQ,MAAM,uDAE5BT,EAAOI,MAGRzH,EAAOuH,IAAIQ,SAAQ,WAAaV,Q,oBC1CjC,IAAIH,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAAClH,EAAOG,EAAI+G,EAAS,MAOhE,IAAI5E,EAAU,CAAC,KAAM,EAErB,eAPI6E,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAyEH,EAAS5E,GAE5F4E,EAAQI,SAAQtH,EAAOC,QAAUiH,EAAQI,QAG3CtH,EAAOuH,IAAIC,OAAO,KAAuI,WACxJ,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACzH,EAAOG,EAAIsH,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXX,EAAQI,OAAQG,EAAWH,QAEjB,MAAM,IAAIQ,MAAM,uDAE5BT,EAAOI,MAGRzH,EAAOuH,IAAIQ,SAAQ,WAAaV,Q,oBC1CjC,IAAIH,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAAClH,EAAOG,EAAI+G,EAAS,MAOhE,IAAI5E,EAAU,CAAC,KAAM,EAErB,eAPI6E,EAQJ,gBAAqBC,GAEjBC,EAAS,EAAQ,GAAR,CAAsEH,EAAS5E,GAEzF4E,EAAQI,SAAQtH,EAAOC,QAAUiH,EAAQI,QAG3CtH,EAAOuH,IAAIC,OAAO,KAA+H,WAChJ,IAAIC,EAAa,EAAQ,KAiBzB,GAfyB,iBAAfA,IAAyBA,EAAa,CAAC,CAACzH,EAAOG,EAAIsH,EAAY,OAE3D,SAASC,EAAGC,GACzB,IAAIC,EAAKC,EAAM,EAEf,IAAID,KAAOF,EAAG,CACb,IAAIC,GAAKD,EAAEE,KAASD,EAAEC,GAAM,OAAO,EACnCC,IAGD,IAAID,KAAOD,EAAGE,IAEd,OAAe,IAARA,EAVK,CAWXX,EAAQI,OAAQG,EAAWH,QAEjB,MAAM,IAAIQ,MAAM,uDAE5BT,EAAOI,MAGRzH,EAAOuH,IAAIQ,SAAQ,WAAaV,Q,oBC3CjC,IAAIW,EAAM,CACT,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,WAAY,IACZ,cAAe,IACf,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,aAAc,IACd,gBAAiB,IACjB,WAAY,IACZ,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAASC,EAAeC,GACvB,IAAI5G,EAAK6G,EAAsBD,GAC/B,OAAOE,EAAoB9G,GAE5B,SAAS6G,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAEL,EAAKE,GAAM,CACpC,IAAII,EAAI,IAAIR,MAAM,uBAAyBI,EAAM,KAEjD,MADAI,EAAEC,KAAO,mBACHD,EAEP,OAAON,EAAIE,GAEZD,EAAeO,KAAO,WACrB,OAAOC,OAAOD,KAAKR,IAEpBC,EAAeS,QAAUP,EACzBnI,EAAOC,QAAUgI,EACjBA,EAAe3G,GAAK,K,kOC9RJ,gBACdlB,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,MAAMC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,w1EAAw1EF,KAAK,SAAS,4BAAQmI,GAAG,KAAKC,GAAG,KAAKC,EAAE,KAAKrI,KAAK,YAAY,0BAAME,EAAE,itBAAitBF,KAAK,c,obCCntGsI,E,gCACJ,WAAYzI,GAAM,+BACVA,G,6CAGN,OAAO,uBAAG0I,KAAK,IAAIC,OAAO,SAASC,UAAU,eAAelI,KAAKV,MAAMyE,UAAUoE,UAC3EC,YAAYpI,KAAKV,MAAMyE,WACvB,kBAAC,EAAD,W,GAPcsE,aAkBTC,mBANf,SAAyB9E,GACvB,MAAO,CACLO,UAAWP,EAAMO,aAINuE,CAAyBP,GCtBxB,gBACd1I,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,KAAKC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMG,KAAK,OAAOE,EAAE,8C,8dCsKjG4I,E,kLAhKbC,iBAAmB,SAACjB,GAEdxC,EAAE0D,WAAW,EAAKnJ,MAAMkJ,mBAC1B,EAAKlJ,MAAMkJ,iBAAiBjB,EAAEU,OAAOS,Q,+CAIhC,WACAC,EAAU3I,KAAKV,MAAfqJ,OACP,OAAO,yBAAKT,UAAU,eACnBS,GAAU,yBAAKT,UAAU,eACxB,2BAAOQ,MAAOC,EAAOD,MAAOE,SAAUD,EAAOE,cAAexG,KAAK,OAAO6F,UAAU,gBAEpF,+BACE,2BAAOA,UAAU,oBACjB,wBAAIA,UAAU,mBACZ,wBAAIA,UAAU,yCAAwC,2BAAO7F,KAAK,cACjErC,KAAKV,MAAMwJ,QAAQ7B,KAAI,SAAA8B,GAAM,OAC1B,wBAAIb,UAAU,mBAAmBrB,IAAKkC,EAAO7I,KAAM4C,MAAOiG,EAAO7I,MAAO6I,EAAOjG,YAGrF,2BAAOoF,UAAU,oBAEflI,KAAKV,MAAM0J,KAAK/B,KAAI,SAACgC,GAAD,OAChB,wBAAIf,UAAU,kBAAkBrB,IAAKoC,EAAI1I,GAAIuC,MAAOmG,EAAI1I,IACtD,wBAAI2H,UAAU,wCAAwCrB,IAAK,SAAWoC,EAAI1I,GAAIuC,MAAO,SAAWmG,EAAI1I,IAClG,2BAAO8B,KAAK,cAEZ,EAAK/C,MAAMwJ,QAAQ7B,KAAI,SAAC8B,EAAQG,GAC1B,IAAIC,EAAM,OACN7J,EAAQ,CACV4I,UAAW,cACXkB,SAAU,CAACH,EAAIF,EAAO7I,QAkCxB,OAhCI6I,EAAOvI,KAAOyI,EAAIzI,MACpB2I,EAAM,IACN7J,EAAM0I,KAAOiB,EAAIzI,IACbuI,EAAOd,SACT3I,EAAM2I,OAASc,EAAOd,SAGtBc,EAAOM,SAAWJ,EAAII,UACxBF,EAAsB,SAAfJ,EAAOI,IAAkBG,IAAO,IACvChK,EAAM0I,KAAOiB,EAAII,QACE,SAAfN,EAAOI,MACT7J,EAAMiK,GAAK,CACTC,SAAUP,EAAII,QACdtJ,KAAMkJ,IAGNF,EAAOd,SACT3I,EAAM2I,OAASc,EAAOd,SAGtBc,EAAOU,YACTN,EAAM,SACN7J,EAAMwD,MAAQiG,EAAOW,OAAO5G,MAC5BxD,EAAM8J,SAAWL,EAAOW,OAAO5G,MAC/BxD,EAAMqK,QAAU,WACdZ,EAAOW,OAAP,SAAuBT,KAGvBF,EAAOa,aACTtK,EAAM8J,SAAW,CAACH,EAAIF,EAAO7I,MAAM2J,aAG9B,wBAAI3B,UAAU,qBAAqBrB,IAAKkC,EAAO7I,KAAO+I,EAAI1I,GAAIuC,MAAOiG,EAAO7I,KAAO+I,EAAI1I,IAE3FuJ,IAAMC,cAAcZ,EAAK7J,GACf,IAAV4J,GAAe,0BAAMhB,UAAU,qBACrC,EAAK5I,MAAM0K,cAAgB,EAAK1K,MAAM0K,aAAa/C,KAAI,SAACgD,EAAaf,GACpE,IAAIgB,EAAO,GACX,OAAQD,EAAYd,KAClB,IAAK,IACH,IAAInB,EAAOiC,EAAY3K,MAAM0I,KAAKmC,QAAQ,MAAOlB,EAAI1I,IAErD2J,EAAO,2BACHhC,UAAW,4BAA8B+B,EAAY/B,WAAa,KAC9D+B,EAAY3K,OAAS,GAFtB,CAGH0I,KAAMA,IACRiC,EAAYnH,OAEd,MACF,IAAK,OACH,IAAIkF,EAAOiC,EAAY3K,MAAM0I,KAAKmC,QAAQ,MAAOlB,EAAI1I,IAErD2J,EAAO,kBAAC,IAAD,KACHhC,UAAW,4BAA8B+B,EAAY/B,WAAa,KAC9D+B,EAAY3K,OAAS,GAFtB,CAGHiK,GAAIvB,IACNiC,EAAYnH,OAEhB,MACA,IAAK,SACH,IAAIxC,EAAQ2J,EAAY3J,MAAM6J,QAAQ,MAAOlB,EAAI1I,IACjD2J,EAAO,gCACHhC,UAAW,4BAA8B+B,EAAY/B,WAAa,KAC9D+B,EAAY3K,OAAS,GAFtB,CAGHqK,QAAO,cAAE,8BAAAhD,EAAA,0DACHsD,EAAYG,QADT,gCAEMA,QAAQH,EAAYG,SAF1B,qEAMDC,EAAW,IAAIhK,IAAS,CAACC,WAC3ByE,EAAE0D,WAAW4B,EAASJ,EAAYvJ,SAP/B,sBASGuJ,EAAYvJ,OATf,OAUE,QAVF,0CAWgB2J,EAASJ,EAAYvJ,QAAQuI,EAAI1I,IAXjD,eAWD+J,EAXC,qDAegBD,EAASJ,EAAYvJ,UAfrC,eAeD4J,EAfC,oCAkBLvF,EAAE0D,WAAWwB,EAAYM,QAASN,EAAYM,MAAMD,GAlB/C,8CAqBXL,EAAYnH,OA0BlB,OAAO,0BAAMoF,UAAU,kCAAkCrB,IAAKqC,EAAQD,EAAI1I,IAAK2J,sB,GAvJ5E7B,a,6+BCEJmC,E,gCACnB,WAAYlL,GAAM,0BAChB,cAAMA,IAORmL,SARkB,cAQP,4BAAA9D,EAAA,sEACO,EAAK0D,SAASK,SADrB,OACL7J,EADK,OAET,EAAK8J,UAAS,SAAAnH,GACZ,cAAYA,GAAZ,IAAmBoH,MAAO/J,OAHnB,2CANT,EAAK2C,MAAQ,CACXoH,MAAO,IAET,EAAKP,SAAW,IAAIhK,IAAS,CAACC,MAAO,sBALrB,E,wDAgBhBN,KAAKyK,a,+BAIL,OAAO,yBAAKvC,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,SACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,cAEF,kBAAC,IAAD,CAAMA,UAAU,MAAMqB,GAAG,oBAAzB,WACA,yBAAKrB,UAAU,iBACb,0BAAMA,UAAU,0BAAhB,QAA+ClI,KAAKwD,MAAMoH,MAAMzI,QAAU,IAA1E,OAGJ,yBAAK+F,UAAU,iBACb,kBAAC,EAAD,CAAYY,QAAS,CACjB,CACE5I,KAAM,QACN4C,MAAO,QACPuG,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,SACN4C,MAAO,UAET,CACE5C,KAAM,OACN4C,MAAO,OACPtC,KAAK,EACLyH,OAAQ,WAGZ+B,aAAc,CACZ,CACAb,IAAK,SACL7I,MAAO,wBACPI,OAAQ,SACR0J,QAAS,gBACTG,MAAOvK,KAAKyK,SACZvC,UAAW,iCACXpF,MAAO,UAGTkG,KAAMhJ,KAAKwD,MAAMoH,c,GA/DWvC,a,iECF/B,SAASwC,EAASrK,GACvBA,EAAMA,GAAO,IACb2C,OAAO2H,SAASC,OAAOvK,GAQlB,SAASwK,IAId,OAHK7H,OAAO6H,eACV7H,OAAO6H,aAAe,IAAIC,WAErB9H,OAAO6H,aAGT,SAAeE,IAAtB,+B,oCAAO,sBAAAvE,EAAA,sEACY,IAAItG,IAAS,CAAEC,MAAO,YAAc6K,OADhD,OAELN,EAFK,OAEQC,UAFR,4C,sBASP,IAAMnE,GAAI,CAAE,IAAK,KAAM,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,KAAM,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,MAAO,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,MAkBjqB,SAASyE,GAAYC,GAE1B,OADAA,EAZK,SAAuBA,GAC5B,OAAOA,EAAIC,MAAM,IAAIrE,KAAI,SAAUsE,GACjC,OAAOxG,EAAEyG,YAAY7E,GAAE4E,IAASA,EAAO5E,GAAE4E,MACxCE,KAAK,IASFC,CAAcL,IACTM,cAAcxB,QAAQ,OAAQ,IAAIA,QAAQ,WAAY,KAQ5D,SAASyB,GAAmBC,GACjC,GAA0B,WAAtB,IAAOA,IAA0C,OAAfA,EAAqB,OAAOA,EAGlE,GAFIA,EAAWtL,WAAWsL,EAAWtL,GAEjCuL,MAAM9G,QAAQ6G,GAChB,IAAK,IAAI3C,EAAQ,EAAGA,EAAQ2C,EAAW1J,OAAQ+G,IAAS,CAEtD0C,GADgBC,EAAW3C,SAM7B,IAAK,IAAMrC,KAFPgF,EAAWE,eAAe,aAe3B,SAASC,EAAqBH,GACnC,IAAMI,EAAc,GACpB,IAAK,IAAMpF,KAAOgF,EACQ,OAApBA,EAAWhF,IAAqC,KAApBgF,EAAWhF,IACzCoF,EAAY9M,KAAK0H,GAEnBoF,EAAYC,SAAQ,SAAArF,GAAG,cAAWgF,EAAWhF,MAEd,WAA3B,IAAOgF,EAAWhF,MACpBmF,EAAqBH,EAAWhF,IAC5BsF,kBAAQN,EAAWhF,YAAcgF,EAAWhF,IAzBPmF,CAAqBH,EAAWnH,UACvEyH,kBAAQN,EAAWnH,kBAAkBmH,EAAWnH,SAClCmH,EAAY,CAC5B,GAAIA,EAAWE,eAAelF,GAE5B+E,GADgBC,EAAWhF,IAKjC,OAAOgF,E,k/BCCMO,G,qCAnEb,WAAY9M,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACX6I,YAAY,GAEd,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,QALF,E,mJAQjBjI,IAAMkI,SAASC,e,SACE,IAAIpM,IAAS,CAACC,MAAM,6BAA8B6K,KAAM,I,cAClEuB,QACL1M,KAAK2M,gBAEPrI,IAAMkI,SAASI,e,mIAOf5M,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkB6I,YAAY,S,0CAQhCrM,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkB6I,YAAY,S,4IAQhC/H,IAAMkI,SAASC,e,SACE,IAAIpM,IAAS,CAACC,MAAM,6BAA8B6K,KAAM,I,OAArEtK,E,OACJgM,YAAW,WACLhM,EAAI6L,ODzBZI,SAAShC,SAASiC,QAAO,GCyBW,EAAKJ,kBAEtC,M,uHAKD,IAAI5M,EAAO,CACTiN,cAAe,yCAKjB,OAHIhN,KAAKwD,MAAM6I,aACbtM,EAAKiN,cAAgB,uDAEhB,yBAAK9E,UAAU,qBACpB,yBAAKA,UAAU,sBACZnI,EAAKiN,eAGNhN,KAAKwD,MAAM6I,WACT,4BAAQnE,UAAU,kBAAkByB,QAAS3J,KAAKsM,aAAlD,UACG,4BAAQpE,UAAU,OAAlB,uB,GA9DSG,a,k/BC6EP4E,G,qCAnFb,WAAY3N,GAAM,0BAChB,cAAMA,IACD+K,SAAW,IAAIhK,IAAS,CAC3BC,MAAO,EAAKhB,MAAMgB,QAGpB,EAAKkD,MAAQ,CACXkF,MAAO,EAAKpJ,MAAMoJ,OAAS,GAC3BwE,UAAY,EAAK5N,MAAMoJ,OAEzB,EAAKyE,YAAc,EAAKA,YAAYZ,KAAjB,QACnB,EAAK3D,SAAW,EAAKA,SAAS2D,KAAd,QAChB,EAAKa,UAAY,EAAKA,UAAUb,KAAf,QAZD,E,iKAeQlG,IAArBrG,KAAKV,MAAMoJ,M,iEAGE1I,KAAKqK,SAASjK,IAAIJ,KAAKV,MAAM+N,Y,OAAzCxM,E,OACJb,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IACEkF,MAAO7H,EAAI,EAAKvB,MAAM+N,aAAe,GACrCH,UAAU,O,6HASN3F,GACS,KAAdA,EAAE+F,SACHtN,KAAKmN,YAAY5F,K,+BAIZA,GACP,IAAIgG,EAAWhG,EAAEU,OAAOS,MACxB1I,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IACEkF,MAAO6E,OAGRxI,EAAE0D,WAAWzI,KAAKV,MAAMkO,cACzBxN,KAAKV,MAAMkO,YAAYD,K,qDASThG,G,8EACZgG,EAAWhG,EAAEU,OAAOS,MACxB1I,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IACE0J,UAAU,O,SAGElN,KAAKqK,SAASoD,IAAIzN,KAAKV,MAAM+N,WAAY,CAAC3E,MAAO6E,EAAUG,aAAcH,I,cACzFvN,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IACE0J,UAAU,O,6HAIR,IACDhF,EAAalI,KAAKV,MAAlB4I,UACFlI,KAAKwD,MAAM0J,WACZhF,GAAa,uBAEf,IAAMyF,EAAa,MAAI3N,KAAKV,OAE5B,cADOqO,EAAWH,YACZ,iCAAUG,EAAV,CAAsBzF,UAAWA,EAC3B0F,OAAQ5N,KAAKmN,YACbC,UAAWpN,KAAKoN,UAChBxE,SAAU5I,KAAK4I,SACfF,MAAO1I,KAAKwD,MAAMkF,a,GAhFJL,a,6aCyBfwF,G,sIAvBX,OAAO,yBAAK3F,UAAU,yBACpB,+BACE,2BAAOA,UAAU,4BACjB,wBAAIA,UAAU,4BACZ,wBAAIA,UAAU,oCAAoC3I,MAAM,OACtD,2BAAOuO,QAAQ,4BAAf,oBAIF,wBAAI5F,UAAU,4BACZ,kBAAC,GAAD,CAAiB7F,KAAK,SACL/B,MAAM,uBACN+M,WAAW,kBACX9M,GAAG,2BACH2H,UAAU,8B,GAhBVG,a,6aC2Cd0F,G,iCA3Cb,WAAYzO,GAAO,0BACjB,cAAMA,IAQR0O,SATmB,+BASP,WAAMzG,GAAN,eAAAZ,EAAA,6DACVY,EAAE0G,iBADQ,SAEM,EAAK5D,SAAS6D,UAAU,EAAKC,UAAUC,QAAQzM,MAAO,gCAF5D,YAENd,EAFM,QAGFoC,QAHE,iCAIFoL,MAAM,WAJJ,OAKRlL,OAAO2H,SAAS9C,KAAO,mBALf,wBAORqG,MAAM,SAAWxN,EAAIyN,SAPb,4CATO,sDAEjB,EAAKH,UAAYrE,MAAMyE,YACvB,EAAKlE,SAAW,IAAIhK,IAAS,CAACC,MAAM,2BAHnB,E,6CAuBjB,OAAO,4BACM0N,SAAUhO,KAAKgO,SACftN,OAAO,OACPwH,UAAU,qBACrB,2BAAKA,UAAU,sBAAf,sCAGA,6BAAO7F,KAAK,SACLnC,KAAK,SACLwI,MAAOpH,SACd,6BAAOe,KAAK,OACLmM,IAAKxO,KAAKmO,UACV1H,OAAQ,sEACRvG,KAAK,OACLuO,UAAQ,IACf,8BAAQvG,UAAU,mBAAlB,2B,GAvCeG,W,6aCgBNqG,G,sIAZX,OAAO,2BAAKxG,UAAU,qBACpB,2BAAKA,UAAU,sBAAf,sCAIA,yBAAGA,UAAU,kBACVF,KAAK,6BADR,6B,GAXeK,W,8+BCMrB,IAAMsG,GAAmB7E,MAAM8E,MAAK,kBAAI,kCAGnBC,G,iCACnB,WAAYvP,GAAM,0BAChB,cAAMA,IACDwP,UAAY,EAAKA,UAAUvC,KAAf,QACjB,EAAK/I,MAAQ,CACXuL,UAAW1J,SAASlC,OAAO2H,SAASkE,KAAK,KAAO,GAJlC,E,8CAQRD,GACR5L,OAAO2H,SAASkE,KAAOD,EAAY,GACnC/O,KAAK2K,UAAS,SAAAnH,GAAQ,gBAAWA,GAAX,IAAiBuL,mB,+BAIvC,OAAO,2BAAK7G,UAAU,6BACpB,2BAAKA,UAAU,iBACb,2BAAKA,UAAU,qBAAoB,yBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,YAA4D,4BAC3FE,UAAU,gCADiF,KAC1C,4BACjDA,UAAU,8BADuC,aAGvD,2BAAKA,UAAU,iBACb,oBAAC,IAAD,CAAM+G,cAAejP,KAAKwD,MAAMuL,UAC1BG,SAAUlP,KAAK8O,WAEnB,oBAAC,IAAD,CAAS5G,UAAU,6BACjB,oBAAC,IAAD,gBAGA,oBAAC,IAAD,cAGA,oBAAC,IAAD,qBAGA,oBAAC,IAAD,iBAGA,oBAAC,IAAD,gBAGA,oBAAC,IAAD,eAGA,oBAAC,IAAD,gBAIF,oBAAC,IAAD,KACE,iCACE,6BAAOA,UAAU,oBACjB,0BAAIA,UAAU,4BACZ,0BAAIA,UAAU,qCAAd,cACA,0BAAIA,UAAU,6BACZ,6BAAOA,UAAU,wBAAwB7F,KAAK,aADhD,QACiE,+BAC/D,6BAAO6F,UAAU,wBAAwB7F,KAAK,aAFhD,SAKF,0BAAI6F,UAAU,4BACZ,0BAAIA,UAAU,qCAAd,0BACA,0BAAIA,UAAU,6BACZ,6BAAOA,UAAU,wBAAwB7F,KAAK,aADhD,oHAKF,0BAAI6F,UAAU,4BACZ,0BAAIA,UAAU,qCAAd,yBACA,0BAAIA,UAAU,6BACZ,6BAAOA,UAAU,wBAAwB7F,KAAK,aADhD,kHAKF,0BAAI6F,UAAU,4BACZ,0BAAIA,UAAU,wCAAd,oBAEF,0BAAIA,UAAU,4BACZ,0BAAIA,UAAU,qCAAd,sBACA,0BAAIA,UAAU,6BACZ,6BAAOA,UAAU,wBAAwB7F,KAAK,aADhD,kHAKF,0BAAI6F,UAAU,4BACZ,0BAAIA,UAAU,4BACZ,8BAAQA,UAAU,mCAAmC7F,KAAK,UAA1D,qBAOR,oBAAC,IAAD,KACE,oBAAC,GAAD,OAEF,oBAAC,IAAD,MAEA,oBAAC,IAAD,KACE,oBAACyH,MAAMqF,SAAP,CAAgBC,SAAU,WACxB,oBAACT,GAAD,QAGJ,oBAAC,IAAD,KACE,oBAAC,GAAD,CAASU,KAAM,UAEjB,oBAAC,IAAD,KACE,oBAAC,GAAD,OAEF,oBAAC,IAAD,KACE,oBAAC,GAAD,c,GA5G+BhH,WCR3B,uBACdhJ,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,aAAgBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,wHAAwH,0BAAMuI,UAAW7I,EAAO,UAAY,QAASM,EAAE,kSCHjW,iBACdN,OADc,IAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,mBAAsBhQ,GAAO,uBAAGiQ,YAAU,UAAS,0BAAM5P,EAAE,kbAAkbF,KAAK,OAAO8P,YAAU,cCHziB,uBACdlQ,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,gBAAmBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,kGAAkG,0BAAMuI,UAAW7I,EAAO,UAAY,QAASM,EAAE,+HCH9U,uBACdN,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,gBAAmBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,ihBCH7L,uBACdN,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,aAAgBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,4FAA4F,0BAAMuI,UAAW7I,EAAO,UAAY,QAASM,EAAE,kHCHrU,iBACdN,OADc,IAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,eAAkBhQ,GAAO,uBAAGiQ,YAAU,UAAS,0BAAM5P,EAAE,yvBAAyvBF,KAAK,OAAO8P,YAAU,cCH52B,uBACdlQ,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,aAAgBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,+TCH1L,uBACdN,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,aAAgBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,srBCH1L,uBACdN,cADc,MACL,GADK,EAEXC,EAFW,yBAGV,6BAAKI,MAAM,6BAA6B4P,QAAQ,mBAAsBhQ,GAAO,+BAAQ,uBAAGiB,GAAG,SAASgP,YAAU,UAAS,uBAAGhP,GAAG,WAAWgP,YAAU,UAAS,0BAAMrH,UAAW7I,EAAO,UAAY,QAASM,EAAE,qqB,SCHhM,iBACdN,OADc,IAEXC,EAFW,yBAGV,6BAAKE,OAAO,KAAK8P,QAAQ,gBAAgB/P,MAAM,KAAKG,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,gKCHhG,iBACdN,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,KAAKC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,meAAmeF,KAAK,YAAY,0BAAME,EAAE,+hBAA+hBF,KAAK,c,k/BCG/mC+P,G,mCACjB,WAAYlQ,GAAM,0BACd,cAAMA,IACDkE,MAAQ,CACTzD,KAAM,GACN0P,YAAa,MACb9G,OAAQ,IAGZ,EAAK0B,SAAW,IAAIhK,IAAS,CAACC,MAAO,sBARvB,E,kKA8BWN,KAAKqK,SAASK,S,OAAnCgF,E,OACJ1P,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBzD,KAAM2P,O,4HAM/B,OAAO,yBAAKxH,UAAU,eAClB,yBAAKA,UAAU,WACX,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,qBACX,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,SACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,cAEJ,kBAAC,IAAD,CAAMA,UAAU,MAAMqB,GAAI,qBAA1B,WACA,yBAAKrB,UAAU,iBACX,0BAAMA,UAAU,0BAAhB,WACA,0BAAMA,UAAU,4BAAhB,KACA,uBAAGA,UAAU,sBAAsBF,KAAK,KAAxC,qBACA,0BAAME,UAAU,4BAAhB,KACA,uBAAGA,UAAU,sBAAsBF,KAAK,KAAxC,gBAGJ,yBAAKE,UAAU,eACX,0BAAMA,UAAU,mCACZ,4BAAQA,UAAU,yBACd,4BAAQQ,MAAM,KAAd,iBAEJ,4BAAQR,UAAU,mCAAlB,UAEJ,0BAAMA,UAAU,oCACZ,4BAAQA,UAAU,sBACd,4BAAQQ,MAAM,KAAd,sBAGJ,4BAAQR,UAAU,mCAAlB,WAEJ,0BAAMA,UAAU,qCACZ,2BAAO7F,KAAK,SAAS6F,UAAU,wBAAwByH,YAAY,GAAGC,gBAAc,aACpF,4BAAQvN,KAAK,SAAS6F,UAAU,mCAAhC,kBAGZ,yBAAKA,UAAU,qBACX,2BAAOA,UAAU,SACb,2BAAOA,UAAU,0BACb,wBAAIA,UAAU,mBACV,wBAAIA,UAAU,yCACV,2BAAOA,UAAU,cAAc7F,KAAK,aADxC,WAGI,kBAAC,GAAD,CAAW6F,UAAU,gBAEzB,wBAAIA,UAAU,oBAAd,QACA,wBAAIA,UAAU,oBAAd,SACA,wBAAIA,UAAU,oBAAd,OAAqC,kBAAC,GAAD,CAAWA,UAAU,yBAC1D,wBAAIA,UAAU,oBAAd,QACA,wBAAIA,UAAU,oBAAd,cACA,wBAAIA,UAAU,oBAAd,YAGR,2BAAOA,UAAU,oBAGblI,KAAKwD,MAAMzD,KAAKkH,KAAI,SAACgC,EAAKnC,GAAN,OAEhB,wBAAIoB,UAAU,kBAAkBrB,IAAKoC,EAAI1I,IACrC,wBAAI2H,UAAU,0CACV,2BAAOA,UAAU,cAAc7F,KAAK,aACpC,kBAAC,GAAD,CAAS6F,UAAU,cACnB,kBAAC,IAAD,CAAMqB,GAAI,qBAAqBN,EAAI1I,IAAK0I,EAAI/I,OAEhD,wBAAIgI,UAAU,oBAAoBe,EAAI4G,WACtC,wBAAI3H,UAAU,oBAAmB,2BAAIe,EAAI6G,QACzC,wBAAI5H,UAAU,oBAAmB,2BAAIe,EAAI1D,MAAM0B,KAAI,SAACyB,GAAW,OAAOA,EAAMxI,QAAOuL,KAAK,QACxF,wBAAIvD,UAAU,oBAAd,KACA,wBAAIA,UAAU,oBAAoBe,EAAI8G,eACtC,wBAAI7H,UAAU,oBAAd,uB,GA5GGG,a,4gCCDnC,IAAM2H,GAAkB,SAAC1Q,GACvB,OAAO,kBAAC,cAAD,CAAY2Q,YAAU,GAAG3Q,EAAM8J,WAsFzB8G,G,mCAlFb,WAAY5Q,GAAM,0BAChB,cAAMA,IA+BR6Q,YAhCkB,+BAgCJ,WAAO/O,EAAcgP,GAArB,eAAAzJ,EAAA,yDACRpF,EAAU,IACX,EAAK8O,gBAFI,gCAGM,EAAKA,gBAAgB1H,OAAOvH,GAHlC,OAGVG,EAHU,qBAKZ,EAAKoJ,UAAS,SAAAnH,GAAK,gBACdA,GADc,IAEjBjC,eAPU,kBASL6O,EAAS7O,IATJ,2CAhCI,wDAEhB,EAAKiC,MAAQ,CACXjC,QAASjC,EAAMiC,SAAW,IAEzBjC,EAAMgR,eACP,EAAKD,gBAAkB,IAAIhQ,IAAS,CAACC,MAAOhB,EAAMgR,gBANpC,E,yUAgDhB,IAAMC,EAAe,CACnBC,WAAY,SAAAC,GAAI,gBAAUA,GAAV,IAAgBC,OAAQ,UAStCC,EAAc,CAChB/H,SAAU5I,KAAK4I,SACfgI,cAAe5Q,KAAK4Q,cACpBrP,QAASvB,KAAKwD,MAAMjC,SAAW,GAC/BoO,YAAa3P,KAAKV,MAAMqQ,YACxBQ,YAAanQ,KAAKmQ,YAClBU,iBAAkB7Q,KAAKV,MAAMuR,kBAAqB,iBAAM,aACxDxR,OAAQkR,EACRO,iBAAkBhE,SAAStL,KAC3BuP,cAAe,OACfC,aAAc,WACdC,WAAY,CAAEC,SAAUlB,IACxBmB,mBAAmB,GAIrB,OADApM,EAAEgG,OAAO4F,EAAa3Q,KAAKV,OACvBU,KAAKqQ,gBACA,kBAAC,KAAgBM,GAEjB,kBAAC,KAAWA,O,GA9ECtI,a,k/BC+NX+I,G,qCA7Nb,WAAY9R,GAAO,0BACjB,cAAMA,IAoGR+R,mBAAqB,SAAA9L,GACnB,EAAKoF,SAAS,CACZ2G,SAAU,SACL,EAAK9N,MAAM8N,UADR,IAEN/L,MAAOA,EAAQA,EAAM0B,KAAI,SAAAvB,GAAI,OAAIA,EAAKgD,SAAS,KAEjD1C,KAAI,SACC,EAAKxC,MAAMwC,MADZ,IAEFuL,OAAQhM,EAAQA,EAAM0B,KAAI,SAAAvB,GAAI,OAAIA,EAAKgD,SAAS,QA7GnC,EAkHnB8I,yBAA2B,SAAA1M,GACzB,EAAK6F,SAAS,CACZ2G,SAAU,SACL,EAAK9N,MAAM8N,UADR,IAENxM,YAAaA,EAAcA,EAAYmC,KAAI,SAAA7B,GAAU,OAAIA,EAAWsD,SAAS,KAE/E1C,KAAI,SACC,EAAKxC,MAAMwC,MADZ,IAEFyL,aAAc3M,EAAcA,EAAYmC,KAAI,SAAA7B,GAAU,OAAIA,EAAWsD,SAAS,QAxHlF,EAAKlF,MAAQ,CACXjD,GAAI,EAAKjB,MAAMiB,GACfyF,KAAM,GACNsL,SAAU,GACVI,OAAQ,GACRC,mBAAmB,EACnBC,oBAAoB,EACpBC,mBAAoB,eACpBC,aAAc,GACdC,mBAAoB,IAGjB,EAAKvO,MAAMjD,IACd+B,QAAQC,IAAI,EAAKjD,MAAMiB,IAGzB,EAAK8J,SAAW,IAAIhK,IAAS,CAAEC,MAAO,sBACtC,EAAKwR,aAAe,IAAIzR,IAAS,CAAEC,MAAO,6BAC1C,EAAKyR,mBAAqB,IAAI1R,IAAS,CAAEC,MAAO,oCAEhD,EAAK0R,SAAW,EAAKA,SAASzF,KAAd,QAtBC,E,6KA0BUvM,KAAK8R,aAAapH,S,cAAvCoH,E,OACN9R,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBsO,oB,SACH9R,KAAK+R,mBAAmBrH,S,UAAnDqH,E,OACN/R,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBuO,0BAC/B/R,KAAKwD,MAAMjD,G,uDAIZP,KAAKwD,MAAMjD,G,kCAESP,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMjD,I,QAA/C0R,E,OAEJjS,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBwC,KAAMiM,MAD3B,cAEG,4BAAAtL,EAAA,sEACyB,EAAK0D,SAASjK,IAAI,EAAKoD,MAAMjD,GAAK,aAD3D,OACG2R,EADH,OAGD,EAAKvH,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmB8N,SAAUY,OAJ9B,4C,gJAWQ3K,G,mFACbA,EAAE0G,kBAGEjO,KAAKwD,MAAMjD,G,gCACDP,KAAKqK,SAASoD,IAAIzN,KAAKwD,MAAMjD,GAAIP,KAAKwD,MAAMwC,M,OAAxDnF,E,8CAEYb,KAAKqK,SAASc,KAAKnL,KAAKwD,MAAMwC,M,OAA1CnF,E,kBAEFyB,QAAQC,IAAI1B,IAIRA,E,wBAIFsR,EAAoB,IAAI9R,IAAS,CAAEC,MAAO,qBAAuBO,EAAIN,GAAK,c,UAErD4R,EAAkBhH,KAAKnL,KAAKwD,MAAM8N,U,eAGrDtR,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBmO,mBAAmB,OAIxC3R,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBoO,oBAAoB,EAAMC,mBAAoB,EAAKrO,MAAMqO,mBAAqB,SAAWhR,EAAIN,Q,iJAY5GgH,GAAoB,IAAjB6K,EAAiB,uDAAR,OAClBC,EAAQ9K,EAAEU,OAAO/H,KACjBwI,EAAQnB,EAAEU,OAAOS,MACrB1I,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,EAAQ,MAAKA,IACP4O,GAAQC,GAAS3J,EAChBlF,O,+BA8BF,aACsCxD,KAAKwD,MAA1CsO,EADD,EACCA,aAAcC,EADf,EACeA,mBADf,EAEwD/R,KAAKwD,MAAMwC,KAFnE,IAECuL,OAAQhM,OAFT,MAEiB,GAFjB,MAEqBkM,aAAc3M,OAFnC,MAEiD,GAFjD,EAGP,OAAI9E,KAAKwD,MAAMmO,kBACN,kBAAC,KAAD,CAAUpI,GAAIvJ,KAAKV,MAAMgT,eAE9BtS,KAAKwD,MAAMoO,mBACN,kBAAC,KAAD,CAAUrI,GAAIvJ,KAAKwD,MAAMqO,qBAE3B,0BAAM3J,UAAU,aAAa8F,SAAUhO,KAAKgS,UACjD,yBAAK9J,UAAU,cACb,2BAAO4F,QAAQ,aAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,OAAOL,KAAK,OAAOuO,SAAU,EACjD/F,MAAO1I,KAAKwD,MAAMwC,KAAK9F,MAAQ,GAC1BgN,SAAUlN,KAAKV,MAAMiB,GAC1BqI,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,IACpCW,UAAU,kBAEd,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,cAAf,SACA,2BAAOzL,KAAK,QAAQ9B,GAAG,QAAQL,KAAK,QAAQuO,SAAU,EACpD/F,MAAO1I,KAAKwD,MAAMwC,KAAK8J,OAAS,GAChClH,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,IAC/B2F,SAAUlN,KAAKV,MAAMiB,GAC1B2H,UAAU,kBAGZlI,KAAKwD,MAAMjD,GAOF,KANT,yBAAK2H,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,YACA,2BAAOzL,KAAK,WAAW9B,GAAG,WAAWL,KAAK,WAAWuO,SAAU,EAC7D/F,MAAO1I,KAAKwD,MAAMwC,KAAKuM,UAAY,GACnC3J,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,IACpCW,UAAU,kBAEdlI,KAAKwD,MAAMjD,GAOF,KANT,yBAAK2H,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,oBACA,2BAAOzL,KAAK,WAAW9B,GAAG,wBAAwBL,KAAK,wBAAwBuO,SAAU,EACvF/F,MAAO1I,KAAKwD,MAAMwC,KAAKwM,uBAAyB,GAChD5J,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,IACpCW,UAAU,kBAIhB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,cACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAaL,KAAK,aACtCwI,MAAO1I,KAAKwD,MAAM8N,SAASmB,YAAc,GACzC7J,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,EAAG,aACvCW,UAAU,kBAGd,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,cAAcL,KAAK,cACvCwI,MAAO1I,KAAKwD,MAAM8N,SAASoB,aAAe,GAC1C9J,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,EAAG,aACvCW,UAAU,kBAGd,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,cACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAaL,KAAK,aACtCwI,MAAO1I,KAAKwD,MAAM8N,SAASqB,YAAc,GACzC/J,SAAU,SAACrB,GAAQ,EAAK4F,YAAY5F,EAAG,aACvCW,UAAU,kBAGd,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,SAAf,SACA,kBAAC,GAAD,CAAavN,GAAG,QACdqS,mBAAmB,EACnBlK,MAAO3D,EAAE8N,OAAOf,GAAc,SAAAhK,GAAC,OAAIvC,GAASA,EAAMlE,QAAQyG,EAAEY,QAAU,KACtEoK,SAAS,EACTlK,SAAU5I,KAAKqR,mBACf9P,QAASuQ,KAGb,yBAAK5J,UAAU,cACb,2BAAO4F,QAAQ,eAAf,eACA,kBAAC,GAAD,CAAavN,GAAG,cACdmI,MAAO3D,EAAE8N,OAAOd,GAAoB,SAAAgB,GAAC,OAAIjO,GAAeA,EAAYzD,QAAQ0R,EAAErK,QAAU,KACxFkK,mBAAmB,EACnBE,SAAS,EACTlK,SAAU5I,KAAKwR,yBACfjQ,QAASwQ,KAGb,4BAAQ7J,UAAU,mBAAmBlI,KAAKwD,MAAMjD,GAAK,OAAS,Y,GAzN7C8H,a,6aCAjB2K,G,iCACJ,WAAY1T,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACXmO,mBAAmB,GAErB,EAAKtH,SAAW,IAAIhK,IAAS,CAACC,MAAO,sBALpB,E,6CA2DjB,OAAGN,KAAKwD,MAAMmO,kBACN,kBAAC,KAAD,CAAUpI,GAAG,iBAEd,yBAAKrB,UAAU,eAClB,yBAAKA,UAAU,WACX,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAI,gBAA9C,SACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,mBAGR,yBAAKA,UAAU,oBACX,kBAAC,GAAD,CAAUoK,aAAa,wB,GAzEbjK,aAgFX4K,gBAAWD,I,6aChFpBE,G,iCACJ,WAAY5T,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACT2P,QAAS,EAAK7T,MAAM8T,MAAM3Q,OAAOlC,GACjCoR,mBAAmB,GAEvB,EAAKtH,SAAW,IAAIhK,IAAS,CAACC,MAAO,2BANpB,E,6CA4DjB,OAAGN,KAAKwD,MAAMmO,kBACN,kBAAC,KAAD,CAAUpI,GAAG,iBAEd,yBAAKrB,UAAU,eAClB,yBAAKA,UAAU,WACX,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAI,gBAA9C,SACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,mBAGR,yBAAKA,UAAU,oBACX,kBAAC,GAAD,CAAUoK,aAAa,eAAe/R,GAAIP,KAAKwD,MAAM2P,iB,GA1E1C9K,aAiFZ4K,gBAAWC,I,6aCzFLG,G,sIACT,OAAO,yBAAK9S,GAAG,WAEjB,yBAAK2H,UAAU,uBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,SACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,WAIJ,wBAAIA,UAAU,gBACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,kBAAkBF,KAAK,KAApC,WAGJ,yBAAKE,UAAU,uBACb,yBAAKA,UAAU,cACb,yBAAKA,UAAU,+BAEb,6CACA,4BAAQA,UAAU,gCAChB,4BAAQQ,MAAM,KAAd,UACA,4BAAQA,MAAM,KAAd,cAEF,yBAAKR,UAAU,gCACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAWqG,MAAM,GAAGnI,GAAG,gBAC9D,2BAAO2H,UAAU,mBAAmB4F,QAAQ,eAA5C,wBAKR,yBACE5F,UAAU,kFACV,yBAAKA,UAAU,SACb,0BAAMA,UAAU,cAAhB,UACA,0BAAMA,UAAU,cAAhB,oBAEF,yBAAKA,UAAU,sCACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,gBACrD,2BAAO2H,UAAU,mBAAmB4F,QAAQ,eAA5C,gBAEA,2BAAOzL,KAAK,SAAS6F,UAAU,+BAA+ByH,YAAY,GACnEC,gBAAc,aACnB,2BAAO1H,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,gBACrD,2BAAO2H,UAAU,mBAAmB4F,QAAQ,eAA5C,iBAGR,yBAAK5F,UAAU,SACb,0BAAMzE,OAAO,IAAIyE,UAAU,cACzB,4BAAQ7F,KAAK,SAAS6F,UAAU,aAAhC,mBAKN,yBAAKA,UAAU,wFACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,YACb,4BACE,4BACE,6BACE,2BACE,uBAAGF,KAAK,IAAIE,UAAU,QAAtB,kBAGJ,4BACE,4BACE,6BACE,2BACE,uBAAGF,KAAK,KAAR,qBAEF,uBAAGE,UAAU,gBAAe,uBAAGF,KAAK,KAAR,UAAsB,qCAAgB,uBAChEA,KAAK,KAD2D,QAC/C,qCAAgB,uBAAGA,KAAK,KAAR,aAGvC,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,oBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,oBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,uBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,qBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,mBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,qBAIN,wBAAIE,UAAU,MACZ,6BACE,2BACE,uBAAGF,KAAK,KAAR,oBAGJ,wBAAIE,UAAU,KACZ,4BACE,6BACE,2BACE,uBAAGF,KAAK,KAAR,qBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,2BAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,yBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,oBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,uBAIN,4BACE,6BACE,2BACE,uBAAGA,KAAK,KAAR,0BAYpB,yBAAKE,UAAU,qCACb,8BAAUA,UAAU,cAClB,yBAAKA,UAAU,OACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,UAAU4K,gBAAc,IACjG,2BAAOpL,UAAU,mBAAmB4F,QAAQ,eAA5C,mBAGA,uBAAG5F,UAAU,gBAAe,uBAAGF,KAAK,KAAR,UAAsB,qCAAgB,uBAChEA,KAAK,KAD2D,QAC/C,qCAAgB,uBAAGA,KAAK,KAAR,YAEvC,yBAAKE,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,UAAU4K,gBAAc,IACjG,2BAAOpL,UAAU,mBAAmB4F,QAAQ,eAA5C,uBAIJ,yBAAK5F,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,YACzE,2BAAOR,UAAU,mBAAmB4F,QAAQ,eAA5C,kCAIJ,yBAAK5F,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,YACzE,2BAAOR,UAAU,mBAAmB4F,QAAQ,eAA5C,sBAIJ,yBAAK5F,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,YACzE,2BAAOR,UAAU,mBAAmB4F,QAAQ,eAA5C,8BAIJ,yBAAK5F,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,YACzE,2BAAOR,UAAU,mBAAmB4F,QAAQ,eAA5C,oBAIJ,yBAAK5F,UAAU,cACb,2BAAOA,UAAU,mBAAmB7F,KAAK,WAAW9B,GAAG,cAAcmI,MAAM,UAAU4K,gBAAc,IACjG,2BAAOpL,UAAU,mBAAmB4F,QAAQ,eAA5C,sBAQZ,yBAAK5F,UAAU,UACb,0BAAMzE,OAAO,IAAIyE,UAAU,kBACzB,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,gBACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,eACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,eACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,iBACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,sBACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,gBACA,4BAAQ7F,KAAK,SAAS6F,UAAU,+BAAhC,iBAEF,0BAAMzE,OAAO,IAAIyE,UAAU,aACzB,iFACA,4BAAQ7F,KAAK,SAAS6F,UAAU,cAAhC,kB,GA9OsBG,a,sgCCGnBkL,G,iCACnB,WAAYjU,GAAM,0BAChB,cAAMA,IACDkU,WAAa,EAAKA,WAAWjH,KAAhB,QAClB,EAAKkH,YAAc,EAAKA,YAAYlH,KAAjB,QACnB,EAAKmH,OAAS,EAAKA,OAAOnH,KAAZ,QACd,EAAK3D,SAAW,EAAKA,SAAS2D,KAAd,QAChB,EAAKoH,YAAc,EAAKA,YAAYpH,KAAjB,QACnB,EAAK/I,MAAQ,CACXoQ,gBAAiB,kCACjBC,OAAQ,GACRC,kBAAmB,gBAErB,EAAKzJ,SAAY,IAAIhK,IAAS,CAACC,MAAO,sBAZtB,E,gDAcNiH,GAAE,WACRwM,EAAUxM,EAAEyM,cAAcC,QAAQC,QACtClU,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBsQ,kBAAmB,mCAEtC9T,KAAKqK,SAAL,OAAqB0J,GAASnT,MAAK,SAAAC,GACjC,GAAGA,EAAIoC,QAAQ,CACb,IAAIkR,EAAY,KAAI,EAAK3Q,MAAMqQ,QAC/BM,EAAYpP,EAAE8N,OAAOsB,GAAW,SAAAjK,GAAI,QAAMA,EAAK3J,KAAK6T,OAAOL,OAC3D,EAAKpJ,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBqQ,OAAQM,EAAWL,kBAAmB,0B,mCAKlDnS,GAAM,WACjB3B,KAAKqK,SAAS6D,UAAUvM,GAAOf,MAAK,SAAAC,GAClC,GAAGA,EAAIsB,OAAO,CACZ,IAAIgS,EAAYtT,EAAIwT,OAAO,EAAK7Q,MAAMqQ,QACtC,EAAKlJ,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBqQ,OAAQM,a,6BAK1B5M,GACLA,EAAE0G,iBACF1G,EAAE+M,kBACFtU,KAAKuU,aAAahN,EAAEiN,aAAa7S,OACjC3B,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBoQ,gBAAiB,yC,0CAGpB,WACjB5T,KAAKqK,SAASK,SAAS9J,MAAK,SAAAC,GAC1B,EAAK8J,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBqQ,OAAQhT,Y,+BAIvB0G,GACPvH,KAAKuU,aAAahN,EAAEU,OAAOtG,S,iCAElB4F,GACTA,EAAE0G,iBACF1G,EAAE+M,kBACFtU,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBoQ,gBAAiB,4D,oCAIrC5T,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBoQ,gBAAiB,yC,+BAG9B,WACHa,EAAazJ,IAAe0J,iBAAiB,UAC7CC,EAAY3J,IAAe0J,iBAAiB,SAChD,OAAO,yBAAKxM,UAAU,2BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,UACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,gBAGJ,yBAAKA,UAAU,iBACb,yBAAKA,UAAWlI,KAAKwD,MAAMoQ,gBACtBH,YAAazT,KAAKyT,YAClBC,OAAQ1T,KAAK0T,OACbF,WAAYxT,KAAKwT,YACpB,2BAAOtL,UAAU,yDACf,kBAACuM,EAAD,CAAYlV,MAAO,IAAKC,OAAQ,IAAK0I,UAAU,SAC/C,2BAAO7F,KAAK,OACLoE,OAAO,UACPmO,UAAU,EACVhM,SAAU5I,KAAK4I,SACfV,UAAU,oBACjB,0BAAMA,UAAU,iCAAhB,yBAKJ,yBAAKA,UAAU,4DAEXlI,KAAKwD,MAAMqQ,OAAO5M,KAAI,SAAA4N,GACpB,OAAM,yBAAK3M,UAAU,+BAA+BrB,IAAKgO,EAAMtU,IAC7D,yBAAK2H,UAAU,mBACV4M,MAAO,CAAC,+BAA2BD,EAAMrU,IAAjC,SACb,4BAAQ0H,UAAW,EAAK1E,MAAMsQ,kBACtBiB,eAAcF,EAAMtU,GACpBuC,MAAM,SACN6G,QAAS,EAAKgK,aACpB,kBAACgB,EAAD,CAAWzM,UAAU,kC,GA5GHG,a,sECDvB2M,GAAQ,cAERC,GAAc,CACzB,CAAE/U,KAAM,UAAWwI,MARF,aASjB,CAAExI,KAAM,qBAAsBwI,MARb,aASjB,CAAExI,KAAM,sBAAuBwI,MARZ,eASnB,CAAExI,KAAM,QAASwI,MAPC,cAQlB,CAAExI,KAAM,UAAWwI,MATD,cAUlB,CAAExI,KAAM,UAAWwI,MAAOsM,KCDbE,GAVC,WACd,OACE,yBAAKhN,UAAU,qBACb,yBAAKA,UAAU,iBAAiB4M,MAAO,CAAEvV,MAAO,OAAQC,OAAQ,QAAUkG,KAAK,UAC7E,0BAAMwC,UAAU,WAAhB,iBCIOiN,GARK,SAAC,GAAa,IAAXlU,EAAW,EAAXA,KACrB,OACE,yBAAKiH,UAAU,qBACb,yBAAKA,UAAU,2BAA2BjH,GAAc,gBCHjDyB,GAAc,eAAC0S,EAAD,uDAAO,GAAP,OACzB1N,OAAOD,KAAK2N,GAAKC,QAAO,SAAChK,EAAKxE,EAAKzH,GAKjC,MAAO,CAACiM,EAHU,IAANjM,EAAU,IAAM,IAC5ByH,EAAMyO,mBAAmBzO,GAEI,IADvByO,mBAAmBF,EAAIvO,KACU4E,KAAK,MAC3C,KAEQ8J,GAAa,+BAAG,WAAO/U,EAAKqS,GAAZ,eAAAlM,EAAA,6DACrBlE,EAASC,GAAYmQ,GADA,kBAGZ2C,KAAMhV,EAAMiC,GAHA,iGAKlB,CAAEvB,OAAQ,MALQ,yDAAH,wDC8DXuU,GAzDS,SAAC,GAA0C,MAAxCC,EAAwC,EAAxCA,OAAwC,IAAhCnW,aAAgC,MAAxB,IAAwB,MAAnBC,cAAmB,MAAV,IAAU,IAC/BmW,oBAAS,GADsB,YAC1DC,EAD0D,KAC/CC,EAD+C,OAEzCF,mBAAS,IAFgC,YAE1D5V,EAF0D,KAEpD+V,EAFoD,KAI3DC,EAAUC,sBAAW,cAAC,4BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,SACT4U,EAAQG,EAAOlW,KAAKA,MACpB8V,GAAa,IALW,2CAOzB,CAACH,IAMJ,GAJAQ,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAW,OAAO,kBAAC,GAAD,MAEtB,GAAoB,IAAhB7V,EAAKoC,OAAc,OAAO,kBAAC,GAAD,MAG9B,IAAMgU,EAAUpW,EAAKkH,KAAI,SAACiD,EAAM9K,GAC9B,OACE,kBAAC,uBAAD,CACEyH,IAAKzH,EACL8I,UAAU,wBACVkO,MAAK,UAAKlM,EAAKrD,IAAV,aAAkBqD,EAAKnK,KAAvB,UAMX,OACE,oCACE,kBAAC,YAAD,CACEP,OAAQA,EACRD,MAAOA,EACPQ,KAAMA,EACNsW,OACE,kBAAC,aAAD,CACEC,YAAaZ,EAAOnU,QAAQ+U,YAC5BC,IAAK,kBAAC,OAAD,CAAKC,SAAU,kBAAC,YAAD,CAAUC,MAAO,CAAC,kBAAC,gBAAD,CAAcC,YAAa,cAItE,UAAAhB,EAAOnU,eAAP,eAAgBoV,SACf,kBAAC,kBAAD,CACEzO,UAAU,mBACV0O,YAAalB,EAAOnU,QAAQoV,OAC5BR,QAASA,MCAJU,GA1DS,SAAC,GAA0C,MAAxCnB,EAAwC,EAAxCA,OAAwC,IAAhCnW,aAAgC,MAAxB,IAAwB,MAAnBC,cAAmB,MAAV,IAAU,IAC/BmW,oBAAS,GADsB,YAC1DC,EAD0D,KAC/CC,EAD+C,OAEzCF,mBAAS,IAFgC,YAE1D5V,EAF0D,KAEpD+V,EAFoD,KAI3DC,EAAUC,sBAAW,cAAC,4BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,SACT4U,EAAQG,EAAOlW,KAAKA,MAAQ,IAC5B8V,GAAa,IALW,2CAOzB,CAACH,IAMJ,GAJAQ,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAW,OAAO,kBAAC,GAAD,MAEtB,IAAO7V,GAAyB,IAAhBA,EAAKoC,OAAc,OAAO,kBAAC,GAAD,MAG1C,IAAMgU,EAAUpW,EAAKkH,KAAI,SAACiD,EAAM9K,GAC9B,OACE,kBAAC,uBAAD,CACEyH,IAAKzH,EACL8I,UAAU,wBACVkO,MAAK,UAAKlM,EAAKrD,IAAV,aAAkBqD,EAAKnK,KAAvB,UAMX,OACE,oCACE,kBAAC,YAAD,CACEP,OAAQA,EACRD,MAAOA,EACPQ,KAAMA,GAAQ,GACdsW,OACE,kBAAC,gBAAD,CACES,QAASpB,EAAOnU,QAAQuV,QACxBR,YAAaZ,EAAOnU,QAAQ+U,YAC5BF,MAAO,kBAAC,eAAD,CAAaW,SAAU,GAAIC,SAAS,iBAIhD,UAAAtB,EAAOnU,eAAP,eAAgBoV,SACf,kBAAC,kBAAD,CACEzO,UAAU,mBACV0O,YAAalB,EAAOnU,QAAQoV,OAC5BR,QAASA,M,8BC/CJjB,GAVC,WACd,OACE,yBAAKhN,UAAU,qBACb,yBAAKA,UAAU,iBAAiB4M,MAAO,CAAEvV,MAAO,OAAQC,OAAQ,QAAUkG,KAAK,UAC7E,0BAAMwC,UAAU,WAAhB,iBCiGO+O,GAhFU,SAAC,GAA6D,IAA3DvB,EAA2D,EAA3DA,OAA2D,IAAnDnW,aAAmD,MAA3C,IAA2C,MAAtCC,cAAsC,MAA7B,IAA6B,MAAxB0X,aAAwB,MAAhB,UAAgB,IAC7DvB,mBAAS,IADoD,YAC9E5V,EAD8E,KACxE+V,EADwE,OAEnDH,oBAAS,GAF0C,YAE9EC,EAF8E,KAEnEC,EAFmE,KAI/EE,EAAUC,sBAAW,cAAC,8BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,QAAyC,iBAAhB+U,EAAOlW,OACnCoX,EAAUlB,EAAOlW,KAAKA,KAAKkH,KAAI,SAACiD,GACpC,IAAMrD,EAAM,IAAIuQ,KAAKlN,EAAKrD,KAC1B,GAAIA,EACF,MAAO,CACLA,MACA9G,KAAMmK,EAAKnK,SAIjB+V,EAAQqB,GACRtB,GAAa,IAdW,2CAgBzB,CAACH,IAyBJ,OAJAQ,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAkB,kBAAC,GAAD,MAEjB9J,MAAM9G,QAAQjF,IAAyB,IAAhBA,EAAKoC,OAG/B,oCACE,kBAAC,aAAD,CACE3C,OAAQA,EACRD,MAAOA,EACPQ,KAAMA,EACNsX,MACE,kBAAC,eAAD,CACEhV,KAAK,OACLiV,WACE,kBAAC,yBAAD,CAAuBlB,MAAO,kBAAC,wBAAD,CAAsBmB,OArCzC,SAAC5X,GAEtB,IAAM6X,EAAYzX,EAAKiC,QAAQyV,QAEzBC,EAAW3X,EAAKiC,QAAQ2V,MAExBC,EAAOvS,SACXwS,aAAqBL,EAAU3Q,IAAK6Q,EAAS7Q,IAAK,CAChDiR,KAAM,WAIV,OAAIF,GAAQ,GAAKA,GAAQ,GAChBL,mBAAO5X,EAAG,QAAS,CAAEoY,OAAQC,OAE7BT,mBAAO5X,EAAG,WAAY,CAAEoY,OAAQC,cA0BrC3B,OACE,kBAAC,cAAD,CACEhU,KAAMqT,EAAOnU,QAAQc,MAAQ,WAC7B4V,SAAU,kBAAC,YAAD,CAAUpY,YAAa,IACjCqY,KAAM,kBAAC,QAAD,CAAMrY,YAAa,IACzBsY,KACE,kBAAC,QAAD,CACE3B,SAAU,kBAAC,YAAD,CAAUU,MAAOA,EAAOT,MAAO,CAAC,kBAAC,gBAAD,CAAcS,MAAOA,cAvBvB,kBAAC,GAAD,OC2BzCkB,GA/EU,SAAC,GAA2D,IAAzD1C,EAAyD,EAAzDA,OAAyD,IAAjDnW,aAAiD,MAAzC,IAAyC,MAApCC,cAAoC,MAA3B,IAA2B,MAAtBK,mBAAsB,MAAR,EAAQ,IACjD8V,oBAAS,GADwC,YAC5EC,EAD4E,KACjEC,EADiE,OAE3DF,mBAAS,IAFkD,YAE5E5V,EAF4E,KAEtE+V,EAFsE,KAI7EC,EAAUC,sBAAW,cAAC,8BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,SACHiW,EAAUlB,EAAOlW,KAAKA,KAAKkH,KAAI,SAACiD,GACpC,IAAMrD,EAAM,IAAIuQ,KAAKlN,EAAKrD,KAC1B,GAAIA,EACF,MAAO,CACLA,MACA9G,KAAMmK,EAAKnK,SAIjB+V,EAAQqB,GACRtB,GAAa,IAdW,2CAgBzB,CAACH,IAyBJ,OAJAQ,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAkB,kBAAC,GAAD,MAEF,IAAhB7V,EAAKoC,OAAqB,kBAAC,GAAD,MAG5B,oCACE,kBAAC,aAAD,CACE3C,OAAQA,EACRD,MAAOA,EACPQ,KAAMA,EACNsX,MACE,kBAAC,eAAD,CACEhV,KAAK,OACLiV,WACE,kBAAC,yBAAD,CACElB,MACE,kBAAC,wBAAD,CAGEmB,OA1CK,SAAC5X,GAEtB,IAAM6X,EAAYzX,EAAKiC,QAAQyV,QAEzBC,EAAW3X,EAAKiC,QAAQ2V,MAExBC,EAAOvS,SACXwS,aAAqBL,EAAU3Q,IAAK6Q,EAAS7Q,IAAK,CAChDiR,KAAM,WAIV,OAAIF,GAAQ,GAAKA,GAAQ,GAChBL,mBAAO5X,EAAG,QAAS,CAAEoY,OAAQC,OAE7BT,mBAAO5X,EAAG,WAAY,CAAEoY,OAAQC,cAkCrC3B,OACE,kBAAC,cAAD,CAAY6B,KAAM,kBAAC,QAAD,CAAMrY,YAAaA,IAAiByW,YAAaZ,EAAOY,kBCnF9E+B,GAAW,SAACxR,GAAwB,IAAnByR,EAAmB,uDAAX,OAC7B,OAAO,SAAmB3R,EAAGC,GAC3B,IAAKD,EAAEoF,eAAelF,KAASD,EAAEmF,eAAelF,GAC9C,OAAO,EAGT,IAAM0R,EAAyB,iBAAX5R,EAAEE,GAAoBF,EAAEE,GAAK2R,cAAgB7R,EAAEE,GAC7D4R,EAAyB,iBAAX7R,EAAEC,GAAoBD,EAAEC,GAAK2R,cAAgB5R,EAAEC,GAE/D6R,EAAa,EAMjB,OALIH,EAAOE,EACTC,EAAa,EACJH,EAAOE,IAChBC,GAAc,GAEC,SAAVJ,GAAiC,EAAdI,EAAkBA,IAwEjCC,GApEY,SAAC,GAAe,IAAbjD,EAAa,EAAbA,OAAa,EACjBC,mBAAS,IADQ,YAClC5V,EADkC,KAC5B+V,EAD4B,OAEPH,oBAAS,GAFF,YAElCC,EAFkC,KAEvBC,EAFuB,KAInCE,EAAUC,sBAAW,cAAC,4BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,SACT4U,EAAQG,EAAOlW,KAAKA,KAAK6Y,KAAKP,GAAS,UACvCxC,GAAa,IALW,2CAOzB,CAACH,IAEEmD,EAAUC,mBAAQ,kBAAM/Y,EAAKsV,QAAO,SAAC0D,EAAK7O,GAAN,OAAe6O,EAAM7O,EAAKnK,OAAM,KAAI,CAACA,IAM/E,OAJAmW,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAkB,kBAAC,GAAD,MAEF,IAAhB7V,EAAKoC,OAAqB,kBAAC,GAAD,MAE1BuT,EAAOnU,QAAQyX,WAEf,yBAAK9Q,UAAU,gBACb,2BAAOA,UAAU,kBACf,+BACGnI,EAAKkH,KAAI,SAACiD,EAAMrD,GAAP,OACR,wBAAIA,IAAKA,GACP,4BAAKqD,EAAKrD,KACV,4BAAKqD,EAAKnK,UAGd,4BACE,qCACA,4BAAK8Y,OASf,yBAAK3Q,UAAU,gBACb,+BACE,+BACE,4BACGnI,EAAKkH,KAAI,SAACiD,EAAMrD,GAAP,OACR,wBAAIA,IAAKA,GAAMqD,EAAKrD,QAEtB,uCAGJ,+BACE,4BACG9G,EAAKkH,KAAI,SAACiD,EAAMrD,GAAP,OACR,wBAAIA,IAAKA,GAAMqD,EAAKnK,SAEtB,4BAAK8Y,QCrBFI,GA1DW,SAAC,GAA0C,MAAxCvD,EAAwC,EAAxCA,OAAwC,IAAhCnW,aAAgC,MAAxB,IAAwB,MAAnBC,cAAmB,MAAV,IAAU,IAC3CmW,mBAAS,IADkC,YAC5D5V,EAD4D,KACtD+V,EADsD,OAEjCH,oBAAS,GAFwB,YAE5DC,EAF4D,KAEjDC,EAFiD,KAI7DE,EAAUC,sBAAW,cAAC,4BAAArP,EAAA,6DAC1BkP,GAAa,GADa,SAELN,GAAcG,EAAOtD,OAAQsD,EAAO7C,QAF/B,OAGJ,OADhBoD,EAFoB,QAGf/U,SACT4U,EAAQG,EAAOlW,KAAKA,MACpB8V,GAAa,IALW,2CAOzB,CAACH,IAMJ,GAJAQ,qBAAU,WACRH,MACC,CAACA,IAEAH,EAAW,OAAO,kBAAC,GAAD,MAEtB,GAAoB,IAAhB7V,EAAKoC,OAAc,OAAO,kBAAC,GAAD,MAG9B,IAAMgU,EAAUpW,EAAKkH,KAAI,SAACiD,EAAM9K,GAC9B,OACE,kBAAC,uBAAD,CACEyH,IAAKzH,EACL8I,UAAU,wBACVkO,MAAK,UAAKlM,EAAKrD,IAAV,aAAkBqD,EAAKnK,KAAvB,UAMX,OACE,oCACE,kBAAC,YAAD,CACEP,OAAQA,EACRD,MAAOA,EACPQ,KAAMA,EACNsW,OACE,kBAAC,gBAAD,CACE6C,UAAU,EACV5C,YAAaZ,EAAOnU,QAAQ+U,YAC5BF,MAAO,kBAAC,eAAD,CAAaW,SAAU,GAAIC,SAAS,iBAIhD,UAAAtB,EAAOnU,eAAP,eAAgBoV,SACf,kBAAC,kBAAD,CACEzO,UAAU,mBACV0O,YAAalB,EAAOnU,QAAQoV,OAC5BR,QAASA,MC5BJgD,GAnBO,SAAC,GAA0C,IAAxCzD,EAAwC,EAAxCA,OAAwC,IAAhCnW,aAAgC,MAAxB,IAAwB,MAAnBC,cAAmB,MAAV,IAAU,EAC/D,OAAQkW,EAAOrT,MACb,IXbe,YWcb,OAAO,kBAAC,GAAD,CAAiB9C,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IAChE,IXde,YWeb,OAAO,kBAAC,GAAD,CAAiBnW,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IAChE,IXfiB,cWgBf,OAAO,kBAAC,GAAD,CAAmBnW,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IAClE,IXfgB,aWgBd,OAAO,kBAAC,GAAD,CAAkBnW,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IACjE,KAAKV,GACH,OAAO,kBAAC,GAAD,CAAoBzV,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IACnE,IXpBgB,aWqBd,OAAO,kBAAC,GAAD,CAAkBnW,MAAOA,EAAOC,OAAQA,EAAQkW,OAAQA,IACjE,QACE,OAAO,uC,kDC1BE,IACb,CAAExV,KAAM,wBAAyBM,IAAK,yBACtC,CAAEN,KAAM,gBAAiBM,IAAK,+B,qkBCWhC,IAkHe4Y,GAlHI,SAAC,GAAuC,IAArCC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,OAAQC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QAAc,EAC7B7D,mBAAS0D,GADoB,YAClD3D,EADkD,KAC1C+D,EAD0C,KAQzD,OACE,kBAACC,GAAA,EAAD,CAAOH,KAAMA,EAAMI,OAAQ,kBAAMH,GAAQ,IAAQI,WAAW,EAAOxX,KAAK,KAAKyX,UAAQ,GACnF,kBAACH,GAAA,EAAMI,OAAP,CAAcC,aAAW,GACvB,kBAACL,GAAA,EAAMM,MAAP,8BAAoCtE,EAAOnV,KAE7C,kBAACmZ,GAAA,EAAMO,KAAP,KACE,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAACA,GAAA,EAAKC,MAAN,CAAYC,UAAU,kBACpB,kBAACF,GAAA,EAAKG,MAAN,yBACA,kBAACH,GAAA,EAAKI,QAAN,CACEnY,KAAK,OACLqG,MAAOgN,EAAOxV,KACd0I,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAAcxV,KAAMqH,EAAEU,OAAOS,UACvD+F,UAAQ,KAGZ,kBAAC2L,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,oBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOrT,KACduG,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAAcrT,KAAMkF,EAAEU,OAAOS,WAEtDuM,GAAYhO,KAAI,WAAkBJ,GAAlB,IAAG3G,EAAH,EAAGA,KAAMwI,EAAT,EAASA,MAAT,OACf,4BAAQ7B,IAAKA,EAAK6B,MAAOA,GACtBxI,QAKT,kBAACka,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,uBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOnU,QAAQ+U,YACtB1N,SAAU,SAACrB,GAAD,OACRkS,EAAU,SACL/D,GADI,IAEPnU,QAAS,SAAKmU,EAAOnU,SAAd,IAAuB+U,YAAa/O,EAAEU,OAAOS,aAIvDhB,OAAOD,KAAKkT,YAAS1T,KAAI,SAAC/G,EAAM2G,GAAP,OACxB,4BAAQA,IAAKA,GAAM3G,QAIzB,kBAACka,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,wBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOtD,OACdxJ,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAActD,OAAQ7K,EAAEU,OAAOS,UACzD+F,UAAQ,GAER,4BAAQ/F,MAAM,IAAd,qBACCkS,GAAY3T,KAAI,WAAgBJ,GAAhB,IAAG3G,EAAH,EAAGA,KAAMM,EAAT,EAASA,IAAT,OACf,4BAAQqG,IAAKA,EAAK6B,MAAOlI,GACtBN,QAKRwV,EAAOrT,OAAS2S,IACf,kBAACoF,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKS,MAAN,CACExY,KAAK,WACLyY,QAASpF,EAAOnU,QAAQyX,WACxB5C,MAAM,uBACNxN,SAAU,SAACrB,GAAD,OACRkS,EAAU,SACL/D,GADI,IAEPnU,QAAS,SAAKmU,EAAOnU,SAAd,IAAuByX,WAAYzR,EAAEU,OAAO6S,mBAQjE,kBAACX,GAAA,EAAD,KACE,kBAACD,GAAA,EAAD,KACE,yBAAKhS,UAAU,sBACZwN,GAAU,kBAAC,GAAD,CAAeA,OAAQA,EAAQnW,MAAO,WAM3D,kBAACma,GAAA,EAAMqB,OAAP,KACE,kBAACC,GAAA,EAAD,CAAQC,QAAQ,YAAYtR,QAAS,kBAAM6P,GAAQ,KAAnD,WAGA,kBAACwB,GAAA,EAAD,CAAQC,QAAQ,UAAUtR,QAvGb,WACjB2P,EAAO5D,GACP8D,GAAQ,IAqG2CtM,SAA0B,KAAhBwI,EAAOxV,MAAhE,0B,qkBC1GR,IA0Hegb,GA1HM,SAAC,GAA8B,MAA5B3B,EAA4B,EAA5BA,KAAMC,EAAsB,EAAtBA,QAASF,EAAa,EAAbA,OAAa,EACtB3D,mBAAS,CACnCzV,KAAM,GACNkS,OAAQ,GACR/P,KAAM2S,GACNzT,QAAS,CACP+U,YAAa,UANiC,YAC3CZ,EAD2C,KACnC+D,EADmC,KAgBlD,OACE,kBAACC,GAAA,EAAD,CAAOH,KAAMA,EAAMI,OAAQ,kBAAMH,GAAQ,IAAQI,WAAW,EAAOxX,KAAK,KAAKyX,UAAQ,GACnF,kBAACH,GAAA,EAAMI,OAAP,CAAcC,aAAW,GACvB,kBAACL,GAAA,EAAMM,MAAP,yBAEF,kBAACN,GAAA,EAAMO,KAAP,KACE,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACE,kBAACA,GAAA,EAAKC,MAAN,CAAYC,UAAU,kBACpB,kBAACF,GAAA,EAAKG,MAAN,yBACA,kBAACH,GAAA,EAAKI,QAAN,CACEnY,KAAK,OACLqG,MAAOgN,EAAOxV,KACd0I,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAAcxV,KAAMqH,EAAEU,OAAOS,UACvD+F,UAAQ,KAGZ,kBAAC2L,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,oBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOrT,KACduG,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAAcrT,KAAMkF,EAAEU,OAAOS,WAEtDuM,GAAYhO,KAAI,WAAkBJ,GAAlB,IAAG3G,EAAH,EAAGA,KAAMwI,EAAT,EAASA,MAAT,OACf,4BAAQ7B,IAAKA,EAAK6B,MAAOA,GACtBxI,QAKT,kBAACka,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,uBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOnU,QAAQ+U,YACtB1N,SAAU,SAACrB,GAAD,OACRkS,EAAU,SACL/D,GADI,IAEPnU,QAAS,SAAKmU,EAAOnU,SAAd,IAAuB+U,YAAa/O,EAAEU,OAAOS,aAIvDhB,OAAOD,KAAKkT,YAAS1T,KAAI,SAAC/G,EAAM2G,GAAP,OACxB,4BAAQA,IAAKA,GAAM3G,QAIzB,kBAACka,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKG,MAAN,wBACA,kBAACH,GAAA,EAAKI,QAAN,CACEC,GAAG,SACHC,QAAM,EACNhS,MAAOgN,EAAOtD,OACdxJ,SAAU,SAACrB,GAAD,OAAOkS,EAAU,SAAK/D,GAAN,IAActD,OAAQ7K,EAAEU,OAAOS,UACzD+F,UAAQ,GAER,4BAAQ/F,MAAM,IAAd,qBACCkS,GAAY3T,KAAI,WAAgBJ,GAAhB,IAAG3G,EAAH,EAAGA,KAAMM,EAAT,EAASA,IAAT,OACf,4BAAQqG,IAAKA,EAAK6B,MAAOlI,GACtBN,QAKRwV,EAAOrT,OAAS2S,IACf,kBAACoF,GAAA,EAAKC,MAAN,KACE,kBAACD,GAAA,EAAKS,MAAN,CACExY,KAAK,WACLyY,QAAO,UAAEpF,EAAOnU,eAAT,aAAE,EAAgByX,WACzB5C,MAAM,uBACNxN,SAAU,SAACrB,GAAD,OACRkS,EAAU,SACL/D,GADI,IAEPnU,QAAS,SAAKmU,EAAOnU,SAAd,IAAuByX,WAAYzR,EAAEU,OAAO6S,mBAQjE,kBAACX,GAAA,EAAD,KACE,kBAACD,GAAA,EAAD,KACE,yBAAKhS,UAAU,sBACZwN,EAAOtD,QAAU,kBAAC,GAAD,CAAesD,OAAQA,EAAQnW,MAAO,WAMlE,kBAACma,GAAA,EAAMqB,OAAP,KACE,kBAACC,GAAA,EAAD,CAAQC,QAAQ,YAAYtR,QAAS,kBAAM6P,GAAQ,KAAnD,WAGA,kBAACwB,GAAA,EAAD,CAAQC,QAAQ,UAAUtR,QAxGb,WAEjB6P,GAAQ,GACRF,EAAO5D,IAqG4CxI,SAA0B,KAAhBwI,EAAOxV,MAAhE,0B,qkBC0BOib,OA9If,WAAqB,MACaxF,mBAAS,IADtB,YACZyF,EADY,KACFC,EADE,OAGqB1F,oBAAS,GAH9B,YAGZ2F,EAHY,KAGEC,EAHF,OAImB5F,oBAAS,GAJ5B,YAIZ6F,EAJY,KAICC,EAJD,OAKyB9F,mBAAS,IALlC,YAKZ+F,EALY,KAKIC,EALJ,KA8BbC,EAAU,+BAAG,WAAOlG,GAAP,iBAAA/O,EAAA,6DAEX5G,EAAO,CACX+C,MAAO4S,EAAOxV,KACdwE,SAAUjD,KAAKC,UAAL,MAAoBgU,KAJf,SAMCF,KAAMrK,KAAK,uBAAwBpL,GANpC,OAOE,OADboH,EANW,QAOTjG,QAAsC,iBAAbiG,EAAIpH,MAEnCsb,EAAY,GAAD,YAAKD,GAAL,IAAC,MAAmB1F,GAApB,IAA4BnV,GAAI4G,EAAIpH,KAAKQ,QATrC,2CAAH,sDAiCVsb,EAAc7F,sBAAW,cAAC,8BAAArP,EAAA,sEACZ6O,KAAM,wBADM,OAEX,OADbrO,EADwB,QAEtBjG,QAAsC,iBAAbiG,EAAIpH,OAE7Bqb,EAAWjU,EAAIpH,KAAKkH,KAAI,SAACiD,GAC7B,IAAMxF,EAAWjD,KAAKqa,MAAM5R,EAAKxF,UACjC,WAASnE,GAAI2J,EAAK3J,IAAOmE,MAG3B2W,EAAYD,IATgB,2CAW7B,CAACC,IASJ,OAJAnF,qBAAU,WACR2F,MACC,CAACA,IAGF,yBAAK3T,UAAU,8BACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,cAIF,4BAAQ2B,QAAS,kBAAM8R,GAAe,IAAOvT,UAAU,OAAvD,eAIF,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,UACZkT,EAASnU,KAAI,SAACyO,GAAD,OACZ,yBAAK7O,IAAK6O,EAAOnV,GAAI2H,UAAU,OAAO4M,MAAO,CAAEvV,MAAOmW,EAAOnW,QAC3D,yBAAK2I,UAAU,eACb,yBAAKA,UAAU,qBAAqBwN,EAAOxV,MAC3C,yBAAKgI,UAAU,qCACb,4BACEA,UAAU,2BACV7F,KAAK,SACLS,MAAM,mBACN6G,QAAS,kBAhGD,SAAC+L,GACzBiG,EAAkBjG,GAClB6F,GAAgB,GA8FeQ,CAAkBrG,KAEjC,kBAAC,KAAD,CAAUwB,MAAM,aAElB,4BACEhP,UAAU,2BACV7F,KAAK,SACLS,MAAM,iBACN6G,QAAS,kBAhGFpJ,EAgGsBmV,EAhGtBnV,GAEjB2I,EAAQkS,EAASY,WAAU,SAAC9R,GAAD,OAAUA,EAAK3J,KAAOA,KAEvD8a,EAAYD,EAASvI,QAAO,SAAC3I,EAAM9K,GAAP,OAAcA,IAAM8J,EAAQgB,EAAO,cAE/DsL,KAAK,OAAQ,wBAA0BjV,GANnB,IAAGA,EAEjB2I,IAgGU,kBAAC,KAAD,CAAWgO,MAAM,eAIvB,yBAAKhP,UAAU,aACb,kBAAC,GAAD,CAAewN,OAAQA,EAAQnW,MAAO,YAK7C+b,GACC,kBAAC,GAAD,CACE/B,KAAM+B,EACN9B,QAAS+B,EACTlC,QAASqC,EACTpC,OArFY,SAAC5D,GAErB,IAAMuG,EAAYb,EAASY,WAAU,SAAC9R,GAAD,OAAUA,EAAK3J,KAAOmV,EAAOnV,MAElE8a,EAAYD,EAASnU,KAAI,SAACiD,EAAMhB,GAAP,OAAkB+S,IAAc/S,EAAQwM,EAASxL,MAE1E,IAAMnK,EAAO,CACX+C,MAAO4S,EAAOxV,KACdwE,SAAUjD,KAAKC,UAAL,MAAoBgU,KAGhCF,KAAM/H,IAAI,wBAA0BiI,EAAOnV,GAAIR,MA6E1Cyb,GACC,kBAACU,GAAD,CAAW3C,KAAMiC,EAAahC,QAASiC,EAAgBnC,OAAQsC,O,6aC/IpDO,G,sIAEjB,OAAO,4C,GAF0B9T,a,SC4GtB+T,OAxGf,WACE,IAAM5P,EAAW6P,cADA,EAEa1G,mBAAS,IAFtB,YAEV2G,EAFU,KAEDC,EAFC,KAQXzT,EAAU,CACd,CACE5I,KAAM,KACN4C,MAAO,MAET,CACE5C,KAAM,OACN4C,MAAO,OACPtC,KAAK,EACLyH,OAAQ,UAEV,CACE/H,KAAM,cACN4C,MAAO,eAET,CACE5C,KAAM,aACN4C,MAAO,cAET,CACE5C,KAAM,UACN4C,MAAO,UACP2G,WAAW,EACXC,OAAQ,CACN8S,MAAO,GACPC,SA7Bc,SAACvS,GACnB/G,OAAOuZ,KAAKxS,EAAKyS,QAAS,WA6BtB7Z,MAAO,aAkCP8Z,EAAU,+BAAG,4BAAAjW,EAAA,sEACC6O,KAAM,uBADP,OAEE,OADbrO,EADW,QAETjG,QAAsC,iBAAbiG,EAAIpH,MACnCwc,EAAWpV,EAAIpH,MAHA,2CAAH,qDAYhB,OAJAmW,qBAAU,WACR0G,MACC,IAGD,yBAAK1U,UAAU,2BACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,WAGA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,gBAEF,4BAAQyB,QAnDI,WAChB,IAAMpG,EAAgB,CACpBT,MAAO,iBACPC,aAAc,MACdF,QAAQ,EACRG,OAAQ,SAASf,GACf,OAAOuT,KAAMrK,KAAK,sBAAuBlJ,IAE3CW,OAAQ,CACN,CACE1C,KAAM,OACNkW,MAAO,cACP3H,UAAU,GAEZ,CACEvO,KAAM,cACNkW,MAAO,cACP3H,UAAU,IAGdxL,QAAS,SAASpC,GAChB0b,EAAW,GAAD,YAAKD,GAAL,CAAczb,EAAId,QAC5ByM,EAAS7H,kBAGb6H,EAAS/H,aAAiBlB,KA0BM2E,UAAU,OAAtC,WAGA,yBAAKA,UAAU,iBACb,0BAAMA,UAAU,0BAAhB,QAA+CoU,EAAQna,QAAU,IAAjE,OAGJ,yBAAK+F,UAAU,iBACZoU,EAAQna,OAAS,GAAK,kBAAC,EAAD,CAAY2G,QAASA,EAASE,KAAMsT,O,6aC9F9CO,G,mCAEpB,WAAYvd,GAAO,0BACR,cAAMA,IACDkE,MAAQ,CACT6F,QAAS,gBACXF,IAAK,OACH2T,QAAS,GACThU,QAAS,CACL,CACI5I,KAAM,QACN4C,MAAO,QACPtC,KAAK,EACP6I,SAAS,EACTF,IAAM,QAER,CACIjJ,KAAM,OACN4C,MAAO,OACPtC,KAAK,EACP6I,SAAS,EACTF,IAAM,QAER,CACIjJ,KAAM,cACN4C,MAAO,eAEX,CACI5C,KAAM,UACN4C,MAAO,UACPtC,KAAK,GAET,CACIN,KAAM,aACN4C,MAAO,gBAKnB,EAAKuH,SAAW,IAAIhK,IAAS,CACzBC,MAAO,uBAtCH,E,uJA4CRN,KAAKqK,SAASK,SAAS9J,MAAK,SAAAkc,GACxB,EAAKC,WAAWD,M,8HAIpBA,GACAxa,QAAQC,IAAIua,GACZ,IAAIE,EAAaF,EAAQ7V,KAAI,SAACgC,GAE1B,OADAA,EAAII,QAAU,sBAAwBJ,EAAI1I,GACnC0I,KAGX3G,QAAQC,IAAIya,GACZhd,KAAK2K,UAAS,SAACnH,GACzB,MAAO,CAACsZ,QAASE,Q,+BAKP,OAAO,yBAAK9U,UAAU,2BAClB,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,qBACX,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,UACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,eAEJ,kBAAC,IAAD,CAAMA,UAAU,MAAMqB,GAAG,qBAAzB,WACA,yBAAKrB,UAAU,iBACX,0BAAMA,UAAU,0BAAhB,QAA+ClI,KAAKwD,MAAMsZ,QAAQ3a,QAAU,IAA5E,OAGR,yBAAK+F,UAAU,iBACX,kBAAC,EAAD,CAAYY,QAAS9I,KAAKwD,MAAMsF,QAASE,KAAMhJ,KAAKwD,MAAMsZ,gB,GA9E1CzU,aCVpB,I,OAAA,cACdhJ,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,IAAIC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,iBAAiBC,OAAO,UAAUC,YAAY,W,obC8ElIod,G,iCA3Eb,WAAY3d,GAAM,0BAChB,cAAMA,IACDkE,MAAQ,CACX0Z,YAAa,GAHC,E,mDAWHC,GAEb,OADAA,EAAM9X,SAAS8X,IAAQ,IACb,GACRnd,KAAK2K,SAAS,CAACuS,YAAa,SAC5Bld,KAAKV,MAAM8d,WAAW,IAGrBD,GAAOnd,KAAKV,MAAM+d,WACnBrd,KAAK2K,SAAS,CAACuS,YAAald,KAAKV,MAAM+d,iBACvCrd,KAAKV,MAAM8d,WAAWpd,KAAKV,MAAM+d,aAGnCrd,KAAK2K,SAAS,CAACuS,YAAaC,SAC5Bnd,KAAKV,MAAM8d,WAAWD,M,2CASnBnd,KAAKwD,MAAM0Z,YAAcld,KAAKV,MAAM+d,WACrCrd,KAAKsd,eAAetd,KAAKV,MAAM4d,aAAeld,KAAKV,MAAM+d,a,+BAGrD,WACN,OAAM,yBAAKnV,UAAU,cACnB,yBAAKA,UAAU,WACb,uBAAGA,UAAU,uBAAb,WAOWqV,cAPX,MASF,yBAAKrV,UAAU,uBACb,uBAAGA,UAAU,oBAAqBlI,KAAKV,MAAMke,WAA7C,UACA,yBAAKtV,UAAWlI,KAAKwD,MAAM0Z,aAAe,EAAI,6DAA+D,uCAC7GvT,QAAS,kBAAK,EAAK2T,eAAe,KAChC,kBAAC,GAAD,CAAOpV,UAAU,iBACjB,kBAAC,GAAD,CAAOA,UAAU,kBAEnB,yBAAKA,UAAWlI,KAAKwD,MAAM0Z,aAAe,EAAI,yDAA2D,oCACzGvT,QAAS,kBAAK,EAAK2T,iBAAiB,EAAK9Z,MAAM0Z,eAAgB,kBAAC,GAAD,CAAOhV,UAAU,iBADhF,KAEA,2BAAO7F,KAAK,OACL6F,UAAU,wBACVQ,MAAO1I,KAAKwD,MAAM0Z,aAAe,EACjCtU,SAAU,SAAArB,GAAC,OAAG,EAAK+V,eAAe/V,EAAEU,OAAOS,MAAMyB,QAAQ,UAAW,KAAO,MAClF,yBAAKjC,UAAU,mBAAf,MAAqClI,KAAKV,MAAM+d,WAChD,yBAAKnV,UAAWlI,KAAKwD,MAAM0Z,aAAeld,KAAKV,MAAM+d,UAAY,yDAA2D,oCAAqC1T,QAAS,WAClL,EAAK2T,iBAAiB,EAAK9Z,MAAM0Z,eADzB,IAEI,kBAAC,GAAD,MAFJ,KAGA,yBAAKhV,UAAWlI,KAAKwD,MAAM0Z,aAAeld,KAAKV,MAAM+d,UAAY,wCAA0C,mBAC3G1T,QAAS,kBAAK,EAAK2T,eAAe,EAAKhe,MAAM+d,aAC3C,kBAAC,GAAD,MAFF,IAEW,kBAAC,GAAD,a,GArEMhV,a,k/BCGJoV,G,mCACnB,WAAYne,GAAM,0BAChB,cAAMA,IACDkE,MAAQ,CACXka,UAAW,GACXC,aAAc,GACdC,cAAe,GACfC,mBAAoB,GACpBR,UAAW,EACXH,YAAa,GAEf,EAAK7S,SAAW,IAAIhK,IAAS,CAC3BC,MAAO,0BAET,EAAKwd,sBAAwB,IAAIzd,IAAS,CACxCC,MAAO,sBAET,EAAKqJ,QAAU,EAAKA,QAAQ4C,KAAb,QACf,EAAK6Q,WAAa,EAAKA,WAAW7Q,KAAhB,QAClB,EAAKwR,iBAAmB,EAAKA,iBAAiBxR,KAAtB,QACxB,EAAKyR,qBAAuB,EAAKA,qBAAqBzR,KAA1B,QAnBZ,E,qDAqBDhF,GACf,IAAI0W,EAAS5Y,SAASkC,EAAEU,OAAOgM,QAAQkE,MACnC0F,EAAqB,GACzB7d,KAAKwD,MAAMoa,cAAc1R,SAAQ,SAAAiM,GAC5BA,EAAK5X,KAAO0d,IACbJ,EAAqB1F,MAGzBnY,KAAKke,cAAcL,K,iCAMVX,GACTld,KAAKme,gBAAgBjB,EAAald,KAAKwD,MAAMqa,oBAC7C7d,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiB0Z,qB,oCAOxBW,GACZ7d,KAAKme,gBAAgB,EAAGN,GACxB7d,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBqa,4B,sCASLX,EAAaW,GAAmB,WAC9C7d,KAAKqK,SAAS+T,WAAW,CACvBjG,KAAM0F,EAAmB3d,KACzBme,KAAMnB,EACNoB,SAAU,KACT1d,MAAK,SAAAC,GACN,EAAK8J,UAAS,SAAAnH,GACZ,gBACKA,GADL,IAEE6Z,UAAWxc,EAAIwc,UACfK,UAAW7c,EAAI6c,oB,2CAUFa,GACnB,IAAMxe,EAAO6L,GAAmBnK,KAAKqa,MAAMyC,EAASxe,OAC9CoB,EAAOM,KAAKC,UAAU,CAC1B8c,cAAexe,KAAKwD,MAAMqa,mBAAmB3d,KAC7CH,SAGF,OADAuC,QAAQC,IAAId,KAAKqa,MAAM3a,IAChBA,I,uCAMQod,GACf,IAAME,EAAU3R,SAAS/C,cAAc,KACjC2U,EAAO,IAAIC,KAAK,CAAC3e,KAAKge,qBAAqBO,IAAY,CAAElc,KAAM,eACrEoc,EAAQzW,KAAO4W,IAAIC,gBAAgBH,GACnCD,EAAQK,SAAR,UAAsBP,EAASre,KAA/B,SACA4M,SAAStL,KAAKud,YAAYN,GAC1BA,EAAQO,U,oJAGkBhf,KAAK8d,sBAAsBpT,S,OAAjDkT,E,OACJ5d,KAAKke,cAAcN,EAAc,IACjC5d,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAgBoa,qBAElB5d,KAAKme,gBAAgBne,KAAKwD,MAAM0Z,YAAald,KAAKwD,MAAMqa,oB,6HAGxD,IAAIta,EAAgB,CAClBT,MAAO,mBACPC,aAAc,MACdC,OAAQ,SAASf,GACf,IAAIlC,EAAO,CACTG,KAAM+B,EAASa,MACfA,MAAOb,EAASa,MAChBqV,KAAMlW,EAASkW,KACfpY,KAAK,CACHqJ,SAAU,GACV7I,G9CrHH,IAAMuB,KAAKC,SAAS8H,SAAS,IAAIoV,OAAO,EAAG,G8CsHxC/e,KAAM,eACNwE,SAAU,GACVrC,KAAM,iBAGV,OAAQ,IAAIhC,IAAS,CAACC,MAAM,0BAA2B6K,KAAKpL,IAE9D6C,OAAQ,CACN,CACE1C,KAAM,QACNkW,MAAO,gBACP3H,UAAU,GAEZ,CACEvO,KAAM,OACNkW,MAAO,YACP3H,UAAU,EACVpM,KAAM,SACNd,QAASvB,KAAKkf,kBACd/e,aAAcH,KAAKwD,MAAMqa,mBAAmBtd,KAGhD0C,QAAS,SAASpC,GACbA,EAAIgK,UAAYhK,EAAIL,KACrBqK,EAAShK,EAAIL,MAGjBqC,QAAQ,GAEVyB,IAAMkI,SAAS/H,aAAiBlB,M,wCAGhC,OAAOvD,KAAKwD,MAAMoa,gB,mCAEPF,GAAU,WACjBC,EAAeD,EACnBA,EAAYA,EAAU7K,QAAO,SAAA0L,GAC3B,OAAOA,EAASpG,OAAS,EAAK3U,MAAMqa,mBAAmB3d,QAEzDF,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBka,YAAWC,sB,+BAGxB,WACN,OAAO,yBAAKzV,UAAU,8BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,aACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,kBAEF,4BAAQyB,QAAS3J,KAAK2J,QAASzB,UAAU,OAAzC,WACA,yBAAKA,UAAU,iBACb,0BAAMA,UAAU,0BAAhB,QAA+ClI,KAAKwD,MAAMma,aAAaxb,QAAU,GAAjF,OAGJ,yBAAK+F,UAAU,iBACb,wBAAIA,UAAU,6BACXlI,KAAKwD,MAAMoa,cAAc3W,KAAI,SAAAkR,GAC5B,IAAIgH,EAAa,CAAC,YAIlB,OAHG,EAAK3b,MAAMqa,mBAAmB3d,OAASiY,EAAKjY,MAC7Cif,EAAWhgB,KAAK,UAEZ,wBAAI+I,UAAU,WAAWrB,IAAKsR,EAAK5X,IACvC,4BAAQ2H,UAAWiX,EAAW1T,KAAK,KAC3B9B,QAAS,EAAKoU,iBACdqB,YAAWjH,EAAK5X,IAAK4X,EAAKrV,YAIxC,kBAAC,EAAD,CAAYgG,QAAS,CACnB,CACE5I,KAAM,QACN4C,MAAO,QACPtC,KAAK,EACLyH,OAAQ,UAEV,CACE/H,KAAM,SACN4C,MAAO,WAGTkG,KAAMhJ,KAAKwD,MAAMka,UACjB1T,aAAc,CAAC,CAAEb,IAAK,IAAK7J,MAAO,CAChC0I,KAAM,gCACNC,OAAQ,UAGRnF,MAAO,QACN,CACDqG,IAAK,SACL7I,MAAO,oCACPI,OAAQ,SAERoC,MAAO,iBACN,CACDqG,IAAK,SACL7I,MAAO,wBACPI,OAAQ,MACR6J,MAAO,SAAAD,GAAQ,OAAI,EAAK+U,iBAAiB/U,IACzCxH,MAAO,UACN,CACDqG,IAAK,SACL7I,MAAO,4BACPI,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAK4T,gBAAgB,EAAK3a,MAAM0Z,YAAa,EAAK1Z,MAAMqa,qBACrE3V,UAAW,iCACXpF,MAAO,YAGX,kBAAC,GAAD,CAAYua,UAAWrd,KAAKwD,MAAM6Z,WAAa,EACnCH,YAAald,KAAKwD,MAAM0Z,YACxBE,WAAYpd,KAAKod,WACjBI,WAAYxd,KAAKwD,MAAMka,UAAUvb,e,GAxOdkG,aCRvB,iBACdhJ,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,KAAKC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMggB,SAAS,UAAUC,SAAS,UAAU5f,EAAE,sIAAsIF,KAAK,YAAY,0BAAME,EAAE,spCAAspCF,KAAK,W,k/BCG97C+f,G,iCACJ,WAAYlgB,GAAO,0BACjB,cAAMA,IACDqF,YAAc,EAAKA,YAAY4H,KAAjB,QACnB,EAAKY,YAAc,EAAKA,YAAYZ,KAAjB,QACnB,EAAKkT,eAAiB,EAAKA,eAAelT,KAApB,QACtB,EAAKvJ,OAAS,EAAKA,OAAOuJ,KAAZ,QACd,EAAKtK,SAAW,GAChB3C,EAAMsD,OAAOsJ,SAAQ,SAAAmG,GAChBA,EAAMlS,eACP,EAAK8B,SAASoQ,EAAMnS,MAAQmS,EAAMlS,iBAGtC,EAAKqD,MAAQ,CACXkO,OAAQ,IAEVpN,IAAMob,UAAU,EAAKD,gBAfJ,E,qDAiBH,WACdnb,IAAMqb,WAAWpc,cAAcX,OAAOsJ,SAAQ,SAAAmG,GACzCA,EAAMlS,eACP,EAAK8B,SAASoQ,EAAMnS,MAAQmS,EAAMlS,mB,+BAI/B,WACHyf,GAAQ,EACRlO,EAAS1R,KAAKV,MAAMsD,OAAOqE,KAAI,SAAAoL,GACjC,GAAIA,EAAM5D,WACL,EAAKxM,SAASoQ,EAAMnS,MAEvB,OADA0f,GAAQ,EACDvN,EAAMwN,cAAN,8BAGLD,EAMN5f,KAAKV,MAAM0D,OAAOhD,KAAKiC,UAAUrB,KAAKZ,KAAKV,MAAM2D,SAL/CjD,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBkO,gB,kCAOZnK,GACV,IAAIU,EAASV,EAAEU,OACfjI,KAAKiC,SAASgG,EAAOgM,QAAQ5B,OAASpK,EAAOS,MAC7C,IAAIgJ,EAAS,KAAI1R,KAAKwD,MAAMkO,QAC5BA,EAAOzJ,EAAOgM,QAAQ6L,OAAS,GAC/B9f,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBkO,gB,oCAKpBpN,IAAMkI,SAAS7H,kB,+BAGR,WACHob,EAAe,cAInB,OAHI/f,KAAKV,MAAMuD,SACbkd,GAAgB,uBAEX,yBAAK7X,UAAW6X,GACrB,yBAAK7X,UAAU,kBAAkByB,QAAS3J,KAAK2E,cAC/C,yBAAKuD,UAAU,uBACb,4BAAQA,UAAU,qBAAqByB,QAAS3J,KAAK2E,aAAa,kBAAC,GAAD,CAAWuD,UAAU,UACvF,yBAAKA,UAAU,iBAAiBlI,KAAKV,MAAMwD,OAC3C,yBAAKoF,UAAU,yBAEXlI,KAAKV,MAAMsD,OAAOqE,KAAI,SAACoL,EAAOvL,GAAR,OAAgB,2BAAOoB,UAAU,aACV8X,aAAY3N,EAAMnS,KAClB2G,IAAKwL,EAAMnS,MAAOmS,EAAM+D,MAClD,WAAf/D,EAAMhQ,KACJ,2BAAOA,KAAMgQ,EAAMhQ,MAAQ,OACpB6F,UAAU,cACV8X,aAAY3N,EAAMnS,KAClB+f,aAAYnZ,EACZ3G,aAAckS,EAAMlS,cAAgB,GACpCyI,SAAU,EAAKuE,cACtB,4BAAQjF,UAAU,cACV8X,aAAY3N,EAAMnS,KAClB+f,aAAYnZ,EACZ3G,aAAckS,EAAMlS,cAAgB,GACpCyI,SAAU,EAAKuE,aACrB,4BAAQzE,MAAM,KAEZ2J,EAAM9Q,QAAQ0F,KAAI,SAAAiZ,GAAM,OACpB,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAO3f,GACd6I,SAAU8W,EAAOpd,OAASod,EAAOhgB,WAIpD,EAAKsD,MAAMkO,OAAO5K,GAAO,0BAAMoB,UAAU,qBAAqB,EAAK1E,MAAMkO,OAAO5K,IAAe,OAGpG,yBAAKoB,UAAU,eACb,4BAAQA,UAAU,kBAAkByB,QAAS3J,KAAKgD,QAAShD,KAAKV,MAAMyD,sB,GAjGzDsF,aA+GVC,oBANf,SAAyB9E,GACvB,aACKA,EAAMD,iBAIE+E,CAAyBkX,I,k/BC3GlCW,G,qCACJ,WAAY7gB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACX6a,KAAM,GACN3V,MAAO,GACPiJ,mBAAmB,EACnB+L,UAAW,GACX0C,OAAQ,IAEV,EAAK/V,SAAW,IAAIhK,IAAS,CAACC,MAAO,sBACrC,EAAK+f,eAAiB,IAAIhgB,IAAS,CAACC,MAAO,+BAC3C,EAAKggB,iBAAmB,IAAIjgB,IAAS,CAACC,MAAO,0BAC7C,EAAKigB,SAAW,EAAKA,SAAShU,KAAd,QAZC,E,wKAqBDvM,KAAKsgB,iBAAiBE,a,cAAlC3f,E,OACJb,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBka,UAAW7c,O,SAGPb,KAAKqgB,eAAe3V,S,UAAvC+V,E,OACJzgB,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiB4c,OAAQK,OAEvBlgB,EAAKP,KAAKV,MAAM8T,MAAM3Q,OAAOlC,KACjCA,EAAK8E,SAAS9E,I,kCAESP,KAAKqK,SAASjK,IAAIG,G,QAAnCmgB,E,OACJ1gB,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAiBkF,MAAMgY,EAAUngB,U,gJAUxBgH,G,8EACbA,EAAE0G,iBAIF0S,EAAoB,OADpBA,GADIA,EAAO3gB,KAAKwD,MAAMkF,MAAMiY,MAChBrV,MAAM,MAAMG,KAAK,MAChB,GAAN,WAAwBkV,GAASA,GAGxC9V,IADIA,EAAW7K,KAAKwD,MAAMkF,MAAMmC,WACR,IAAIS,MAAM,MAAMG,KAAK,QAE3CZ,EAA4B,MAAhBA,EAAS,GAAV,WAA4BA,GAAaA,GAEtD7K,KAAKwD,MAAMkF,MAAMmC,SAAWA,EAC5B7K,KAAKwD,MAAMkF,MAAMiY,KAAOA,GACrB3gB,KAAKwD,MAAMjD,G,kCACAP,KAAKqK,SAASoD,IAAIzN,KAAKwD,MAAMjD,GAAIP,KAAKwD,MAAMkF,O,QAAxD7H,E,gDAEYb,KAAKqK,SAASc,KAAKnL,KAAKwD,MAAMkF,O,QAA1C7H,E,eAECA,EAAIoC,QACLjD,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBmO,mBAAmB,OAGvC3R,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBkF,MAAO,Q,iIAInBA,EAAO2J,GACJ,SAAVA,IAED3J,EAAsB,OADtBA,EAAQA,EAAM4C,MAAM,MAAMG,KAAK,MAChB,GAAP,WAAyB/C,GAAUA,GAEhC,aAAV2J,IACD3J,EAAQA,EAAM4C,MAAM,MAAMG,KAAK,QAE7B/C,EAAsB,MAAbA,EAAM,GAAP,WAAyBA,GAAUA,GAG/C1I,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,EAAQ,MAAIA,IACNkF,MAAM2J,GAAS3J,EACdlF,O,+BAGF,WACP,OAAGxD,KAAKwD,MAAMmO,kBACN,kBAAC,KAAD,CAAUpI,GAAG,iBAEd,yBAAKrB,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,gBAA7C,SACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAA8BlI,KAAKwD,MAAMkF,MAAM5F,OAAS,kBAG5E,yBAAKoF,UAAU,iBACb,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAKugB,UAC1C,yBAAKrY,UAAU,cACb,2BAAO4F,QAAQ,cAAf,SACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAakO,SAAU,EACtC/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,OAAS,GACjC8F,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UACjDR,UAAU,kBAEnB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,aAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,YAAYkO,SAAU,EACrC/F,MAAO1I,KAAKwD,MAAMkF,MAAMiY,MAAQ,GAChC/X,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SACjDR,UAAU,kBAgBnB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,cAAf,SACA,4BAAQvN,GAAG,aACJmI,MAAO1I,KAAKwD,MAAMkF,MAAMkY,UAAY,GACpChY,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aACjDR,UAAU,gBACf,4BAAQQ,MAAM,KAEZ1I,KAAKwD,MAAM4c,OAAOnZ,KAAI,SAAAf,GACpB,OAAO,4BAAQwC,MAAOxC,EAAMwC,MAAO7B,IAAKX,EAAMwC,OAAQxC,EAAMkQ,YAKpE,yBAAKlO,UAAU,cACb,2BAAO4F,QAAQ,cAAf,SACA,kBAAC,GAAD,CAAavN,GAAG,aACHuS,SAAS,EACTxC,aAAa,2BACbX,YAAY,MACZkR,eAAgB,CACd,CACEnY,MAAO,QACP0N,MAAO,UAGX1N,MAAO1I,KAAKwD,MAAMkF,MAAMnD,MACxBqD,SAAU,SAAAF,GAAU,EAAKyE,YAAYzE,EAAO,aAG3D,yBAAKR,UAAU,cACb,2BAAO4F,QAAQ,YAAf,YACA,2BAAOzL,KAAK,OAAO9B,GAAG,WACfmI,MAAO1I,KAAKwD,MAAMkF,MAAMmC,UAAY,GACpCjC,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aACjDR,UAAU,kBAEnB,4BAAQA,UAAU,mBAAmBlI,KAAKwD,MAAMjD,GAAK,OAAS,c,GA3KlD8H,aAkLP4K,gBAAWkN,IC5LV,iBACd9gB,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,KAAKC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,8VAA8VF,KAAK,cCHvb,iBACdJ,OADc,IAEXC,EAFW,yBAGV,6BAAKC,MAAM,KAAKC,OAAO,KAAKC,KAAK,OAAOC,MAAM,8BAAiCJ,GAAO,0BAAMK,EAAE,wOAAwOF,KAAK,YAAY,0BAAME,EAAE,qPAAqPF,KAAK,c,6aCiBhlBqhB,G,sIAbX,OAAM,yBAAK5Y,UAAU,4DACnB,uBAAGF,KAAK,IAAIE,UAAU,uCACpB,kBAAC,GAAD,CAAUA,UAAU,wBAEtB,kBAAC,GAAD,CAAUA,UAAU,wBACpB,yBAAKA,UAAU,uBAAf,wBACA,4BAAQA,UAAU,0BAA0ByB,QAASuB,GACnD,kBAAC,GAAD,CAAYhD,UAAU,uB,GATHG,a,sCCJ3B,IAAM1F,GAAe,CACnBoe,eAAgB,I,klBCAlB,IAAMpe,GAAe,CACnBzB,OAAQ8f,KAAUC,kBCFpB,IAAMte,GAAe,CACnBue,UCFuB,a,aCCzB,IAAMve,GAAe,CACnBoe,eAAgB,I,qkBCDlB,IAAMpe,GAAe,CACnB4W,MAAM,EACN9W,OAAQ,CACNJ,KAAM,QAERoc,QAAS,KACTvP,SAAU,SAACiS,GACT7e,QAAQC,IAAI4e,K,+NCPhB,IAAMxe,GAAe,CACnB+F,MAAO,GACP4R,UAAW,I,qkBCFb,IAAM3X,GAAe,GCArB,IAAMA,GAAe,CACnBye,WAAY,I,qkBCDd,IAAMze,GAAe,CACnBG,MAAO,IACP4F,MAAO,I,qkBCDT,IAAM/F,GAAeqe,KAAUK,QAAQ,G,cCDvC,IAAM1e,GAAe,G,cCcNW,8BAAgB,CAC7Byd,eZXK,SAA+Bvd,EAAOC,GAE3C,OADAD,EAAQA,GAASb,GACTc,EAAOpB,MACb,IaT+B,sBbU7BmB,EAAQ,CACNud,eAAgBtd,EAAOgb,SAI7B,OAAOjb,GYGP8d,sBRZK,SAAsC9d,EAAOC,GAElD,OADAD,EAAQA,GAASb,GACTc,EAAOpB,MACb,IUTuC,8BVUrCmB,EAAQ,CACNud,eAAgBtd,EAAOgb,SAI7B,OAAOjb,GQIP+d,eXZK,WAA6D,IAA9B/d,EAA8B,uDAAtBb,GAAcc,EAAQ,uCAClE,OAAQA,EAAOpB,MACb,IcTkC,yBdUhC,gBAAYmB,GAAZ,IAAmBtC,OAAQuC,EAAOvC,SACpC,QACE,OAAOsC,IWQXge,YVdK,SAA4Bhe,EAAOC,GACxC,IAAKD,EACH,OAAOb,GAET,IAAKc,EACH,MAAM,CAACyd,UCVc,aDYvB,OAAQzd,EAAOpB,MACb,ICbqB,YDcnBmB,EAAQ,CACN0d,UCfiB,YDgBjBzC,QAAQ,MAEX,MACD,ICpBsB,aDqBpBjb,EAAQ,CACN0d,UCtBkB,aDuBlBzC,QAAShb,EAAOgb,SAItB,OAAOjb,GUNPU,sBAAuBC,KACvBsd,oBPTK,SAA+Bje,EAAOC,GAE3C,OADAD,EAAQA,GAAS,MAAIb,IACbc,EAAOpB,MACb,IWhBgC,uBXiB9BmB,EAAQ,CACNf,OAAQ,MAAIgB,EAAOhB,QACnBgc,QAAShb,EAAOgb,QAChBlF,MAAM,GAET,MACD,IWrBkC,yBXsBhC/V,EAAQ,CACNf,OAAQ,MAAIgB,EAAOhB,QACnBgc,QAAShb,EAAOgb,QAChBlF,MAAQ/V,EAAM+V,MAEjB,MACD,IW7BgC,uBX8B9B/V,EAAQ,MACDb,IAIX,OAAOa,GObPke,gBNfK,SAA2Ble,EAAOC,GAEvC,OADAD,EAAQA,GAASb,GACTc,EAAOpB,MACb,IWX4B,mBXY1BmB,E,mWAAQ,IACHC,EAAO1D,MAIhB,OAAOyD,GMOPme,mBLpBK,WAAiE,IAA9Bne,EAA8B,uDAAtBb,GAAcc,EAAQ,uCACtE,OAAQA,EAAOpB,MACb,IWN8B,qBXO5B,IAAIuf,EAAW,MAAIpe,GAUnB,OATAoe,EAASne,EAAOoe,aAAeD,EAASne,EAAOoe,cAAgB,GAI5DD,EAASne,EAAOoe,aAAape,EAAOqe,OAASre,EAAOse,UACrDH,EAASne,EAAOoe,aAAape,EAAOqe,KAAOre,EAAOse,UAElDH,EAASne,EAAOoe,aAAape,EAAOqe,KAAO,KAEtCF,EACT,QACE,OAAOpe,IKMX4d,WJnBK,SAA2B5d,EAAOC,GAEvC,OADAD,EAAQA,GAASb,GACTc,EAAOpB,MACb,IWT2B,kBXUzBmB,EAAQ,CACN4d,WAAY3d,EAAOqe,KAIzB,OAAOte,GIWPwe,aHnBK,WAA2D,IAA9Bxe,EAA8B,uDAAtBb,GAAcc,EAAQ,uCAChE,OAAQA,EAAOpB,MACb,IWT6B,oBXU3BmB,EAAQ,SACHA,GADA,IAEHV,MAAOW,EAAOX,MACd4F,MAAOjF,EAAOiF,QAKpB,OAAOlF,GGSPye,cFtBK,WAA4D,IAA9Bze,EAA8B,uDAAtBb,GAAcc,EAAQ,uCACjE,OAAQA,EAAOpB,MACb,IWP8B,qBXW5B,OAHAmB,EAAQ,MACHC,EAAOye,QAId,QACE,OAAO1e,IEcX2e,aAAclc,KACdmc,aDxBK,SAA6B5e,EAAOC,GAEzC,OADAD,EAAQA,GAASb,GACTc,EAAOpB,MACb,IWR6B,oBXS3BmB,EAAQC,EAAO2e,aAGnB,OAAO5e,GCkBP6e,YAAatc,OW1BHxB,uBAAYC,GAAa8d,kC,y/BCK/BC,G,mCACJ,WAAYjjB,GAAO,0BACjB,cAAMA,IACDkjB,SAAW,EAAKA,SAASjW,KAAd,QAChB,EAAKkW,cAAgB,EAAKA,cAAclW,KAAnB,QACrB,EAAKmW,YAAc,EAAKA,YAAYnW,KAAjB,QACnB,EAAKoW,YAAc,EAAKA,YAAYpW,KAAjB,QACnB,EAAK/I,MAAQ,CAEXuL,UAAW,QACX6T,KAAM,CAKJ,CACE1iB,KAAM,QACN4C,MAAO,iBAET,CACE5C,KAAM,QACN4C,MAAO,kBAGX+Q,OAAQ,EAAKgP,UAAU,SAEvBC,cAAe,KACfC,YAAa,IAEf,EAAKC,cAAgB,IAAI3iB,IAAS,CAAEC,MAAO,sBA5B1B,E,2KAgCCN,KAAKgjB,cAActY,S,OAA/B7J,E,OAEJb,KAAK2K,UAAS,SAAAnH,GAKZ,MAHwB,WADxBA,EAAQ,SAAKA,GAAR,IAAeuf,YAAaliB,KACvBkO,YACRvL,EAAMqQ,OAAShT,GAEV2C,K,gDAGTlB,QAAQC,IAAI,QAAZ,M,sIAGMuf,GAKR,OAJKA,IACHA,EAAM9hB,KAAKwD,MAAMuL,WAGX+S,GACN,IAAK,QACH,OCSC3e,OAAO6H,aDTciY,eAExB,IAAK,QACH,OAAOjjB,KAAKwD,MAAQxD,KAAKwD,MAAMuf,YAAc,GAGjD,MAAO,K,kCAGGxb,GACV,IAAIub,EAAgBvb,EAAEyM,cAAcC,QAAQiP,UAC5CljB,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBsf,uB,+BAIdvb,GACPvH,KAAKmjB,aAAa5b,EAAEU,OAAOgM,QAAQ6N,O,mCAGxBA,GAAK,WAChB9hB,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBuL,UAAW+S,EAAKjO,OAAQ,EAAKgP,UAAUf,U,sCAK5D9hB,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBsf,cAAe,UAEpC9iB,KAAKV,MAAMkN,SAAS4W,kB,oCAGR,IACRvO,EADQ,OAOZ,GALA7U,KAAKwD,MAAMqQ,OAAO3H,SAAQ,SAAAhC,GACpBA,EAAKhK,OAAS,EAAKsD,MAAMsf,gBAC3BjO,EAAQ3K,OAGP2K,EACH,+BAAyB7U,KAAKwD,MAAMsf,cAApC,yCAAkF9iB,KAAKwD,MAAMuL,UAA7F,MAEF/O,KAAKV,MAAM+jB,SAASxO,GACpB7U,KAAK2K,UAAS,SAAAnH,GACZ,gBAAYA,GAAZ,IAAmBsf,cAAe,UAEpC9iB,KAAKV,MAAMkN,SAAS4W,kB,+BAGb,WACHE,EAAU,iBACVtjB,KAAKV,MAAMuD,SACbygB,GAAW,0BAEb,IAAIC,EAAgB,MAMpB,OALKvjB,KAAKwD,MAAMsf,cAGdS,GAAiB,eAFjBA,GAAiB,gBAKjB,yBAAKrb,UAAWob,GACd,yBAAKpb,UAAU,qBAAqByB,QAAS3J,KAAKyiB,gBAClD,yBAAKva,UAAU,0BACb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,WAAf,gBACA,4BAAQA,UAAU,qCAAqCyB,QAAS3J,KAAKyiB,eACnE,kBAAC,KAAD,CAAOva,UAAU,UAEnB,yBAAKA,UAAU,sBACZlI,KAAKwD,MAAMof,KAAK3b,KAAI,SAAA6a,GACnB,IAAI3C,EAAa,sBAIjB,OAHI,EAAK3b,MAAMuL,YAAc+S,EAAI5hB,OAC/Bif,GAAc,+BAGd,4BACEjX,UAAWiX,EACXxV,QAAS,EAAK6Y,SACd3b,IAAKib,EAAI5hB,KACTsjB,WAAU1B,EAAI5hB,MAEb4hB,EAAIhf,YAMd9C,KAAKwD,MAAMqQ,OAAO1R,OACjB,yBAAK+F,UAAU,+BACZlI,KAAKwD,MAAMqQ,OAAO5M,KAAI,SAAA4N,GACrB,IAAI4O,EACAH,EAAU,eACVI,EAAa,CACfxb,UAAW,yBAoBb,MAlB6B,UAAzB,EAAK1E,MAAMuL,YACb0U,EAAe5O,EAAM8O,cACrBL,GAAW,qBAGXI,EAAWnkB,MAAQ,KACnBmkB,EAAWlkB,OAAS,MAEO,UAAzB,EAAKgE,MAAMuL,YACb0U,EAAe,MACfC,EAAWE,IAAM/O,EAAMrU,IACvB8iB,GAAW,sBACXzO,EAAM3U,KAAO2U,EAAMgP,SACnBhP,EAAM1M,UAAY,SAEhB,EAAK3E,MAAMsf,gBAAkBjO,EAAM3U,OACrCojB,GAAW,0BAGX,yBACEpb,UAAWob,EACXQ,iBAAgBjP,EAAM3U,KACtB2G,IAAKgO,EAAM3U,KACXyJ,QAAS,EAAK+Y,aAEd,kBAACe,EAAiBC,QAM1B,GAEF,yBAAKxb,UAAU,yBACb,4BAAQA,UAAWqb,EAAe5Z,QAAS3J,KAAK2iB,aAAhD,iB,GAxLgBta,aAwMbC,oBANf,SAAyB9E,GACvB,aACKA,EAAMU,yBAIEoE,CAAyBia,I,8+BExMxC,IAAMwB,GAAe,CACnB,CACE7jB,KAAM,QACN4C,MAAO,QACPtC,KAAK,EACL6I,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,OACN4C,MAAO,QAET,CACE5C,KAAM,cACN4C,MAAO,eAET,CACE5C,KAAM,aACN4C,MAAO,eAGLkhB,GAAoB,CACxB,CACE9jB,KAAM,OACN4C,MAAO,OACPtC,KAAK,EACL6I,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,cACN4C,MAAO,SAET,CACE5C,KAAM,QACN4C,MAAO,SAET,CACE5C,KAAM,OACN4C,MAAO,SAIUmhB,G,mCACnB,WAAY3kB,GAAO,0BACjB,cAAMA,IAgCR4kB,eAjCmB,+BAiCF,WAAOC,GAAP,eAAAxd,EAAA,sEACC,EAAKyd,oBAAoBhG,WAAW,CAClDC,KAAM,EAAK7a,MAAM6gB,uBACjB/F,SAAU,EAAKgG,aACfC,QAAQ,EACRC,EAAGL,IALU,OACXtjB,EADW,OAOf,EAAK8J,UAAS,SAAAnH,GACZ,gBACKA,GADL,IAEEoX,YAAa/Z,EAAI4jB,aACjBN,oBACAO,qBAAsB7jB,EAAIwc,eAZf,2CAjCE,wDAqDnBsH,UArDmB,+BAqDP,WAAOC,GAAP,eAAAje,EAAA,sEACM,EAAKke,eAAezG,WAAW,CAC7CC,KAAM,EAAK7a,MAAMshB,kBACjBxG,SAAU,EAAKgG,aACfC,QAAQ,EACRC,EAAGI,IALK,OACN/jB,EADM,OAOV,EAAK8J,UAAS,SAAAnH,GACZ,gBACKA,GADL,IAEE4c,OAAQvf,EAAIuf,OACZwE,eACAG,gBAAiBlkB,EAAIwc,eAZf,2CArDO,wDAiGnB2H,oBAAsB,SAAAzd,GACpB,IAAIqd,EAAerd,EAAEU,OAAOS,MAC5B,EAAKic,UAAUC,IAnGE,EA0GnBK,+BAAiC,SAAA1d,GAC/B,IAAI4c,EAAoB5c,EAAEU,OAAOS,MACjC,EAAKwb,eAAeC,IA1GpB,EAAK3gB,MAAQ,CACXuL,UAAW,EACX+V,kBAAmB,EACnBT,uBAAwB,EACxBjE,OAAQ,GACRwE,aAAc,GACdG,gBAAiB,EACjBG,YAAa,EACbtK,YAAa,GACbuJ,kBAAmB,GACnBO,qBAAsB,EACtBS,iBAAkB,GAEpB,EAAKrW,UAAY,EAAKA,UAAUvC,KAAf,QACjB,EAAK6Q,WAAa,EAAKA,WAAW7Q,KAAhB,QAClB,EAAKsY,eAAiB,IAAIxkB,IAAS,CAAEC,MAAO,uBAC5C,EAAK8jB,oBAAsB,IAAI/jB,IAAS,CAAEC,MAAO,6BACjD,EAAKgkB,aAAe,GAnBH,E,8CAsBTvV,GACR/O,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBuL,mB,iCAG3BmO,EAAakI,GACtBplB,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,UAAkB4hB,EAAlB,SAAoC5hB,EAAM4hB,IAA1C,IAAuDlI,uB,sJAmDvDld,KAAK6kB,eAAena,S,cAAnC0V,E,OACJpgB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IAEjB0hB,YAAa9E,EAAOA,OAAOje,Y,SAGJnC,KAAKokB,oBAAoB1Z,S,OAA9C+Z,E,OACJzkB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IAEjB2hB,iBAAkBV,EAAaA,aAAatiB,YAG9CnC,KAAK2kB,YACL3kB,KAAKkkB,iB,6HAoBE,aAEoElkB,KAAKwD,MADxEuL,EADD,EACCA,UAAWqR,EADZ,EACYA,OAAQxF,EADpB,EACoBA,YAAakK,EADjC,EACiCA,kBAAmBT,EADpD,EACoDA,uBAAwBO,EAD5E,EAC4EA,aAAcT,EAD1F,EAC0FA,kBAC/FY,EAFK,EAELA,gBAAuCG,GAFlC,EAEYR,qBAFZ,EAEkCQ,aAFlC,EAE+CC,iBAEtD,OAAO,yBAAKjd,UAAU,6BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,UACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAA4C,IAAd6G,EAAkB,aAAe,qBAEjF,kBAAC,IAAD,CAAM7G,UAAU,MAAMqB,GAAE,wBAAiC,IAAdwF,EAAkB,SAAW,eAAhD,SAAxB,YAEF,yBAAK7G,UAAU,iBACb,kBAAC,IAAD,CAAM+G,cAAeF,EAAWG,SAAUlP,KAAK8O,WAC7C,kBAAC,IAAD,CAAS5G,UAAU,6BACjB,kBAAC,IAAD,eAGA,kBAAC,IAAD,sBAIF,kBAAC,IAAD,KACE,kBAAC,EAAD,CACEY,QAASib,GACTpb,OAAQ,CACND,MAAOkc,GAAc,GACrB/b,cAAc7I,KAAKglB,qBAErBhb,aAAc,CAAC,CACbb,IAAK,OAAQ7J,MAAO,CAClB0I,KAAM,iCAERlF,MAAO,QACN,CACDqG,IAAK,SACL7I,MAAO,yBACPI,OAAQ,SACR0J,QAAS,gBACTG,MAAO,WAAO,EAAKoa,aACnBzc,UAAW,iCACXpF,MAAO,UAETkG,KAAMoX,EAAOnZ,KAAI,SAAAf,GAAK,gBACjBA,GADiB,IAEpBmD,QAAS,6BAA+BnD,EAAM3F,UAGlD,kBAAC,GAAD,CAAY8c,UAAW0H,GAAmB,EACxC7H,YAAa4H,GAAqB,EAClC1H,WAAY,SAAA0H,GACP,EAAKthB,MAAMshB,oBAAsBA,GAClC,EAAKna,SAAS,CAACma,qBAAoB,EAAKH,YAG5CnH,WAAY0H,KAGhB,kBAAC,IAAD,KACE,kBAAC,EAAD,CACEpc,QAASkb,GACTrb,OAAQ,CACND,MAAOyb,GAAmB,GAC1Btb,cAAc7I,KAAKilB,gCAErBjc,KAAM4R,EAAY3T,KAAI,SAAAoe,GAAU,gBAC3BA,GAD2B,IAE9Bhc,QAAS,mCAAqCgc,EAAW9kB,UAG7D,kBAAC,GAAD,CAAY8c,UAAWvb,KAAKwjB,KAAK1K,EAAYzY,OAASnC,KAAKskB,cACzDpH,YAAamH,EACbjH,WAAY,SAAAiH,GAAsB,OAAI,EAAK1Z,SAAS,CAAE0Z,4BACtD7G,WAAY5C,EAAYzY,iB,GA1LFkG,a,k/BCmGrBkd,G,mCAhJb,WAAYjmB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACXkF,MAAO,MAAI,EAAKpJ,MAAM4G,QAExB,EAAKsf,cAAgB,EAAKA,cAAcjZ,KAAnB,QACrB,EAAKkZ,cAAgB,EAAKA,cAAclZ,KAAnB,QACrB,EAAKmZ,mBAAqB,EAAKA,mBAAmBnZ,KAAxB,QAPT,E,gDAeP7D,EAAO2J,GACjBrS,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,EAAQ,MAAKA,IACPkF,MAAM2J,GAAS3J,EACdlF,O,yCAIQ+D,GACjBA,EAAEoe,UACF3lB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IACPkF,MAAO,SACZlF,EAAMkF,OADI,IAEb5F,MAAOyE,EAAEU,OAAOS,MAChBxI,KAAMkL,GAAY7D,EAAEU,OAAOS,gB,yCAQdkd,GAAU,WACxB5lB,KAAKV,QAAUsmB,GAChB5lB,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,EAAQ,MAAKA,IACPkF,MAAN,MAAkB,EAAKpJ,MAAM4G,OACtB1C,O,oCAQC+D,GACZA,EAAE0G,iBACClJ,EAAE0D,WAAWzI,KAAKV,MAAM0O,kBAClBhO,KAAKwD,MAAMkF,MAAMmd,kBACjB7lB,KAAKwD,MAAMkF,MAAMod,WACxB9lB,KAAKV,MAAM0O,SAAShO,KAAKwD,MAAMkF,QAE/BpG,QAAQC,IAAIvC,KAAKwD,MAAMkF,S,0IAMR,IAAIrI,IAAS,CAACC,MAAO,uBAArB,OAAmDN,KAAKV,MAAM4G,MAAM3F,I,cACrFP,KAAK2K,UAAS,SAAAnH,GAAK,gBAAOA,GAAP,IAAcqH,SAAU,6B,4HAGpC,WACD3E,EAAQlG,KAAKwD,MAAMkF,MACzB,OAAG1I,KAAKwD,MAAMqH,SACL,kBAAC,KAAD,CAAUtB,GAAIvJ,KAAKwD,MAAMqH,SAAU1L,MAAM,IAE3C,0BAAM+I,UAAU,iBAAiB8F,SAAUhO,KAAKwlB,eACrD,yBAAKtd,UAAU,qBACb,2BAAO4F,QAAQ,cAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAakO,UAAQ,EACzC/F,MAAOxC,EAAMpD,OAAS,GACtB8F,SAAU5I,KAAK0lB,mBACfxd,UAAU,kBAEd,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,aAAf,cACA,2BAAOzL,KAAK,OAAO9B,GAAG,YAAYkO,UAAQ,EACxC/F,MAAOxC,EAAMhG,MAAQ,GACrB0I,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAClDR,UAAU,kBAEd,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,oBAAf,gBACA,2BAAOzL,KAAK,OAAO9B,GAAG,mBACfmI,MAAOxC,EAAM6f,iBAAmB,GAChCnd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,oBAClDR,UAAU,kBAEnB,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,oBAAf,qBACA,2BAAOzL,KAAK,OAAO9B,GAAG,mBACpBmI,MAAOxC,EAAM8f,aAAe,GAC5Bpd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAClDR,UAAU,kBAEZhC,EAAM3F,GAAM,GAAK,yBAAK2H,UAAU,sBAChC,2BAAO4F,QAAQ,iBAAiB5F,UAAU,kBAA1C,SACA,kBAAC,GAAD,CACI3H,GAAG,iBACHsgB,eAAgB,CACd,CACEnY,MAAO,GACP0N,MAAO,MAGX1N,MAAO1I,KAAKwD,MAAMkF,MAAMud,UAAY,GACpCC,WAAYhgB,EAAM3F,GAClBqI,SAAU,SAAAF,GAAU,EAAKyE,YAAYzE,EAAO,aAC5C4H,aAAa,gCAEnB,yBAAKpI,UAAU,cACb,yBAAKA,UAAU,sCACb,2BAAO7F,KAAK,WAAW9B,GAAG,oBACxBua,QAAS5U,EAAMigB,aACfvd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,iBACpD5S,UAAU,sCACZ,2BAAO4F,QAAQ,oBAAoB5F,UAAU,kBAA7C,iBAEF,yBAAKA,UAAU,sCACb,2BAAO7F,KAAK,WAAW9B,GAAG,mBACxBua,QAAS5U,EAAMkgB,YACfxd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,gBACpD5S,UAAU,6CACZ,2BAAO4F,QAAQ,mBAAmB5F,UAAU,kBAA5C,iBAIJ,yBAAKA,UAAU,gBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAUrC,KAAKV,MAAM+mB,YAC9D,kBAAC,IAAD,CAAM9c,GAAG,wBAAuB,4BAAQrB,UAAU,OAAlB,WAC/BlI,KAAKV,MAAMgnB,KACN,4BAAQpe,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKylB,eAAhE,UACA,S,GA3Icpd,a,8+BCA5B,IAAMS,GAAU,CACd,CACE5I,KAAM,QACN4C,MAAO,QACPtC,KAAK,EACL6I,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,OACN4C,MAAO,QAET,CACE5C,KAAM,cACN4C,MAAO,gBAKLyjB,G,mCACJ,WAAYjnB,GAAO,mBACjB,cAAMA,IA4BRknB,aA7BmB,cA6BJ,4BAAA7f,EAAA,sEACM,EAAK8f,eAAe/b,SAD1B,OAEb9H,GADIA,EADS,QAEGiQ,QAAO,kBAAuB,OAAvB,EAAG3S,QAC1B,EAAKyK,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBZ,cAHvB,2CA7BI,EAmCnB8jB,gBAnCmB,cAmCD,4BAAA/f,EAAA,sEACM,EAAKggB,kBAAkBjc,SAD7B,OACZkc,EADY,OAEhB,EAAKjc,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBojB,iBAFpB,2CAnCC,EAwCnBC,cAxCmB,cAwCH,4BAAAlgB,EAAA,sEACM,EAAKmgB,gBAAgBpc,SAD3B,OACVqc,EADU,OAEd,EAAKpc,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBujB,eAFtB,2CAxCG,EAsEnB/Y,SAtEmB,+BAsER,WAAO9H,GAAP,SAAAS,EAAA,0DAEN,EAAKnD,MAAMjD,GAFL,gCAGK,EAAKskB,eAAepX,IAAI,EAAKjK,MAAMjD,GAAI2F,GAH5C,oDAKK,EAAK2e,eAAe1Z,KAAKjF,GAL9B,qBAOT,EAAK5G,MAAM0nB,QAAQ7nB,KAAK,wBAPf,4CAtEQ,0DAEToB,EAAO,EAAKjB,MAAM8T,MAAM3Q,OAAxBlC,GAFS,OAGjB,EAAKiD,MAAQ,CACX0C,MAAO,CACLhG,KAAM,GACN4C,MAAO,GACPkjB,YAAa,GACbiB,cAAe,GACfd,cAAc,EACdC,aAAa,GAEfxjB,OAAQ,KACRgkB,UAAW,KACXrmB,KACAwmB,QAAS,IAMX,EAAKlC,eAAiB,IAAIxkB,IAAS,CAACC,MAAO,uBACxCC,IACD,EAAKkmB,eAAiB,IAAIpmB,IAAS,CAACC,MAAO,sBAAF,OAAwBC,EAAxB,aACzC,EAAKomB,kBAAoB,IAAItmB,IAAS,CAACC,MAAO,sBAAF,OAAwBC,EAAxB,gBAC5C,EAAKumB,gBAAkB,IAAIzmB,IAAS,CAACC,MAAO,sBAAF,OAAwBC,EAAxB,eAzB3B,E,4JAmDdP,KAAKwD,MAAMjD,G,iCACMP,KAAK6kB,eAAezkB,IAAIJ,KAAKwD,MAAMjD,I,cAAjD2F,E,gBACkBlG,KAAK2mB,kBAAkBjc,S,cAAzCkc,E,gBACe5mB,KAAKymB,eAAe/b,S,cAAnC9H,E,iBACgB5C,KAAK8mB,gBAAgBpc,S,QAArCqc,E,OACJnkB,EAASA,EAAOiQ,QAAO,kBAAqB,OAArB,EAAE3S,QACzBF,KAAK2K,UAAS,SAAAnH,GAAK,gBACZA,GADY,IAEjB0C,QACA0gB,YACAhkB,SACAmkB,e,6HAiBG,aACoD/mB,KAAKwD,MAAxD0C,EADD,EACCA,MAAOtD,EADR,EACQA,OAAQgkB,EADhB,EACgBA,UAAWG,EAD3B,EAC2BA,QAASG,EADpC,EACoCA,YAEnC3mB,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,GACR,OAAO,yBAAK2H,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,wBAA7C,uBACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAA8BlI,KAAKwD,MAAMjD,GAAK,aAAe,eAGjF,yBAAK2H,UAAU,iBACb,kBAAC,GAAD,CAAehC,MAAOA,EACPmgB,WAAYngB,EAAM3F,GAAK,OAAS,MAChC+lB,KAAMpgB,EAAM3F,GACZyN,SAAUhO,KAAKgO,WAG7BpL,EAAU,oCAAE,wBAAIsF,UAAU,cAAd,UACb,kBAAC,EAAD,CACEY,QAASA,GACTkB,aAAc,CAAC,CAAEb,IAAK,OAAQ7J,MAAO,CACjC0I,KAAM,wBAAF,OAA0BzH,EAA1B,qBAENuC,MAAO,QACL,CACFqG,IAAK,SACL7I,MAAO,sBAAF,OAAwBC,EAAxB,eACLG,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAKic,gBAClBte,UAAW,iCACXpF,MAAO,UAETkG,KAAMpG,EAAOqE,KAAI,SAAAoL,GAAK,gBAAUA,GAAV,IAAiBhJ,QAAS,wBAAF,OAA0BnD,EAAM3F,GAAhC,wBAAkD8R,EAAM9R,WAExG,kBAAC,IAAD,CAAM2H,UAAU,cAAcqB,GAAE,+BAA0BrD,EAAM3F,GAAhC,gBAAhC,cACM,GACLqmB,EAAW,oCACZ,wBAAI1e,UAAU,cAAd,aACA,kBAAC,EAAD,CACEY,QAASA,GACTkB,aAAc,CAAC,CAAEb,IAAK,OAAQ7J,MAAO,CACjC0I,KAAM,wBAAF,OAA0BzH,EAA1B,wBAENuC,MAAO,QACL,CACFqG,IAAK,SACL7I,MAAO,sBAAF,OAAwBC,EAAxB,kBACLG,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAKmc,mBAClBxe,UAAW,iCACXpF,MAAO,UAETkG,KAAM4d,EAAU3f,KAAI,SAAAkgB,GAAQ,gBAAUA,GAAV,IAAoB9d,QAAS,wBAAF,OAA0BnD,EAAM3F,GAAhC,2BAAqD4mB,EAAS5mB,WAEvH,kBAAC,IAAD,CAAM2H,UAAU,cAAcqB,GAAE,+BAA0BrD,EAAM3F,GAAhC,mBAAhC,iBACM,GACLwmB,EAAU,oCACX,wBAAI7e,UAAU,cAAd,WACA,kBAAC,EAAD,CACEY,QAASA,GACTE,KAAM+d,EAAQ9f,KAAI,SAAAmgB,GAAK,gBAAUA,GAAV,IAAiB/d,QAAS,wBAAF,OAA0BnD,EAAM3F,GAAhC,yBAAmD6mB,EAAM7mB,SACxGyJ,aAAc,CAAC,CACbb,IAAK,OAAQ7J,MAAO,CAClB0I,KAAM,wBAAF,OAA0B9B,EAAM3F,GAAhC,sBAENuC,MAAO,QACN,CACDqG,IAAK,SACL7I,MAAO,sBAAF,OAAwB4F,EAAM3F,GAA9B,gBACLG,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAKsc,iBAClB3e,UAAW,iCACXpF,MAAO,YAGX,kBAAC,IAAD,CAAMoF,UAAU,cAAcqB,GAAE,+BAA0BrD,EAAM3F,GAAhC,iBAAhC,cACM,GACL2mB,EAAc,oCACf,wBAAIhf,UAAU,cAAd,eACA,kBAAC,EAAD,CACEY,QAASA,GACTE,KAAMke,EAAYjgB,KAAI,SAAAmgB,GAAK,gBAAUA,GAAV,IAAiB/d,QAAS,wBAAF,OAA0BnD,EAAM3F,GAAhC,6BAAuD6mB,EAAM7mB,WAElH,kBAAC,IAAD,CAAM2H,UAAU,cAAcqB,GAAE,+BAA0BrD,EAAM3F,GAAhC,qBAAhC,eACM,S,GAzKU8H,aA+KT4K,gBAAWsT,I,k/BC8DXc,G,iCAnQb,WAAY/nB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACX8jB,UAAW,SACXC,aAAa,EACbC,aAAa,EACbC,MAAO,CACLC,OAAQ,GACRC,QAAS,GACTC,SAAU,GACVC,UAAW,GACXC,SAAU,GACVC,UAAW,KAGf,EAAKC,iBAAmB,EAAKA,iBAAiBzb,KAAtB,QACxB,EAAK0b,mBAAqB,EAAKA,mBAAmB1b,KAAxB,QAC1B,EAAK2b,SAAW,EAAKA,SAAS3b,KAAd,QAjBC,E,wDAoBC,IACVkb,EAAUznB,KAAKV,MAAM4K,KAArBud,MACJA,IAC+B,iBAA1BznB,KAAKV,MAAM4K,KAAKud,MACrBznB,KAAK2K,SAAS,CAAE2c,UAAW,SAAUG,MAAO,SAAKznB,KAAKwD,MAAMikB,OAAlB,IAAyBC,OAAQD,MAC3EznB,KAAK2K,SAAS,CAAE2c,UAAW,SAAUG,MAAO,SAAKznB,KAAKwD,MAAMikB,OAAlB,IAAyBE,QAASF,EAAMlnB,U,uCAIvE8B,GACfrC,KAAK2K,UAAS,SAAAwd,GAAM,MAAK,CAAEb,UAAWjlB,KAASrC,KAAKkoB,Y,4CAGN,QAA3BjgB,OAAUS,EAAiB,EAAjBA,MAAOxI,EAAU,EAAVA,KACpCF,KAAK2K,UAAS,SAAAnH,GAEZ,OADAA,EAAMikB,MAAMvnB,GAAQwI,EACblF,IACNxD,KAAKkoB,Y,4CAGYxf,GACpB,OAAQA,GACN,IAAK,WACL,IAAK,OACH1I,KAAKgoB,iBAAiB,QACtB,MACF,IAAK,UACHhoB,KAAKgoB,iBAAiB,SACtB,MACF,QACEhoB,KAAKgoB,iBAAiB,UAG1BhoB,KAAKV,MAAMuJ,cAAc,CAAEH,QAAOxI,KAAM,e,iCAG/B,IAELwI,EAFK,EAC8C1I,KAAKwD,MAApD8jB,EADC,EACDA,UAAWC,EADV,EACUA,YAAaC,EADvB,EACuBA,YAAaC,EADpC,EACoCA,MAG7C,OAAQH,GACN,IAAK,SACH5e,EAAQ+e,EAAMC,OACd,MACF,IAAK,SACHhf,EAAQ,CAAEnI,GAAIknB,EAAME,SACpB,MACF,IAAK,OACHjf,EAAQ,KACR,MACF,IAAK,QACHA,EAAQ,CACN6e,EAAcE,EAAMG,SAAW,CAAErnB,GAAIknB,EAAMI,WAC3CL,EAAcC,EAAMK,SAAW,CAAEvnB,GAAIknB,EAAMM,YAOjD/nB,KAAKV,MAAMuJ,cAAc,CAAE3I,KAAM,QAASwI,Y,+BAGnC,aACkE1I,KAAKV,MAAtE4K,EADD,EACCA,KAAMhB,EADP,EACOA,MAAOkf,EADd,EACcA,cAAevf,EAD7B,EAC6BA,cAAewf,EAD5C,EAC4CA,kBAD5C,EAEgDroB,KAAKwD,MAApD8jB,EAFD,EAECA,UAAWG,EAFZ,EAEYA,MAAOF,EAFnB,EAEmBA,YAAaC,EAFhC,EAEgCA,YACvC,OAAO,oCACL,yBAAKtf,UAAU,kBACb,iCACA,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS0e,GAA3D,WAKF,yBAAKngB,UAAU,cACb,2BAAO4F,QAAS,OAAS5E,GAAzB,cACA,4BAAQhB,UAAU,eAAe3H,GAAI,OAAS2I,EAAOhJ,KAAK,OAAOuO,UAAQ,EACvE/F,MAAOwB,EAAKoe,KACZ1f,SAAU,oBAAGX,OAAUS,EAAb,EAAaA,MAAOxI,EAApB,EAAoBA,KAApB,OAAiC2I,EAAc,CAAEH,QAAOxI,WAElE,4BAAQgN,UAAQ,EAACxE,MAAM,KACtB0f,EAAcnhB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACjB,4BAAQ1N,MAAOA,EAAO7B,IAAK6B,GAAQ0N,QAIzC,mDAEA,yBAAKlO,UAAU,cACb,4BAAQA,UAAU,eAAehI,KAAK,WAAWuO,UAAQ,EACvD/F,MAAOwB,EAAKqe,SACZ3f,SAAU,gBAAaF,EAAb,EAAGT,OAAUS,MAAb,OAA2B,EAAK8f,sBAAsB9f,KAEhE,4BAAQA,MAAM,GAAGwE,UAAQ,IAGzB,4BAAQxE,MAAM,MAAd,UACA,4BAAQA,MAAM,MAAd,cAEA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,MACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,QAIH,CAAC,SAAU,UAAU+f,SAASnB,IAC7B,yBAAKpf,UAAU,8BACb,yBAAKA,UAAU,iCACb,uCACE,2BAAO7F,KAAK,QAAQ6F,UAAU,kBAC5B4S,QAAuB,WAAdwM,EACT1e,SAAU,kBAAM,EAAKof,iBAAiB,cAG1C,2BAAO3lB,KAAK,OAAO6F,UAAU,eAAehI,KAAK,SAC/CuO,SAAwB,WAAd6Y,EACV5e,MAAO+e,EAAMC,OACbxa,SAAwB,WAAdoa,EACV1e,SAAU5I,KAAKioB,sBAInB,uBAAG/f,UAAU,uCAAb,MAEA,yBAAKA,UAAU,iCACb,2BAAO4F,QAAS,QAAU5E,GAA1B,aACE,2BAAO7G,KAAK,QAAQ6F,UAAU,kBAC5B4S,QAAuB,WAAdwM,EACT1e,SAAU,kBAAM,EAAKof,iBAAiB,cAG1C,4BAAQ9f,UAAU,eAAe3H,GAAI,QAAU2I,EAAOhJ,KAAK,UACzDuO,SAAwB,WAAd6Y,EACV5e,MAAO+e,EAAME,QACbza,SAAwB,WAAdoa,EACV1e,SAAU5I,KAAKioB,oBAEf,4BAAQ/a,UAAQ,EAACxE,MAAM,KACtB0f,EAAcnhB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACjB,4BAAQ1N,MAAOA,EAAO7B,IAAK6B,GAAQ0N,SAK9B,UAAdkR,GAAyB,oCACxB,yBAAKpf,UAAU,8BACb,yBAAKA,UAAU,iCACb,uCACE,2BAAO7F,KAAK,QAAQ6F,UAAU,kBAC5B4S,QAASyM,EACT3e,SAAU,kBAAM,EAAK+B,SAAS,CAAE4c,aAAa,GAAQ,EAAKW,cAG9D,2BAAO7lB,KAAK,OAAO6F,UAAU,eAAehI,KAAK,WAC/CuO,SAAU8Y,EACV7e,MAAO+e,EAAMG,SACb1a,UAAWqa,EACX3e,SAAU5I,KAAKioB,sBAInB,uBAAG/f,UAAU,uCAAb,MAEA,yBAAKA,UAAU,iCACb,2BAAO4F,QAAS,QAAU5E,GAA1B,aACE,2BAAO7G,KAAK,QAAQ6F,UAAU,kBAC5B4S,SAAUyM,EACV3e,SAAU,kBAAM,EAAK+B,SAAS,CAAE4c,aAAa,GAAS,EAAKW,cAG/D,4BAAQhgB,UAAU,eAAe3H,GAAI,QAAU2I,EAAOhJ,KAAK,YACzDuO,UAAW8Y,EACX7e,MAAO+e,EAAMI,UACb3a,SAAUqa,EACV3e,SAAU5I,KAAKioB,oBAEf,4BAAQ/a,UAAQ,EAACxE,MAAM,KACtB0f,EAAcnhB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACjB,4BAAQ1N,MAAOA,EAAO7B,IAAK6B,GAAQ0N,SAK3C,uBAAGlO,UAAU,WAAb,OAEA,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,iCACb,uCACE,2BAAO7F,KAAK,QAAQ6F,UAAU,kBAC5B4S,QAAS0M,EACT5e,SAAU,kBAAM,EAAK+B,SAAS,CAAE6c,aAAa,GAAQ,EAAKU,cAG9D,2BAAO7lB,KAAK,OAAO6F,UAAU,eAAehI,KAAK,WAC/CuO,SAAU+Y,EACV9e,MAAO+e,EAAMK,SACb5a,UAAWsa,EACX5e,SAAU5I,KAAKioB,sBAInB,uBAAG/f,UAAU,uCAAb,MAEA,yBAAKA,UAAU,iCACb,2BAAO4F,QAAS,QAAU5E,GAA1B,aACE,2BAAO7G,KAAK,QAAQ6F,UAAU,kBAC5B4S,SAAU0M,EACV5e,SAAU,kBAAM,EAAK+B,SAAS,CAAE6c,aAAa,GAAS,EAAKU,cAG/D,4BAAQhgB,UAAU,eAAe3H,GAAI,QAAU2I,EAAOhJ,KAAK,YACzDuO,UAAW+Y,EACX9e,MAAO+e,EAAMM,UACb7a,SAAUsa,EACV5e,SAAU5I,KAAKioB,oBAEf,4BAAQ/a,UAAQ,EAACxE,MAAM,KACtB0f,EAAcnhB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACjB,4BAAQ1N,MAAOA,EAAO7B,IAAK6B,GAAQ0N,UAM7C,sCAEA,yBAAKlO,UAAU,cACb,2BAAO4F,QAAS,SAAW5E,GAA3B,SACA,2BAAO7G,KAAK,OAAO6F,UAAU,eAAe3H,GAAI,SAAW2I,EAAOhJ,KAAK,SAASuO,UAAQ,EACtF/F,MAAOwB,EAAKwC,OACZ9D,SAAU,oBAAGX,OAAUS,EAAb,EAAaA,MAAOxI,EAApB,EAAoBA,KAApB,OAAiC2I,EAAc,CAAEH,QAAOxI,aAGtE,uE,GA/P8BmI,a,8+BCKpC,IAAMqgB,GAAmB,CACvB,CACEhgB,MAAO,SACP0N,MAAO,UAET,CACE1N,MAAO,UACP0N,MAAO,WAET,CACE1N,MAAO,aACP0N,MAAO,eAET,CACE1N,MAAO,QACP0N,MAAO,SAET,CACE1N,MAAO,UACP0N,MAAO,WAET,CACE1N,MAAO,OACP0N,MAAO,QAET,CACE1N,MAAO,WACP0N,MAAO,aAET,CACE1N,MAAO,aACP0N,MAAO,cAET,CACE1N,MAAO,OACP0N,MAAO,QAET,CACE1N,MAAO,OACP0N,MAAO,QAET,CACE1N,MAAO,OACP0N,MAAO,QAET,CACE1N,MAAO,WACP0N,MAAO,YAET,CACE1N,MAAO,WACP0N,MAAO,YAET,CACE1N,MAAO,OACP0N,MAAO,QAET,CACE1N,MAAO,SACP0N,MAAO,WAGLuS,GAAmB,CAEvB,CACEjgB,MAAO,WACP0N,MAAO,aAGLwS,GAAmB,CAAC,WAAY,OAAQ,SAAU,SAAU,UAAW,QAAS,SAAU,WAAY,gBAGtGC,G,mCACJ,WAAYvpB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACXslB,UAAU,EACVV,cAAe,GACf1f,MAAO,CACLxI,KAAM,GACN4C,MAAO,GACPkjB,YAAa,GACb+C,UAAU,EACVC,UAAU,EACVC,SAAS,EACT5mB,KAAM,SACN6mB,aAAc,GACdC,QAAS,GACTC,UAAW,GACXC,WAAY,OACZ9nB,QAAS,GACT+nB,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,YAAa,GACbC,kBAAmB,CACjB,CAAEpB,KAAM,GAAIC,SAAU,GAAI7b,OAAQ,GAAI+a,MAAO,OAKnD,EAAKjC,cAAgB,EAAKA,cAAcjZ,KAAnB,QACrB,EAAKod,kBAAoB,EAAKA,kBAAkBpd,KAAvB,QACzB,EAAKqd,eAAiB,EAAKA,eAAerd,KAApB,QACtB,EAAK8b,kBAAoB,EAAKA,kBAAkB9b,KAAvB,QACzB,EAAKmZ,mBAAqB,EAAKA,mBAAmBnZ,KAAxB,QAE1B,EAAKsd,eAAiB,IAAIxpB,IAAS,CAAEC,MAAO,sBAAF,OAAwB,EAAKhB,MAAM8T,MAAM3Q,OAAOqnB,QAAhD,aAC1C,EAAKC,sBAAwB,IAAI1pB,IAAS,CACxCC,MAAO,sBAAF,OAAwB,EAAKhB,MAAM8T,MAAM3Q,OAAOqnB,QAAhD,oBApCU,E,gDAyDPphB,EAAO2J,GACjBrS,KAAK2K,UAAS,SAAAnH,GAEZ,GADAA,EAAQ,MAAKA,GACC,YAAV6O,EAKF,OAHG7O,EAAMkF,MAAMtG,MAAQsG,EAAMvG,OAASqB,EAAMkF,MAAMtG,OAChDsG,EAAQA,EAAMshB,UAAU,EAAG3kB,SAAS7B,EAAMkF,MAAMtG,QAE1CoB,EAAMkF,MAAMrG,MAClB,IAAK,UACU,KAAVqG,EACDA,EAAQ,KACU,KAATA,GAAyB,KAATA,IACzBA,EAAQ,GAGZ,MACA,IAAK,aAUL,IAAK,UAIDA,EAHEuhB,MAAMvhB,IAAoB,MAAVA,EAEA,KAAVA,EACA,KAEA,IAJArD,SAASqD,GAWzB,OADAlF,EAAMkF,MAAM2J,GAAS3J,EACdlF,O,yCAIQ+D,GAAG,WACpBA,EAAEoe,UACF3lB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IACPkF,MAAO,SACZlF,EAAMkF,OADI,IAEb5F,MAAOyE,EAAEU,OAAOS,MAChBxI,KAAM,EAAKZ,MAAM8T,MAAM3Q,OAAOlC,GAAKiD,EAAMkF,MAAMxI,KAAOkL,GAAY7D,EAAEU,OAAOS,gB,oCAKnEnB,GACZA,EAAE0G,iBADa,MAEYjO,KAAKV,MAFjB,KAEP0nB,QAFO,EAEE5T,MAE6DpT,KAAKwD,MAAMkF,OADjFxI,EAHO,EAGPA,KAAM4C,EAHC,EAGDA,MAAOkjB,EAHN,EAGMA,YAAa+C,EAHnB,EAGmBA,SAAUC,EAH7B,EAG6BA,SAAUC,EAHvC,EAGuCA,QAAS5mB,EAHhD,EAGgDA,KAAMD,EAHtD,EAGsDA,KAAe8nB,EAHrE,UAG+Ed,EAH/E,EAG+EA,UAAWC,EAH1F,EAG0FA,WACvG9nB,EAJa,EAIbA,QAAe4oB,EAJF,OAISZ,EAJT,EAISA,QAASC,EAJlB,EAIkBA,SAAUC,EAJ5B,EAI4BA,YAAaC,EAJzC,EAIyCA,kBAEpD3pB,EAAO,GAEE,eAATsC,EAEAtC,EADFC,KAAKwD,MAAMslB,SACF,CAAEhmB,QAAOkjB,cAAa3jB,OAAMonB,cAAavpB,QACzC,CAAE4C,QAAOkjB,cAAa3jB,OAAMqnB,oBAAmBxpB,SAExDH,EAAO,CAAEG,OAAM4C,QAAOkjB,cAAa+C,WAAUC,WAAUC,UAAS5mB,OAAMD,OAAM+mB,QAASe,EAAUd,YAAWC,aAAYC,KAAMa,EAAOZ,UAASC,YACxI,CAAC,SAAU,WAAY,gBAAgBf,SAASY,KAClDtpB,EAAO,SAAKA,GAAR,IAAcwB,aAEpBe,QAAQC,IAAI2nB,GACR,CAAC,UAAW,cAAczB,SAASpmB,KACrCtC,EAAI,QAAWmqB,IAIfnlB,EAAE0D,WAAWzI,KAAKV,MAAM0O,WAC1BhO,KAAKV,MAAM0O,SAASjO,K,uCAKtBC,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,EAAMkF,MAAMghB,kBACTvqB,KAAK,CAAEmpB,KAAM,GAAIC,SAAU,GAAI7b,OAAQ,GAAI+a,MAAO,KAC9CjkB,O,wCAIO0F,GAChBlJ,KAAK2K,UAAS,SAAAnH,GAEZ,OADAA,EAAMkF,MAAMghB,kBAAkBU,OAAOlhB,EAAO,GACrC1F,O,0CAIwB0F,GAAO,IAAtBhJ,EAAsB,EAAtBA,KAAMwI,EAAgB,EAAhBA,MACxB1I,KAAK2K,UAAS,SAAAnH,GAEZ,OADAA,EAAMkF,MAAMghB,kBAAkBxgB,GAAOhJ,GAAQwI,EACtClF,O,wJAKexD,KAAK+pB,sBAAsBrf,S,mBAA7CnJ,E,EAAAA,SAEFvB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,G,iCACRP,KAAK6pB,eAAezpB,IAAIJ,KAAKV,MAAM8T,MAAM3Q,OAAOlC,I,OAE3B,iBAFnCmI,E,QAEaghB,oBACfhhB,EAAMghB,kBAAoBjoB,KAAKqa,MAAMpT,EAAMghB,oBAE7C1pB,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBslB,WAAUpgB,EAAM+gB,YAA8B/gB,MAAO,SAAKlF,EAAMkF,OAAUA,Q,QAEhH1I,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiB4kB,cAAe7mB,O,6HAG5C,WACCuoB,EAAY9pB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,QACR,OAAO,0BAAM5hB,UAAU,wBAAwB8F,SAAUhO,KAAKwlB,eAC5D,yBAAKtd,UAAU,eACb,2BAAO4F,QAAQ,eAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,cAAckO,UAAQ,EAC1C/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,OAAS,GACjC8F,SAAU5I,KAAK0lB,mBACfxd,UAAU,kBAEd,yBAAKA,UAAU,8BAEb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,cAAf,cACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAakO,UAAQ,EAAC4b,SAAUrqB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,GAC5EmI,MAAO1I,KAAKwD,MAAMkF,MAAMxI,MAAQ,GAChC0I,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAClDR,UAAU,kBAEd,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,qBAAf,qBACA,2BAAOzL,KAAK,OAAO9B,GAAG,oBACpBmI,MAAO1I,KAAKwD,MAAMkF,MAAMsd,aAAe,GACvCpd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAClDR,UAAU,mBAIhB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,cAAf,cACA,4BAAQvN,GAAG,aAAakO,UAAQ,EAC9B/F,MAAO1I,KAAKwD,MAAMkF,MAAMrG,MAAQ,GAChCuG,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAClDR,UAAU,gBAEV,4BAAQQ,MAAM,KACbggB,GAAiBzhB,KAAI,SAAAiD,GAAI,OACxB,4BAAQrD,IAAKqD,EAAKxB,MAAOA,MAAOwB,EAAKxB,OAClCwB,EAAKkM,YAKa,eAA1BpW,KAAKwD,MAAMkF,MAAMrG,KAChB,oCACE,yBAAK6F,UAAU,sCACb,2BAAO7F,KAAK,WAAW9B,GAAG,SACxB2H,UAAU,mBACV4S,QAAS9a,KAAKwD,MAAMslB,SACpBlgB,SAAU,SAAArB,GAAC,OAAI,EAAKoD,SAAS,CAAEme,SAAUvhB,EAAEU,OAAO6S,aAEpD,2BAAOhN,QAAQ,SAAS5F,UAAU,kBAAlC,WAGDlI,KAAKwD,MAAMslB,SACV,oCACE,yBAAK5gB,UAAU,cACb,2BAAO4F,QAAQ,eAAf,eACA,2BAAOzL,KAAK,OAAO6F,UAAU,eAAe3H,GAAG,cAC7CmI,MAAO1I,KAAKwD,MAAMkF,MAAM+gB,YACxB7gB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,mBAGtD,mEAEF,oCACG1I,KAAKwD,MAAMkF,MAAMghB,kBAAkBziB,KAAI,SAACiD,EAAMhB,GAAP,OAAiB,oCAC5C,IAAVA,GAAe,6BAChB,kBAAC,GAAD,CACEgB,KAAMA,EACNhB,MAAOA,EACPkf,cAAe,EAAK5kB,MAAM4kB,cAC1BvhB,IAAKqC,EACLL,cAAe,SAAAqB,GAAI,OAAI,EAAKyf,kBAAkBzf,EAAMhB,IACpDmf,kBAAmB,kBAAM,EAAKA,kBAAkBnf,UAGpD,4BAAQhB,UAAU,MAAM7F,KAAK,SAASsH,QAAS3J,KAAK4pB,gBAApD,wBAKN,oCACE,yBAAK1hB,UAAU,kBACb,yBAAKA,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,iBACxBua,QAAS9a,KAAKwD,MAAMkF,MAAMqgB,SAC1BngB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,eAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,kBAA1C,aAEF,yBAAK5F,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,iBACxBua,QAAS9a,KAAKwD,MAAMkF,MAAMsgB,SAC1BpgB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,eAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,kBAA1C,aAEF,yBAAK5F,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,gBACnBua,QAAS9a,KAAKwD,MAAMkF,MAAMugB,QAC1BrgB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,cAE3D,2BAAO5S,UAAU,iBAAiB4F,QAAQ,iBAA1C,cAIJ,yBAAK5F,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,sBAAf,gBACA,2BAAOzL,KAAK,SAAS9B,GAAG,qBACtBmI,MAAO1I,KAAKwD,MAAMkF,MAAMtG,MAAQ,GAChCwG,SAAU,SAAArB,GAAO,EAAK4F,aAAa5F,EAAEU,OAAOS,MAAO,SACnDR,UAAU,kBAGd,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,iBAAf,WACA,2BAAOzL,KAAK,OAAO9B,GAAG,gBACpBmI,MAAO1I,KAAKwD,MAAMkF,MAAX,SAA4B,GACnCE,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,YAClDR,UAAU,mBAIhB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,mBAAf,aACA,4BAAQvN,GAAG,kBACTmI,MAAO1I,KAAKwD,MAAMkF,MAAM0gB,WAAa,GACrCxgB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,cAClDR,UAAU,gBAEV,4BAAQQ,MAAM,KACbigB,GAAiB1hB,KAAI,SAAAiD,GAAI,OACxB,4BAAQrD,IAAKqD,EAAKxB,MAAOA,MAAOwB,EAAKxB,OAClCwB,EAAKkM,YAKd,yBAAKlO,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,cACA,4BAAQvN,GAAG,mBAAmBkO,UAAQ,EACpC/F,MAAO1I,KAAKwD,MAAMkF,MAAM2gB,YAAc,GACtCzgB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,eAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBkgB,GAAiB3hB,KAAI,SAAAiD,GAAI,OACxB,4BAAQrD,IAAKqD,EAAMxB,MAAOwB,GACvBA,QAKR,CAAC,SAAU,WAAY,gBAAgBue,SAASzoB,KAAKwD,MAAMkF,MAAM2gB,aAAe,oCAC/E,yBAAKnhB,UAAU,cACb,2BAAO4F,QAAQ,iBAAf,WACA,8BAAUvN,GAAG,gBACXmI,MAAO1I,KAAKwD,MAAMkF,MAAMnH,SAAW,GACnCqH,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,YAClDR,UAAU,kBAGd,+DACA,kGACA,yCAGF,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,iBACxBua,QAAS9a,KAAKwD,MAAMkF,MAAX,KACTE,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,WAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,kBAA1C,aAEF,yBAAK5F,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,gBACxBua,QAAS9a,KAAKwD,MAAMkF,MAAM6gB,QAC1B3gB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,cAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,iBAA1C,YAEF,yBAAK5F,UAAU,cACb,2BAAO7F,KAAK,WAAW9B,GAAG,iBACxBua,QAAS9a,KAAKwD,MAAMkF,MAAM8gB,SAC1B5gB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,eAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,kBAA1C,eAKR,yBAAK5F,UAAU,wBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAM6F,UAAU,MAAMqB,GAAE,oCAA+BugB,IAAvD,gB,GArXmBzhB,aA8XZ4K,gBAAW4V,I,6aCxcpByB,G,mCACJ,WAAYhrB,GAAO,0BACjB,cAAMA,IAkBR0O,SAnBmB,+BAmBR,WAAMjO,GAAN,iBAAA4G,EAAA,yDACDmjB,EAAY,EAAKxqB,MAAM8T,MAAM3Q,OAA7BqnB,QACA9C,EAAY,EAAK1nB,MAAjB0nB,SACJ,EAAK1nB,MAAM8T,MAAM3Q,OAAOlC,GAHnB,gCAIS,EAAKspB,eAAepc,IAAI,EAAKnO,MAAM8T,MAAM3Q,OAAOlC,GAAIR,GAJ7D,cAKPinB,EAAQ7nB,KAAR,oCAA0C2qB,IALnC,wCAOS,EAAKD,eAAe1e,KAAKpL,GAPlC,eAQPinB,EAAQ7nB,KAAR,oCAA0C2qB,IARnC,4CAnBQ,sDAEjB,EAAKtmB,MAAQ,CACX+mB,WAAY,cACZlY,MAAO,IAET,EAAKwS,eAAiB,IAAIxkB,IAAS,CAAEC,MAAO,uBAC5C,EAAKupB,eAAiB,IAAIxpB,IAAS,CAAEC,MAAO,sBAAF,OAAwB,EAAKhB,MAAM8T,MAAM3Q,OAAOqnB,QAAhD,aAPzB,E,2JAUTA,EAAY9pB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,Q,SACU9pB,KAAK6kB,eAAezkB,IAAI0pB,G,OAAtC5jB,E,OACJlG,KAAK2K,SAAS,CAAE4f,WAAYrkB,EAAMpD,Q,4HAmB3B,IACCynB,EAAevqB,KAAKwD,MAApB+mB,WACAT,EAAY9pB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,QACR,OAAO,yBAAK5hB,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,wBAA7C,uBACA,0BAAMrB,UAAU,gCAAhB,KACA,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAE,oCAA+BugB,IACxES,GAEH,0BAAMriB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,mBAGJ,yBAAKA,UAAU,iBACb,kBAAC,GAAD,CAAc8F,SAAUhO,KAAKgO,iB,GAhDb3F,aAsDT4K,gBAAWqX,I,8+BCtD1B,IAAME,GAAsB,CAC1B,CACE9hB,MAAO,SACP0N,MAAO,WAET,CACE1N,MAAO,YACP0N,MAAO,cAET,CACE1N,MAAO,UACP0N,MAAO,aAGLqU,GAAsB,CAC1B,CACE/hB,MAAO,UACP0N,MAAO,WAET,CACE1N,MAAO,WACP0N,MAAO,YAET,CACE1N,MAAO,YACP0N,MAAO,aAET,CACE1N,MAAO,WACP0N,MAAO,aAILsU,G,uCACJ,WAAYprB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACXmnB,cAAe,GACfjiB,MAAO,CACL5F,MAAO,GACPkjB,YAAa,GACb3jB,KAAM,GACNue,SAAU,EAAKthB,MAAM8T,MAAM3Q,OAAOqnB,QAClCc,eAAe,EACfpB,UAAU,EACVqB,aAAa,EACbC,UAAW,GACXC,YAAa,GACbC,SAAU,WACVC,SAAU,YAEZC,kBAAmB,GACnBC,qBAAsB,GACtBX,wBAEF,EAAK3F,eAAiB,IAAIxkB,IAAS,CAAEC,MAAO,8BAC5C,EAAKqmB,kBAAoB,IAAItmB,IAAS,CAAEC,MAAO,sBAAF,OAAwB,EAAKhB,MAAM8T,MAAM3Q,OAAOqnB,QAAhD,gBAC7C,EAAKtE,cAAgB,EAAKA,cAAcjZ,KAAnB,QAvBJ,E,gLA2BOvM,KAAK6kB,eAAena,S,uBAAtCnJ,E,EAAAA,Q,EACkBvB,KAAKV,MAAM8T,MAAM3Q,OAAjCqnB,E,EAAAA,QAASvpB,E,EAAAA,GAGjBP,KAAK2K,SAAS,CAAEggB,cAAeppB,I,SACX,IAAIlB,IAAS,CAACC,MAAO,sBAAF,OAAwBwpB,EAAxB,aAA4Cpf,S,UAA/E9H,E,OACAsoB,EAAoBtoB,EAAOqE,KAAI,SAAAoL,GAAK,MAAG,CACzC+D,MAAO/D,EAAMvP,MACb4F,MAAO2J,EAAMnS,SAEfF,KAAK2K,UAAS,SAAAnH,GAAK,gBAAOA,GAAP,IAAc0nB,0BAC9B3qB,E,kCACiBP,KAAK2mB,kBAAkBvmB,IAAIG,G,QAAzCmI,E,OACJ1I,KAAKorB,0BAA0B1iB,EAAM2iB,iBACrCrrB,KAAKsrB,kBAAkB5iB,EAAM2iB,iBAC7BrrB,KAAK2K,UAAS,SAAAnH,GAAK,gBAAOA,GAAP,IAAckF,a,sIASnBA,GAChB,IAAI6iB,EAAY,GAChBvrB,KAAKwD,MAAMmnB,cAAcze,SAAQ,SAAAgU,GAC5B7a,SAAS6a,EAAOxX,SAAWrD,SAASqD,KACrC6iB,EAAYrL,EAAO9J,UAGvB,IAAIoV,EAAuBhB,GAAoB3X,QAAO,SAAAqN,GACpD,MAAiB,SAAdqL,GAGqB,YAAjBrL,EAAOxX,SAEC,SAAd6iB,IACDvrB,KAAKmN,YAAY,SAAU,QAC3BnN,KAAKmN,aAAY,EAAO,kBAE1BnN,KAAK2K,UAAS,SAAAnH,GAAK,gBAAQA,GAAR,IAAeioB,gBAA8B,SAAdF,EAAsBf,oBAAoBgB,S,kCAOlF9iB,EAAO2J,GAAO,WAClB9R,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,GAEK,oBAAV8R,GACDrS,KAAKsrB,kBAAkB5iB,GAEzB1I,KAAK2K,UAAS,SAAAnH,GAeV,OAdAA,EAAQ,MAAKA,IACPkF,MAAM2J,GAAS3J,EACR,UAAV2J,GAAuB9R,IACxBiD,EAAMkF,MAAMxI,KAAOkL,GAAY1C,IAEnB,SAAV2J,IACF7O,EAAMkF,MAAMxI,KAAOkL,GAAY1C,IAEpB,gBAAV2J,IACD7O,EAAMkF,MAAM2J,GAASjH,GAAY1C,IAEtB,oBAAV2J,GACD,EAAK+Y,0BAA0B1iB,GAE1BlF,O,mEAQqBsmB,G,yFACV,IAAIzpB,IAAS,CAACC,MAAO,sBAAF,OAAwBwpB,EAAxB,aAA4Cpf,S,OAA/E9H,E,OACAuoB,EAAuBvoB,EAAOqE,KAAI,SAAAoL,GAAK,MAAG,CAC5C+D,MAAO/D,EAAMvP,MACb4F,MAAO2J,EAAMnS,SAEfF,KAAK2K,UAAS,SAAAnH,GAAK,gBAAOA,GAAP,IAAc2nB,4B,qJAMf5jB,G,gFAClBA,EAAE0G,iB,EACyBjO,KAAKV,MAAxB0nB,E,EAAAA,QAAS5T,E,EAAAA,MACXrT,EAAOC,KAAKwD,MAAMkF,OACpB1I,KAAKV,MAAM8T,MAAM3Q,OAAOlC,G,gCACVP,KAAK2mB,kBAAkBlZ,IAAIzN,KAAKV,MAAM8T,MAAM3Q,OAAOlC,GAAIR,G,sDAEvDC,KAAK2mB,kBAAkBxb,KAAKpL,G,uBAE9CinB,EAAQ7nB,KAAR,oCAA0CiU,EAAM3Q,OAAOqnB,U,sIAMzC,WACC9pB,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,GAER,OAAO,yBAAK2H,UAAU,iCACpB,2BAAO4F,QAAQ,sBAAf,aACA,4BAASvN,GAAG,qBACLmI,MAAO1I,KAAKwD,MAAMkF,MAAMoiB,WAAa,GACrC5iB,UAAU,eACVU,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,eAEvD,4BAAQwE,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAM0nB,kBAAkBjkB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC9B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,U,yCAUK,WACDpW,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,GAER,OAAM,yBAAK2H,UAAU,iCACnB,2BAAO4F,QAAQ,wBAAf,eACA,4BAAQvN,GAAG,uBACTmI,MAAO1I,KAAKwD,MAAMkF,MAAMqiB,aAAe,GACvCniB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAM2nB,qBAAqBlkB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACnC,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,U,+BAOF,WACC7V,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,GACR,OAAO,0BAAM2H,UAAU,aAAa8F,SAAUhO,KAAKwlB,eACjD,yBAAKtd,UAAU,OACb,yBAAKA,UAAU,qBACb,2BAAO4F,QAAQ,kBAAf,kBACA,2BAAOzL,KAAK,OAAO9B,GAAG,iBAAiBkO,UAAQ,EAC7C/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,OAAS,GACjC8F,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UAClDR,UAAU,kBAEd,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,kBAAf,iBACA,2BAAOzL,KAAK,OAAO9B,GAAG,iBAAiBkO,UAAQ,EAAC4b,SAAU9pB,EACxDmI,MAAO1I,KAAKwD,MAAMkF,MAAMxI,MAAQ,GAChC0I,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAClDR,UAAU,kBAGd,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,wBAAf,wBACA,2BAAOzL,KAAK,OAAO9B,GAAG,uBAAuB8pB,SAAU9pB,EACrDmI,MAAO1I,KAAKwD,MAAMkF,MAAMsd,aAAe,GACvCpd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAClDR,UAAU,mBAIhB,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,iBAAf,iBACA,4BAAQvN,GAAG,gBAAgBkO,UAAQ,EAACvB,SAAU3M,EAC5CmI,MAAO1I,KAAKwD,MAAMkF,MAAMrG,KACxBuG,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMgnB,oBAAoBvjB,KAAI,SAAAiD,GAAI,OACtC,4BAAQrD,IAAKqD,EAAKxB,MAAOA,MAAOwB,EAAKxB,OAClCwB,EAAKkM,YAKd,yBAAKlO,UAAU,iCACb,2BAAO4F,QAAQ,qBAAf,kBACA,4BAAQvN,GAAG,oBAAoBkO,UAAQ,EACrC/F,MAAO1I,KAAKwD,MAAMkF,MAAM2iB,iBAAmB,GAC3CziB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,oBAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMmnB,cAAc1jB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC5B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,SAKX,yBAAKlO,UAAU,OACb,yBAAKA,UAAU,oBACZlI,KAAKwD,MAAMioB,iBAA6C,cAA1BzrB,KAAKwD,MAAMkF,MAAMrG,KAAuB,GAAK,oCAAE,2BAAOA,KAAK,WAAW9B,GAAG,yBACtGua,QAAS9a,KAAKwD,MAAMkF,MAAMkiB,cAAeP,SAAU9pB,EACnDqI,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,oBAEtD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,0BAA1C,0BAEF,yBAAK5F,UAAU,oBACR,CAAC,UAAW,aAAaugB,SAASzoB,KAAKwD,MAAMkF,MAAMrG,MAM2B,GAL/E,oCAAE,2BAAOA,KAAK,WACL9B,GAAG,iBACHua,QAAS9a,KAAKwD,MAAMkF,MAAM8gB,SAC1B5gB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,eAE/D,2BAAO5S,UAAU,iBAAiB4F,QAAQ,kBAA1C,cAGJ,yBAAK5F,UAAU,oBACd,2BAAO7F,KAAK,WACL9B,GAAG,oBACHua,QAAS9a,KAAKwD,MAAMkF,MAAMmiB,YAC1BjiB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,kBAExD,2BAAO5S,UAAU,iBAAiB4F,QAAQ,qBAA1C,iBAGN,yBAAK5F,UAAU,8BACZlI,KAAK0rB,iBACL1rB,KAAK2rB,oBAGR,yBAAKzjB,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,YAAf,aACA,4BAAQvN,GAAG,WAAWkO,UAAQ,EAC5B/F,MAAO1I,KAAKwD,MAAMkF,MAAMsiB,SACxBpiB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB+hB,GAAoBxjB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACvB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,EAAMoC,oBAKf,yBAAKtQ,UAAU,iCACb,2BAAO4F,QAAQ,YAAf,aACA,4BAAQvN,GAAG,WAAWkO,UAAQ,EAC5B/F,MAAO1I,KAAKwD,MAAMkF,MAAMuiB,SACxBriB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB+hB,GAAoBxjB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACvB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,EAAMoC,qBAMhB,yBAAKtQ,UAAU,gBACd,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAM6F,UAAU,MAAMqB,GAAG,wBAAzB,gB,GA5SsBlB,aAoTf4K,gBAAWyX,I,6aCrVpBkB,G,mCACJ,WAAYtsB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACX+mB,WAAY,eAEd,EAAK1F,eAAiB,IAAIxkB,IAAS,CAAEC,MAAO,uBAL3B,E,2JASTwpB,EAAY9pB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,Q,SACU9pB,KAAK6kB,eAAezkB,IAAI0pB,G,OAAtC5jB,E,OACJlG,KAAK2K,SAAS,CAAE4f,WAAYrkB,EAAMpD,Q,4HAG3B,IACCynB,EAAevqB,KAAKwD,MAApB+mB,WACAT,EAAY9pB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,QAER,OAAO,yBAAK5hB,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,wBAA7C,uBACA,0BAAMrB,UAAU,gCAAhB,KACA,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAE,oCAA+BugB,IACxES,GAEH,0BAAMriB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,sBAGJ,yBAAKA,UAAU,iBACb,kBAAC,GAAD,Y,GAhCkBG,aAsCX4K,gBAAW2Y,I,woBCxC1B,IAAMC,GAAc,CAAC,WAAY,cAAe,SAAU,OAAQ,SAAU,SAAU,WAChFC,GAAgB,CACpB,CAAEpjB,MAAO,EAAG0N,MAAO,iBACnB,CAAE1N,MAAO,EAAG0N,MAAO,iBACnB,CAAE1N,MAAO,EAAG0N,MAAO,kBAiKN2V,G,iCA7Jb,WAAYzsB,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CAEXmnB,cAAemB,GACfpjB,MAAO,CACL5F,MAAO,GACPkjB,YAAa,GACb3jB,KAAM,GACNue,SAAU,GACVoL,KAAM,GACN1rB,MAAO,GACPiF,MAAO,KAGX,EAAKigB,cAAgB,EAAKA,cAAcjZ,KAAnB,QACrB,EAAK0f,4BAA8B,EAAKA,4BAA4B1f,KAAjC,QAhBlB,E,6FAyBP7D,EAAO2J,GACjB/P,QAAQC,IAAImG,GACZ1I,KAAK2K,UAAS,SAAAnH,GAGZ,OAFAA,E,mWAAQ,IAAKA,IACPkF,MAAM2J,GAAS3J,EACdlF,O,qDAI8C,QAA3ByE,OAAUS,EAAiB,EAAjBA,MAAOxI,EAAU,EAAVA,KAC7CF,KAAK2K,UAAS,SAAAnH,GACZ,IAAM0oB,EAAQ1oB,EAAMkF,MAAMxI,GAE1B,GAAIgsB,EAAMzD,SAAS/f,GAAQ,CACzB,IAAMQ,EAAQgjB,EAAM7qB,QAAQqH,GAC5BwjB,EAAM9B,OAAOlhB,EAAO,QAEpBgjB,EAAM/sB,KAAKuJ,GAGb,OAAOlF,O,oCAIG+D,GACZA,EAAE0G,iBAEF3L,QAAQC,IAAIvC,KAAKwD,MAAMkF,S,+BAGhB,WACP,OAAO,0BAAMR,UAAU,aAAa8F,SAAUhO,KAAKwlB,eACjD,yBAAKtd,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,qBAAf,qBACA,2BAAOzL,KAAK,OAAO9B,GAAG,oBAAoBkO,UAAQ,EAChD/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,MACxB8F,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UAClDR,UAAU,kBAGd,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,2BAAf,2BACA,2BAAOzL,KAAK,OAAO9B,GAAG,0BAA0BkO,UAAQ,EACtD/F,MAAO1I,KAAKwD,MAAMkF,MAAMsd,YACxBpd,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAClDR,UAAU,mBAIhB,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,oBAAf,oBACA,4BAAQvN,GAAG,mBAAmBkO,UAAQ,EAACmG,UAAQ,EAC7C1U,KAAK,OACLwI,MAAO1I,KAAKwD,MAAMkF,MAAMrG,KACxBuG,SAAU5I,KAAKisB,4BACf/jB,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBmjB,GAAY5kB,KAAI,SAAAiD,GAAI,OACnB,4BAAQrD,IAAKqD,EAAMxB,MAAOwB,GACvBA,QAKT,yBAAKhC,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,wBAAf,SACA,4BAAQvN,GAAG,uBAAuBkO,UAAQ,EACxC/F,MAAO1I,KAAKwD,MAAMkF,MAAMkY,SACxBhY,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aAClDR,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMmnB,cAAc1jB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC5B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,QAKT,yBAAKlO,UAAU,iCACb,2BAAO4F,QAAQ,oBAAf,QACA,4BAAQvN,GAAG,mBAAmBkO,UAAQ,EAACmG,UAAQ,EAC7C1U,KAAK,OACLwI,MAAO1I,KAAKwD,MAAMkF,MAAX,KACPE,SAAU5I,KAAKisB,4BACf/jB,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMmnB,cAAc1jB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC5B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,SAMX,yBAAKlO,UAAU,cACb,2BAAO4F,QAAQ,qBAAf,SACA,2BAAOzL,KAAK,OAAO9B,GAAG,oBAAoBkO,UAAQ,EAChD/F,MAAO1I,KAAKwD,MAAMkF,MAAMpI,MACxBsI,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UAClDR,UAAU,kBAGd,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,qBAAf,UACA,4BAAQvN,GAAG,oBAAoBkO,UAAQ,EAACmG,UAAQ,EAC9C1U,KAAK,QACLwI,MAAO1I,KAAKwD,MAAMkF,MAAMnD,MACxBqD,SAAU5I,KAAKisB,4BACf/jB,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMmnB,cAAc1jB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC5B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,QAKT,yBAAKlO,UAAU,gBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAM6F,UAAU,MAAMqB,GAAG,wBAAzB,gB,GAvJwBlB,a,6aCWjB8jB,G,sIAfX,OAAO,yBAAKjkB,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,wBAA7C,uBACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,yBAGJ,yBAAKA,UAAU,iBACb,kBAAC,GAAD,Y,GAXoBG,a,4bCF5B,IAAMwjB,GAAc,CAAC,MAAO,MAAO,MAAO,MAAO,QAAS,WAAY,kBAoDvDO,G,sIAjDJ,MACyBpsB,KAAKV,MAAM4K,KAAnC7H,EADD,EACCA,KAAM0G,EADP,EACOA,OAAQsjB,EADf,EACeA,MADf,EAEmCrsB,KAAKV,MAAvCgtB,EAFD,EAECA,eAAgBzjB,EAFjB,EAEiBA,cACxB,OAAO,yBAAKX,UAAU,2CACpB,yBAAKA,UAAU,iCACb,sCACE,4BAAQuG,UAAQ,EAACvO,KAAK,OACpBwI,MAAOrG,EACPuG,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBmjB,GAAY5kB,KAAI,SAAA5E,GAAI,OACnB,4BAAQwE,IAAKxE,EAAMqG,MAAOrG,GACvBA,SAMX,yBAAK6F,UAAU,iCACb,uCACE,4BAAQuG,UAAQ,EAACvO,KAAK,SACpBwI,MAAOK,EACPH,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACvB,4BAAQA,MAAM,KAAd,OACC4jB,EAAerlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAClB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,SAMX,yBAAKlO,UAAU,iCACb,uCACE,2BAAO7F,KAAK,OAAOoM,UAAQ,EAACvO,KAAK,QAC/BwI,MAAO2jB,EACPzjB,SAAUC,EACVX,UAAU,wB,GA3CWG,a,yaCDjC,IAAMkkB,GAAgB,SAAAC,GAAO,OAAI,IAAInsB,IAAS,CAAEC,MAAO,sBAAF,OAAwBksB,EAAxB,eA8GtCC,G,mLA5GbjpB,MAAQ,CACNkpB,oBAAqB,I,yDAGJ9G,GAAW,WACpB+G,EAAiB3sB,KAAKV,MAAM4K,KAA5ByiB,aACJ/G,EAAU1b,KAAKyiB,eAAiBA,GAClCJ,GAAcI,GAAcjiB,SACzB9J,MAAK,SAAA8rB,GAAmB,OAAI,EAAK/hB,SAAS,CAAE+hB,6B,0CAI/B,WACVC,EAAiB3sB,KAAKV,MAAM4K,KAA5ByiB,aACJA,GACFJ,GAAcI,GAAcjiB,SACzB9J,MAAK,SAAA8rB,GAAmB,OAAI,EAAK/hB,SAAS,CAAE+hB,6B,+BAI1C,MACgE1sB,KAAKV,MAAM4K,KAA1E7H,EADD,EACCA,KAAMsqB,EADP,EACOA,aAAcC,EADrB,EACqBA,cAAerE,EADpC,EACoCA,SAAUsE,EAD9C,EAC8CA,cAD9C,EAEuD7sB,KAAKV,MAA3DuJ,EAFD,EAECA,cAAe0jB,EAFhB,EAEgBA,cAAeO,EAF/B,EAE+BA,oBAC9BJ,EAAwB1sB,KAAKwD,MAA7BkpB,oBACR,OAAO,yBAAKxkB,UAAU,gBACpB,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,iCACb,sCACE,4BAAQuG,UAAQ,EAACvO,KAAK,OACpBwI,MAAOrG,EACPuG,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACvB,4BAAQA,MAAM,cAAd,cACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,cAAd,iBAKN,yBAAKR,UAAU,iCACb,8CACA,4BAAQuG,UAAQ,EAACvO,KAAK,eAClBwI,MAAOikB,EACP/jB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB6jB,EAActlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACjB,4BAAQlJ,SAAUxE,IAAUikB,EAAcjkB,MAAOA,EAAO7B,IAAK6B,GAC1D0N,UAOb,yBAAKlO,UAAU,8BACb,yBAAKA,UAAU,iCACb,+CACA,4BAAQuG,UAAQ,EAACvO,KAAK,gBAClBwI,MAAOkkB,EACPhkB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBokB,EAAoB7lB,KAAI,gBAAGmP,EAAH,EAAGA,MAAO1N,EAAV,EAAUA,MAAV,OAAsB,4BAAQA,MAAOA,EAAO7B,IAAK6B,GAAQ0N,SAKxF,yBAAKlO,UAAU,iCACb,0CACE,4BAAQuG,UAAQ,EAACvO,KAAK,WACpBwI,MAAO6f,EACP3f,SAAUC,EACVX,UAAU,gBAEV,4BAAQQ,MAAM,GAAGwE,UAAQ,IACzB,4BAAQxE,MAAM,KAAd,UACA,4BAAQA,MAAM,MAAd,cACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,MACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,SAKN,yBAAKR,UAAU,iCACb,+CACE,4BAAQuG,UAAQ,EAACvO,KAAK,gBACpBwI,MAAOmkB,EACPjkB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,IAAKikB,EAAsC,GAAvB,sBAC1CD,EAAoBzlB,KAAI,gBAAG1G,EAAH,EAAGA,GAAIuC,EAAP,EAAOA,MAAP,OAAmB,4BAAQ4F,MAAOnI,EAAIsG,IAAKtG,GAAKuC,e,GApG3DuF,a,qBCArB,SAAS0kB,GAAoB1qB,GAClC,OAAQA,GACN,IAAK,WACH,MAAO,qBACT,IAAK,OACH,MAAO,aACT,IAAK,OACH,MAAO,UACT,IAAK,MACH,MAAO,KACT,IAAK,QACH,MAAO,KACT,IAAK,OAGL,QACE,MAAO,QAUN,SAAS2qB,GAAgB3qB,GAC9B,OAAQA,GACN,IAAK,WACH,MAAO,qBACT,IAAK,OACH,MAAO,aACT,IAAK,OACH,MAAO,UACT,IAAK,MACH,MAAO,KACT,IAAK,QACH,MAAO,KACT,IAAK,OAGL,QACE,MAAO,Q,yaCzCb,IAAM4qB,GAAuB,CAAC,QAAS,WAAY,gBAAiB,WAAY,aAAc,gBACxFC,GAAmB,CACvB,CAAExkB,MAAO,WAAY0N,MAAO,eAC5B,CAAE1N,MAAO,OAAQ0N,MAAO,QACxB,CAAE1N,MAAO,OAAQ0N,MAAO,QACxB,CAAE1N,MAAO,MAAO0N,MAAO,OACvB,CAAE1N,MAAO,QAAS0N,MAAO,SACzB,CAAE1N,MAAO,OAAQ0N,MAAO,SAuPX+W,G,mLAnPb3pB,MAAQ,CAAE4pB,WAAW,G,EAErBC,sBAAwB,WAAM,IACpBD,EAAc,EAAK5pB,MAAnB4pB,UAER,EAAK9tB,MAAMuJ,cAAc,CACvBZ,OAAQ,CACNS,MAAO0kB,EAAYE,KAAO,IAAIlW,MAAQG,OAAOyV,GAAgB,EAAK1tB,MAAM4K,KAAK7H,OAAS,GACtFnC,KAAM,WAGV,EAAKyK,SAAS,CAAEyiB,WAAYA,K,+CAGrB,MAC4CptB,KAAKV,MAAhDgtB,EADD,EACCA,eAAgBzjB,EADjB,EACiBA,cAAe0kB,EADhC,EACgCA,QADhC,EAG2BvtB,KAAKV,MAAM4K,KADrCsjB,EAFD,EAECA,eAAgBzkB,EAFjB,EAEiBA,OAAQwf,EAFzB,EAEyBA,SAAU7f,EAFnC,EAEmCA,MAAO+kB,EAF1C,EAE0CA,GAAIC,EAF9C,EAE8CA,IAAKC,EAFnD,EAEmDA,OAAQtrB,EAF3D,EAE2DA,KAChEurB,EAHK,EAGLA,aAAcC,EAHT,EAGSA,cACRT,EAAcptB,KAAKwD,MAAnB4pB,UAER,OAAO,yBAAKllB,UAAU,gBACpB,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,iCACb,gDACE,4BAAQuG,UAAQ,EAACvO,KAAK,iBACpBwI,MAAO8kB,EACP5kB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBukB,GAAqBhmB,KAAI,SAAA5E,GAAI,OAC5B,4BAAQwE,IAAKxE,EAAMqG,MAAOrG,EAAM6K,SAAUqgB,GAAoB,aAATlrB,GAClDA,SAMVmrB,GAAqC,iBAAnBA,GAAqC,yBAAKtlB,UAAU,iCACrE,uCACE,4BAAQuG,UAAQ,EAACvO,KAAK,SACpBwI,MAAOK,EACPH,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB4jB,EAAerlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAClB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,SAMV,CAAC,QAAS,WAAY,gBAAgBqS,SAAS+E,IAC9C,yBAAKtlB,UAAU,iCACb,0CACE,4BAAQuG,UAAQ,EAACvO,KAAK,WACpBwI,MAAO6f,EACP3f,SAAUC,EACVX,UAAU,gBAEV,4BAAQQ,MAAM,GAAGwE,UAAQ,IACzB,4BAAQxE,MAAM,KAAd,UACA,4BAAQA,MAAM,MAAd,cACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,MACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,SAKP,CAAC,gBAAiB,WAAY,gBAAgB+f,SAAS+E,IAAmB,qCACvED,GAAW,yBAAKrlB,UAAU,qDAC1B,2BAAOA,UAAU,kBACf,2BAAO7F,KAAK,WAAWnC,KAAK,KAC1BgI,UAAU,mBACV4S,QAAS2S,EACT7kB,SAAUC,IAJd,QASkB,iBAAnB2kB,GAAqC,yBAAKtlB,UAAU,qDACnD,2BAAOA,UAAU,kBACf,2BAAO7F,KAAK,WAAWnC,KAAK,MAC1BgI,UAAU,mBACV4S,QAAS4S,EACT9kB,SAAUC,IAJd,UAUgB,eAAnB2kB,GAAmC,yBAAKtlB,UAAU,iCACjD,sCACE,4BAAQ3H,GAAG,OAAOkO,UAAQ,EAACvO,KAAK,OAC9BwI,MAAOrG,EACPuG,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtBwkB,GAAiBjmB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OACpB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GAAQ0N,UAM5C,CAAC,QAAS,YAAYqS,SAAS+E,IAC9B,yBAAKtlB,UAAU,cACb,uCACE,2BAAO7F,KAAK,OAAOoM,UAAQ,EAACvO,KAAK,QAC/BwI,MAAOA,EACPE,SAAUC,EACVX,UAAU,mBAIjB,CAAC,iBAAiBugB,SAAS+E,IAC1B,yBAAKtlB,UAAU,8BACb,yBAAKA,UAAU,iCACb,yCACE,2BAAO7F,KAAK,OAAOoM,UAAQ,EAACvO,KAAK,SAC/BwI,MAAOilB,EAAO,IAAM,GACpB/kB,SAAUC,EACVX,UAAU,mBAIhB,yBAAKA,UAAU,iCACb,yCACE,2BAAO7F,KAAK,OAAOoM,UAAQ,EAACvO,KAAK,SAC/BwI,MAAOilB,EAAO,IAAM,GACpB/kB,SAAUC,EACVX,UAAU,oBAKA,aAAnBslB,GAAiC,oCAChC,yBAAKtlB,UAAU,cACb,wCACE,8BAAUuG,UAAQ,EAACvO,KAAK,SACtBwI,MAAOilB,EAAOliB,KAAK,MACnB7C,SAAUC,EACVX,UAAU,mBAGhB,+CAGkB,eAAnBslB,GAAmC,yBAAKtlB,UAAU,OACjD,yBAAKA,UAAU,oBACb,0CACI,4BAAQuG,UAAQ,EAACvO,KAAK,WACtBwI,MAAO6f,EACP3f,SAAUC,EACVX,UAAU,gBAEV,4BAAQQ,MAAM,GAAGwE,UAAQ,IACzB,4BAAQxE,MAAM,KAAd,UACA,4BAAQA,MAAM,MAAd,cACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,MACA,4BAAQA,MAAM,KAAd,KACA,4BAAQA,MAAM,MAAd,SAKN,yBAAKR,UAAS,2BAAsB,CAAC,MAAO,SAASugB,SAASpmB,GAAQ,cAAgB,KACpF,2BAAO6F,UAAU,eAAjB,SACA,2BAAOA,UAAU,qCACf,2BAAO7F,KAAK,WACV6F,UAAU,mBACV4S,QAASsS,EACTxkB,SAAU5I,KAAKqtB,wBAJnB,iBAOCD,EACC,2BAAO/qB,KAAK,OAAOoM,UAAQ,EAACvO,KAAK,QAC/BwI,MAAOA,EACPE,SAAUC,EACVX,UAAU,iBAEZ,kBAAC,KAAD,CAAY4lB,SAAUR,KAAO5kB,EAAOskB,GAAgB3qB,IAAO0rB,GACzDC,eAAgB,CAAC,WAAY,QAAQvF,SAASpmB,GAC9C4rB,eAAyB,SAAT5rB,EAChB6rB,mBAA6B,SAAT7rB,EACpB8rB,oBAA8B,UAAT9rB,EACrB+rB,WAAYrB,GAAoB1qB,GAChC6F,UAAU,eACVU,SAAU,SAAAF,GAAK,OAAIG,EAAc,CAC/BZ,OAAQ,CACNS,MAAO4kB,KAAO5kB,GAAO6O,OAAOyV,GAAgB3qB,IAC5CnC,KAAM,gBAOE,iBAAnBstB,GAAqC,yBAAKtlB,UAAU,8BACnD,yBAAKA,UAAU,iCACb,6CACE,4BAAQuG,UAAQ,EAACvO,KAAK,eAEpBwI,MAAOklB,EACPhlB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB4jB,EAAerlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAClB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,SAMX,yBAAKlO,UAAU,iCACb,8CACE,4BAAQuG,UAAQ,EAACvO,KAAK,gBACpBwI,MAAOmlB,EACPjlB,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB4jB,EAAerlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAClB,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,e,GA1Oc/N,a,6aC0BlBgmB,G,sIAtCJ,MACkBruB,KAAKV,MAAM4K,KAA5B7H,EADD,EACCA,KAAM0G,EADP,EACOA,OADP,EAEmC/I,KAAKV,MAAvCgtB,EAFD,EAECA,eAAgBzjB,EAFjB,EAEiBA,cAExB,OAAO,yBAAKX,UAAU,2CACpB,yBAAKA,UAAU,iCACb,uCACE,4BAAQuG,UAAQ,EAACvO,KAAK,SACpBwI,MAAOK,EACPH,SAAUC,EACVX,UAAU,gBAEV,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB4jB,EAAerlB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAClB,4BAAQvP,IAAK6B,EAAOA,MAAO0N,GACxBA,SAMX,yBAAKlO,UAAU,iCACb,sCACE,4BAAQuG,UAAQ,EAACvO,KAAK,OACpBwI,MAAOrG,EACPuG,SAAUC,EACVX,UAAU,gBAGV,4BAAQQ,MAAM,OAAd,OACA,4BAAQA,MAAM,QAAd,gB,GA/BmBL,a,k/BCUzBimB,G,qCACJ,WAAYhvB,GAAO,mBACjB,cAAMA,IA8FRivB,cAAgB,SAACC,GACf,IAAIC,EAAY,GACZD,GAAUA,EAAStiB,SAAQ,SAAApE,GAC7B2mB,EAAUtvB,KAAK2I,EAAEY,UAEnB,EAAKiC,UAAS,SAAAnH,GACZ,IAAMoe,EAAW7c,EAAE9E,UAAUuD,GAE7B,OADAoe,EAASlZ,MAAM8lB,SAAWC,EACnB7M,MAvGQ,EA6GnB8M,cAAgB,SAAC5lB,GACf,IAAI6lB,EAAW,GACX7lB,GAASA,EAAQoD,SAAQ,SAAA0iB,GAC3BD,EAASxvB,KAAKyvB,EAAElmB,UAElB,EAAKiC,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBI,QAAS6lB,UAlHrD,EAuHnBE,gBAAkB,SAACjI,GACjB,IAAIkI,EAAa,GACblI,GAAWA,EAAU1a,SAAQ,SAAApE,GAC/BgnB,EAAW3vB,KAAK2I,EAAEY,UAEpB,EAAKiC,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBke,UAAWkI,UA5HvD,EAiInBC,YAAc,SAACxpB,GACb,IAAIgM,EAAS,GACThM,GAAOA,EAAM2G,SAAQ,SAAApE,GACvByJ,EAAOpS,KAAK2I,EAAEY,UAEhB,EAAKiC,UAAS,SAAAnH,GACZ,IAAMoe,EAAW7c,EAAE9E,UAAUuD,GAE7B,OADAoe,EAASlZ,MAAMsmB,OAAOzpB,MAAQgM,EACvBqQ,MAzIQ,EA+InBqN,iBAAmB,SAACnqB,GAClB,IAAI2M,EAAe,GACf3M,GAAaA,EAAYoH,SAAQ,SAAA6G,GACnCtB,EAAatS,KAAK4T,EAAErK,UAEtB,EAAKiC,UAAS,SAAAnH,GACZ,IAAMoe,EAAW7c,EAAE9E,UAAUuD,GAE7B,OADAoe,EAASlZ,MAAMsmB,OAAOlqB,YAAc2M,EAC7BmQ,MAvJQ,EA2JnBsN,mBAAqB,YAAiC,QAA9BjnB,OAAUS,EAAoB,EAApBA,MAAOxI,EAAa,EAAbA,KACvC,EAAKyK,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBkF,MAAO,SAAKlF,EAAMkF,OAAb,UAAqBxI,EAAOwI,UA5JpD,EA8MnBymB,gBAAkB,WAChB,EAAKxkB,UAAS,SAAAnH,GAAK,MAAK,CACtB4rB,gBAAiB5rB,EAAM4rB,eACvB1mB,MAAO,SACFlF,EAAMkF,OADN,IAEH2mB,WAAY7rB,EAAM4rB,eAAiB,CAAC,CAAE/sB,KAAM,GAAI0G,OAAQ,GAAIsjB,MAAO,KAAQ,UAnN9D,EA6PnBiD,oBAAsB,WACpB,EAAK3kB,UAAS,SAAAnH,GACZ,IAAM+rB,EAAa,KAAI/rB,EAAMkF,MAAM6mB,YAEnC,OADAA,EAAWpwB,KAAK,CAAEquB,eAAgB,KAClC,SACKhqB,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB6mB,qBAnQZ,EAyZnBC,oBAAsB,WACpB,EAAK7kB,UAAS,SAAAnH,GACZ,IAAMoe,EAAW7c,EAAE9E,UAAUuD,GAE7B,cADOoe,EAASlZ,MAAM+mB,OACf7N,MA7ZQ,EAianB8N,mBAAqB,WACnB,EAAK/kB,UAAS,SAAAnH,GACZ,IAAMoe,EAAW7c,EAAE9E,UAAUuD,GAG7B,cAFOoe,EAASlZ,MAAM+mB,cACf7N,EAASlZ,MAAMinB,MACf/N,MAtaQ,EAubnBgO,aAAe,SAAChJ,GACd,IAAIkI,EAAa,GACjBlI,EAAU1a,SAAQ,SAAApE,GAChBgnB,EAAW3vB,KAAK2I,EAAEY,UAEpB,EAAKiC,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBojB,UAAWkI,QA5b9B,EAicnBe,WAAa,SAAC/mB,GACZ,IAAI6lB,EAAW,GACf7lB,EAAQoD,SAAQ,SAAA0iB,GACdD,EAASxvB,KAAKyvB,EAAElmB,UAElB,EAAKiC,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBsF,QAAS6lB,QAtc5B,MAEO,EAAKrvB,MAAM8T,MAAM3Q,OAAjCqnB,EAFS,EAETA,QAFS,EAEAvpB,GAFA,OAGjB,EAAKiD,MAAQ,CACXkF,MAAO,CACL5F,MAAO,GACP5C,KAAM,GACN4I,QAAS,GACTumB,WAAY,GACZS,MAAO,GACPP,WAAY,GACZ3I,UAAW,GACXmJ,SAAU,GACVf,OAAQ,CAAEzpB,MAAO,GAAIT,YAAa,IAClC0pB,SAAU,IAIZwB,iBAAkB,GAClBle,aAAc,GACdC,mBAAoB,GACpBwa,cAAe,GACf0D,WAAY,GACZ/E,kBAAmB,GACnBkE,gBAAgB,GAIlB,EAAKc,QAAU,EACf,EAAKpe,aAAe,IAAIzR,IAAS,CAAEC,MAAO,6BAC1C,EAAKyR,mBAAqB,IAAI1R,IAAS,CAAEC,MAAO,oCAChD,EAAKisB,cAAgB,IAAIlsB,IAAS,CAAEC,MAAO,+BAC3C,EAAK6vB,mBAAqB,IAAI9vB,IAAS,CAAEC,MAAO,sBAAF,OAAwBwpB,EAAxB,kBAC9C,EAAKnD,kBAAoB,IAAItmB,IAAS,CAAEC,MAAO,sBAAF,OAAwBwpB,EAAxB,gBAC7C,EAAKsG,YAAc,IAAI/vB,IAAS,CAAEC,MAAO,sBAAF,OAAwBwpB,EAAxB,cACvC,EAAKtE,cAAgB,EAAKA,cAAcjZ,KAAnB,QACrB,EAAK0f,4BAA8B,EAAKA,4BAA4B1f,KAAjC,QACnC,EAAK8jB,uBAAyB,EAAKA,uBAAuB9jB,KAA5B,QAC9B,EAAK+jB,oBAAsB,EAAKA,oBAAoB/jB,KAAzB,QAC3B,EAAKgkB,uBAAyB,EAAKA,uBAAuBhkB,KAA5B,QAC9B,EAAKikB,kBAAoB,EAAKA,kBAAkBjkB,KAAvB,QACzB,EAAKkkB,eAAiB,EAAKA,eAAelkB,KAApB,QACtB,EAAKmkB,kBAAoB,EAAKA,kBAAkBnkB,KAAvB,QACzB,EAAKokB,uBAAyB,EAAKA,uBAAuBpkB,KAA5B,QAC9B,EAAKqkB,qBAAuB,EAAKA,qBAAqBrkB,KAA1B,QAC5B,EAAKskB,kBAAoB,EAAKA,kBAAkBtkB,KAAvB,QACzB,EAAKukB,qBAAuB,EAAKA,qBAAqBvkB,KAA1B,QAC5B,EAAKmZ,mBAAqB,EAAKA,mBAAmBnZ,KAAxB,QA/CT,E,uKAuDThM,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,I,gCAEcP,KAAKowB,YAAYhwB,IAAIG,G,OAAnCmI,E,OACN1I,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBkF,a,uBAEX1I,KAAK8R,aAAapH,S,cAAvCoH,E,OACN9R,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBsO,oB,UACH9R,KAAK+R,mBAAmBrH,S,eAAnDqH,E,OACN/R,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBuO,0B,UACR/R,KAAKusB,cAAc7hB,S,eAAzC6hB,E,OACNvsB,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiB+oB,qB,UACXvsB,KAAKmwB,mBAAmBzlB,S,eAA3CulB,E,OACF/E,EAAoB+E,EAAWhpB,KAAI,SAAAoL,GACrC,MAAO,CACL+D,MAAO/D,EAAMvP,MACb4F,MAAO2J,EAAMnS,SAGjBF,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBysB,aAAY/E,yB,UACxBlrB,KAAK2mB,kBAAkBjc,S,QAAzCkc,E,OACFoJ,EAAmBpJ,EAAU3f,KAAI,SAAAkgB,GACnC,MAAO,CACL/Q,MAAO+Q,EAASrkB,MAChB4F,MAAOye,EAASjnB,SAGpBF,KAAK2K,UAAS,SAAAnH,GAAK,gBAAUA,GAAV,IAAiBwsB,wB,qVA+EnBzoB,GACjBA,EAAEoe,UACF3lB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IAEjBkF,MAAO,SACFlF,EAAMkF,OADN,IAEH5F,MAAOyE,EAAEU,OAAOS,MAChBxI,KAAMkL,GAAY7D,EAAEU,OAAOS,gB,+CAMmBQ,GAAO,QAAlCjB,OAAUS,EAAwB,EAAxBA,MAAOxI,EAAiB,EAAjBA,KACxCF,KAAK2K,UAAS,SAAAnH,GACZ,IAAM6rB,EAAa,KAAI7rB,EAAMkF,MAAM2mB,YAEnC,OADAA,EAAWnmB,GAAX,SAAyB1F,EAAMkF,MAAM2mB,WAAWnmB,IAAhD,UAAyDhJ,EAAOwI,IAChE,SACKlF,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB2mB,sB,4CAM7BrvB,KAAK2K,UAAS,SAAAnH,GACZ,IAAM6rB,EAAa,KAAI7rB,EAAMkF,MAAM2mB,YAEnC,OADAA,EAAWlwB,KAAK,CAAEkD,KAAM,GAAI0G,OAAQ,GAAIsjB,MAAO,KAC/C,SACK7oB,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB2mB,sB,6CAKRnmB,GACrBlJ,KAAK2K,UAAS,SAAAnH,GACZ,IAAM6rB,EAAa,KAAI7rB,EAAMkF,MAAM2mB,YAEnC,OADAA,EAAWjF,OAAOlhB,EAAO,GACzB,SACK1F,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB2mB,sB,0CAgBgBnmB,GAAO,QAAlCjB,OAAUS,EAAwB,EAAxBA,MAAOxI,EAAiB,EAAjBA,KACnCF,KAAK2K,UAAS,SAAAnH,GACZ,IAAMssB,EAAQ,KAAItsB,EAAMkF,MAAMonB,OAE9B,OADAA,EAAM5mB,GAAN,SAAoB1F,EAAMkF,MAAMonB,MAAM5mB,IAAtC,UAA+ChJ,EAAOwI,IACtD,SACKlF,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBonB,iB,uCAM7B9vB,KAAK2K,UAAS,SAAAnH,GACZ,IAAMssB,EAAQ,KAAItsB,EAAMkF,MAAMonB,OAI9B,OAHAA,EAAM3wB,KAAK,CACTkD,KAAM,GAAIsqB,aAAc,GAAIC,cAAe,GAAIrE,SAAU,GAAIsE,cAAe,KAE9E,SACKrpB,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBonB,iB,wCAKb5mB,GAChBlJ,KAAK2K,UAAS,SAAAnH,GACZ,IAAMssB,EAAQ,KAAItsB,EAAMkF,MAAMonB,OAE9B,OADAA,EAAM1F,OAAOlhB,EAAO,GACpB,SACK1F,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBonB,iB,+CAiB8B5mB,GAAO,QAA3CjB,OAAUS,EAAiC,EAAjCA,MAAOxI,EAA0B,EAA1BA,KAAM4a,EAAoB,EAApBA,QAC9C9a,KAAK2K,UAAS,SAAAnH,GACZ,IACIutB,EADExB,EAAa,KAAI/rB,EAAMkF,MAAM6mB,YAEnC,GAAa,mBAATrvB,EACF,OAAQwI,GACN,IAAK,QACL,IAAK,WACHqoB,EAAY,CAAEvD,eAAgB9kB,EAAOK,OAAQ,GAAIwf,SAAU,GAAI7f,MAAO,IACtE,MACF,IAAK,gBACL,IAAK,WACHqoB,EAAsB,IAAV7nB,EACV,CAAEskB,eAAgB9kB,EAAOglB,KAAK,EAAO3kB,OAAQ,GAAI4kB,OAAQ,IACzD,CAAEH,eAAgB9kB,EAAO+kB,IAAI,EAAOC,KAAK,EAAO3kB,OAAQ,GAAI4kB,OAAQ,IACtE,MACF,IAAK,aACHoD,EAAY,CAAEvD,eAAgB9kB,EAAOrG,KAAM,OAAQ0G,OAAQ,GAAIL,MAAO,QACtE,MACF,IAAK,eACHqoB,EAAsB,IAAV7nB,EACV,CAAEskB,eAAgB9kB,EAAOklB,aAAc,GAAIrF,SAAU,GAAIsF,cAAe,IACxE,CAAEL,eAAgB9kB,EAAO+kB,IAAI,EAAOG,aAAc,GAAIrF,SAAU,GAAIsF,cAAe,IACrF,MAEF,QACE,MAAM,IAAI9mB,MAAM,+BAGpB,OAAQ7G,GACN,IAAK,SACH6wB,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,IAEPykB,OAAQ,CAACjlB,EAAOlF,EAAMkF,MAAM6mB,WAAWrmB,GAAOykB,OAAO,MAEvD,MACF,IAAK,SACHoD,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,IAEPykB,OAAQ,CAACnqB,EAAMkF,MAAM6mB,WAAWrmB,GAAOykB,OAAO,GAAIjlB,KAEpD,MACF,IAAK,SACHqoB,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,UAENhJ,EAAOwI,EAAM4C,MAAM,KAAKrE,KAAI,SAAAiD,GAAI,OAAIA,EAAK8mB,YAE5C,MACF,IAAK,OACHD,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,IAEP7G,KAAMqG,EACNA,MAAO4kB,KAAO,IAAIlW,MAAQG,OAAOyV,GAAgBtkB,MAEnD,MACF,IAAK,WAK0B,kBAJ7BqoB,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,UAENhJ,EAAOwI,KAEA8kB,eACRuD,EAAUlD,cAAgBkD,EAAUlD,eAAiB,GACrDkD,EAAUroB,MAAQqoB,EAAUroB,OAAS,GACvC,MAEF,QACEqoB,EAAY,SACPvtB,EAAMkF,MAAM6mB,WAAWrmB,IADnB,UAENhJ,EAAO,CAAC,KAAM,OAAOuoB,SAASvoB,GAAQ4a,EAAUpS,IAOzD,OADA6mB,EAAWrmB,GAAS6nB,EACpB,SACKvtB,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB6mB,sB,6CAKRrmB,GACrBlJ,KAAK2K,UAAS,SAAAnH,GACZ,IAAM+rB,EAAa,KAAI/rB,EAAMkF,MAAM6mB,YAEnC,OADAA,EAAWnF,OAAOlhB,EAAO,GACzB,SACK1F,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoB6mB,sB,6CAMmBrmB,GAAO,QAAlCjB,OAAUS,EAAwB,EAAxBA,MAAOxI,EAAiB,EAAjBA,KACtCF,KAAK2K,UAAS,SAAAnH,GACZ,IAAMusB,EAAW,KAAIvsB,EAAMkF,MAAMqnB,UAEjC,OADAA,EAAS7mB,GAAT,SAAuB1F,EAAMkF,MAAMqnB,SAAS7mB,IAA5C,UAAqDhJ,EAAOwI,IAC5D,SACKlF,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBqnB,oB,0CAQ7B/vB,KAAK2K,UAAS,SAAAnH,GACZ,IAAMusB,EAAW,KAAIvsB,EAAMkF,MAAMqnB,UAEjC,OADAA,EAAS5wB,KAAK,CAAEkD,KAAM,MAAO0G,OAAQ,KACrC,SACKvF,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBqnB,oB,2CAKV7mB,GACnBlJ,KAAK2K,UAAS,SAAAnH,GACZ,IAAMusB,EAAW,KAAIvsB,EAAMkF,MAAMqnB,UAEjC,OADAA,EAAS3F,OAAOlhB,EAAO,GACvB,SACK1F,GADL,IAEEkF,MAAO,SAAKlF,EAAMkF,OAAb,IAAoBqnB,oB,qDAM0B,QAA3B9nB,OAAUS,EAAiB,EAAjBA,MAAOxI,EAAU,EAAVA,KAC7CF,KAAK2K,UAAS,SAAAnH,GACZ,IAAM0oB,EAAQ,KAAI1oB,EAAMtD,IAExB,GAAIgsB,EAAMzD,SAAS/f,GAAQ,CACzB,IAAMQ,EAAQgjB,EAAM7qB,QAAQqH,GAC5BwjB,EAAM9B,OAAOlhB,EAAO,QAEpBgjB,EAAM/sB,KAAKuJ,GAGb,gBAAYlF,GAAZ,UAAoBtD,EAAOgsB,S,oCAqBjB3kB,GAAG,aACSvH,KAAKV,MAAM8T,MAAM3Q,OAAjCqnB,EADO,EACPA,QAASvpB,EADF,EACEA,GACjBgH,EAAE0G,kBAED1N,EACCP,KAAKowB,YAAY3iB,IAAIlN,EAAIP,KAAKwD,MAAMkF,OACpC1I,KAAKowB,YAAYjlB,KAAKnL,KAAKwD,MAAMkF,QAChC9H,MAAK,kBAAM,EAAKtB,MAAM0nB,QAAQ7nB,KAAnB,oCAAqD2qB,S,+BAwB5D,aACuG9pB,KAAKwD,MAAMkF,MAAjH5F,EADD,EACCA,MAAO5C,EADR,EACQA,KAAM0mB,EADd,EACcA,UAAW9d,EADzB,EACyBA,QAASumB,EADlC,EACkCA,WAAYS,EAD9C,EAC8CA,MAAOP,EADrD,EACqDA,WAAYQ,EADjE,EACiEA,SAAUvB,EAD3E,EAC2EA,SAAUiB,EADrF,EACqFA,OAAQE,EAD7F,EAC6FA,MAD7F,EAEwB3vB,KAAKwD,MAAMkF,MAAMsmB,OAAxCzpB,EAFD,EAECA,MAAOT,EAFR,EAEQA,YAFR,EAGiJ9E,KAAKwD,MAArJ0nB,EAHD,EAGCA,kBAAmBnZ,EAHpB,EAGoBA,mBAAoBie,EAHxC,EAGwCA,iBAAkBle,EAH1D,EAG0DA,aAAcya,EAHxE,EAGwEA,cAAe6C,EAHvF,EAGuFA,eAC1EpvB,KAAKV,MAAM8T,MAAM3Q,OAA7BqnB,QACR,OAAO,0BAAM5hB,UAAU,aAAa8F,SAAUhO,KAAKwlB,eACjD,yBAAKtd,UAAU,OACb,yBAAKA,UAAU,qBACb,2BAAO4F,QAAQ,SAAf,SACA,2BAAOzL,KAAK,OAAO9B,GAAG,QAAQkO,UAAQ,EAACvO,KAAK,QAC1CwI,MAAO5F,EACP8F,SAAU5I,KAAK0lB,mBACfxd,UAAU,kBAGd,yBAAKA,UAAU,qBACb,2BAAO4F,QAAQ,QAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,OAAOkO,UAAQ,EAACvO,KAAK,OACzCwI,MAAOxI,EACP0I,SAAU5I,KAAKkvB,mBACfhnB,UAAU,kBAGd,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,aAAf,QACA,kBAAC,GAAD,CACE8E,mBAAmB,EACnBhK,SAAU5I,KAAK6uB,gBACfnmB,MAAO3D,EAAE8N,OAAOmd,GAAkB,SAAAloB,GAAC,OAAI8e,EAAUvlB,QAAQyG,EAAEY,QAAU,KACrEnH,QAASyuB,EACTld,SAAS,KAGb,yBAAK5K,UAAU,oBACb,2BAAO4F,QAAQ,WAAf,UAEA,kBAAC,GAAD,CACE8E,mBAAmB,EACnBhK,SAAU5I,KAAK0uB,cACfhmB,MAAO3D,EAAE8N,OAAOqY,GAAmB,SAAA0D,GAAC,OAAI9lB,EAAQzH,QAAQutB,EAAElmB,QAAU,KACpEnH,QAAS2pB,EACTpY,SAAS,MAIf,wBAAI5K,UAAU,iCAAd,UAEA,yBAAKA,UAAU,8BACb,yBAAKA,UAAU,iCACb,2BAAO4F,QAAQ,SAAf,SAEA,kBAAC,GAAD,CAAavN,GAAG,QACdqS,mBAAmB,EACnBlK,MAAO3D,EAAE8N,OAAOf,GAAc,SAAAhK,GAAC,OAAIvC,EAAMlE,QAAQyG,EAAEY,QAAU,KAC7DoK,SAAS,EACTlK,SAAU5I,KAAK+uB,YACfxtB,QAASuQ,KAGb,yBAAK5J,UAAU,iCACb,2BAAO4F,QAAQ,eAAf,eACA,kBAAC,GAAD,CAAavN,GAAG,QACdmI,MAAO3D,EAAE8N,OAAOd,GAAoB,SAAAgB,GAAC,OAAIjO,EAAYzD,QAAQ0R,EAAErK,QAAU,KACzEkK,mBAAmB,EACnBE,SAAS,EACTlK,SAAU5I,KAAKivB,iBACf1tB,QAASwQ,MAIf,wBAAI7J,UAAU,iCAAd,SACC4nB,EAAM7oB,KAAI,SAACiD,EAAMhB,GAAP,OAAiB,kBAAC,WAAD,CAAUrC,IAAKqC,GAC9B,IAAVA,GAAe,6BAChB,yBAAKhB,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS,kBAAM,EAAK+mB,kBAAkBxnB,KAAxF,MAIF,kBAAC,GAAD,CAAegB,KAAMA,EACnBqiB,cAAeA,EACfO,oBAAqB5B,EACrBriB,cAAe,SAAAtB,GAAC,OAAI,EAAKipB,kBAAkBjpB,EAAG2B,UAGlD,yBAAKhB,UAAU,WACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKywB,gBAAhE,eAKF,wBAAIvoB,UAAU,iCAAd,iBAEImnB,EAAWltB,QAAUitB,IACvB,yBAAKlnB,UAAU,eACb,4BAAQA,UAAS,cAASknB,EAAiB,cAAgB,IAAM/sB,KAAK,SAASsH,QAAS3J,KAAKmvB,iBAA7F,kBAKHC,EACC,yBAAKlnB,UAAU,cACb,2BAAO7F,KAAK,OAAO9B,GAAG,aAAakO,UAAQ,EAACvO,KAAK,aAC/CwI,MAAO2mB,EACPzmB,SAAU5I,KAAKkvB,mBACfhnB,UAAU,kBAEdmnB,EAAWpoB,KAAI,SAACiD,EAAMhB,GAAP,OAAiB,kBAAC,WAAD,CAAUrC,IAAKqC,GAClC,IAAVA,GAAe,6BAChB,yBAAKhB,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS,kBAAM,EAAK4mB,uBAAuBrnB,KAA7F,MAIF,kBAAC,GAAD,CAAoBgB,KAAMA,EACxBoiB,eAAgBpB,EAChBriB,cAAe,SAAAtB,GAAC,OAAI,EAAK8oB,uBAAuB9oB,EAAG2B,WAIvDkmB,GAAkB,yBAAKlnB,UAAU,WACjC,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKswB,qBAAhE,oBAKF,wBAAIpoB,UAAU,iCAAd,cAECqnB,EAAWtoB,KAAI,SAAC8pB,EAAW7nB,GAAZ,OAAsB,kBAAC,WAAD,CAAUrC,IAAKqC,GACnD,yBAAKhB,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS,kBAAM,EAAKsnB,uBAAuB/nB,KAA7F,MAIS,IAAVA,GAAe,6BAChB,kBAAC,GAAD,CACEgB,KAAM6mB,EACNxD,QAAmB,IAAVrkB,EACTojB,eAAgBpB,EAChBriB,cAAe,SAAAtB,GAAC,OAAI,EAAKopB,uBAAuBppB,EAAG2B,UAIvD,yBAAKhB,UAAU,WACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKsvB,qBAAhE,oBAKF,wBAAIpnB,UAAU,iCAAd,YAEC6nB,EAAS9oB,KAAI,SAACiD,EAAMhB,GAAP,OAAiB,kBAAC,WAAD,CAAUrC,IAAKqC,GACjC,IAAVA,GAAe,6BAChB,yBAAKhB,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS,kBAAM,EAAKmnB,qBAAqB5nB,KAA3F,MAIF,kBAAC,GAAD,CACEgB,KAAMA,EACNoiB,eAAgBpB,EAChBriB,cAAe,SAAAtB,GAAC,OAAI,EAAKqpB,qBAAqBrpB,EAAG2B,UAGrD,yBAAKhB,UAAU,WACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAK6wB,mBAAhE,gBAKF,wBAAI3oB,UAAU,iCAAd,YAEA,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,YAAf,UAEA,kBAAC,GAAD,CACEvN,GAAG,WACHqS,mBAAmB,EACnBhK,SAAU5I,KAAKuuB,cACf7lB,MAAO3D,EAAE8N,OAAOqY,GAAmB,SAAAgG,GAAC,OAAI1C,EAASntB,QAAQ6vB,EAAExoB,QAAU,KACrEnH,QAAS2pB,EACTpY,SAAS,KAGb,wBAAI5K,UAAU,iCAAd,uBAEA,yBAAKA,UAAU,WACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SACvCsH,QAAS,kBAAM,EAAKgB,SAAS,CAAEjC,MAAO,SAAK,EAAKlF,MAAMkF,OAAlB,IAAyBinB,MAAO,yBADtE,cAODA,GAAS,yBAAKznB,UAAU,gBACvB,4BAAQA,UAAU,kBAAkB7F,KAAK,SACvCsH,QAAS,kBAAM,EAAKgB,SAAS,CAAEjC,MAAO,SAAK,EAAKlF,MAAMkF,OAAlB,IAAyB+mB,OAAQ,8CADvE,eAOF,yBAAKvnB,UAAU,OACZunB,GAAU,yBAAKvnB,UAAU,qBACxB,yBAAKA,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKwvB,qBAAhE,MAIF,2BAAO1hB,QAAQ,UAAf,UAQA,2BAAOzL,KAAK,OAAO9B,GAAG,SAASkO,UAAQ,EAACvO,KAAK,SAC3CwI,MAAO+mB,EAEP7mB,SAAU5I,KAAKkvB,mBACfhnB,UAAU,kBAGbynB,GAAS,yBAAKznB,UAAU,qBACvB,yBAAKA,UAAU,cACb,4BAAQA,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAK0vB,oBAAhE,MAIF,2BAAO5hB,QAAQ,SAAf,SAQA,2BAAOzL,KAAK,OAAO9B,GAAG,QAAQkO,UAAQ,EAACvO,KAAK,QAC1CwI,MAAOinB,EAEP/mB,SAAU5I,KAAKkvB,mBACfhnB,UAAU,mBAIhB,yBAAKA,UAAU,gCACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,QACA,kBAAC,IAAD,CAAM6F,UAAU,MAAMqB,GAAG,wBAAzB,gB,GAjsBqBlB,aAusBd4K,gBAAWqb,I,6aC/sBpB6C,G,sIAEF,OAAO,yBAAKjpB,UAAU,cACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,SAGJ,yBAAKE,UAAU,iBACb,kBAAC,GAAD,Y,GATiBG,aAeV4K,gBAAWke,I,k/BCZpBC,G,mCACJ,WAAY9xB,GAAO,mBACjB,cAAMA,IAqBR+xB,kBAAoB,WAClB,IAAIC,EAAahtB,IAAMqb,WACvB,EAAKhV,UAAS,SAAAnH,GAAK,gBACZA,GADY,IAEjBH,UAAWiuB,EAAWltB,iBAAiBf,gBA1BxB,EAuEnB2K,SAvEmB,+BAuER,WAAMzG,GAAN,iBAAAZ,EAAA,yDACFpG,EAAM,EAAKjB,MAAM8T,MAAM3Q,OAAvBlC,GACPgH,EAAE0G,iBAEG,EAAKzK,MAAMkF,MAAM6oB,IAJb,yCAKAljB,MAAM,wBALN,WAON9N,EAPM,iCAQK,EAAKixB,kBAAkB/jB,IAAIlN,EAAI,EAAKiD,MAAMkF,OAR/C,OAQP7H,EARO,gDAUK,EAAK2wB,kBAAkBrmB,KAAK,EAAK3H,MAAMkF,OAV5C,QAUP7H,EAVO,eAYNA,EAAIoC,QACL,EAAK3D,MAAM0nB,QAAQ7nB,KAAK,6BAExBkP,MAAMxN,EAAIyN,SAfH,4CAvEQ,sDAEjB,IAAIgjB,EAAahtB,IAAMqb,WAFN,OAGjB,EAAKnc,MAAQ,CACX+mB,WAAY,cACZ7hB,MAAO,CACL+oB,OAAO,EACPC,WAAW,EACXC,MAAM,GAERhH,cAAe,GACftnB,UAAWiuB,EAAWltB,iBAAiBf,WAEzC,EAAKmuB,kBAAoB,IAAInxB,IAAS,CAACC,MAAO,4BAC9C,EAAKukB,eAAiB,IAAIxkB,IAAS,CAAEC,MAAO,8BAE5CgE,IAAMob,UAAU,EAAK2R,mBAhBJ,E,+JAkCV9wB,EAAMP,KAAKV,MAAM8T,MAAM3Q,OAAvBlC,G,SACiBP,KAAK6kB,eAAena,S,mBAC5CnJ,GADMA,E,EAAAA,SACYsR,QAAO,SAAAqN,GAAM,MAAoB,SAAjBA,EAAO9J,SACzCpW,KAAK2K,SAAS,CAAEggB,cAAeppB,KAC5BhB,E,kCACiBP,KAAKwxB,kBAAkBpxB,IAAIG,G,QAAzCmI,E,OACJ1I,KAAK4xB,OAAS,KACd5xB,KAAK2K,UAAS,SAAAnH,GAAK,gBACZA,GADY,IAEjBkF,a,gIAUMA,EAAO2J,GACjBrS,KAAK2K,UAAS,SAAAnH,GAUZ,OATAA,EAAQ,MAAKA,IAELkF,MAAM2J,GADD,SAAVA,EACoBjH,GAAY1C,GAEZA,EAEV,UAAV2J,IACD7O,EAAMkF,MAAMxI,KAAOkL,GAAY1C,IAE1BlF,O,+BA0BF,WACAjD,EAAMP,KAAKV,MAAM8T,MAAM3Q,OAAvBlC,GAEP,OADA+B,QAAQC,IAAIvC,KAAKwD,MAAMkF,MAAM6oB,KACtB,yBAAKrpB,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,6BAA7C,oBACA,0BAAMrB,UAAU,gCAAhB,KAEA,0BAAMA,UAAU,8BAAhB,mBAGJ,yBAAKA,UAAU,iBACb,0BAAMA,UAAU,wBAAwB8F,SAAUhO,KAAKgO,UACrD,yBAAK9F,UAAU,OACb,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,eAAf,SACA,2BAAOzL,KAAK,OAAO9B,GAAG,cAAckO,UAAQ,EACrC/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,OAAS,GACjC8F,SAAU,SAAArB,GACR,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UAEnCR,UAAU,kBAEnB,yBAAKA,UAAU,oBACb,2BAAO4F,QAAQ,cAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAakO,UAAQ,EAAC4b,SAAU9pB,EAC/CmI,MAAO1I,KAAKwD,MAAMkF,MAAMxI,MAAQ,GAChC0I,SAAU,SAAArB,GACR,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SAEnCR,UAAU,kBAEnB,yBAAKA,UAAU,qBACb,2BAAO4F,QAAQ,cAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,oBACfmI,MAAO1I,KAAKwD,MAAMkF,MAAMsd,aAAe,GACvCpd,SAAU,SAAArB,GACR,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBAEnCR,UAAU,kBASnB,yBAAKA,UAAU,qBACb,2BAAO4F,QAAQ,qBAAf,SACA,4BAAQvN,GAAG,oBAAoBkO,UAAQ,EAACvB,SAAU3M,EAC1CmI,MAAO1I,KAAKwD,MAAMkF,MAAMkY,UAAY,GACpChY,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,aAClDR,UAAU,gBAEhB,4BAAQgF,UAAQ,EAACxE,MAAM,KACtB1I,KAAKwD,MAAMmnB,cAAc1jB,KAAI,gBAAGyB,EAAH,EAAGA,MAAO0N,EAAV,EAAUA,MAAV,OAC1B,4BAAQvP,IAAK6B,EAAOA,MAAOA,GACxB0N,QAIX,yBAAKlO,UAAU,qBACb,2BAAO7F,KAAK,WAAW9B,GAAG,aACnBua,QAAS9a,KAAKwD,MAAMkF,MAAMipB,KAAMjpB,MAAO1I,KAAKwD,MAAMkF,MAAMipB,KACxD/oB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,WAE3D,2BAAO5S,UAAU,iBAAiB4F,QAAQ,cAA1C,SAEF,yBAAK5F,UAAU,qBACb,2BAAO7F,KAAK,WAAW9B,GAAG,kBACnBua,QAAS9a,KAAKwD,MAAMkF,MAAMgpB,UAAWhpB,MAAO1I,KAAKwD,MAAMkF,MAAMgpB,UAC7D9oB,SAAU,SAAArB,GAAO,EAAK4F,YAAY5F,EAAEU,OAAO6S,QAAS,gBAE3D,2BAAO5S,UAAU,iBAAiB4F,QAAQ,mBAA1C,cAEA9N,KAAKwD,MAAMkF,MAAMipB,KAAY,oCAAE,yBAAKzpB,UAAU,oBAC9C,2BAAO4F,QAAQ,eAAf,SACA,kBAAC,GAAD,CAAavN,GAAG,cACHuS,SAAS,EACTxC,aAAa,2BACbX,YAAY,MACZkR,eAAgB,CACd,CACEnY,MAAO,KACP0N,MAAO,QAGX1N,MAAO1I,KAAKwD,MAAMkF,MAAMnD,MACxBqD,SAAU,SAAAF,GAAU,EAAKyE,YAAYzE,EAAO,aAG3D,yBAAKR,UAAU,oBACb,2BAAO4F,QAAQ,qBAAf,eACA,kBAAC,GAAD,CAAavN,GAAG,oBACHuS,SAAS,EACTxC,aAAa,kCACbX,YAAY,MACZkR,eAAgB,CACd,CACEnY,MAAO,KACP0N,MAAO,QAGX1N,MAAO1I,KAAKwD,MAAMkF,MAAM5D,YACxB8D,SAAU,SAAAF,GAAU,EAAKyE,YAAYzE,EAAO,oBA7BjC,GAgC1B,yBAAKR,UAAU,qBACb,2BAAO4F,QAAQ,cAAf,aACC9N,KAAKwD,MAAMH,YAAcrD,KAAK4xB,OAAU5xB,KAAK4xB,QAAU,uBAAMpuB,MAAMH,UAAZ,CACpDwuB,KAAK,MACLC,MAAM,WACNlpB,SAAU,SAAAF,GACR,EAAKyE,YAAYzE,EAAO,QAE1BR,UAAU,YACVhI,KAAK,YACLV,OAAO,OACPuyB,WAAY,CACVrpB,MAAO1I,KAAKwD,MAAMkF,MAAM6oB,KAAO,IAEjCS,iBAAiB,EACjBld,MAAO,CACLvV,MAAO,QAET0yB,0BAA0B,OAGlC,yBAAK/pB,UAAU,wBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAM6F,UAAU,MAAMqB,GAAE,6BAAxB,kB,GA/NYlB,aA0OT4K,gBAAWme,I,8+BCxO1B,IAAMtoB,GAAU,CACd,CACE5I,KAAM,OACN4C,MAAO,OACPtC,KAAK,EACL6I,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,eACN4C,MAAO,gBAET,CACE5C,KAAM,cACN4C,MAAO,gBAILovB,GAAgB,IAAI7xB,IAAS,CAAEC,MAAO,sBACtC6xB,GAAsB,IAAI9xB,IAAS,CAAEC,MAAO,4BAE5C8xB,G,mLACJ5uB,MAAQ,CACN+B,MAAO,GACPT,YAAa,I,EAKfutB,S,cAAW,4BAAA1rB,EAAA,sEACWurB,GAAcxnB,SADzB,OACHnF,EADG,OAET,EAAKoF,SAAS,CAAEpF,UAFP,2C,EAOX+sB,e,cAAiB,4BAAA3rB,EAAA,sEACWwrB,GAAoBznB,SAD/B,OACT5F,EADS,OAEf,EAAK6F,SAAS,CAAE7F,gBAFD,2C,0DAUf9E,KAAKqyB,WACLryB,KAAKsyB,mB,+BAGE,aACwBtyB,KAAKwD,MAA5B+B,EADD,EACCA,MAAOT,EADR,EACQA,YACTiK,EAA6C,wBAAjC/O,KAAKV,MAAMwL,SAAStB,SAAqC,EAAI,EAE/E,OAAO,yBAAKtB,UAAU,6BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,UACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BACC,IAAd6G,EAAkB,YAAc,oBAGrC,kBAAC,IAAD,CAAM7G,UAAU,MAAMqB,GAAE,wBAAiC,IAAdwF,EAAkB,QAAU,cAA/C,SAAxB,YAIF,yBAAK7G,UAAU,iBACb,kBAAC,IAAD,CAAM+G,cAAeF,EAAWG,SAAU,cACxC,kBAAC,IAAD,CAAShH,UAAU,6BACjB,kBAAC,IAAD,CAAMqB,GAAG,uBAAsB,kBAAC,IAAD,eAC/B,kBAAC,IAAD,CAAMA,GAAG,6BAA4B,kBAAC,IAAD,sBAEvC,kBAAC,IAAD,KACE,kBAAC,EAAD,CACET,QAASA,GACTkB,aAAc,CACZ,CACEb,IAAK,OACL7J,MAAO,CAAE0I,KAAM,gCACflF,MAAO,QAET,CACEqG,IAAK,SACL7I,MAAO,wBACPI,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAK8nB,YAClBnqB,UAAW,iCACXpF,MAAO,UAGXkG,KAAMzD,EAAM0B,KAAI,SAAAvB,GAAI,gBACfA,GADe,IAElB2D,QAAS,4BAA8B3D,EAAKnF,WAIlD,kBAAC,IAAD,KACE,kBAAC,EAAD,CACEuI,QAASA,GACTkB,aAAc,CACZ,CACEb,IAAK,OACL7J,MAAO,CAAE0I,KAAM,sCACflF,MAAO,QAET,CACEqG,IAAK,SACL7I,MAAO,8BACPI,OAAQ,SACR0J,QAAS,gBACTG,MAAO,kBAAM,EAAK+nB,kBAClBpqB,UAAW,iCACXpF,MAAO,UAGXkG,KAAMlE,EAAYmC,KAAI,SAAA7B,GAAU,gBAC3BA,GAD2B,IAE9BiE,QAAS,kCAAoCjE,EAAW7E,kB,GAlG5C8H,aA4Gb4K,gBAAWmf,I,yaCtI1B,IAAMF,GAAgB,IAAI7xB,IAAS,CAAEC,MAAO,sBAEtCiyB,G,qLACJ/uB,MAAQ,CACNtD,KAAM,GACNsyB,aAAc,GACdxM,YAAa,I,EAWfnd,cAAgB,YAAiC,QAA9BZ,OAAUS,EAAoB,EAApBA,MAAOxI,EAAa,EAAbA,KAClC,EAAKyK,SAAL,OAAiBzK,EAAOwI,K,EAG1B+c,cAAgB,WAAM,IACZllB,EAAO,EAAKjB,MAAM8T,MAAM3Q,OAAxBlC,GACR2xB,GAAa,OAAQ3xB,GAClBK,MAAK,kBAAM,EAAKtB,MAAM0nB,QAAQ7nB,KAAK,2B,EAGxCqmB,cAAgB,SAAAje,GAAK,IACXhH,EAAO,EAAKjB,MAAM8T,MAAM3Q,OAAxBlC,GACRgH,EAAE0G,kBACD1N,EAAK2xB,GAAczkB,IAAIlN,EAAI,EAAKiD,OAAS0uB,GAAc/mB,KAAK,EAAK3H,QAC/D5C,MAAK,kBAAM,EAAKtB,MAAM0nB,QAAQ7nB,KAAK,2B,iKArB9BoB,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,I,gCAE4C2xB,GAAc9xB,IAAIG,G,gBAA5DL,E,EAAAA,KAAMsyB,E,EAAAA,aAAcxM,E,EAAAA,YAC5BhmB,KAAK2K,SAAS,CAAEzK,OAAMsyB,eAAcxM,gB,4HAqB/B,MACqChmB,KAAKwD,MAAzCtD,EADD,EACCA,KAAMsyB,EADP,EACOA,aAAcxM,EADrB,EACqBA,YACtByM,EAAYC,QAAQ1yB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,IAElD,OAAO,0BAAM2H,UAAU,aAAa8F,SAAUhO,KAAKwlB,eACjD,yBAAKtd,UAAU,cACb,2BAAO4F,QAAQ,QAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,OAAOkO,UAAQ,EAACvO,KAAK,OACzCwI,MAAOxI,EACP0I,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,gBAAf,gBACA,2BAAOzL,KAAK,OAAO9B,GAAG,eAAeL,KAAK,eACxCwI,MAAO8pB,EACP5pB,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,eAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,cAAckO,UAAQ,EAACvO,KAAK,cAChDwI,MAAOsd,EACPpd,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,gBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAMkH,GAAG,uBAAsB,4BAAQrB,UAAU,OAAlB,WAC9BuqB,GAAa,4BAAQvqB,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKylB,eAAhE,gB,GAnECpd,aA2ER4K,gBAAWsf,I,6aC7EpBI,G,sIAEF,IAAMF,EAAYC,QAAQ1yB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,IAElD,OAAO,yBAAK2H,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,sBACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BACbuqB,EAAY,YAAc,kBAIjC,yBAAKvqB,UAAU,iBACb,kBAAC,GAAD,Y,GAfeG,aAqBR4K,gBAAW0f,I,yaCrB1B,IAAMR,GAAsB,IAAI9xB,IAAS,CAAEC,MAAO,4BAE5CsyB,G,qLACJpvB,MAAQ,CACNtD,KAAM,GACNsyB,aAAc,GACdxM,YAAa,I,EAWfnd,cAAgB,YAAiC,QAA9BZ,OAAUS,EAAoB,EAApBA,MAAOxI,EAAa,EAAbA,KAClC,EAAKyK,SAAL,OAAiBzK,EAAOwI,K,EAG1B+c,cAAgB,WAAM,IACZllB,EAAO,EAAKjB,MAAM8T,MAAM3Q,OAAxBlC,GACR4xB,GAAmB,OAAQ5xB,GACxBK,MAAK,kBAAM,EAAKtB,MAAM0nB,QAAQ7nB,KAAK,iC,EAGxCqmB,cAAgB,SAAAje,GAAK,IACXhH,EAAO,EAAKjB,MAAM8T,MAAM3Q,OAAxBlC,GACRgH,EAAE0G,kBACD1N,EAAK4xB,GAAoB1kB,IAAIlN,EAAI,EAAKiD,OAAS2uB,GAAoBhnB,KAAK,EAAK3H,QAC3E5C,MAAK,kBAAM,EAAKtB,MAAM0nB,QAAQ7nB,KAAK,iC,iKArB9BoB,EAAOP,KAAKV,MAAM8T,MAAM3Q,OAAxBlC,I,gCAE4C4xB,GAAoB/xB,IAAIG,G,gBAAlEL,E,EAAAA,KAAMsyB,E,EAAAA,aAAcxM,E,EAAAA,YAC5BhmB,KAAK2K,SAAS,CAAEzK,OAAMsyB,eAAcxM,gB,4HAqB/B,MACqChmB,KAAKwD,MAAzCtD,EADD,EACCA,KAAMsyB,EADP,EACOA,aAAcxM,EADrB,EACqBA,YACtByM,EAAYC,QAAQ1yB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,IAElD,OAAO,0BAAM2H,UAAU,aAAa8F,SAAUhO,KAAKwlB,eACjD,yBAAKtd,UAAU,cACb,2BAAO4F,QAAQ,QAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,OAAOkO,UAAQ,EAACvO,KAAK,OACzCwI,MAAOxI,EACP0I,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,gBAAf,gBACA,2BAAOzL,KAAK,OAAO9B,GAAG,eAAeL,KAAK,eACxCwI,MAAO8pB,EACP5pB,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,cACb,2BAAO4F,QAAQ,eAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,cAAckO,UAAQ,EAACvO,KAAK,cAChDwI,MAAOsd,EACPpd,SAAU5I,KAAK6I,cACfX,UAAU,kBAId,yBAAKA,UAAU,gBACb,4BAAQA,UAAU,kBAAkB7F,KAAK,UAAzC,OACA,kBAAC,IAAD,CAAMkH,GAAG,6BAA4B,4BAAQrB,UAAU,OAAlB,WACpCuqB,GAAa,4BAAQvqB,UAAU,kBAAkB7F,KAAK,SAASsH,QAAS3J,KAAKylB,eAAhE,gB,GAnEOpd,aA2Ed4K,gBAAW2f,I,6aC7EpBC,G,sIAEF,IAAMJ,EAAYC,QAAQ1yB,KAAKV,MAAM8T,MAAM3Q,OAAOlC,IAElD,OAAO,yBAAK2H,UAAU,0BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,4BACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BACbuqB,EAAY,kBAAoB,wBAIvC,yBAAKvqB,UAAU,iBACb,kBAAC,GAAD,Y,GAfqBG,aAqBd4K,gBAAW4f,I,k/BCkEXC,G,qCAhFX,WAAYxzB,GAAO,0BACf,cAAMA,IACDkE,MAAQ,CACTkF,MAAO,GACPgJ,OAAQ,GACRC,mBAAmB,GAEvB,EAAKtH,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBACrC,EAAKyyB,UAAY,EAAKA,UAAUxmB,KAAf,QARF,E,yJAWXhM,EAAKP,KAAKV,MAAMiB,I,gCAGKP,KAAKqK,SAASjK,IAAIG,G,OAAnCmgB,E,OACJ1gB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBkF,MAAMgY,EAAUngB,GAAIA,O,gJAIjCgH,G,0EACZA,EAAE0G,kBAGCjO,KAAKwD,MAAMjD,G,gCACEP,KAAKqK,SAASoD,IAAIzN,KAAKwD,MAAMjD,GAAIP,KAAKwD,MAAMkF,O,OAAxD7H,E,8CAEYb,KAAKqK,SAASc,KAAKnL,KAAKwD,MAAMkF,O,OAA1C7H,E,eAGDA,EACCb,KAAK2K,UAAS,SAAAnH,GACV,gBAAWA,GAAX,IAAkBmO,mBAAmB,OAGzC3R,KAAK2K,UAAS,SAAAnH,GACV,gBAAWA,GAAX,IAAkBkF,MAAO,Q,iIAIzBA,EAAO2J,GACfrS,KAAK2K,UAAS,SAAAnH,GAGV,OAFAA,EAAQ,MAAIA,IACNkF,MAAM2J,GAAS3J,EACdlF,O,+BAGN,WACL,OAAGxD,KAAKwD,MAAMmO,kBACH,kBAAC,KAAD,CAAUpI,GAAIvJ,KAAKV,MAAMgT,eAE7B,0BAAMpK,UAAU,aAAa8F,SAAUhO,KAAK+yB,WAG/C,yBAAK7qB,UAAU,cACX,2BAAO4F,QAAQ,aAAf,QACA,2BAAOzL,KAAK,OAAO9B,GAAG,YAAYkO,SAAU,EACxC/F,MAAO1I,KAAKwD,MAAMkF,MAAMxI,MAAQ,GAChC0I,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,SACjDR,UAAU,kBAElB,yBAAKA,UAAU,cACX,2BAAO4F,QAAQ,cAAf,SACA,2BAAOzL,KAAK,OAAO9B,GAAG,aAAakO,SAAU,EACzC/F,MAAO1I,KAAKwD,MAAMkF,MAAM5F,OAAS,GACjC8F,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,UACjDR,UAAU,kBAElB,yBAAKA,UAAU,cACX,2BAAO4F,QAAQ,oBAAf,eACA,2BAAOzL,KAAK,OAAO9B,GAAG,mBAAmBkO,SAAU,EAC/C/F,MAAO1I,KAAKwD,MAAMkF,MAAMsd,aAAe,GACvCpd,SAAU,SAAArB,GAAM,EAAK4F,YAAY5F,EAAEU,OAAOS,MAAO,gBACjDR,UAAU,kBAElB,4BAAQA,UAAU,mBAAmBlI,KAAKwD,MAAMjD,GAAK,OAAS,Y,GA5ElD8H,a,6aCAlB2qB,G,mCACF,WAAY1zB,GAAO,0BACf,cAAMA,IACDkE,MAAQ,CACT8O,aAAc,iBAHH,E,kJAOX/R,EAAKP,KAAKV,MAAM8T,MAAM3Q,OAAOlC,GAEjCP,KAAK2K,UAAS,SAACnH,GAAD,MAAY,CACtByiB,SAAU1lB,M,4HAKd,OAAO,yBAAK2H,UAAU,0BAClB,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,UACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,mBAGR,yBAAKA,UAAU,iBACX,kBAAC,GAAD,CAAW3H,GAAIP,KAAKwD,MAAMyiB,SAAU3T,aAActS,KAAKwD,MAAM8O,qB,GAzBtDjK,aA+BR4K,gBAAW+f,I,6aC/BpBC,G,iCACF,WAAY3zB,GAAO,0BACf,cAAMA,IACDkE,MAAQ,CACT8O,aAAc,gBACd2T,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC2yB,YAAa,sBAAsB,EAAK5zB,MAAM8T,MAAM3Q,OAAOlC,GAAG,YAElE,EAAK8J,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBAPtB,E,6CAUf,OAAGN,KAAKwD,MAAMmO,kBACH,kBAAC,KAAD,CAAUpI,GAAG,kBAEjB,yBAAKrB,UAAU,0BAClB,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,UACA,0BAAMrB,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,gBAGR,yBAAKA,UAAU,iBACX,kBAAC,GAAD,CAAW3H,GAAIP,KAAKwD,MAAMyiB,SAAU3T,aAActS,KAAKwD,MAAM8O,eAC7D,6BACI,kBAAC,IAAD,CAAM/I,GAAKvJ,KAAKwD,MAAM0vB,aAAtB,mB,GAzBI7qB,aAiCT4K,gBAAWggB,I,sgCC3BpBE,G,mCACF,WAAY7zB,GAAM,0BACd,cAAMA,IACDkE,MAAQ,CACTyiB,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC6yB,WAAY,GACZC,MAAO,GACPC,cAAe,CACX,CAACpzB,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,SAAS4C,MAAO,UACvB,CAAC5C,KAAM,aAAa4C,MAAO,gBAInC,EAAKywB,oBAAsB,IAAIlzB,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,gBACjG,EAAKizB,eAAiB,IAAInzB,IAAS,CAACC,MAAO,uBAd7B,E,oKAiBEN,KAAKuzB,oBAAoB7oB,S,cAArC7J,E,OACJb,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB4vB,WAAWvyB,O,SAGVb,KAAKwzB,eAAepzB,IAAIJ,KAAKwD,MAAMyiB,U,OAArDwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,4HAK3B,OAAO,6BACL,kBAAC,EAAD,CAAY3qB,QAAS9I,KAAKwD,MAAM8vB,cAAetqB,KAAMhJ,KAAKwD,MAAM4vB,kB,GA/B5C/qB,aAqCf4K,gBAAWkgB,I,k/BCzCpBO,G,qCACF,WAAYp0B,GAAM,mBACd,cAAMA,IAKDq0B,mBAAqB,CACtB,CAACpzB,GAAI,UAAUL,KAAM,WACrB,CAACK,GAAI,SAASL,KAAM,UACpB,CAACK,GAAI,YAAYL,KAAM,aACvB,CAACK,GAAI,gBAAgBL,KAAM,iBAC3B,CAACK,GAAI,gBAAgBL,KAAM,iBAC3B,CAACK,GAAI,iBAAiBL,KAAM,kBAC5B,CAACK,GAAI,UAAUL,KAAM,WACrB,CAACK,GAAI,WAAWL,KAAM,YACtB,CAACK,GAAI,YAAYL,KAAM,aACvB,CAACK,GAAI,cAAcL,KAAM,eACzB,CAACK,GAAI,gBAAgBL,KAAM,kBAM/B,EAAKozB,cAAgB,CACjB,CAACpzB,KAAM,KAAK4C,MAAO,MACnB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,cAAc4C,MAAO,eAC5B,CAAC5C,KAAM,cAAc4C,MAAO,eAC5B,CAAC5C,KAAM,YAAY4C,MAAO,aAC1B,CACI5C,KAAM,OACN4C,MAAO,OACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKmX,aAAarnB,KAAlB,QAA6BzJ,MAAO,SAErE,CACI5C,KAAM,SACN4C,MAAO,SACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKoX,cAActnB,KAAnB,QAA8BzJ,MAAO,YAQ1E,IAAMgxB,EAAuB,CACzBvzB,GAAI,GACJL,KAAM,GACN4C,MAAO,GACPT,KAAM,UACN0xB,YAAa,GACbhJ,YAAa,GACbD,UAAW,IAMf,EAAKkJ,wBAA0B,CAC3B,CAAC9zB,KAAM,KAAK4C,MAAO,MACnB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,UAAU4C,MAAO,WACxB,CAAC5C,KAAM,SAAS4C,MAAO,UACvB,CACI5C,KAAM,OACN4C,MAAO,OACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKwX,qBAAqB1nB,KAA1B,QAAqCzJ,MAAO,SAE7E,CACI5C,KAAM,SACN4C,MAAO,SACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKyX,sBAAsB3nB,KAA3B,QAAsCzJ,MAAO,YAQlF,IAAMqxB,EAAmB,CACrB5zB,GAAI,GACJL,KAAM,GACNk0B,QAAS,GACTpO,YAAa,IAxFH,OA2Fd,EAAKxiB,MAAQ,CACT6wB,cAAc,EACdpO,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC8yB,MAAO,GACPiB,eAAgB,GAChBC,iBAAkB,GAClBC,UAAW,GACXz0B,KAAM,CACFimB,YAAa,GACbyO,cAAe,GACfD,UAAW,GACXvO,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClCogB,KAAM,GACNzgB,KAAM,GACNw0B,cAAe,GACfC,GAAI,GACJvO,aAAa,EACbD,cAAc,GAElByO,UAAW,GACXd,qBAAsBA,EACtBe,sBAAuB,KACvBC,aAAchB,EACdK,iBAAkBA,EAClBY,kBAAmB,KACnBC,SAAUb,GAKd,EAAK9pB,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBACrC,EAAK+f,eAAiB,IAAIhgB,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,WAC5F,EAAK00B,oBAAsB,IAAI50B,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,YACjG,EAAK20B,oBAAqB,EAE1B,EAAKC,kBAAoB,EAAKA,kBAAkB5oB,KAAvB,QACzB,EAAK6oB,qBAAuB,EAAKA,qBAAqB7oB,KAA1B,QAC5B,EAAK8oB,kBAAoB,EAAKA,kBAAkB9oB,KAAvB,QACzB,EAAK+oB,qBAAuB,EAAKA,qBAAqB/oB,KAA1B,QAC5B,EAAK3D,SAAW,EAAKA,SAAS2D,KAAd,QAChB,EAAKgpB,qBAAuB,EAAKA,qBAAqBhpB,KAA1B,QAC5B,EAAKipB,UAAY,EAAKA,UAAUjpB,KAAf,QAEjB,EAAKkpB,gBAAkB,EAAKA,gBAAgBlpB,KAArB,QACvB,EAAKqnB,aAAe,EAAKA,aAAarnB,KAAlB,QACpB,EAAK5H,YAAc,EAAKA,YAAY4H,KAAjB,QACnB,EAAKmpB,gBAAkB,EAAKA,gBAAgBnpB,KAArB,QACvB,EAAKsnB,cAAgB,EAAKA,cAActnB,KAAnB,QAErB,EAAK0nB,qBAAuB,EAAKA,qBAAqB1nB,KAA1B,QAC5B,EAAK2nB,sBAAwB,EAAKA,sBAAsB3nB,KAA3B,QA7If,E,0KAkJQvM,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,U,cAA/CwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,SAGHzzB,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,SAAS,Y,cAA1D0P,E,OACJ31B,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB8wB,eAAgBqB,EAAapB,iBAAkBoB,EAAanB,UAAWmB,O,UAGrE31B,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,SAAS,U,aAAzD2P,E,gCAMI1vB,EAAQ,CACR8f,YAAa4P,EAAW5P,YACxByO,cAAez0B,KAAK61B,QAAQD,EAAWnB,eACvCD,UAAWx0B,KAAK61B,QAAQD,EAAWpB,WACnCvO,SAAU2P,EAAW3P,SACrBtF,KAA0B,OAApBiV,EAAWjV,KAAgBiV,EAAWjV,KAAO,GACnDzgB,KAAM01B,EAAW11B,KACjBw0B,cAAekB,EAAWvC,MAAMqB,cAChCC,GAAIiB,EAAWjB,GACfvO,YAAawP,EAAWxP,YACxBD,aAAcyP,EAAWzP,cAG7BnmB,KAAKk1B,mBAAqB,IAAI70B,IAAS,CAACC,MAAO,sBAAsBN,KAAKV,MAAM8T,MAAM3Q,OAAOlC,GAAG,WAAWq1B,EAAWr1B,GAAG,e,UAC9FP,KAAKk1B,mBAAmBxqB,S,QAA/CorB,E,OAEJ91B,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBzD,KAAMmG,EAAO6vB,WAAYD,OAC3C,e,4HAcHptB,GAEJ,IAAIstB,EAAO,GAEX,OAAIttB,EAEQ,MAATA,GAA0B,IAATA,EAAoBstB,GAGxCttB,EAAMyB,QAAQ,KAAK,IACZzB,EAAM4C,MAAM,MAND0qB,I,wCASJzuB,GAEd,IAAImB,EAAQnB,EAAEU,OAAOS,MAIrB,IAAkB,IAFF1I,KAAKwD,MAAMzD,KAAK00B,cAAcpzB,QAAQqH,GAIlD,OADA2F,MAAM,wCACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB00B,cAAenuB,KAAO9C,EAAMzD,KAAK00B,cAAe,CAACwB,MAAO,CAACvtB,YACrG,iB,2CAIcnB,EAAGmB,GACpBnB,EAAE0G,iBAEF,IAAIgO,EAAYjc,KAAKwD,MAAMzD,KAAK00B,cAAcpzB,QAAQqH,GAEtD,IAAkB,IAAfuT,EAEC,OADA5N,MAAM,2BACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB00B,cAAenuB,KAAO9C,EAAMzD,KAAK00B,cAAe,CAACyB,QAAS,CAAC,CAACja,EAAW,aACnH,iB,wCAKW1U,GAEd,IAAImB,EAAQnB,EAAEU,OAAOS,MAIrB,IAAkB,IAFF1I,KAAKwD,MAAMzD,KAAKy0B,UAAUnzB,QAAQqH,GAI9C,OADA2F,MAAM,wCACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoBy0B,UAAWluB,KAAO9C,EAAMzD,KAAKy0B,UAAW,CAACyB,MAAO,CAACvtB,YAC7F,iB,2CAIcnB,EAAGmB,GACpBnB,EAAE0G,iBAEF,IAAIgO,EAAYjc,KAAKwD,MAAMzD,KAAKy0B,UAAUnzB,QAAQqH,GAElD,IAAkB,IAAfuT,EAEC,OADA5N,MAAM,2BACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoBy0B,UAAWluB,KAAO9C,EAAMzD,KAAKy0B,UAAW,CAAC0B,QAAS,CAAC,CAACja,EAAW,aAC3G,iB,+BAKE1U,GACL,IAAI4uB,EAAa5uB,EAAEU,OAAO/H,KACtBwI,EAA0B,aAAlBnB,EAAEU,OAAO5F,KAAsBkF,EAAEU,OAAO6S,QAAUvT,EAAEU,OAAOS,MAEvE1I,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BzD,KAAI,SAAKC,KAAKwD,MAAMzD,MAAhB,UAAuBo2B,EAAaztB,S,2CAEtDnB,GACjB,IAAI4uB,EAAa5uB,EAAEU,OAAO/H,KAC1BF,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BsxB,aAAY,SAAK90B,KAAKwD,MAAMsxB,cAAhB,UAA+BqB,EAAa5uB,EAAEU,OAAOS,a,mDAGpFnB,G,0EACZA,EAAE0G,iBAEyB,IAAxBjO,KAAKwD,MAAMzD,KAAKG,K,uBACfmO,MAAM,qB,gCAII,CACV,eAAgB,qBAGhBtO,E,MAAWC,KAAKwD,MAAMzD,OAGrBuB,OAASA,OAGdgB,QAAQC,IAAIvC,KAAKwD,MAAMzD,MAOb0B,KAAKC,UAAU3B,G,UAMbC,KAAKi1B,oBAAoB9pB,KAAKpL,G,eAGtCsO,MAAM,WAGNA,MAAM,S,qIAIE9G,GAAG,WACfA,EAAE0G,iBAEF,IAAImH,EAAM,MAAIpV,KAAKwD,MAAMsxB,cAEZ,IAAV1f,EAAI7U,KACH6U,EAAI7U,IAAK,IAAI6W,MAAOgf,WAGxBp2B,KAAK2K,UAAS,SAACnH,GACX,OAAkC,MAA/BA,EAAMqxB,sBACL,SAAYrxB,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB20B,cAAepuB,KAAO9C,EAAMzD,KAAK20B,cAAe,CAACuB,MAAO,CAAC7gB,SAGpG,SAAY5R,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB20B,cAAepuB,KAAO9C,EAAMzD,KAAK20B,cAAZ,OAA6BlxB,EAAMqxB,sBAAwB,CAACwB,KAAMjhB,YAEvI,WACC,EAAKzQ,mB,wCAIT,IAAIob,EAAe,cAInB,OAHI/f,KAAKwD,MAAM6wB,eACbtU,GAAgB,uBAEXA,I,oCAGP/f,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmB6wB,cAAe7wB,EAAM6wB,oB,mCAGnC9sB,GAAG,WACZjF,QAAQC,IAAIgF,GACZ,IAAI0U,EAAYjc,KAAKwD,MAAMzD,KAAK20B,cAAcrzB,QAAQkG,GACtDvH,KAAK2K,UAAS,SAACnH,GACX,OACI,SAAYA,GAAZ,IADc,IAAfyY,EACC,CAAmB4Y,sBAAuB,KAAMC,aAActxB,EAAMswB,sBAGpE,CAAmBe,sBAAuB5Y,EAAW6Y,aAActxB,EAAMzD,KAAK20B,cAAczY,QAGjG,WACC,EAAKtX,mB,oCAGC4C,GAAE,WAGZ,GAFa6C,QAAQ,iBAEX,CACN,IAAI6R,EAAYjc,KAAKwD,MAAMzD,KAAK20B,cAAcrzB,QAAQkG,IACpC,IAAf0U,GACCjc,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB20B,cAAepuB,KAAO,EAAK9C,MAAMzD,KAAK20B,cAAe,CAACwB,QAAS,CAAC,CAACja,EAAW,aACxH,WACC5N,MAAM,iB,2CAQD9G,GAAG,WACpBjF,QAAQC,IAAIgF,GACZ,IAAI0U,EAAYjc,KAAKwD,MAAMzD,KAAK20B,cAAcrzB,QAAQkG,GACtDvH,KAAK2K,UAAS,SAACnH,GACX,OACI,SAAYA,GAAZ,IADc,IAAfyY,EACC,CAAmB4Y,sBAAuB,KAAMC,aAActxB,EAAMswB,sBAGpE,CAAmBe,sBAAuB5Y,EAAW6Y,aAActxB,EAAMzD,KAAK20B,cAAczY,QAGjG,WACC,EAAKtX,mB,4CAGS4C,GAAE,WAGpB,GAFa6C,QAAQ,iBAEX,CACN,IAAI6R,EAAYjc,KAAKwD,MAAMzD,KAAK20B,cAAcrzB,QAAQkG,IACpC,IAAf0U,GACCjc,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB20B,cAAepuB,KAAO,EAAK9C,MAAMzD,KAAK20B,cAAe,CAACwB,QAAS,CAAC,CAACja,EAAW,aACxH,WACC5N,MAAM,iB,+BAMd,WACJ,OAAO,6BACH,6BACI,8BACI,6BACI,2BAAOnG,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAOwI,MAAO1I,KAAKwD,MAAMzD,KAAKG,KAAO0I,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG7H,6BACI,2BAAOW,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAcwI,MAAO1I,KAAKwD,MAAMzD,KAAKimB,YAAcpd,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG3I,6BACI,2BAAOW,UAAU,cAAjB,eAEI,2BAAOA,UAAU,cAAc7F,KAAK,WAAWyY,QAAS9a,KAAKwD,MAAMzD,KAAKomB,aAAe,EAAI,EAAGjmB,KAAK,eAAe0I,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG1J,6BACI,2BAAOW,UAAU,cAAjB,aAEI,2BAAOA,UAAU,cAAc7F,KAAK,WAAWyY,QAAS9a,KAAKwD,MAAMzD,KAAKqmB,YAAc,EAAI,EAAIlmB,KAAK,cAAc0I,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAGzJ,6BACI,2BAAOW,UAAU,cAAjB,WAEI,4BAAQA,UAAU,cAAchI,KAAK,eAAe0I,SAAU,SAACrB,GAAO,EAAK4tB,kBAAkB5tB,KACzF,4BAAQmB,MAAM,KAEZ1I,KAAKwD,MAAM+wB,iBAAiBttB,KAAI,SAAAiZ,GAAM,OAClC,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAOhgB,KACdkJ,SAAU8W,EAAOpd,aAIvC,6BAEQ9C,KAAKwD,MAAMzD,KAAK00B,cAAcxtB,KAAI,SAAAiZ,GAAM,OACxC,yBAAKrZ,IAAKqZ,GACN,4BAAQhY,UAAU,MAAMyB,QAAS,SAACpC,GAAO,EAAK6tB,qBAAqB7tB,EAAE2Y,KAAWA,SAKhG,6BACI,2BAAOhY,UAAU,cAAjB,YAEI,4BAAQA,UAAU,cAAchI,KAAK,gBAAgB0I,SAAU,SAACrB,GAAO,EAAK8tB,kBAAkB9tB,KAC1F,4BAAQmB,MAAM,KAEZ1I,KAAKwD,MAAMgxB,UAAUvtB,KAAI,SAAAiZ,GAAM,OAC3B,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAOhgB,KACdkJ,SAAU8W,EAAOpd,aAIvC,6BAEQ9C,KAAKwD,MAAMzD,KAAKy0B,UAAUvtB,KAAI,SAAAiZ,GAAM,OACpC,yBAAKrZ,IAAKqZ,GACN,4BAAQhY,UAAU,MAAMyB,QAAS,SAACpC,GAAO,EAAK+tB,qBAAqB/tB,EAAE2Y,KAAWA,SAKhG,6BACI,2BAAOhY,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAOwI,MAAO1I,KAAKwD,MAAMzD,KAAK4gB,KAAO/X,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG7H,2BAAOW,UAAU,cAAjB,cAEI,4BAAQA,UAAU,cAAchI,KAAK,KAAMwI,MAAO1I,KAAKwD,MAAMzD,KAAK40B,GAAI/rB,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,KAClG,4BAAQmB,MAAM,KAEZ1I,KAAKwD,MAAM8wB,eAAertB,KAAI,SAAAiZ,GAAM,OAChC,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAOhgB,KACdkJ,SAAU8W,EAAOpd,OAASod,EAAOhgB,cAM/D,6BACI,kBAAC,EAAD,CAAY4I,QAAS9I,KAAKszB,cAAetqB,KAAMhJ,KAAKwD,MAAMzD,KAAK20B,iBAEnE,6BACI,4BAAQ/qB,QAAS3J,KAAK4zB,cAAtB,qBAEJ,6BACI,0BAAM1rB,UAAU,aAAa8F,SAAUhO,KAAKw1B,WACxC,4BAAQttB,UAAU,mBAAlB,UAGR,6BACI,8BAEJ,6BACI,kBAAC,EAAD,CAAYY,QAAS9I,KAAKg0B,wBAAyBhrB,KAAMhJ,KAAKwD,MAAMoxB,aAExE,6BACI,4BAAQjrB,QAAS3J,KAAKi0B,sBAAtB,iBAGJ,yBAAK/rB,UAAWlI,KAAK01B,mBACjB,yBAAKxtB,UAAU,kBAAkByB,QAAS3J,KAAK2E,cAC/C,yBAAKuD,UAAU,uBACb,4BAAQA,UAAU,qBAAqByB,QAAS3J,KAAK2E,aAAa,kBAAC,GAAD,CAAWuD,UAAU,UACvF,yBAAKA,UAAU,iBAAf,wBACA,yBAAKA,UAAU,yBACb,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAKy1B,iBACxC,6BACI,2BAAOvtB,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAOwI,MAAO1I,KAAKwD,MAAMsxB,aAAa50B,KAAM0I,SAAU,SAACrB,GAAO,EAAKguB,qBAAqBhuB,QAGhJ,6BACI,2BAAOW,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAcwI,MAAO1I,KAAKwD,MAAMsxB,aAAaf,YAAcnrB,SAAU,SAACrB,GAAO,EAAKguB,qBAAqBhuB,QAG/J,6BACI,2BAAOW,UAAU,cAAjB,OAEI,4BAAQA,UAAU,cAAcQ,MAAO1I,KAAKwD,MAAMsxB,aAAazyB,KAAMnC,KAAK,OAAQ0I,SAAU,SAACrB,GAAO,EAAKguB,qBAAqBhuB,KAC1H,4BAAQmB,MAAM,KAEZ1I,KAAK2zB,mBAAmB1sB,KAAI,SAAAiZ,GAAM,OAC9B,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAO3f,GACd6I,SAAU8W,EAAOpd,OAASod,EAAOhgB,aAK3D,6BACI,2BAAOgI,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAewI,MAAO1I,KAAKwD,MAAMsxB,aAAa/J,YAAaniB,SAAU,SAACrB,GAAO,EAAKguB,qBAAqBhuB,QAG/J,6BACI,2BAAOW,UAAU,cAAjB,YAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,YAAYwI,MAAO1I,KAAKwD,MAAMsxB,aAAahK,UAAWliB,SAAU,SAACrB,GAAO,EAAKguB,qBAAqBhuB,QAG1J,4BAAQW,UAAU,mBAAlB,oB,GApkBGG,aAglBZ4K,gBAAWygB,I,k/BChlBpB4C,G,uCACF,WAAYh3B,GAAM,mBACd,cAAMA,IAKDg0B,cAAgB,CACjB,CAACpzB,KAAM,KAAK4C,MAAO,MACnB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,UAAU4C,MAAO,WACxB,CAAC5C,KAAM,SAAS4C,MAAO,UACvB,CACI5C,KAAM,OACN4C,MAAO,OACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKmX,aAAarnB,KAAlB,QAA6BzJ,MAAO,SAErE,CACI5C,KAAM,SACN4C,MAAO,SACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKoX,cAActnB,KAAnB,QAA8BzJ,MAAO,YAQ1E,IAAMqxB,EAAmB,CACrB5zB,GAAI,GACJL,KAAM,GACNk0B,QAAS,GACTpO,YAAa,IAjCH,OAoCd,EAAKxiB,MAAQ,CACT6wB,cAAc,EACdpO,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC8yB,MAAO,GACPtzB,KAAM,GACNo0B,iBAAkBA,EAClBY,kBAAmB,KACnBC,SAAUb,GAGd,EAAK9pB,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBACrC,EAAK+f,eAAiB,IAAIhgB,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,WAC5F,EAAK20B,oBAAqB,EAE1B,EAAKvwB,YAAc,EAAKA,YAAY4H,KAAjB,QACnB,EAAKmpB,gBAAkB,EAAKA,gBAAgBnpB,KAArB,QAEvB,EAAK3D,SAAW,EAAKA,SAAS2D,KAAd,QAEhB,EAAKqnB,aAAe,EAAKA,aAAarnB,KAAlB,QACpB,EAAKsnB,cAAgB,EAAKA,cAActnB,KAAnB,QACrB,EAAKgqB,YAAc,EAAKA,YAAYhqB,KAAjB,QAEnB,EAAKmpB,gBAAkB,EAAKA,gBAAgBnpB,KAArB,QA3DT,E,sKAgEQvM,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,U,cAA/CwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,SAGJzzB,KAAKqgB,eAAejgB,IAAI,K,YAA3Cw1B,E,gCAIA51B,KAAKk1B,mBAAqB,IAAI70B,IAAS,CAACC,MAAO,sBAAsBN,KAAKV,MAAM8T,MAAM3Q,OAAOlC,GAAG,WAAWq1B,EAAWr1B,GAAG,e,UAC9FP,KAAKk1B,mBAAmBxqB,S,QAA/CorB,E,OAEJ91B,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB0C,MAAO0vB,EAAY71B,KAAM+1B,OAC3C,e,6HAMFvuB,GACL,IAAI4uB,EAAa5uB,EAAEU,OAAO/H,KACtBwI,EAA0B,aAAlBnB,EAAEU,OAAO5F,KAAsBkF,EAAEU,OAAO6S,QAAUvT,EAAEU,OAAOS,MAEvE1I,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BwxB,SAAU,SAAIh1B,KAAKwD,MAAMwxB,UAAjB,UAA4BmB,EAAaztB,S,qDAGlEnB,G,mFACdA,EAAE0G,iBAIa,KAFXmH,E,MAAUpV,KAAKwD,MAAMwxB,WAElB90B,K,uBACHmO,MAAM,wB,6BAIV+G,EAAI9T,OAASA,OAIsB,MAAhCtB,KAAKwD,MAAMuxB,kB,iCACE/0B,KAAKk1B,mBAAmB/pB,KAAKiK,G,OAAzCvU,E,gDAGYb,KAAKk1B,mBAAmBznB,IAAI2H,EAAI7U,GAAI6U,G,QAAhDvU,E,eAIDA,EAECb,KAAK2K,UAAS,SAACnH,GACX,OAA8B,MAA3BA,EAAMuxB,kBACL,SAAYvxB,GAAZ,IAAmBzD,KAAMuG,KAAO9C,EAAMzD,KAAM,CAACk2B,MAAO,CAACp1B,OAGrD,SAAY2C,GAAZ,IAAmBzD,KAAMuG,KAAO9C,EAAMzD,KAAP,OAAeyD,EAAMuxB,kBAAoB,CAACsB,KAAMx1B,UAEpF,WACC,EAAK8D,iBAKT0J,MAAM,S,uIAoBV,IAAI0R,EAAe,cAInB,OAHI/f,KAAKwD,MAAM6wB,eACbtU,GAAgB,uBAEXA,I,oCAGP/f,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmB6wB,cAAe7wB,EAAM6wB,oB,mCAGnC9sB,GAAG,WACZjF,QAAQC,IAAIgF,GACZ,IAAI0U,EAAYjc,KAAKwD,MAAMzD,KAAKsB,QAAQkG,GACxCvH,KAAK2K,UAAS,SAACnH,GACX,OACI,SAAYA,GAAZ,IADc,IAAfyY,EACC,CAAmB8Y,kBAAmB,KAAMC,SAAUxxB,EAAM2wB,kBAG5D,CAAmBY,kBAAmB9Y,EAAW+Y,SAAUxxB,EAAMzD,KAAKkc,QAG3E,WACC,EAAKtX,mB,uDAGO4C,G,kFACH6C,QAAQ,iB,oBAIC,KADd6R,EAAYjc,KAAKwD,MAAMzD,KAAKsB,QAAQkG,I,gCAGxBvH,KAAKk1B,mBAAL,OAA+B3tB,EAAEhH,I,cAGzCP,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAMuG,KAAO,EAAK9C,MAAMzD,KAAM,CAACm2B,QAAS,CAAC,CAACja,EAAW,WACzE,WACC5N,MAAM,cAIVA,MAAM,S,6HAQd,WACJ,OAAO,6BACH,6BACI,kBAAC,EAAD,CAAYvF,QAAS9I,KAAKszB,cAAetqB,KAAMhJ,KAAKwD,MAAMzD,QAE9D,6BACI,4BAAQ4J,QAAS3J,KAAK4zB,cAAtB,iBAGJ,yBAAK1rB,UAAWlI,KAAK01B,mBACjB,yBAAKxtB,UAAU,kBAAkByB,QAAS3J,KAAK2E,cAC/C,yBAAKuD,UAAU,uBACb,4BAAQA,UAAU,qBAAqByB,QAAS3J,KAAK2E,aAAa,kBAAC,GAAD,CAAWuD,UAAU,UACvF,yBAAKA,UAAU,iBAAf,oBACA,yBAAKA,UAAU,yBACb,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAKu2B,aACxC,6BACI,2BAAOruB,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAOwI,MAAO1I,KAAKwD,MAAMwxB,SAAS90B,KAAM0I,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAGhI,6BACI,2BAAOW,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAcwI,MAAO1I,KAAKwD,MAAMwxB,SAAShP,YAAcpd,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG/I,6BACI,2BAAOW,UAAU,cAAjB,UAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,UAAUwI,MAAO1I,KAAKwD,MAAMwxB,SAASZ,QAAUxrB,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAIvI,4BAAQW,UAAU,mBAAlB,yB,GA3OIG,aAuPb4K,gBAAWqjB,I,k/BCvPpBE,G,qCACF,WAAYl3B,GAAM,0BACd,cAAMA,IACDkE,MAAQ,CACTyiB,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC8yB,MAAO,GACPqB,cAAe,GACfvN,SAAU,GACVpnB,KAAM,CACFimB,YAAa,GACbyQ,OAAQ,GACRC,UAAW,GACX9P,UAAW,KAMnB,EAAKvc,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBACrC,EAAKq2B,oBAAsB,IAAIt2B,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,gBACjG,EAAKq2B,yBAA2B,IAAIv2B,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,iBAGtG,EAAKqI,SAAW,EAAKA,SAAS2D,KAAd,QAChB,EAAKsqB,eAAiB,EAAKA,eAAetqB,KAApB,QAEtB,EAAKuqB,YAAc,EAAKA,YAAYvqB,KAAjB,QACnB,EAAKwqB,eAAiB,EAAKA,eAAexqB,KAApB,QA1BR,E,2KA8BQvM,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,U,cAA/CwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,SAGAzzB,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,SAAS,e,QAA7D+Q,E,UAOAA,EAAehR,YAA6C,MAA9BgR,EAAehR,YAAuB,GAAKgR,EAAehR,YACxFgR,EAAeP,OAAmC,MAAzBO,EAAeP,OAAkB,GAAKO,EAAeP,OAC9EO,EAAeN,UAAyC,MAA5BM,EAAeN,UAAqB,GAAKM,EAAeN,UAEpFM,EAAe7P,SAAWnnB,KAAK61B,QAAQmB,EAAepQ,WAEtD5mB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBzD,KAAMi3B,OACxB,WAEC,EAAKrsB,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBkxB,cAAesC,EAAe7P,kB,2HAQvDze,GAEJ,IAAIstB,EAAO,GAEX,OAAIttB,EAEQ,MAATA,GAA0B,IAATA,EAAoBstB,GAGxCttB,EAAMyB,QAAQ,KAAK,IACZzB,EAAM4C,MAAM,MAND0qB,I,+BASbzuB,GACL,IAAI4uB,EAAa5uB,EAAEU,OAAO/H,KAE1B,GAAkB,aAAfi2B,EACC,OAAOn2B,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+B2jB,SAAU5f,EAAEU,OAAOS,SAG7D1I,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BzD,KAAI,SAAKC,KAAKwD,MAAMzD,MAAhB,UAAuBo2B,EAAa5uB,EAAEU,OAAOS,a,wDAG/DnB,G,8EACjBA,EAAE0G,iBAEY,CACV,eAAgB,qBAGhBlO,E,MAAWC,KAAKwD,MAAMzD,OACrBuB,OAASA,OAIJG,KAAKC,UAAU3B,G,SAMbC,KAAK42B,yBAAyBzrB,KAAKpL,G,cAG3CsO,MAAM,WAGNA,MAAM,S,gIAIF9G,GAAG,WACXA,EAAE0G,iBACF,IAAIvF,EAAQ1I,KAAKwD,MAAM2jB,SAIvB,IAAkB,IAFFnnB,KAAKwD,MAAMkxB,cAAcrzB,QAAQqH,GAI7C,OADA2F,MAAM,0CACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBkxB,cAAepuB,KAAO9C,EAAMkxB,cAAe,CAACuB,MAAO,CAACvtB,UACxE,WACCpG,QAAQC,IAAI,EAAKiB,OACjB,EAAKyzB,mB,qCAME1vB,EAAGmB,GAAO,WACrBnB,EAAE0G,iBAEF,IAAIgO,EAAYjc,KAAKwD,MAAMkxB,cAAcrzB,QAAQqH,GAEjD,IAAkB,IAAfuT,EAEC,OADA5N,MAAM,6BACC,EAGXrO,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBkxB,cAAepuB,KAAO9C,EAAMkxB,cAAe,CAACwB,QAAS,CAAC,CAACja,EAAW,WACtF,WACC,EAAKgb,mB,oCAIC,WACNrQ,EAAY5mB,KAAKwD,MAAMkxB,cAAcjpB,KAAK,KAE9CzL,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAK,EAAKyD,MAAMzD,MAAlB,IAAwB6mB,UAAWA,SAC3D,WACCtkB,QAAQC,IAAI,EAAKiB,Y,+BAIjB,WACJ,OAAO,6BACH,6BACI,0BAAM0E,UAAU,aAAc8F,SAAUhO,KAAK62B,gBACzC,6BACI,2BAAO3uB,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAcwI,MAAO1I,KAAKwD,MAAMzD,KAAKimB,YAAcpd,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAG3I,6BACI,2BAAOW,UAAU,cAAjB,SAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,SAASwI,MAAO1I,KAAKwD,MAAMzD,KAAK02B,OAAS7tB,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAGjI,6BACI,2BAAOW,UAAU,cAAjB,YAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,YAAYwI,MAAO1I,KAAKwD,MAAMzD,KAAK22B,UAAY9tB,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,QAGvI,6BACI,2BAAOW,UAAU,cAAjB,YAEI,yBAAKA,UAAU,eACX,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,WAAWwI,MAAO1I,KAAKwD,MAAM2jB,SAAWve,SAAU,SAACrB,GAAO,EAAKqB,SAASrB,MACxH,4BAAQoC,QAAS,SAACpC,GAAO,EAAKuvB,YAAYvvB,KAA1C,eAIZ,6BAEQvH,KAAKwD,MAAMkxB,cAAcztB,KAAI,SAAAiZ,GAAM,OACnC,yBAAKrZ,IAAKqZ,GACN,4BAAQhY,UAAU,MAAMyB,QAAS,SAACpC,GAAO,EAAKwvB,eAAexvB,EAAE2Y,KAAWA,QAItF,6BACI,4BAAQhY,UAAU,mBAAlB,gB,GAzMQG,aAqNjB4K,gBAAWujB,I,k/BCvMpBU,G,mCACF,WAAY53B,GAAM,0BACd,cAAMA,IACDkE,MAAQ,CACTyiB,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClC8yB,MAAO,IAGX,EAAKhpB,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBAPvB,E,kKAcQN,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,U,OAA/CwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,4HAM/B,OAAO,yBAAKvrB,UAAU,8BAClB,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,UACA,0BAAMrB,UAAU,gCAAhB,KACA,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAI,sBAAsBvJ,KAAKwD,MAAMyiB,UAAWjmB,KAAKwD,MAAM6vB,MAAMvwB,OAC3G,0BAAMoF,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,aAGR,yBAAKA,UAAU,iBACX,kBAAC,IAAD,CAAM+G,cAAejP,KAAKwD,MAAMuL,UAAWG,SAAUlP,KAAK8O,WACtD,kBAAC,IAAD,CAAS5G,UAAU,6BACf,kBAAC,IAAD,kBACA,kBAAC,IAAD,cACA,kBAAC,IAAD,mBACA,kBAAC,IAAD,eACA,kBAAC,IAAD,mBAEJ,kBAAC,IAAD,KACI,kBAAC,GAAD,MACA,6BACI,kBAAC,IAAD,CAAMA,UAAU,MAAMqB,GAAI,sBAAsBvJ,KAAKwD,MAAMyiB,SAAS,2BAApE,aAGR,kBAAC,IAAD,KACI,kBAAC,GAAD,OAEJ,kBAAC,IAAD,KACI,kBAAC,GAAD,OAEF,kBAAC,IAAD,MAEF,kBAAC,IAAD,KACI,kBAAC,GAAD,c,GAzDO5d,aAmEZ4K,gBAAWikB,I,k/BC/EpBC,G,qCACF,WAAY73B,GAAM,mBACd,cAAMA,IAGD83B,aAAe,CAChB,CAAC72B,GAAI,KAAKL,KAAM,aAAa0C,OAAO,IACpC,CAACrC,GAAI,YAAYL,KAAM,aAAa0C,OAAO,CAAC,WAAW,YACvD,CAACrC,GAAI,UAAUL,KAAM,UAAU0C,OAAO,CAAC,WAAW,YAClD,CAACrC,GAAI,OAAOL,KAAM,OAAO0C,OAAO,CAAC,WAAW,UAAU,OAAO,SAAS,YACtE,CAACrC,GAAI,WAAWL,KAAM,WAAW0C,OAAO,CAAC,WAAW,UAAU,OAAO,SAAS,YAC9E,CAACrC,GAAI,UAAUL,KAAM,UAAU0C,OAAO,CAAC,WAAW,UAAU,OAAO,WACnE,CAACrC,GAAI,UAAUL,KAAM,UAAU0C,OAAO,CAAC,WAAW,YAClD,CAACrC,GAAI,WAAWL,KAAM,YAAY0C,OAAO,CAAC,WAAW,UAAU,WAC/D,CAACrC,GAAI,SAASL,KAAM,SAAS0C,OAAO,CAAC,WAAW,UAAU,OAAO,WACjE,CAACrC,GAAI,OAAOL,KAAM,OAAO0C,OAAO,CAAC,WAAW,UAAU,WACtD,CAACrC,GAAI,aAAaL,KAAM,aAAa0C,OAAO,CAAC,UAIjD,IAAMy0B,EAAiB,CACnB92B,GAAI,GACJL,KAAM,GACN4C,MAAO,GACPkjB,YAAa,GACb3jB,KAAM,SACND,KAAM,IACNk1B,OAAQ,EACRnO,QAAS,GACTG,MAAM,EACNiO,QAAQ,GAINC,EAAc,CAChBj3B,GAAI,GACJosB,aAAc,GACd8K,gBAAiB,EAAKn4B,MAAM8T,MAAM3Q,OAAOlC,GACzCssB,cAAe,GACfD,cAAe,GACf5B,SAAU,WACVC,SAAU,YAxCA,OA4Cd,EAAKyM,YAAc,CACf,CAACn3B,GAAI,WAAYL,KAAM,YACvB,CAACK,GAAI,UAAWL,KAAM,WACtB,CAACK,GAAI,WAAYL,KAAM,YACvB,CAACK,GAAI,YAAaL,KAAM,cAI5B,EAAKozB,cAAgB,CACjB,CAACpzB,KAAM,QAAQ4C,MAAO,SACtB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,OAAO4C,MAAO,QACrB,CAAC5C,KAAM,UAAU4C,MAAO,WACxB,CAAC5C,KAAM,OAAO4C,MAAO,WAAW8G,YAAY,GAC5C,CAAC1J,KAAM,SAAS4C,MAAO,SAAS8G,YAAY,GAC5C,CACI1J,KAAM,OACN4C,MAAO,OACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKkb,mBAAmBprB,KAAxB,QAAmCzJ,MAAO,SAE3E,CACI5C,KAAM,SACN4C,MAAO,SACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKmb,oBAAoBrrB,KAAzB,QAAoCzJ,MAAO,YAKhF,EAAK+0B,WAAa,CACd,CAAC33B,KAAM,eAAe4C,MAAO,gBAC7B,CAAC5C,KAAM,gBAAgB4C,MAAO,iBAC9B,CAAC5C,KAAM,gBAAgB4C,MAAO,iBAC9B,CAAC5C,KAAM,WAAW4C,MAAO,YACzB,CAAC5C,KAAM,WAAW4C,MAAO,YACzB,CACI5C,KAAM,OACN4C,MAAO,OACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKqb,gBAAgBvrB,KAArB,QAAgCzJ,MAAO,SAExE,CACI5C,KAAM,SACN4C,MAAO,SACP2G,WAAW,EACXC,OAAQ,CAAC8S,MAAO,GAAGC,SAAU,EAAKsb,iBAAiBxrB,KAAtB,QAAiCzJ,MAAO,YAK7E,EAAKU,MAAQ,CACTw0B,qBAAqB,EACrBC,kBAAkB,EAClB5E,MAAO,GACPpN,SAAU,EAAK3mB,MAAM8T,MAAM3Q,OAAOlC,GAClCR,KAAM,CACF+I,QAAS,GACTrB,KAAM,GACNywB,eAAgB,IAEpBh4B,KAAM,GACNm3B,eAAgBA,EAChBc,gBAAiB,KACjBpvB,OAAQsuB,EACRG,YAAaA,EACbY,aAAc,KACdvxB,IAAK2wB,GAGT,EAAKntB,SAAW,IAAIhK,IAAS,CAACC,MAAO,uBACrC,EAAK+3B,mBAAqB,IAAIh4B,IAAS,CAACC,MAAO,sBAAsB,EAAKhB,MAAM8T,MAAM3Q,OAAOlC,GAAG,gBAEhG,EAAKo3B,mBAAqB,EAAKA,mBAAmBprB,KAAxB,QAC1B,EAAKurB,gBAAkB,EAAKA,gBAAgBvrB,KAArB,QAEvB,EAAK+rB,eAAiB,EAAKA,eAAe/rB,KAApB,QACtB,EAAKgsB,YAAc,EAAKA,YAAYhsB,KAAjB,QAEnB,EAAKisB,UAAY,EAAKA,UAAUjsB,KAAf,QACjB,EAAKksB,OAAS,EAAKA,OAAOlsB,KAAZ,QACd,EAAK5H,YAAc,EAAKA,YAAY4H,KAAjB,QACnB,EAAKmpB,gBAAkB,EAAKA,gBAAgBnpB,KAArB,QAEvB,EAAKqrB,oBAAsB,EAAKA,oBAAoBrrB,KAAzB,QAC3B,EAAKwrB,iBAAmB,EAAKA,iBAAiBxrB,KAAtB,QAExB,EAAKmsB,WAAa,EAAKA,WAAWnsB,KAAhB,QAClB,EAAKosB,cAAgB,EAAKA,cAAcpsB,KAAnB,QAErB,EAAKqsB,YAAc,EAAKA,YAAYrsB,KAAjB,QAvIL,E,sKAiJQvM,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,U,cAA/CwN,E,OACJzzB,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiB6vB,MAAMI,O,SAGHzzB,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,SAAS,Y,cAA1D0P,E,OACJ31B,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAmB+I,QAAS6sB,S,UAGhC31B,KAAKqK,SAASjK,IAAIJ,KAAKwD,MAAMyiB,SAAS,S,QAAvD4S,E,OACJ74B,KAAK2K,UAAS,SAAAnH,GACV,gBAAUA,GAAV,IAAiBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAmB0H,KAAMoxB,S,oIAKtCx2B,GAEZ,IAAIy2B,EAAez2B,EAAK,gBAEpB0d,EAAe,cAInB,OAHI/f,KAAKwD,MAAMs1B,KACb/Y,GAAgB,uBAEXA,I,kCAICoW,GAAY,WAEhB3yB,GAAQ,EAERnB,EAAOrC,KAAKo3B,aAAalyB,MAAK,SAAAgF,GAAI,OAAIA,EAAK3J,KAAO,EAAKiD,MAAMuF,OAAO1G,QAErEA,IAEaA,EAAKO,OAAOvB,QAAQ80B,IAEpB,IACR3yB,GAAQ,IAIhB,OAAOA,I,kCAICnB,GAAM,WACVy2B,EAAez2B,EAAK,gBAExBrC,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,UAAoBs1B,GAAgBt1B,EAAMs1B,QAC3C,WAAOx2B,QAAQC,IAAI,EAAKiB,Y,yCAIZ+D,GAAG,WACd0U,EAAYjc,KAAKwD,MAAMzD,KAAK+I,QAAQzH,QAAQkG,GAEhDvH,KAAK2K,UAAS,SAACnH,GACX,OACI,SAAYA,GAAZ,IADc,IAAfyY,EACC,CAAmBkc,gBAAiB,KAAMpvB,OAAQvF,EAAM6zB,gBAGxD,CAAmBc,gBAAiBlc,EAAWlT,OAAQvF,EAAMzD,KAAK+I,QAAQmT,QAG/E,WACC,EAAKtX,YAAY,e,sCAIT4C,GAAG,WACX0U,EAAYjc,KAAKwD,MAAMzD,KAAK0H,KAAKpG,QAAQkG,GAE7CvH,KAAK2K,UAAS,SAACnH,GACX,OACI,SAAYA,GAAZ,IADc,IAAfyY,EACC,CAAmBmc,aAAc,KAAMvxB,IAAKrD,EAAMg0B,aAGlD,CAAmBY,aAAcnc,EAAWpV,IAAKrD,EAAMzD,KAAK0H,KAAKwU,QAEtE,WACC,EAAKtX,YAAY,Y,gCAKf4C,GAAG,WACTA,EAAE0G,iBAEF,IAAImH,EAAM,MAAIpV,KAAKwD,MAAMuF,QAEZ,IAAVqM,EAAI7U,KACH6U,EAAI7U,IAAK,IAAI6W,MAAOgf,WAGxBp2B,KAAK2K,UAAS,SAACnH,GACX,OAA4B,MAAzBA,EAAM20B,gBACL,SAAY30B,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB+I,QAASxC,KAAO9C,EAAMzD,KAAK+I,QAAS,CAACmtB,MAAO,CAAC7gB,SAGxF,SAAY5R,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB+I,QAASxC,KAAO9C,EAAMzD,KAAK+I,QAAZ,OAAuBtF,EAAM20B,gBAAkB,CAAC9B,KAAMjhB,YAErH,WACC,EAAKzQ,YAAY,e,6BAKlB4C,GAAG,WACNA,EAAE0G,iBAEF,IAAImH,EAAM,MAAIpV,KAAKwD,MAAMqD,KAEZ,IAAVuO,EAAI7U,KACH6U,EAAI7U,IAAK,IAAI6W,MAAOgf,WAGxBp2B,KAAK2K,UAAS,SAACnH,GACX,OAAyB,MAAtBA,EAAM40B,aACL,SAAY50B,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB0H,KAAMnB,KAAO9C,EAAMzD,KAAK0H,KAAM,CAACwuB,MAAO,CAAC7gB,SAGlF,SAAY5R,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB0H,KAAMnB,KAAO9C,EAAMzD,KAAK0H,KAAZ,OAAoBjE,EAAM40B,aAAe,CAAC/B,KAAMjhB,YAE5G,WACC,EAAKzQ,YAAY,Y,0CAIL4C,GAAE,WAGlB,GAFa6C,QAAQ,iBAEX,CACN,IAAI6R,EAAYjc,KAAKwD,MAAMzD,KAAK+I,QAAQzH,QAAQkG,IAC9B,IAAf0U,GACCjc,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB+I,QAASxC,KAAO,EAAK9C,MAAMzD,KAAK+I,QAAS,CAACotB,QAAS,CAAC,CAACja,EAAW,aAC5G,WACC5N,MAAM,iB,uCAML9G,GAAE,WAGf,GAFa6C,QAAQ,iBAEX,CACN,IAAI6R,EAAYjc,KAAKwD,MAAMzD,KAAK0H,KAAKpG,QAAQkG,IAC3B,IAAf0U,GACCjc,KAAK2K,UAAS,SAACnH,GACX,gBAAYA,GAAZ,IAAmBzD,KAAM,SAAKyD,EAAMzD,MAAb,IAAoB0H,KAAMnB,KAAO,EAAK9C,MAAMzD,KAAK0H,KAAM,CAACyuB,QAAS,CAAC,CAACja,EAAW,aACtG,WACC5N,MAAM,iB,qCAWP9G,GAAG,WACV4uB,EAAa5uB,EAAEU,OAAO/H,KACtBwI,EAA0B,aAAlBnB,EAAEU,OAAO5F,KAAsBkF,EAAEU,OAAO6S,QAAUvT,EAAEU,OAAOS,MAEvE,GAAkB,SAAfytB,EAAuB,OAGlB4C,EAAMxxB,EAAEU,OAAOS,MAAMyB,QAAQ,IAAK,KACtCzB,EAAQqwB,EAAIC,OAAO,GAAGxgB,cAAgBugB,EAAI/2B,MAAM,GAEhD,IAAIc,EAAQ9C,KAAKwD,MAAMuF,OAAOjG,MAC1BkjB,EAAchmB,KAAKwD,MAAMuF,OAAOid,YAUpC,MARa,KAAVljB,GAAgBA,IAAU4F,EAAM1G,MAAM,EAAG0G,EAAMvG,OAAS,KACvDW,EAAQ4F,GAEO,KAAhBsd,GAAsBA,IAAgBtd,EAAM1G,MAAM,EAAG0G,EAAMvG,OAAS,KACnE6jB,EAActd,QAGlB1I,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BuF,OAAM,SAAK/I,KAAKwD,MAAMuF,QAAhB,eAAyBotB,EAAa5uB,EAAEU,OAAOS,OAA/C,cAA6D5F,GAA7D,oBAAiFkjB,GAAjF,OAIzChmB,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BuF,OAAM,SAAK/I,KAAKwD,MAAMuF,QAAhB,UAAyBotB,EAAaztB,OAAS,WAAOpG,QAAQC,IAAI,EAAKiB,Y,kCAEpG+D,GACR,IAAI4uB,EAAa5uB,EAAEU,OAAO/H,KAC1BoC,QAAQC,IAAIgF,EAAEU,OAAOS,OACrB1I,KAAK2K,SAAL,SAAmB3K,KAAKwD,OAAxB,IAA+BqD,IAAG,SAAK7G,KAAKwD,MAAMqD,KAAhB,UAAsBsvB,EAAa5uB,EAAEU,OAAOS,a,iCAIvEnB,GACP,IACI0xB,EADS1xB,EAAEU,OACSS,MACxB1I,KAAK2K,UAAU,SAACnH,GACZ,MAAO,CAACtD,KAAM+4B,Q,uDAGF1xB,G,4EAChBA,EAAE0G,iBAEoB,IAAnBjO,KAAKwD,MAAMtD,K,uBACVmO,MAAM,yB,iCAIArO,KAAKwD,MAAM01B,SACP,CACV,eAAgB,oBAEpB52B,QAAQC,IAAIvC,KAAKwD,MAAMzD,MACnBA,EAAO,CACPG,KAAMF,KAAKwD,MAAMtD,KACjBH,KAAM0B,KAAKC,UAAU1B,KAAKwD,MAAMzD,MAChCuB,OAAQA,QAIFG,KAAKC,UAAU3B,G,UAMbC,KAAKq4B,mBAAmBltB,KAAKpL,G,QAAzCc,E,OACAyB,QAAQC,IAAI1B,GACTA,EACCwN,MAAM,WAINA,MAAM,S,8HAGR,WACN,OAAO,yBAAKnG,UAAU,8BAClB,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,qBACX,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAG,iBAA7C,UACA,0BAAMrB,UAAU,gCAAhB,KACA,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAI,sBAAsBvJ,KAAKwD,MAAMyiB,UAAWjmB,KAAKwD,MAAM6vB,MAAMvwB,OAC3G,0BAAMoF,UAAU,gCAAhB,KACA,kBAAC,IAAD,CAAMA,UAAU,0BAA0BqB,GAAI,sBAAsBvJ,KAAKwD,MAAMyiB,SAAS,YAAxF,WACA,0BAAM/d,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,uBAGR,yBAAKA,UAAU,iBACX,6BACI,2BAAO7F,KAAK,OAAOsN,YAAY,0BAA0B/G,SAAU5I,KAAK04B,cAE5E,kBAAC,EAAD,CAAY5vB,QAAS9I,KAAKszB,cAAetqB,KAAMhJ,KAAKwD,MAAMzD,KAAK+I,UAC/D,6BACI,4BAAQa,QAAS,SAACpC,GAAD,OAAO,EAAKowB,mBAAmBpwB,KAAhD,eAEJ,kBAAC,EAAD,CAAYuB,QAAS9I,KAAK63B,WAAY7uB,KAAMhJ,KAAKwD,MAAMzD,KAAK0H,OAC5D,6BACI,4BAAQkC,QAAS,SAACpC,GAAD,OAAO,EAAKuwB,gBAAgBvwB,KAA7C,YAIJ,yBAAKW,UAAWlI,KAAK01B,gBAAgB,QACjC,yBAAKxtB,UAAU,kBAAkByB,QAAS,kBAAM,EAAKhF,YAAY,UACjE,yBAAKuD,UAAU,uBACb,4BAAQA,UAAU,qBAAqByB,QAAS,kBAAM,EAAKhF,YAAY,SAAQ,kBAAC,GAAD,CAAWuD,UAAU,UACpG,yBAAKA,UAAU,iBAAf,eACA,yBAAKA,UAAU,yBACb,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAKy4B,QACxC,6BACI,2BAAOvwB,UAAU,cAAjB,KAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,KAAKwI,MAAO1I,KAAKwD,MAAMqD,IAAItG,GAAIqI,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,QAG1H,6BACI,2BAAOW,UAAU,cAAjB,eAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,eAAewI,MAAO1I,KAAKwD,MAAMqD,IAAI8lB,aAAc/jB,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,QAG9I,6BACI,2BAAOW,UAAU,cAAjB,gBAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,gBAAgBwI,MAAO1I,KAAKwD,MAAMqD,IAAI+lB,cAAgBhkB,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,QAGjJ,6BACI,2BAAOW,UAAU,cAAjB,gBAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,gBAAgBwI,MAAO1I,KAAKwD,MAAMqD,IAAIgmB,cAAgBjkB,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,QAGjJ,6BACI,2BAAOW,UAAU,cAAjB,WAEI,4BAAQA,UAAU,cAAcQ,MAAO1I,KAAKwD,MAAMqD,IAAIokB,SAAU/qB,KAAK,WAAY0I,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,KAChH,4BAAQmB,MAAM,KAEZ1I,KAAK03B,YAAYzwB,KAAI,SAAAiZ,GAAM,OACvB,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAO3f,GACd6I,SAAU8W,EAAOpd,OAASod,EAAOhgB,aAK3D,6BACI,2BAAOgI,UAAU,cAAjB,WAEI,4BAAQA,UAAU,cAAcQ,MAAO1I,KAAKwD,MAAMqD,IAAImkB,SAAU9qB,KAAK,WAAY0I,SAAU,SAACrB,GAAO,EAAKgxB,YAAYhxB,KAChH,4BAAQmB,MAAM,KAEZ1I,KAAK03B,YAAYzwB,KAAI,SAAAiZ,GAAM,OACvB,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAO3f,GACd6I,SAAU8W,EAAOpd,OAASod,EAAOhgB,aAK3D,4BAAQgI,UAAU,mBAAlB,eAMZ,yBAAKA,UAAWlI,KAAK01B,gBAAgB,WACjC,yBAAKxtB,UAAU,kBAAkByB,QAAS,kBAAM,EAAKhF,YAAY,aACjE,yBAAKuD,UAAU,uBACb,4BAAQA,UAAU,qBAAqByB,QAAS,kBAAM,EAAKhF,YAAY,YAAW,kBAAC,GAAD,CAAWuD,UAAU,UACvG,yBAAKA,UAAU,iBAAf,kBACA,yBAAKA,UAAU,yBACb,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAKw4B,WACxC,6BACI,2BAAOtwB,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAOwI,MAAO1I,KAAKwD,MAAMuF,OAAO7I,KAAM0I,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAGpI,6BACI,2BAAOW,UAAU,cAAjB,OAEI,4BAAQA,UAAU,cAAcQ,MAAO1I,KAAKwD,MAAMuF,OAAO1G,KAAMnC,KAAK,OAAQ0I,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,KAC9G,4BAAQmB,MAAM,KAEZ1I,KAAKo3B,aAAanwB,KAAI,SAAAiZ,GAAM,OACxB,4BAAQrZ,IAAKqZ,EAAO3f,GACZmI,MAAOwX,EAAO3f,GACd6I,SAAU8W,EAAOpd,OAASod,EAAOhgB,aAK1DF,KAAK44B,YAAY,QAAU,6BACxB,2BAAO1wB,UAAU,cAAjB,OAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,OAAQwI,MAAO1I,KAAKwD,MAAMuF,OAAO3G,KAAMwG,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAE5H,KACRvH,KAAK44B,YAAY,UAAY,6BAC1B,2BAAO1wB,UAAU,cAAjB,SAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,SAAUwI,MAAO1I,KAAKwD,MAAMuF,OAAOuuB,OAAQ1uB,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAEhI,KACRvH,KAAK44B,YAAY,WAAa,6BAC3B,2BAAO1wB,UAAU,cAAjB,UAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,UAAUwI,MAAO1I,KAAKwD,MAAMuF,OAAX,QAA2BH,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAEjI,KACRvH,KAAK44B,YAAY,UAAY,6BAC1B,2BAAO1wB,UAAU,cACb,2BAAOA,UAAU,cAAc7F,KAAK,WAAWnC,KAAK,SAAS4a,QAAS9a,KAAKwD,MAAMuF,OAAOwuB,OAAS,EAAI,EAAG3uB,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,MADlJ,WAIK,KACRvH,KAAK44B,YAAY,YAAc,6BAC5B,2BAAO1wB,UAAU,cACb,2BAAOA,UAAU,cAAc7F,KAAK,WAAWnC,KAAK,OAAO4a,QAAS9a,KAAKwD,MAAMuF,OAAX,KAAyB,EAAI,EAAGH,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,MAD9I,aAIK,KACT,6BACI,2BAAOW,UAAU,cAAjB,QAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,QAAQwI,MAAO1I,KAAKwD,MAAMuF,OAAOjG,MAAQ8F,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAGvI,6BACI,2BAAOW,UAAU,cAAjB,cAEI,2BAAOA,UAAU,cAAc7F,KAAK,OAAOnC,KAAK,cAAcwI,MAAO1I,KAAKwD,MAAMuF,OAAOid,YAAcpd,SAAU,SAACrB,GAAO,EAAK+wB,eAAe/wB,QAGnJ,4BAAQW,UAAU,mBAAlB,eAKZ,8BAGA,6BACI,0BAAMA,UAAU,aAAa8F,SAAUhO,KAAK24B,eACxC,4BAAQzwB,UAAU,mBAAlB,gB,GAhjBWG,aA0jBhB4K,gBAAWkkB,I,6aChkBXgC,G,sIAJX,OAAM,yBAAK/vB,SAAQ,mBAAcmU,eAAiBrV,UAAU,uB,GAFrCG,a,8+BCO3B,ICqTI+wB,GDrTEtwB,GAAU,CACd,CACE5I,KAAM,QACN4C,MAAO,QACPtC,KAAK,EACL6I,SAAS,EACTF,IAAK,QAEP,CACEjJ,KAAM,OACN4C,MAAO,QAET,CACE5C,KAAM,cACN4C,MAAO,eAET,CACE5C,KAAM,aACN4C,MAAO,eAwBLu2B,GAAsB,CAC1Bhc,UAAW,EACXH,YAAa,GAIMoc,G,mCACnB,WAAYh6B,GAAO,0BACjB,cAAMA,IACDkE,MAAQ,CACX+1B,sBAAuBF,GACvBnS,YAAa,IAEf,EAAK9J,WAAa,EAAKA,WAAW7Q,KAAhB,QAClB,EAAKitB,oBAAsB,IAAIn5B,IAAS,CAACC,MAAO,4BAP/B,E,+CAUR4c,EAAakI,GACtBplB,KAAK2K,UAAS,SAAAnH,GAAK,gBAASA,GAAT,UAAiB4hB,EAAjB,SAAkC5hB,EAAM4hB,IAAxC,IAAqDlI,uB,gMAWhDld,KAAKw5B,oBAAoB9uB,S,OACjDwc,GADIA,E,QACsBA,YAC1BlnB,KAAK2K,UAAS,SAAAnH,GAAK,gBACdA,GADc,IAEjB0jB,mB,4HAIK,aACuClnB,KAAKwD,MAA3C0jB,EADD,EACCA,YAAaqS,EADd,EACcA,sBACrB,OAAO,yBAAKrxB,UAAU,6BACpB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,qBACb,uBAAGA,UAAU,0BAA0BF,KAAK,KAA5C,eACA,0BAAME,UAAU,gCAAhB,KACA,0BAAMA,UAAU,8BAAhB,gBAEF,kBAAC,IAAD,CAAMA,UAAU,MAAMqB,GAAE,iCAAxB,YAEF,yBAAKrB,UAAU,iBAGb,kBAAC,EAAD,CACIY,QAASA,GACTkB,aAAc,CAAC,CACbb,IAAK,OAAQ7J,MAAO,CAClB0I,KAAM,sCAERlF,MAAO,QACN,CACDqG,IAAK,SACL7I,MAAO,8BACPI,OAAQ,SACR0J,QAAS,gBAETlC,UAAW,iCACXpF,MAAO,UAETkG,KAAMke,EAAYjgB,KAAI,SAAAwyB,GAAU,gBAC3BA,GAD2B,IAE9BpwB,QAAS,kCAAoCowB,EAAWl5B,UAG9D,kBAAC,GAAD,CAAY8c,UAAWkc,EAAsBlc,UACjCH,YAAaqc,EAAsBrc,YACnCE,WAAY,SAAAF,GAAW,OAAI,EAAKE,WAAWF,EAAa,0BACxDM,WAAY0J,EAAY/kB,e,GArEJkG,a,igCCCxClF,OAAO2G,MAAQA,IACf3G,OAAOu2B,SAAWA,KAClBv2B,OAAOkF,UAAYyB,IAAMzB,UAoQvB+wB,G,iCAjQA,WAAY95B,GAAM,0BAChB,cAAMA,IACDkE,MAAQ,CACXI,WAAY,CACVV,aAAa,GAEfy2B,eAAe,GAEjB,EAAKC,WAAa,EAAKA,WAAWrtB,KAAhB,QARF,E,wDAYhBjI,IAAMob,UAAU1f,KAAK65B,iBAAiBttB,KAAKvM,S,yCAO3C,IAAI4D,EAAaU,IAAMqb,WAAW/b,WAClC5D,KAAK2K,UAAS,SAAAnH,GACZ,gBAAUA,GAAV,IAAgBI,WAAU,MAAKA,U,mCAIjC5D,KAAK2K,UAAS,SAAAnH,GACZ,gBAAWA,GAAX,IAAkBm2B,eAAgBn2B,EAAMm2B,qB,+BAI1C,IAAIG,EAAe,CAAC,SAOpB,OANI95B,KAAKwD,MAAMI,WAAWV,aACxB42B,EAAa36B,KAAK,sBAEjBa,KAAKwD,MAAMm2B,eACZG,EAAa36B,KAAK,oBAEb,kBAAC,IAAD,CAAUmF,MAAOA,KACtB,yBAAK4D,UAAW4xB,EAAaruB,KAAK,MAChC,kBAAC,IAAD,KACE,yBAAKvD,UAAU,aACb,yBAAKA,UAAU,iBACb,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAMA,UAAU,cAAcyB,QAAS3J,KAAK45B,cAE9C,yBAAK1xB,UAAU,kBAEf,wBAAIA,UAAU,kBAEV,4BACE,kBAAC,IAAD,CAAMqB,GAAG,mBAAmBrB,UAAU,wBACpC,kBAAC,GAAD,CAAcA,UAAU,SACxB,6CAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,gBAAgBrB,UAAU,wBACjC,kBAAC,GAAD,CAAUA,UAAU,SACpB,0CAGJ,4BAME,kBAAC,IAAD,CAAMqB,GAAG,uBAAuBrB,UAAU,wBACxC,kBAAC,GAAD,CAAUA,UAAU,SACpB,yCAEF,wBAAIA,UAAU,qBAEZ,4BAEE,kBAAC,IAAD,CAAMqB,GAAG,4BAA4BrB,UAAU,wBAC7C,kBAAC,GAAD,CAAUA,UAAU,SACpB,iDAKR,4BACE,kBAAC,IAAD,CAAMqB,GAAG,mBAAmBrB,UAAU,wBACpC,kBAAC,GAAD,CAAaA,UAAU,SACvB,6CAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,iBAAiBrB,UAAU,wBAClC,kBAAC,GAAD,CAAWA,UAAU,SACrB,2CAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,eAAerB,UAAU,wBAChC,kBAAC,GAAD,CAASA,UAAU,SACnB,yCAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,eAAerB,UAAU,wBAChC,yCAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,sBAAsBrB,UAAU,wBACvC,kBAAC,GAAD,CAASA,UAAU,SACnB,0CAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,iBAAiBrB,UAAU,wBAClC,kBAAC,GAAD,CAAWA,UAAU,SACrB,2CAGJ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,kBAAkBrB,UAAU,wBACnC,kBAAC,GAAD,CAAYA,UAAU,SACtB,6CAIN,wBAAIA,UAAU,uCACZ,4BACE,kBAAC,IAAD,CAAMqB,GAAG,eAAerB,UAAU,wBAChC,kBAAC,GAAD,CAAUA,UAAU,SACpB,2CAKR,kBAAC,GAAD,OAEF,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOyY,KAAK,UAAUoZ,OAAK,GACzB,kBAAC,KAAD,CAAUxwB,GAAG,sBAEf,kBAAC,KAAD,CAAOoX,KAAK,mBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,eAAeoZ,OAAK,GAC9B,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,mBAAmBoZ,OAAK,GAClC,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,yBACV,kBAAC,GAAD,OAGF,kBAAC,KAAD,CAAOA,KAAK,gBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,iBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,oBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,kBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,kBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,gBAAgBoZ,OAAK,GAC/B,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,yBAA0BqZ,UAAW/G,GAAW8G,OAAK,GAC/D,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,iCAAiCqZ,UAAW9C,GAAc6C,OAAK,IAC3E,kBAAC,KAAD,CAAOpZ,KAAK,gDAAgDqZ,UAAW7C,KACvE,kBAAC,KAAD,CAAOxW,KAAK,qBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,oBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,eAAeoZ,OAAK,GAC9B,kBAAC,EAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,yBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,oBACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,uBAAuBoZ,OAAK,GACtC,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,4BAA4BoZ,OAAK,GAC3C,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,iCACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,sCACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,4BACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,gCAAgCoZ,OAAK,GAC/C,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOpZ,KAAK,4CACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,iDACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,+CACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,oDACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,6CACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,kDACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,kCACV,kBAAC,GAAD,OAGF,kBAAC,KAAD,CAAOA,KAAK,2BACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,gCACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,iCACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,sCACV,kBAAC,GAAD,OAEF,kBAAC,KAAD,CAAOA,KAAK,iBACV,kBAAC,GAAD,SAIN,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,Y,GA1PYtY,aAuQL+wB,c,gCCrUf,wIAAO,IAAMv1B,EAAe,eACfC,EAAa,aAEnB,SAAS2I,IACd,MAAO,CACLpK,KAAMwB,GAIH,SAAS+I,IACd,MAAO,CACLvK,KAAMyB,K,gCCXV,wIAAO,IAAMm2B,EAAc,cACdC,EAAgB,gBAEtB,SAASC,EAAWz1B,GAEzB,OADAA,EAAS7B,QAAS,EACX,CACLR,KAAM43B,EACNv1B,YAIG,SAAS0e,IACd,MAAO,CACL/gB,KAAM63B,K,gCCbV,oEAAO,IAAMl2B,EAAW,WAEjB,SAASo2B,EAAan2B,GAC3B,MAAO,CACLA,WACA5B,KAAM2B,K,gqBCHV,IAAMrB,EAAe,CACnB0gB,SAAU,SAAUgX,GAClB/3B,QAAQC,IAAI83B,IAEdx3B,QAAQ,GAGH,SAASsB,EAAsBX,EAAOC,GAE3C,OADAD,EAAQA,GAASb,EACTc,EAAOpB,MACb,KAAK43B,IACHz2B,EAAQ,EAAH,GACAC,EAAOiB,UAEb,MACD,KAAKw1B,KACH12B,EAAQ,EAAH,GAAOA,IACNX,QAAUW,EAAMX,OAG1B,OAAOW,I,gCCtBT,oEAAO,IAAMa,EAAU,UAEhB,SAASi2B,EAAaj3B,GAC3B,MAAO,CACLA,YACAhB,KAAMgC,K,gCC8CK2c,IAnDG,CAChBC,iBAAkB,mBAClBsZ,qBAAsB,uBACtBC,gBAAiB,kBACjBC,mBAAoB,qBACpBpZ,QAAS,CAEP,CACEqZ,KAAM,cACNx6B,KAAM,qBACNK,GAAI,EACJhB,MAAO,OACPo7B,WAAY,IAEd,CACED,KAAM,UACNx6B,KAAM,UACNK,GAAI,EACJhB,MAAO,SACPo7B,WAAY,yCAEd,CACED,KAAM,SACNx6B,KAAM,SACNK,GAAI,EACJhB,MAAO,SACPo7B,WAAY,yCAEd,CACED,KAAM,SACNx6B,KAAM,SACNK,GAAI,EACJhB,MAAO,QACPo7B,WAAY,wCAEd,CACED,KAAM,YACNx6B,KAAM,YACNK,GAAI,EACJhB,MAAO,QACPo7B,WAAY,wCAEd,CACED,KAAM,cACNx6B,KAAM,cACNK,GAAI,EACJhB,MAAO,QACPo7B,WAAY,2C,oBC/ClBz7B,EAAUD,EAAOC,QAAU,EAAQ,GAAR,EAAkE,IAErFE,EAAE,EAAQ,KAAuF,IACzGF,EAAQE,EAAE,EAAQ,KAAgG,IAClHF,EAAQC,KAAK,CAACF,EAAOG,EAAI,yHAA0H,KACnJF,EAAQE,EAAE,EAAQ,KAAiG,IAGnHF,EAAQC,KAAK,CAACF,EAAOG,EAAI,mqrBAAgrrB,M,oqBCAlsrB,SAAS4L,IACZ,OAAO7H,OAAO6H,aAwIX,SAAS5C,EAAYyM,GAAqB,IAAdvV,EAAc,uDAAN,KACzC,OAAQuV,EAAM1M,WACZ,IAAK,OACH,OAAO6C,IAAe4vB,WAAW/lB,EAAM3U,MAEzC,IAAK,QAGL,IAAK,QACH,OAAO4J,MAAMC,cAAc,MAApB,OAA+BzK,GAA/B,IAAsCskB,IAAK/O,EAAMrU,OAE1D,IAAK,kBACH,OAAOsJ,MAAMC,cAAc,MAApB,OAA+BzK,GAA/B,IAAsCwV,MAAM,CAAC+lB,gBAAiB,OAAF,OAAShmB,EAAMrU,IAAf,SAErE,UAAK6F,EACH,OAAOyD,MAAMC,cAAc,MAApB,OAA+BzK,GAA/B,IAAsCskB,IAAK,wBAGtD,MAAO","file":"4e1283ed27099d2302d8.bundle.js","sourcesContent":["var escape = require(\"../../../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".pagination{display:flex;align-items:center;padding:20px 0}.pagination__version{font-family:Roboto;font-style:italic;font-weight:normal;font-size:13px;line-height:15px;color:#8E94AA;margin-right:437px}.pagination__link{text-decoration:none;font-weight:400;font-family:Roboto;font-style:italic;font-size:13px;line-height:15px;color:#673daa}.pagination__text{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.pagination__move{width:30px;height:30px;padding:0;display:flex;justify-content:center;align-items:center;border:1px solid #8E94AA;box-sizing:border-box;cursor:pointer;border-radius:2px}.pagination__buttons{display:flex;align-items:center}.pagination__indicator{display:flex;justify-content:center;align-items:center;width:43px;height:30px;background:#FFFFFF;border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px}.pagination__prev{background-image:url(\" + escape(require(\"../../svgs/left.svg\")) + \");background-size:7.5px 4px;margin:0 7px}.pagination__map{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.pagination__next{margin-right:7.5px}.pagination__disabled{opacity:.5;cursor:auto}.right__arrow{transform:rotate(-180deg)}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap-grid.min.css\"), \"\");\n\n// module\nexports.push([module.id, \"html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto, sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:0.2s;-moz-transition-duration:0.2s;-ms-transition-duration:0.2s;-o-transition-duration:0.2s;transition-duration:0.2s;font-family:Roboto, sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8E94AA}.btn_disabled{background-color:#8E94AA;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=\\\"checkbox\\\"]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87CA00;color:#fff;font-weight:bold}.btn_failure{background-color:#FF4E6E;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-disabled{pointer-events:none}.pointer-event-none{pointer-events:none}.altrp-inherit{font-family:inherit;font-size:inherit;font-style:inherit;line-height:inherit;color:inherit;text-decoration:inherit;text-transform:inherit}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}.assets-browser{display:none}.assets-browser_active{position:fixed;display:flex;top:0;bottom:0;right:0;left:0;z-index:1000}.assets-browser__bg{position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(52,59,76,0.2);z-index:50}.assets-browser-content{position:absolute;top:5%;bottom:5%;left:5%;right:5%;padding-bottom:60px;z-index:100;border:1px solid #D5D7DE;border-radius:3px;background-color:#fff}.assets-browser__close.btn{position:absolute;top:0;right:0;padding:10px;-webkit-transform:scale(2);-moz-transform:scale(2);-ms-transform:scale(2);-o-transform:scale(2);transform:scale(2);background-color:transparent}.assets-browser__close.btn .icon{margin:0;width:auto;height:auto}.assets-browser-top{padding:20px 20px 0;background-color:#F7F8F9}.assets-browser-top .caption{font-size:22px}.assets-browser-nav{margin-left:-20px;margin-right:-20px;padding-left:5px;padding-right:5px;border-bottom:1px solid #D5D7DE}.assets-browser__tab{margin-bottom:-1px;background-color:transparent;border-top:1px solid transparent;border-left:1px solid transparent;border-right:1px solid transparent}.assets-browser__tab_active{border-top:1px solid #D5D7DE;border-left:1px solid #D5D7DE;border-right:1px solid #D5D7DE;background-color:#fff}.assets-browser-bottom{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:center;justify-content:flex-end;height:60px;padding-right:20px;border-top:1px solid #D5D7DE}.assets-browser-choose-frame{display:flex;align-content:flex-start;align-items:flex-start;flex-wrap:wrap;padding:20px 20px 20px 10px;height:calc( 100% - 96.5px);overflow:auto}.asset-choose{position:relative;cursor:pointer;margin-bottom:10px;margin-left:10px;border:1px solid #D5D7DE}.asset-choose__content{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-o-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.asset-choose_selected{box-shadow:inset 0 0 0 3px #fff,inset 0 0 0 7px #71d7f7}.asset-choose_icon{width:calc(5% - 10px);padding-top:calc(5% - 10px)}.asset-choose_media{width:calc(10% - 10px);padding-top:calc(10% - 10px)}.asset-choose_media .asset-choose__content{top:10px;left:10px;width:calc(100% - 20px);height:calc(100% - 20px);transform:none;object-fit:contain;object-position:center;background-color:#F7F8F9}\\n\", \"\"]);\n\n// exports\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"7\" height=\"10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M6 1.5L2 5l4 4\" stroke=\"#8E94AA\" strokeWidth=\"1.5\" /></svg>);","/**\r\n * Имеет интерфейс для доступы к свойствам data (любой вложенности)\r\n * @class AltrpModel\r\n */\r\nimport {cloneDeep, get} from \"lodash\";\r\n\r\nclass AltrpModel {\r\n  constructor(data = {}) {\r\n    this.data = cloneDeep(data);\r\n  }\r\n\r\n  /**\r\n   * Возваращает объект данных\r\n   * @return {*}\r\n   */\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  getProperty(name, defaultValue = '') {\r\n    return get(this.data, name, defaultValue);\r\n  }\r\n}\r\n\r\nexport default AltrpModel","import queryString from 'query-string';\r\n/**\r\n * @class Resource\r\n * */\r\nexport const MAX_FILE_SIZE = 10485760;\r\n\r\nclass Resource {\r\n\r\n\r\n  /**\r\n   * @member {Object} routes\r\n   * @member {string} routes.get\r\n   * @member {string} routes.post\r\n   * @member {string} routes.create\r\n   * @member {string} routes.getAll\r\n   */\r\n  constructor(data){\r\n\r\n    this.route = data.route;\r\n    if(! this.route){\r\n      throw 'Нужен route';\r\n    }\r\n\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  get(id){\r\n    if(! id){\r\n      throw 'Get only by \"id\"';\r\n    }\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route + '/' + id;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * простой запрос\r\n   * @return {Promise}\r\n   * */\r\n  getAll(){\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Запрос со строкой для поиска вхождений\r\n   * @param {string} searchString\r\n   * @return {Promise}\r\n   * */\r\n  search(searchString){\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url;\r\n    if(this.route.indexOf('?') === -1){\r\n      url = this.route + `?s=${searchString}`;\r\n    } else {\r\n      url = this.route + `&s=${searchString}`;\r\n    }\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @param {any} data\r\n   * @param {object | null} headers\r\n   * @return {Promise}\r\n   * */\r\n  post(data = {}, headers){\r\n    headers = headers || {\r\n      'X-CSRF-TOKEN': _token,\r\n      'Content-Type': 'application/json',\r\n      'Accept': 'application/json',\r\n    };\r\n    let options = {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers,\r\n    };\r\n    return fetch(this.route, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @param {FileList} files\r\n   * @param {string} fileType\r\n   * @return {Promise}\r\n   * */\r\n  postFiles(files, fileType){\r\n    // data._token = _token;\r\n    let boundary = String(Math.random()).slice(2);\r\n    fileType = fileType || 'image';\r\n    let headers = {\r\n      'X-CSRF-TOKEN': _token,\r\n      // 'Content-Type': 'multipart/form-data; boundary=' + boundary\r\n    };\r\n    let formData = new FormData();\r\n    for (let i = 0; i < files.length; i++) {\r\n      if(files[i].size > MAX_FILE_SIZE || files[i].type.indexOf(fileType) !== 0){\r\n        console.log(files[i]);\r\n        continue;\r\n      }\r\n      formData.append(`files[${i}]`, files[i]);\r\n    }\r\n    let options = {\r\n      method: 'POST',\r\n      body: formData,\r\n      headers,\r\n    };\r\n    return fetch(this.route, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  put(id, data){\r\n    let options = {\r\n      method: 'put',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'X-CSRF-TOKEN': _token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + (id ? '/' + id : '');\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  delete(id = ''){\r\n\r\n    let options = {\r\n      method: 'delete',\r\n      headers: {\r\n        'X-CSRF-TOKEN': _token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + (id ? '/' + id : '');\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  getOptions(){\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + '/options';\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * GET запрос с параметрами\r\n   * @param {object} params\r\n   * @return {Promise}\r\n   * */\r\n  async getQueried(params){\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = `${this.route}?${queryString.stringify(params)}`;\r\n    let res =  await fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n    // console.log(res);\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default Resource;","import {SET_MODAL_SETTINGS, TOGGLE_MODAL} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  fields: [],\r\n  active: false,\r\n  title: 'Modal',\r\n  submitButton: 'Submit',\r\n  submit: function(data){\r\n    console.log(data);\r\n  },\r\n  success: (res)=>{\r\n    console.log(res);\r\n  }\r\n};\r\n\r\nexport function modalSettingsReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_MODAL_SETTINGS:{\r\n      state = {\r\n        fields: action.fields,\r\n        title: action.title || defaultState.title,\r\n        submit: action.submit || defaultState.submit,\r\n        submitButton: action.submitButton || defaultState.submitButton,\r\n        success: action.success || defaultState.success,\r\n        active: action.active,\r\n      };\r\n    }break;\r\n    case TOGGLE_MODAL:{\r\n      state = {\r\n        ...defaultState,\r\n        active: ! state.active,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_DISABLED, SET_ENABLE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  adminEnable: true\r\n};\r\n\r\nexport function changeEnableState(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_DISABLED:{\r\n      state = {\r\n          ...state,\r\n        adminEnable: false\r\n      };\r\n    }break;\r\n    case SET_ENABLE:{\r\n      state = {\r\n        ...state,\r\n        adminEnable: true\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_LOGO} from \"./actions\";\r\n\r\nconst defaultState = window.admin_logo ? window.admin_logo : {};\r\n\r\nexport function adminLogoReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_LOGO:{\r\n      state = {\r\n          ...action.logoData\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SET_ACE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  AceEditor: null\r\n};\r\n\r\nexport function aceEditorReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type){\r\n    case SET_ACE:{\r\n      state = {\r\n        AceEditor: action.AceEditor\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {combineReducers} from 'redux';\r\nimport {modalSettingsReducer} from \"./modal-settings/reducers\";\r\nimport {changeEnableState} from \"./admin-state/reducers\";\r\nimport {adminLogoReducer} from \"./admin-logo/reducers\";\r\nimport {assetsSettingsReducer} from \"../../../../editor/src/js/store/assets-browser/reducers\";\r\nimport {aceEditorReducer} from \"./ace-editor/reducers\";\r\n\r\n\r\nexport default combineReducers({\r\n  modalSettings: modalSettingsReducer,\r\n  adminState: changeEnableState,\r\n  adminLogo: adminLogoReducer,\r\n  assetsManagerSettings: assetsSettingsReducer,\r\n  aceEditorReducer: aceEditorReducer,\r\n});\r\n","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nconst store = createStore(rootReducer);\r\nexport default store;","export const SET_MODAL_SETTINGS = 'SET_MODAL_SETTINGS';\r\nexport const TOGGLE_MODAL = 'TOGGLE_MODAL';\r\n\r\nexport function setModalSettings(settings){\r\n  return {\r\n    ...settings,\r\n    type: SET_MODAL_SETTINGS,\r\n  }\r\n}\r\n\r\nexport function toggleModal(){\r\n  return {\r\n    type: TOGGLE_MODAL,\r\n  }\r\n}\r\n","/**\r\n * Имеет интерфейс пользователя\r\n * @class AltrpUser\r\n */\r\n\r\nimport AltrpModel from \"./AltrpModel\";\r\n\r\nclass AltrpUser extends AltrpModel{\r\n  /**\r\n   * Проверяет является ли пользователь гостем\r\n   * @return {boolean}\r\n   */\r\n  isGuest(){\r\n    return this.getProperty('is_guest', false)\r\n  }\r\n  /**\r\n   * Проверяет является ли авторизованным пользователем\r\n   * @return {boolean}\r\n   */\r\n  isAuth(){\r\n    return this.getProperty('created_at', false)\r\n  }\r\n\r\n  /**\r\n   * Проверяет наличие permission у пользователя\r\n   * @param {[]} permissions\r\n   * $return {boolean}\r\n   */\r\n  hasPermissions(permissions = []){\r\n    if(! _.isArray(permissions)){\r\n      permissions = [permissions];\r\n    }\r\n    let ownPermissions = this.getProperty('permissions', []);\r\n    return _.find(ownPermissions, ownPermission => {\r\n      return _.find(permissions, permission => {\r\n        if(parseInt(permission)){\r\n          return parseInt(permission) === parseInt(ownPermission.id);\r\n        }\r\n        if(_.isString(permission)){\r\n          return permission === ownPermission.name;\r\n        }\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * Проверяет наличие роли у пользователя\r\n   * @param {[]} roles\r\n   * $return {boolean}\r\n   */\r\n  hasRoles(roles = []){\r\n    if(! _.isArray(roles)){\r\n      roles = [roles];\r\n    }\r\n    let ownRoles = this.getProperty('roles', []);\r\n    return _.find(ownRoles, ownRole => {\r\n      return _.find(roles, role => {\r\n        if(parseInt(role)){\r\n          return parseInt(role) === parseInt(ownRole.id);\r\n        }\r\n        if(_.isString(role)){\r\n          return role === ownRole.name;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Проверяет доступ пользователя по необходимым роля и разрешениям\r\n   * @param {[]} permissions\r\n   * @param {[]} roles\r\n   * $return {boolean}\r\n   *\r\n   */\r\n  checkUserAllowed(permissions = [], roles = []){\r\n    if(! this.isAuth()){\r\n      return false;\r\n    }\r\n    roles = _.isArray(roles) ? roles : [];\r\n    permissions = _.isArray(permissions) ? permissions : [];\r\n    if(! (permissions.length || roles.length)){\r\n      return true;\r\n    }\r\n    if(this.hasPermissions(permissions)){\r\n      return true;\r\n    }\r\n    if(this.hasRoles(roles)){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default AltrpUser","import {CHANGE_CURRENT_USER} from './actions'\r\nimport AltrpUser from \"../../../../../editor/src/js/classes/AltrpUser\";\r\n\r\nconst defaultModel = {\r\n  \r\n};\r\n\r\nexport function currentUserReducer(user, action) {\r\n  user = user || defaultModel;\r\n  switch (action.type) {\r\n    case CHANGE_CURRENT_USER:{\r\n      user = action.user;\r\n    }break;\r\n  }\r\n  if(user instanceof AltrpUser){\r\n    return user;\r\n  }\r\n  return new AltrpUser(user);\r\n}","export const CHANGE_CURRENT_USER = 'CHANGE_CURRENT_USER';\r\n\r\nexport function changeCurrentUser(user) {\r\n  return {\r\n    type: CHANGE_CURRENT_USER,\r\n    user: user || {},\r\n  };\r\n}\r\n\r\n","import {CHANGE_CURRENT_MODEL} from './actions'\r\nimport AltrpModel from \"../../../../../editor/src/js/classes/AltrpModel\";\r\n\r\nconst defaultModel = {\r\n  \r\n};\r\n\r\nexport function currentModelReducer(model, action) {\r\n  model = model || defaultModel;\r\n  switch (action.type) {\r\n    case CHANGE_CURRENT_MODEL:{\r\n      model = action.model;\r\n    }break;\r\n  }\r\n  if(model instanceof AltrpModel){\r\n    return model;\r\n  }\r\n  return new AltrpModel(model);\r\n}","export const CHANGE_CURRENT_MODEL = 'CHANGE_CURRENT_MODEL';\r\n\r\nexport function changeCurrentModel(model) {\r\n  return {\r\n    type: CHANGE_CURRENT_MODEL,\r\n    model\r\n  };\r\n}\r\n\r\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./admin-style.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/sass-loader/dist/cjs.js!./admin-pagination.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/sass-loader/dist/cjs.js!./assets-browser.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var map = {\n\t\"./af\": 166,\n\t\"./af.js\": 166,\n\t\"./ar\": 167,\n\t\"./ar-dz\": 168,\n\t\"./ar-dz.js\": 168,\n\t\"./ar-kw\": 169,\n\t\"./ar-kw.js\": 169,\n\t\"./ar-ly\": 170,\n\t\"./ar-ly.js\": 170,\n\t\"./ar-ma\": 171,\n\t\"./ar-ma.js\": 171,\n\t\"./ar-sa\": 172,\n\t\"./ar-sa.js\": 172,\n\t\"./ar-tn\": 173,\n\t\"./ar-tn.js\": 173,\n\t\"./ar.js\": 167,\n\t\"./az\": 174,\n\t\"./az.js\": 174,\n\t\"./be\": 175,\n\t\"./be.js\": 175,\n\t\"./bg\": 176,\n\t\"./bg.js\": 176,\n\t\"./bm\": 177,\n\t\"./bm.js\": 177,\n\t\"./bn\": 178,\n\t\"./bn.js\": 178,\n\t\"./bo\": 179,\n\t\"./bo.js\": 179,\n\t\"./br\": 180,\n\t\"./br.js\": 180,\n\t\"./bs\": 181,\n\t\"./bs.js\": 181,\n\t\"./ca\": 182,\n\t\"./ca.js\": 182,\n\t\"./cs\": 183,\n\t\"./cs.js\": 183,\n\t\"./cv\": 184,\n\t\"./cv.js\": 184,\n\t\"./cy\": 185,\n\t\"./cy.js\": 185,\n\t\"./da\": 186,\n\t\"./da.js\": 186,\n\t\"./de\": 187,\n\t\"./de-at\": 188,\n\t\"./de-at.js\": 188,\n\t\"./de-ch\": 189,\n\t\"./de-ch.js\": 189,\n\t\"./de.js\": 187,\n\t\"./dv\": 190,\n\t\"./dv.js\": 190,\n\t\"./el\": 191,\n\t\"./el.js\": 191,\n\t\"./en-au\": 192,\n\t\"./en-au.js\": 192,\n\t\"./en-ca\": 193,\n\t\"./en-ca.js\": 193,\n\t\"./en-gb\": 194,\n\t\"./en-gb.js\": 194,\n\t\"./en-ie\": 195,\n\t\"./en-ie.js\": 195,\n\t\"./en-il\": 196,\n\t\"./en-il.js\": 196,\n\t\"./en-in\": 197,\n\t\"./en-in.js\": 197,\n\t\"./en-nz\": 198,\n\t\"./en-nz.js\": 198,\n\t\"./en-sg\": 199,\n\t\"./en-sg.js\": 199,\n\t\"./eo\": 200,\n\t\"./eo.js\": 200,\n\t\"./es\": 201,\n\t\"./es-do\": 202,\n\t\"./es-do.js\": 202,\n\t\"./es-us\": 203,\n\t\"./es-us.js\": 203,\n\t\"./es.js\": 201,\n\t\"./et\": 204,\n\t\"./et.js\": 204,\n\t\"./eu\": 205,\n\t\"./eu.js\": 205,\n\t\"./fa\": 206,\n\t\"./fa.js\": 206,\n\t\"./fi\": 207,\n\t\"./fi.js\": 207,\n\t\"./fil\": 208,\n\t\"./fil.js\": 208,\n\t\"./fo\": 209,\n\t\"./fo.js\": 209,\n\t\"./fr\": 210,\n\t\"./fr-ca\": 211,\n\t\"./fr-ca.js\": 211,\n\t\"./fr-ch\": 212,\n\t\"./fr-ch.js\": 212,\n\t\"./fr.js\": 210,\n\t\"./fy\": 213,\n\t\"./fy.js\": 213,\n\t\"./ga\": 214,\n\t\"./ga.js\": 214,\n\t\"./gd\": 215,\n\t\"./gd.js\": 215,\n\t\"./gl\": 216,\n\t\"./gl.js\": 216,\n\t\"./gom-deva\": 217,\n\t\"./gom-deva.js\": 217,\n\t\"./gom-latn\": 218,\n\t\"./gom-latn.js\": 218,\n\t\"./gu\": 219,\n\t\"./gu.js\": 219,\n\t\"./he\": 220,\n\t\"./he.js\": 220,\n\t\"./hi\": 221,\n\t\"./hi.js\": 221,\n\t\"./hr\": 222,\n\t\"./hr.js\": 222,\n\t\"./hu\": 223,\n\t\"./hu.js\": 223,\n\t\"./hy-am\": 224,\n\t\"./hy-am.js\": 224,\n\t\"./id\": 225,\n\t\"./id.js\": 225,\n\t\"./is\": 226,\n\t\"./is.js\": 226,\n\t\"./it\": 227,\n\t\"./it-ch\": 228,\n\t\"./it-ch.js\": 228,\n\t\"./it.js\": 227,\n\t\"./ja\": 229,\n\t\"./ja.js\": 229,\n\t\"./jv\": 230,\n\t\"./jv.js\": 230,\n\t\"./ka\": 231,\n\t\"./ka.js\": 231,\n\t\"./kk\": 232,\n\t\"./kk.js\": 232,\n\t\"./km\": 233,\n\t\"./km.js\": 233,\n\t\"./kn\": 234,\n\t\"./kn.js\": 234,\n\t\"./ko\": 235,\n\t\"./ko.js\": 235,\n\t\"./ku\": 236,\n\t\"./ku.js\": 236,\n\t\"./ky\": 237,\n\t\"./ky.js\": 237,\n\t\"./lb\": 238,\n\t\"./lb.js\": 238,\n\t\"./lo\": 239,\n\t\"./lo.js\": 239,\n\t\"./lt\": 240,\n\t\"./lt.js\": 240,\n\t\"./lv\": 241,\n\t\"./lv.js\": 241,\n\t\"./me\": 242,\n\t\"./me.js\": 242,\n\t\"./mi\": 243,\n\t\"./mi.js\": 243,\n\t\"./mk\": 244,\n\t\"./mk.js\": 244,\n\t\"./ml\": 245,\n\t\"./ml.js\": 245,\n\t\"./mn\": 246,\n\t\"./mn.js\": 246,\n\t\"./mr\": 247,\n\t\"./mr.js\": 247,\n\t\"./ms\": 248,\n\t\"./ms-my\": 249,\n\t\"./ms-my.js\": 249,\n\t\"./ms.js\": 248,\n\t\"./mt\": 250,\n\t\"./mt.js\": 250,\n\t\"./my\": 251,\n\t\"./my.js\": 251,\n\t\"./nb\": 252,\n\t\"./nb.js\": 252,\n\t\"./ne\": 253,\n\t\"./ne.js\": 253,\n\t\"./nl\": 254,\n\t\"./nl-be\": 255,\n\t\"./nl-be.js\": 255,\n\t\"./nl.js\": 254,\n\t\"./nn\": 256,\n\t\"./nn.js\": 256,\n\t\"./oc-lnc\": 257,\n\t\"./oc-lnc.js\": 257,\n\t\"./pa-in\": 258,\n\t\"./pa-in.js\": 258,\n\t\"./pl\": 259,\n\t\"./pl.js\": 259,\n\t\"./pt\": 260,\n\t\"./pt-br\": 261,\n\t\"./pt-br.js\": 261,\n\t\"./pt.js\": 260,\n\t\"./ro\": 262,\n\t\"./ro.js\": 262,\n\t\"./ru\": 263,\n\t\"./ru.js\": 263,\n\t\"./sd\": 264,\n\t\"./sd.js\": 264,\n\t\"./se\": 265,\n\t\"./se.js\": 265,\n\t\"./si\": 266,\n\t\"./si.js\": 266,\n\t\"./sk\": 267,\n\t\"./sk.js\": 267,\n\t\"./sl\": 268,\n\t\"./sl.js\": 268,\n\t\"./sq\": 269,\n\t\"./sq.js\": 269,\n\t\"./sr\": 270,\n\t\"./sr-cyrl\": 271,\n\t\"./sr-cyrl.js\": 271,\n\t\"./sr.js\": 270,\n\t\"./ss\": 272,\n\t\"./ss.js\": 272,\n\t\"./sv\": 273,\n\t\"./sv.js\": 273,\n\t\"./sw\": 274,\n\t\"./sw.js\": 274,\n\t\"./ta\": 275,\n\t\"./ta.js\": 275,\n\t\"./te\": 276,\n\t\"./te.js\": 276,\n\t\"./tet\": 277,\n\t\"./tet.js\": 277,\n\t\"./tg\": 278,\n\t\"./tg.js\": 278,\n\t\"./th\": 279,\n\t\"./th.js\": 279,\n\t\"./tk\": 280,\n\t\"./tk.js\": 280,\n\t\"./tl-ph\": 281,\n\t\"./tl-ph.js\": 281,\n\t\"./tlh\": 282,\n\t\"./tlh.js\": 282,\n\t\"./tr\": 283,\n\t\"./tr.js\": 283,\n\t\"./tzl\": 284,\n\t\"./tzl.js\": 284,\n\t\"./tzm\": 285,\n\t\"./tzm-latn\": 286,\n\t\"./tzm-latn.js\": 286,\n\t\"./tzm.js\": 285,\n\t\"./ug-cn\": 287,\n\t\"./ug-cn.js\": 287,\n\t\"./uk\": 288,\n\t\"./uk.js\": 288,\n\t\"./ur\": 289,\n\t\"./ur.js\": 289,\n\t\"./uz\": 290,\n\t\"./uz-latn\": 291,\n\t\"./uz-latn.js\": 291,\n\t\"./uz.js\": 290,\n\t\"./vi\": 292,\n\t\"./vi.js\": 292,\n\t\"./x-pseudo\": 293,\n\t\"./x-pseudo.js\": 293,\n\t\"./yo\": 294,\n\t\"./yo.js\": 294,\n\t\"./zh-cn\": 295,\n\t\"./zh-cn.js\": 295,\n\t\"./zh-hk\": 296,\n\t\"./zh-hk.js\": 296,\n\t\"./zh-mo\": 297,\n\t\"./zh-mo.js\": 297,\n\t\"./zh-tw\": 298,\n\t\"./zh-tw.js\": 298\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 434;","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"100\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M50.004 7.797l-2.407 5.525c0 1.333.306 2.36.927 3.065.204.238.519.46.952.667l-.697 1.962a3.67 3.67 0 01-1.616-1.089 6.62 6.62 0 01-.808-1.187c-.544.82-1.156 1.387-1.854 1.686-.527.237-1.173.352-1.947.352-1.557 0-2.858-.498-3.887-1.502C37.553 16.211 37 14.77 37 12.946c0-.636.042-1.21.128-1.708.085-.498.238-.973.45-1.418.451-.904 1.055-1.594 1.829-2.069.774-.475 1.667-.713 2.687-.713.944 0 1.76.17 2.45.499.97.46 1.684 1.21 2.126 2.252l1.42-2.804 1.914.812zM45.403 13.3a1 1 0 00.025-.268v-.169a.317.317 0 00-.025-.122c0-.973-.306-1.84-.91-2.598-.613-.759-1.285-1.134-2.025-1.134-.875 0-1.59.337-2.126 1.019-.587.736-.876 1.763-.876 3.088 0 1.21.298 2.138.902 2.774.536.567 1.216.858 2.032.858.57 0 1.038-.153 1.387-.46.578-.52 1.122-1.509 1.616-2.988zM61.97 18.617h-2.517l-2.62-6.445-.62-1.77-.647 1.816-2.543 6.399h-2.688l4.627-11.05a39.743 39.743 0 01-.485-1.165 3.354 3.354 0 00-.255-.52c-.323-.46-.842-.69-1.548-.69-.246 0-.723.069-1.437.206l.28-2.13c.358-.1.647-.168.868-.207.221-.038.442-.061.663-.061 1.327 0 2.365.62 3.105 1.854.28.43.663 1.257 1.156 2.483l4.66 11.28zM72.363 9.238h-3.59v6.107c0 .444.018.728.043.858.034.123.12.238.28.338.154.068.358.107.605.107.187 0 .544-.039 1.088-.107l.374 2.022c-.28.054-.663.108-1.156.146a16.56 16.56 0 01-1.02.061c-.775 0-1.378-.107-1.82-.322a1.994 1.994 0 01-.962-.95c-.093-.207-.161-.482-.204-.835-.042-.345-.068-.82-.068-1.418V9.238l-1.667-.023c-.357 0-.689.145-.995.437-.093.1-.212.252-.374.46l-1.616-1.48c.306-.375.57-.65.79-.835.681-.56 1.413-.835 2.204-.835l8.096.023v2.253h-.008zM84.26 9.674c.417.904.622 1.947.622 3.127 0 1.226-.222 2.283-.672 3.172a5.093 5.093 0 01-1.965 2.107 5.39 5.39 0 01-2.798.774c-.604 0-1.08-.053-1.437-.168-.494-.154-.995-.453-1.506-.897V23h-2.798l.026-10.696c0-2.154.808-3.702 2.432-4.629 1.004-.567 2.144-.858 3.428-.858 1.063 0 1.998.245 2.815.743.8.49 1.42 1.196 1.854 2.115zm-2.797-.046c-.579-.636-1.267-.958-2.084-.958-.8 0-1.514.337-2.126 1.02-.29.337-.519.804-.68 1.41a7.628 7.628 0 00-.247 1.969c0 1.333.289 2.314.876 2.942.587.629 1.284.935 2.084.935.833 0 1.547-.322 2.151-.958.29-.337.519-.781.68-1.356a6.845 6.845 0 00.247-1.877c0-.682-.076-1.288-.22-1.817a3.324 3.324 0 00-.681-1.31zM99.306 9.192l-1.387-.023-.025 9.448h-2.62v-9.44h-4.303v9.448h-2.568V9.199c-.154 0-.34.054-.57.154a3.502 3.502 0 00-.774.551l-1.71-1.54c.63-.56 1.191-.92 1.667-1.096.477-.176 1.02-.26 1.616-.26h10.674v2.184z\" fill=\"#fff\" /><circle cx=\"12\" cy=\"12\" r=\"12\" fill=\"#D9FF8D\" /><path d=\"M17.603 7.85l-1.926 4.42c0 1.067.245 1.888.742 2.452.163.19.415.368.762.533l-.558 1.57a2.936 2.936 0 01-1.293-.87 5.287 5.287 0 01-.646-.951c-.435.656-.925 1.11-1.483 1.349-.422.19-.939.282-1.558.282-1.245 0-2.286-.399-3.11-1.202-.89-.852-1.333-2.005-1.333-3.463 0-.51.034-.969.102-1.368.068-.398.19-.778.36-1.134.361-.723.844-1.275 1.463-1.655.62-.38 1.334-.57 2.15-.57.756 0 1.409.135 1.96.399.776.367 1.347.968 1.7 1.802L16.073 7.2l1.53.65zm-3.68 4.402a.8.8 0 00.02-.215v-.135a.254.254 0 00-.02-.098c0-.779-.246-1.471-.729-2.078-.49-.607-1.027-.907-1.62-.907-.7 0-1.271.27-1.7.815-.47.588-.701 1.41-.701 2.47 0 .969.238 1.71.721 2.22.429.453.973.686 1.626.686.456 0 .83-.122 1.11-.368.462-.416.897-1.207 1.292-2.39z\" fill=\"#343B4C\" /></svg>);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport DefaultLogo from '../svgs/admin__logo.svg'\r\nimport {renderAsset} from \"../../../front-app/src/js/helpers\";\r\n\r\nclass AdminLogo extends Component {\r\n  constructor(props){\r\n    super(props);\r\n  }\r\n  render(){\r\n    return <a href='/' target=\"_blank\" className=\"admin__logo\">{this.props.adminLogo.assetType\r\n        ? renderAsset(this.props.adminLogo)\r\n        : <DefaultLogo />}\r\n    </a>;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    adminLogo: state.adminLogo\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AdminLogo);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"19\" height=\"14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fill=\"#fff\" d=\"M0 0h19v2H0zM0 6h19v2H0V6zM0 12h19v2H0z\" /></svg>);","import React, {Component} from \"react\";\r\nimport {Link} from 'react-router-dom'\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nclass AdminTable extends Component {\r\n\r\n  /**\r\n   * Фильтр по ыыеденной строк\r\n   * @param {{}} e\r\n   */\r\n  filterByKeyboard = (e) => {\r\n\r\n    if (_.isFunction(this.props.filterByKeyboard)) {\r\n      this.props.filterByKeyboard(e.target.value);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {search} = this.props;\r\n    return <div className=\"admin-table\">\r\n      {search && <div className=\"admin-table\">\r\n        <input value={search.value} onChange={search.changeHandler} type=\"text\" className=\"form-group\"/>\r\n      </div>}\r\n      <table>\r\n        <thead className=\"admin-table-head\">\r\n        <tr className=\"admin-table-row\">\r\n          <td className=\"admin-table__td admin-table__td_check\"><input type=\"checkbox\"/></td>\r\n          {this.props.columns.map(column =>\r\n              <td className=\"admin-table__td \" key={column.name} title={column.name}>{column.title}</td>)}\r\n        </tr>\r\n        </thead>\r\n        <tbody className=\"admin-table-body\">\r\n        {\r\n          this.props.rows.map((row) =>\r\n              <tr className=\"admin-table-row\" key={row.id} title={row.id}>\r\n                <td className=\"admin-table__td admin-table__td_check\" key={'choose' + row.id} title={'choose' + row.id}>\r\n                  <input type=\"checkbox\"/></td>\r\n                {\r\n                  this.props.columns.map((column, index) => {\r\n                        let tag = 'span';\r\n                        let props = {\r\n                          className: 'td__content',\r\n                          children: [row[column.name]]\r\n                        };\r\n                        if (column.url && row.url) {\r\n                          tag = 'a';\r\n                          props.href = row.url;\r\n                          if (column.target) {\r\n                            props.target = column.target;\r\n                          }\r\n                        }\r\n                        if (column.editUrl && row.editUrl) {\r\n                          tag = (column.tag === 'Link') ? Link : 'a';\r\n                          props.href = row.editUrl;\r\n                          if (column.tag === 'Link') {\r\n                            props.to = {\r\n                              pathname: row.editUrl,\r\n                              data: row\r\n                            }\r\n                          }\r\n                          if (column.target) {\r\n                            props.target = column.target;\r\n                          }\r\n                        }\r\n                        if (column.is_button) {\r\n                          tag = 'button';\r\n                          props.title = column.button.title;\r\n                          props.children = column.button.title;\r\n                          props.onClick = () => {\r\n                            column.button.function(row)\r\n                          };\r\n                        }\r\n                        if (column.is_boolean) {\r\n                          props.children = [row[column.name].toString()];\r\n                        }\r\n\r\n                        return <td className=\"admin-table__td td\" key={column.name + row.id} title={column.name + row.id}>\r\n\r\n                          {React.createElement(tag, props)}\r\n                          {index === 0 && <span className=\"quick-action-menu\">\r\n                    {this.props.quickActions && this.props.quickActions.map((quickAction, index) => {\r\n                      let item = '';\r\n                      switch (quickAction.tag) {\r\n                        case 'a': {\r\n                          let href = quickAction.props.href.replace(':id', row.id);\r\n\r\n                          item = <a\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              href={href}\r\n                          >{quickAction.title}</a>;\r\n                        }\r\n                          break;\r\n                        case 'Link': {\r\n                          let href = quickAction.props.href.replace(':id', row.id);\r\n\r\n                          item = <Link\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              to={href}\r\n                          >{quickAction.title}</Link>;\r\n                        }\r\n                        break;\r\n                        case 'button':\r\n                          let route = quickAction.route.replace(':id', row.id);\r\n                          item = <button\r\n                              className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                              {...quickAction.props || {}}\r\n                              onClick={async () => {\r\n                                if (quickAction.confirm) {\r\n                                  if (!await confirm(quickAction.confirm)) {\r\n                                    return;\r\n                                  }\r\n                                }\r\n                                const resource = new Resource({route});\r\n                                if (_.isFunction(resource[quickAction.method])) {\r\n                                  let response;\r\n                                  switch (quickAction.method) {\r\n                                    case 'get':\r\n                                      response = await resource[quickAction.method](row.id);\r\n                                      break;\r\n\r\n                                    default:\r\n                                      response = await resource[quickAction.method]();\r\n                                      break;\r\n                                  }\r\n                                  _.isFunction(quickAction.after) ? quickAction.after(response) : ''\r\n                                }\r\n                              }}\r\n                          >{quickAction.title}</button>;\r\n                          break;\r\n                          // case 'button': {\r\n                          //   let route = quickAction.route.replace(':id', row.id);\r\n                          //   item = <button\r\n                          //       className={'quick-action-menu__item ' + (quickAction.className || '')}\r\n                          //       {...quickAction.props || {}}\r\n                          //       onClick={async () => {\r\n                          //         if (quickAction.confirm) {\r\n                          //           if (!await confirm(quickAction.confirm)) {\r\n                          //             return;\r\n                          //           }\r\n                          //         }\r\n                          //         let resource = new Resource({route: route});\r\n                          //         if (_.isFunction(resource[quickAction.method])) {\r\n                          //           await resource[quickAction.method]();\r\n                          //           _.isFunction(quickAction.after) ? quickAction.after() : ''\r\n                          //         }\r\n                          //       }}\r\n                          //   >{quickAction.title}</button>;\r\n                          // }\r\n                          // break;\r\n\r\n                        default:\r\n                          break;\r\n                      }\r\n                      return <span className=\"quick-action-menu__item_wrapper\" key={index + row.id}>{item}</span>;\r\n                    })}\r\n                  </span>}\r\n                        </td>\r\n                      }\r\n                  )\r\n                }\r\n              </tr>)\r\n        }\r\n        </tbody>\r\n      </table>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default AdminTable","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport AdminTable from \"./AdminTable\";\r\n\r\n\r\nexport default class AllPages extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      pages: [],\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/pages'});\r\n  }\r\n\r\n  getPages = async () => {\r\n    let res = await this.resource.getAll();\r\n    this.setState(state => {\r\n      return { ...state, pages: res }\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getPages();\r\n  }\r\n\r\n  render(){\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Pages</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Pages</span>\r\n        </div>\r\n        <Link className=\"btn\" to=\"/admin/pages/add\">Add New</Link>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({this.state.pages.length || '0'})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AdminTable columns={[\r\n            {\r\n              name: 'title',\r\n              title: 'Title',\r\n              editUrl: true,\r\n              tag: 'Link'\r\n            },\r\n            {\r\n              name: 'author',\r\n              title: 'Author'\r\n            },\r\n            {\r\n              name: 'path',\r\n              title: 'Path',\r\n              url: true,\r\n              target: '_blank',\r\n            },\r\n          ]} \r\n          quickActions={[\r\n            {\r\n            tag: 'button',\r\n            route: `/admin/ajax/pages/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: this.getPages,\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n           }\r\n          ]}\r\n          rows={this.state.pages}/>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}","import IconsManager from \"../../../editor/src/js/classes/modules/IconsManager\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport { isEmpty } from \"lodash\";\r\n\r\nexport function redirect(url) {\r\n  url = url || '/';\r\n  window.location.assign(url);\r\n}\r\nexport function generateId() {\r\n  return '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n/**\r\n * @return {IconsManager}\r\n* */\r\nexport function iconsManager() {\r\n  if (!window.iconsManager) {\r\n    window.iconsManager = new IconsManager();\r\n  }\r\n  return window.iconsManager;\r\n}\r\n\r\nexport async function logout() {\r\n  let res = await (new Resource({ route: '/logout' })).post();\r\n  redirect(res.location)\r\n}\r\n\r\nexport function pageReload() {\r\n  document.location.reload(true);\r\n}\r\n\r\nconst a = { \"Ё\": \"Yo\", \"Й\": \"I\", \"Ц\": \"Ts\", \"У\": \"U\", \"К\": \"K\", \"Е\": \"E\", \"Н\": \"N\", \"Г\": \"G\", \"Ш\": \"Sh\", \"Щ\": \"Sch\", \"З\": \"Z\", \"Х\": \"H\", \"Ъ\": \"\", \"ё\": \"yo\", \"й\": \"i\", \"ц\": \"ts\", \"у\": \"u\", \"к\": \"k\", \"е\": \"e\", \"н\": \"n\", \"г\": \"g\", \"ш\": \"sh\", \"щ\": \"sch\", \"з\": \"z\", \"х\": \"h\", \"ъ\": \"\", \"Ф\": \"F\", \"Ы\": \"I\", \"В\": \"V\", \"А\": \"a\", \"П\": \"P\", \"Р\": \"R\", \"О\": \"O\", \"Л\": \"L\", \"Д\": \"D\", \"Ж\": \"ZH\", \"Э\": \"E\", \"ф\": \"f\", \"ы\": \"i\", \"в\": \"v\", \"а\": \"a\", \"п\": \"p\", \"р\": \"r\", \"о\": \"o\", \"л\": \"l\", \"д\": \"d\", \"ж\": \"zh\", \"э\": \"e\", \"Я\": \"Ya\", \"Ч\": \"CH\", \"С\": \"S\", \"М\": \"M\", \"И\": \"I\", \"Т\": \"T\", \"Ь\": \"\", \"Б\": \"B\", \"Ю\": \"YU\", \"я\": \"ya\", \"ч\": \"ch\", \"с\": \"s\", \"м\": \"m\", \"и\": \"i\", \"т\": \"t\", \"ь\": \"\", \"б\": \"b\", \"ю\": \"yu\" };\r\n\r\n/**\r\n * Транслитерация\r\n * @param {string}str\r\n * @return {string}\r\n */\r\nexport function transliterate(str) {\r\n  return str.split('').map(function (char) {\r\n    return _.isUndefined(a[char]) ? char : a[char];\r\n  }).join(\"\");\r\n}\r\n\r\n/**\r\n * Парсит строку в name для БД\r\n * @param {string}str\r\n * @return {string}\r\n */\r\nexport function titleToName(str) {\r\n  str = transliterate(str);\r\n  return str.toLowerCase().replace(/^\\d+/, '').replace(/[^\\d\\w]/g, '_');\r\n\r\n}\r\n/** @function objectDeepCleaning\r\n  * Удаляет все свойства id, и чистит settings\r\n  * @param {object} collection\r\n  * @return {object} Объект после удаления всех свойств id, и чистки settings\r\n */\r\nexport function objectDeepCleaning(collection) {\r\n  if (typeof collection !== \"object\" || collection === null) return collection;\r\n  if (collection.id) delete collection.id;\r\n\r\n  if (Array.isArray(collection)) {\r\n    for (let index = 0; index < collection.length; index++) {\r\n      const element = collection[index];\r\n      objectDeepCleaning(element);\r\n    }\r\n  } else {\r\n    if (collection.hasOwnProperty(\"settings\")) deleteEmptyPropsDeep(collection.settings);\r\n    if (isEmpty(collection.settings)) delete collection.settings; // удаляем settings, если оно - пустой объект\r\n    for (const key in collection) {\r\n      if (collection.hasOwnProperty(key)) {\r\n        const element = collection[key];\r\n        objectDeepCleaning(element);\r\n      }\r\n    }\r\n  }\r\n  return collection;\r\n}\r\n/** @function deleteEmptyPropsDeep\r\n  * Удаляет в объекте все свойства, значения которых - null, или \"\", или {}\r\n  * @param {object} collection\r\n */\r\nexport function deleteEmptyPropsDeep(collection) {\r\n  const deleteProps = [];\r\n  for (const key in collection) {\r\n    if (collection[key] === null || collection[key] === \"\") {\r\n      deleteProps.push(key);\r\n    }\r\n    deleteProps.forEach(key => delete collection[key]);\r\n\r\n    if (typeof collection[key] === \"object\") {\r\n      deleteEmptyPropsDeep(collection[key]);\r\n      if (isEmpty(collection[key])) delete collection[key];\r\n    }\r\n  }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {setAdminDisable, setAdminEnable} from \"../js/store/admin-state/actions\";\r\nimport store from '../js/store/store';\r\nimport {pageReload} from \"../js/helpers\";\r\n\r\n/**\r\n * Компонент вкладки обновления админки\r\n * @class\r\n */\r\nclass Updates extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      needUpdate: false,\r\n    };\r\n    this.updateAltrp = this.updateAltrp.bind(this);\r\n  }\r\n  async componentDidMount(){\r\n    store.dispatch(setAdminDisable());\r\n    let res = await (new Resource({route:'/admin/ajax/check_update'})).post( {});\r\n    if(res.result){\r\n      this.setNeedUpdate();\r\n    }\r\n    store.dispatch(setAdminEnable());\r\n  }\r\n\r\n  /**\r\n   * Вызывается, если нужно обновление\r\n   */\r\n  setNeedUpdate() {\r\n    this.setState(state => {\r\n      return {...state, needUpdate: true};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Вызывается, если не нужно обновление\r\n   */\r\n  setDontNeedUpdate() {\r\n    this.setState(state => {\r\n      return {...state, needUpdate: false};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Отправляет запрос на обноление приложения\r\n   */\r\n  async updateAltrp(){\r\n    store.dispatch(setAdminDisable());\r\n    let res = await (new Resource({route:'/admin/ajax/update_altrp'})).post( {});\r\n    setTimeout(()=>{\r\n          res.result ? pageReload() : this.setNeedUpdate();\r\n        }\r\n    ,1300);\r\n    // store.dispatch(setAdminEnable());\r\n  }\r\n\r\n  render() {\r\n    let data = {\r\n      updateMessage: 'You have the latest version of Altrp.',\r\n    };\r\n    if (this.state.needUpdate) {\r\n      data.updateMessage = 'A fresh version of Altrp is available for updating.';\r\n    }\r\n    return <div className=\"admin-updates p-4\">\r\n      <div className=\"admin-caption mt-1\">\r\n        {data.updateMessage}\r\n      </div>\r\n      {\r\n        this.state.needUpdate ?\r\n          <button className=\"btn_success btn\" onClick={this.updateAltrp}>Update</button>\r\n          :  <button className=\"btn\">Re-install Now</button>}\r\n    </div>\r\n\r\n  }\r\n}\r\n\r\nexport default Updates;","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nclass AutoUpdateInput extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.resource = new Resource({\r\n      route: this.props.route,\r\n    });\r\n\r\n    this.state = {\r\n      value: this.props.value || '',\r\n      disabled: ! this.props.value,\r\n    };\r\n    this.changeValue = this.changeValue.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n  }\r\n  async componentDidMount(){\r\n    if(this.props.value !== undefined){\r\n      return;\r\n    }\r\n    let res = await this.resource.get(this.props.resourceid);\r\n    this.setState(state=>{\r\n      return{...state,\r\n        value: res[this.props.resourceid] || '',\r\n        disabled: false,\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * При нажатии на enter тоже обновдем данные\r\n   * @param e\r\n   */\r\n  onKeyDown(e){\r\n    if(e.keyCode === 13){\r\n      this.changeValue(e);\r\n    }\r\n  }\r\n\r\n  onChange(e){\r\n    let newValue = e.target.value;\r\n    this.setState(state=>{\r\n      return{...state,\r\n        value: newValue,\r\n      }\r\n    });\r\n    if(_.isFunction(this.props.changevalue)){\r\n      this.props.changevalue(newValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Запрос на именение поля\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n  async changeValue(e){\r\n    let newValue = e.target.value;\r\n    this.setState(state=>{\r\n      return{...state,\r\n        disabled: true,\r\n      }\r\n    });\r\n    let res = await this.resource.put(this.props.resourceid, {value: newValue, column_value: newValue});\r\n    this.setState(state=>{\r\n      return{...state,\r\n        disabled: false,\r\n      }\r\n    });\r\n  }\r\n  render(){\r\n    let {className} = this.props;\r\n    if(this.state.disabled){\r\n      className += ' pointer-event-none';\r\n    }\r\n    const inputProps = {...this.props};\r\n    delete inputProps.changevalue;\r\n    return<input{...inputProps} className={className}\r\n                onBlur={this.changeValue}\r\n                onKeyDown={this.onKeyDown}\r\n                onChange={this.onChange}\r\n                value={this.state.value}/>\r\n  }\r\n}\r\n\r\nexport default AutoUpdateInput","import React, {Component} from \"react\";\r\nimport AutoUpdateInput from \"./AutoUpdateInput\";\r\n\r\nclass StylesSettings extends Component {\r\n  render() {\r\n    return <div className=\"admin-styles-settings\">\r\n      <table>\r\n        <tbody className=\"admin-settings-table-row\">\r\n        <tr className=\"admin-settings-table-row\">\r\n          <td className=\"admin-settings-table__td row-text\" width=\"10%\">\r\n            <label htmlFor=\"settings-container-width\">\r\n              Container Width\r\n            </label>\r\n          </td>\r\n          <td className=\"admin-settings-table__td\">\r\n            <AutoUpdateInput type=\"number\"\r\n                             route=\"/admin/ajax/settings\"\r\n                             resourceid=\"container_width\"\r\n                             id=\"settings-container-width\"\r\n                             className=\"form__input w-25\"/>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default StylesSettings","import Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass Import extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.inputFile = React.createRef();\r\n    this.resource = new Resource({route:'/admin/import/settings'});\r\n  }\r\n\r\n  /**\r\n   * Отправка формы\r\n   */\r\n  onSubmit  = async e => {\r\n    e.preventDefault();\r\n    let res = await this.resource.postFiles(this.inputFile.current.files, 'application/x-zip-compressed');\r\n    if( res.success ){\r\n      await alert('Success');\r\n      window.location.href = '/admin/dashboard';\r\n    } else {\r\n      alert('Error ' + res.message)\r\n    }\r\n  };\r\n  /**\r\n   * Отрисовываем вкладку импорта админки\r\n   */\r\n  render() {\r\n    return <form\r\n                 onSubmit={this.onSubmit}\r\n                 method=\"post\"\r\n                 className=\"admin-updates p-4\">\r\n      <div className=\"admin-caption mt-1\">\r\n        Export All App Settings in Archive\r\n      </div>\r\n      <input type=\"hidden\"\r\n             name=\"_token\"\r\n             value={_token}/>\r\n      <input type=\"file\"\r\n             ref={this.inputFile}\r\n             accept={'.zip,application/zip,application/x-zip,application/x-zip-compressed'}\r\n             name=\"file\"\r\n             required/>\r\n      <button className=\"btn_success btn\">Import ZIP Archive</button>\r\n    </form>\r\n  }\r\n}\r\n\r\nexport default Import","class Export extends Component {\r\n\r\n  /**\r\n   * Отрисовываем вкладку импорта админки\r\n   */\r\n  render() {\r\n    return <div className=\"admin-updates p-4\">\r\n      <div className=\"admin-caption mt-1\">\r\n        Export All App Settings in Archive\r\n      </div>\r\n\r\n      <a className=\"btn_success btn\"\r\n         href=\"/admin/downloads/settings\"\r\n      >Download ZIP Archive</a>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Export\r\n","import {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport Updates from \"./Updates\";\r\nimport StylesSettings from \"./StylesSettings\";\r\nimport Import from \"./settings/Import\";\r\nimport Export from \"./settings/Export\";\r\nconst AdvancedSettings = React.lazy(()=>import('./AdvancedSettings'));\r\n\r\n\r\nexport default class AdminSettings extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.switchTab = this.switchTab.bind(this);\r\n    this.state = {\r\n      activeTab: parseInt(window.location.hash[1]) || 0,\r\n    };\r\n  }\r\n\r\n  switchTab(activeTab){\r\n    window.location.hash = activeTab + '';\r\n    this.setState(state=>{return{ ...state,activeTab }})\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\"><a className=\"admin-breadcrumbs__link\" href=\"#\">Settings</a><span\r\n            className=\"admin-breadcrumbs__separator\">/</span><span\r\n            className=\"admin-breadcrumbs__current\">Builder</span></div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={this.state.activeTab}\r\n              onSelect={this.switchTab}\r\n        >\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Tab>\r\n              GENERAL\r\n            </Tab>\r\n            <Tab>\r\n              STYLE\r\n            </Tab>\r\n            <Tab >\r\n              INTEGRATIONS\r\n            </Tab>\r\n            <Tab >\r\n              ADVANCED\r\n            </Tab>\r\n            <Tab >\r\n              UPDATES\r\n            </Tab>\r\n            <Tab >\r\n              EXPORT\r\n            </Tab>\r\n            <Tab >\r\n              IMPORT\r\n            </Tab>\r\n          </TabList>\r\n          <TabPanel>\r\n            <table>\r\n              <tbody className=\"admin-table-body\">\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Post Types</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Pages<br/>\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>News\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Disable Default Colors</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Checking this box will disable\r\n                  Builder's Default Colors, and make Builder inherit the colors from your CSS file\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Disable Default Fonts</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Checking this box will disable\r\n                  Builder’s Default Fonts, and make Builder inherit the fonts from your CSS file\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td header-text\">Improve builder</td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td row-text\">Usage Data Sharing</td>\r\n                <td className=\"admin-settings-table__td \">\r\n                  <input className=\"admin-table__td_check\" type=\"checkbox\"/>Become a super contributor by\r\n                  opting in to share non-sensitive plugin data and to get our updates. Learn more\r\n                </td>\r\n              </tr>\r\n              <tr className=\"admin-settings-table-row\">\r\n                <td className=\"admin-settings-table__td\">\r\n                  <button className=\"admin-settings-button btn btn-sm\" type=\"button\">Save Changes</button>\r\n                </td>\r\n              </tr>\r\n\r\n              </tbody>\r\n            </table>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <StylesSettings/>\r\n          </TabPanel>\r\n          <TabPanel>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <React.Suspense fallback={'Loading'}>\r\n              <AdvancedSettings/>\r\n            </React.Suspense>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Updates attr={'attr'}/>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Export />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <Import />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M15.63 1.79h-1v12.48a.36.36 0 01-.36.36H1.79v1a.37.37 0 00.37.37h13.47a.36.36 0 00.37-.37V2.16a.37.37 0 00-.37-.37z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13.79 13.42V.37a.37.37 0 00-.37-.37H.37A.36.36 0 000 .37v13.05a.37.37 0 00.37.37h13.05a.38.38 0 00.37-.37zM10 2.71a1.4 1.4 0 11-1.4 1.4 1.4 1.4 0 011.4-1.4zm-8.8 9.91C1.27 11 2.1 8 3.3 6.83s2-.13 2.72.9a27.9 27.9 0 001.73 2.32c.81.81 1.49-.41 2.34-.81 1.23-.59 2.24 2.46 2.5 3.39z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.73 10.85\" {...props}><g data-name=\"Слой 2\"><path d=\"M8.87 0A8.88 8.88 0 000 8.87a9.67 9.67 0 00.16 1.69.37.37 0 00.36.29h16.69a.36.36 0 00.36-.29A8.88 8.88 0 008.87 0zm0 1a.93.93 0 11-.66 1.58A.93.93 0 018.87 1zM2 9.79a.93.93 0 11.92-.92.93.93 0 01-.92.92zm2.63-5.16a.88.88 0 01-.63.28.94.94 0 01-.95-.91.92.92 0 01.95-.95.94.94 0 01.91.95.88.88 0 01-.28.63zm5.78 5.09a2.33 2.33 0 11-3-3.58c1-.83 6.74-2.57 6.74-2.57S11.4 8.9 10.41 9.72zm5.37.07a.93.93 0 11.92-.92.93.93 0 01-.92.92z\" fill=\"#fff\" data-name=\"Слой 1\" /></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 13 17.35\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M10.33 15.72H1.6V2.64H.47a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.47h9.39a.47.47 0 00.47-.47z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13 .47a.47.47 0 00-.47-.47H3.14a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.46h9.39a.44.44 0 00.33-.14.43.43 0 00.14-.32z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17 16.96\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M4.31 2.67A.43.43 0 004 2.54a.41.41 0 00-.31.14c-2.54 2.8-1.16 8.86-1 9.46L.12 14.7A.41.41 0 000 15a.42.42 0 00.12.3l1.54 1.53a.41.41 0 00.6 0l2.55-2.55a17.77 17.77 0 004.19.51c1.65 0 3.91-.26 5.3-1.52a.5.5 0 00.14-.31.46.46 0 00-.13-.31zM8 5.19a.44.44 0 00.3.12.42.42 0 00.3-.12L11.76 2a1.17 1.17 0 00.34-.83 1.18 1.18 0 00-.34-.84 1.16 1.16 0 00-.84-.33 1.15 1.15 0 00-.84.35L6.92 3.51a.42.42 0 000 .6zM16.65 5.24a1.2 1.2 0 00-1.67 0l-3.17 3.17a.44.44 0 000 .6l1.08 1.07a.41.41 0 00.6 0l3.16-3.16a1.18 1.18 0 000-1.68z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M16.14 10H8.06L8 6V1.5c0-.5-.29-.39-.48-.37a8.46 8.46 0 109.31 9.64.69.69 0 00-.69-.79z\" /><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M10.38 0a.37.37 0 00-.27.09.36.36 0 00-.11.25V8h7.65a.36.36 0 00.25-.11.32.32 0 00.1-.25A8 8 0 0010.38 0z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17 16.6\" {...props}><g data-name=\"Слой 2\"><path d=\"M16.66 8.49l-1.5-.34a6.68 6.68 0 00-.55-2.49l1.16-1a.42.42 0 00.06-.61l-1.59-2A.41.41 0 0014 2a.46.46 0 00-.32.09L12.5 3a6.72 6.72 0 00-2.3-1.11V.43A.44.44 0 009.76 0H7.23a.43.43 0 00-.43.43v1.45A6.77 6.77 0 004.45 3l-1.14-.88A.46.46 0 003 2a.41.41 0 00-.29.16l-1.58 2a.44.44 0 00.07.61l1.18.93a6.56 6.56 0 00-.53 2.5l-1.5.35a.38.38 0 00-.27.19.43.43 0 00-.08.34l.57 2.46a.43.43 0 00.52.33l1.55-.36a6.66 6.66 0 001.57 1.93l-.69 1.45a.42.42 0 000 .33.45.45 0 00.22.25L6 16.56a.43.43 0 00.19 0h.15a.45.45 0 00.24-.23l.71-1.47a6.78 6.78 0 002.46 0l.71 1.47a.45.45 0 00.58.2l2.27-1.11a.39.39 0 00.22-.25.42.42 0 000-.33l-.7-1.45a6.67 6.67 0 001.56-1.94l1.54.34a.43.43 0 00.52-.33L17 9a.44.44 0 00-.34-.51zm-5.3-.16A2.86 2.86 0 118.5 5.47a2.86 2.86 0 012.86 2.86z\" fill=\"#fff\" data-name=\"Слой 1\" /></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M0 .2A.2.2 0 01.2 0h3.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 .2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2zM0 6.2A.2.2 0 01.2 6h3.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 6.2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M14.67 0H.33A.31.31 0 000 .28v3.09a.31.31 0 00.33.28h14.34a.31.31 0 00.33-.28V.28a.31.31 0 00-.33-.28zM9 5H6a.32.32 0 00-.33.32v2.22a.32.32 0 00.33.32h3a.32.32 0 00.33-.32V5.28A.32.32 0 009 5zM9 9.15H6a.32.32 0 00-.33.32v5.21A.32.32 0 006 15h3a.32.32 0 00.33-.32V9.47A.32.32 0 009 9.15zM14.67 5h-3a.32.32 0 00-.33.32V10a.32.32 0 00.33.32h3A.32.32 0 0015 10V5.28a.32.32 0 00-.33-.28zM3.37 5h-3a.32.32 0 00-.37.28V10a.32.32 0 00.33.32h3A.32.32 0 003.7 10V5.28A.32.32 0 003.37 5zM3.37 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.29.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.29-.32zM14.67 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.33.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.33-.32z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18.51 15.26\" {...props}><defs /><g id=\"Слой_2\" data-name=\"Слой 2\"><g id=\"Слой_1-2\" data-name=\"Слой 1\"><path className={styles[\"cls-1\"] || \"cls-1\"} d=\"M13.52 14.52a9.31 9.31 0 01-4 .74A15.11 15.11 0 015 14.52h-.09v-2.68a3.23 3.23 0 013.22-3.22h2.26a3.23 3.23 0 013.22 3.22v2.64zM6.16 7.63a4.56 4.56 0 00-2.7 3.81v.85A15.49 15.49 0 010 11.61s0-.14 0 0V8.9a3.08 3.08 0 013.08-3.1h2.34a3.92 3.92 0 00.74 1.83zM11.6 5.29a2.39 2.39 0 01-2.34 2.43 2.39 2.39 0 01-2.34-2.43 2.39 2.39 0 012.34-2.44 2.39 2.39 0 012.34 2.44zM5.57 4.46a2.35 2.35 0 01-1.2.33 2.38 2.38 0 112.38-2.38 3.33 3.33 0 00-1.18 2.05zM13.09 5.77h2.34a3.09 3.09 0 013.07 3.1v2.71c0-.14 0 0 0 0a15.57 15.57 0 01-3.43.68v-.85a4.56 4.56 0 00-2.7-3.81 3.92 3.92 0 00.72-1.83zM11.75 2.43v-.05a2.39 2.39 0 112.39 2.38 2.32 2.32 0 01-1.2-.33 3.39 3.39 0 00-1.19-2z\" /></g></g></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg height=\"40\" viewBox=\"0 0 1792 1792\" width=\"40\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10L407 759q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"31\" height=\"31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M11.124 24.386l-4.415 2.492c-.26.146-.492.325-.709.521C8.574 29.645 11.897 31 15.528 31c3.603 0 6.905-1.335 9.472-3.55a3.911 3.911 0 00-.778-.54l-4.728-2.445a1.873 1.873 0 01-.997-1.67v-1.919a7.36 7.36 0 00.447-.595 11.42 11.42 0 001.47-3.064 1.53 1.53 0 001.053-1.462v-2.049c0-.45-.194-.853-.495-1.135V9.609S21.56 5 15.528 5s-5.444 4.609-5.444 4.609v2.962a1.55 1.55 0 00-.495 1.135v2.049c0 .54.274 1.015.685 1.289.495 2.229 1.79 3.832 1.79 3.832v1.873c0 .681-.361 1.31-.94 1.637z\" fill=\"#F7F8F9\" /><path d=\"M15.765.002C7.207-.144.15 6.676.002 15.236c-.083 4.853 2.08 9.215 5.524 12.115.226-.196.467-.377.736-.523l4.625-2.523a1.89 1.89 0 00.984-1.658v-1.895s-1.357-1.624-1.875-3.88a1.555 1.555 0 01-.717-1.305v-2.074c0-.456.203-.864.518-1.15V9.346S9.18 4.68 15.5 4.68s5.703 4.666 5.703 4.666v2.999c.316.285.518.693.518 1.15v2.073c0 .698-.468 1.284-1.103 1.48a11.397 11.397 0 01-1.54 3.103c-.17.24-.329.444-.468.602v1.943c0 .715.404 1.37 1.044 1.69l4.953 2.475c.297.149.565.337.813.546a15.46 15.46 0 005.578-11.64C31.145 7.205 24.325.148 15.765.002z\" fill=\"#8E94AA\" /></svg>);","import React, {Component} from \"react\";\r\nimport PluginSvg from \"../../svgs/plugins.svg\";\r\nimport VectorSvg from '../../svgs/vector.svg';\r\nimport UserSvg from '../../svgs/user.svg';\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nexport default class Users extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n            role_filter: \"all\",\r\n            search: \"\",\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/users'});\r\n        \r\n        /*\r\n        \r\n        \r\n        this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        \r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);\r\n        \r\n        \r\n        this.addColumn = this.addColumn.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        */\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let users_result = await this.resource.getAll();\r\n        this.setState(state=>{\r\n            return{...state, data: users_result};\r\n        });\r\n    }\r\n    \r\n        \r\n  render(){\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <a className=\"admin-breadcrumbs__link\" href=\"#\">Users</a>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">All Users</span>\r\n                </div>\r\n                <Link className=\"btn\" to={\"/admin/users/new/\"}>Add New</Link>\r\n                <div className=\"admin-filters\">\r\n                    <span className=\"admin-filters__current\">All (4)</span>\r\n                    <span className=\"admin-filters__separator\">|</span>\r\n                    <a className=\"admin-filters__link\" href=\"#\">Administrator (1)</a>\r\n                    <span className=\"admin-filters__separator\">|</span>\r\n                    <a className=\"admin-filters__link\" href=\"#\">Editor (3)</a>\r\n                </div>\r\n            </div>\r\n                <div className=\"admin-panel\">\r\n                    <form className=\"admin-users-form form-bulk-left\">\r\n                        <select className=\"form-control input-sm\">\r\n                            <option value=\"1\">Bulk Actions</option>\r\n                        </select>\r\n                        <button className=\"btn btn_bare admin-users-button\">Apply</button>\r\n                    </form>\r\n                    <form className=\"admin-users-form form-bulk-right\" >\r\n                        <select className=\"form-control input\">\r\n                            <option value=\"1\">Change role on...</option>\r\n\r\n                        </select>\r\n                        <button className=\"btn btn_bare admin-users-button\">Change</button>\r\n                    </form>\r\n                    <form className=\"admin-users-form form-bulk-search\" >\r\n                        <input type=\"search\" className=\"form-control input-sm\" placeholder=\"\" aria-controls=\"example1\"/>\r\n                        <button type=\"search\" className=\"btn btn_bare admin-users-button\">Search Users</button>\r\n                    </form>\r\n                </div>\r\n            <div className=\"admin-users-table\">\r\n                <table className=\"table\">\r\n                    <thead className=\"admin-users-table-head\">\r\n                        <tr className=\"admin-table-row\">\r\n                            <td className=\"admin-table__td admin-table__td_check\">\r\n                                <input className=\"input-users\" type=\"checkbox\"/>\r\n                                Username\r\n                                <VectorSvg className=\"vector-svg\"/>\r\n                            </td>\r\n                            <td className=\"admin-table__td \">Name</td>\r\n                            <td className=\"admin-table__td \">Email</td>\r\n                            <td className=\"admin-table__td \">Role<VectorSvg className=\"vector-svg role-svg\"/></td>\r\n                            <td className=\"admin-table__td \">Post</td>\r\n                            <td className=\"admin-table__td \">Last Enter</td>\r\n                            <td className=\"admin-table__td \">Status</td>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"admin-table-body\">\r\n                    {\r\n                    \r\n                        this.state.data.map((row, idx) => \r\n                            \r\n                            <tr className=\"admin-table-row\" key={row.id}>\r\n                                <td className=\"admin-table__td admin-table__td_check \">\r\n                                    <input className=\"input-users\" type=\"checkbox\"/>\r\n                                    <UserSvg className=\"users-svg\"/>\r\n                                    <Link to={\"/admin/users/user/\"+row.id}>{row.name}</Link>\r\n                                </td>\r\n                                <td className=\"admin-table__td \">{row.full_name}</td>\r\n                                <td className=\"admin-table__td \"><a>{row.email}</a></td>\r\n                                <td className=\"admin-table__td \"><a>{row.roles.map((value) => {return value.name}).join(\", \")}</a></td>\r\n                                <td className=\"admin-table__td \">2</td>\r\n                                <td className=\"admin-table__td \">{row.last_login_at}</td>\r\n                                <td className=\"admin-table__td \">Enable</td>\r\n                            </tr>\r\n                        \r\n                        )\r\n                        \r\n                    }   \r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  }\r\n\r\n}\r\n","import React, {Component} from \"react\";\r\nimport AsyncSelect from \"react-select/async\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport Select from \"react-select\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\n\r\nconst renderScrollbar = (props) => {\r\n  return <Scrollbars autoHeight >{props.children}</Scrollbars>;\r\n};\r\n\r\nclass AltrpSelect extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      options: props.options || [],\r\n    };\r\n    if(props.optionsRoute){\r\n      this.optionsResource = new Resource({route: props.optionsRoute});\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  async componentDidMount(){\r\n\r\n  }\r\n  /**\r\n   * изменение значения\r\n   */\r\n  onChange(){\r\n\r\n  }\r\n  /**\r\n   * изменение в инпуте\r\n   */\r\n  onInputChange(){\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  loadOptions = async (searchString, callback)=>{\r\n    let options = [];\r\n    if(this.optionsResource){\r\n      options = await this.optionsResource.search(searchString);\r\n    }\r\n    this.setState(state=>({\r\n      ...state,\r\n      options\r\n    }));\r\n    return callback(options);\r\n  };\r\n  /**\r\n   *\r\n   */\r\n\r\n  render(){\r\n    const customStyles = {\r\n      menuPortal: base => ({ ...base, zIndex: 99999 }),\r\n      // option: (provided, state) => ({\r\n      //   ...provided,\r\n      //   backgroundColor: state.isSelected ?\r\n      //     background.selected.color :\r\n      //     state.isFocused ? background.focused.color : background.normal.color\r\n      // })\r\n    };\r\n\r\n    let selectProps = {\r\n      onChange: this.onChange,\r\n      onInputChange: this.onInputChange,\r\n      options: this.state.options || [],\r\n      placeholder: this.props.placeholder,\r\n      loadOptions: this.loadOptions,\r\n      noOptionsMessage: this.props.noOptionsMessage || (() => \"not found\"),\r\n      styles: customStyles,\r\n      menuPortalTarget: document.body,\r\n      menuPlacement: 'auto',\r\n      menuPosition: 'absolute',\r\n      components: { MenuList: renderScrollbar },\r\n      captureMenuScroll: false\r\n    };\r\n    \r\n    _.assign(selectProps, this.props);\r\n    if( this.optionsResource){\r\n      return <AsyncSelect {...selectProps} />\r\n    } else {\r\n      return <Select {...selectProps} />\r\n    }\r\n  }\r\n}\r\n\r\nexport default AltrpSelect\r\n\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n//import TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass UserForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.id,\r\n      user: {},\r\n      usermeta: {},\r\n      errors: [],\r\n      redirectAfterSave: false,\r\n      redirectAfterError: false,\r\n      redirect_error_url: \"/admin/users\",\r\n      rolesOptions: [],\r\n      permissionsOptions: []\r\n    };\r\n\r\n    if (!this.state.id) {\r\n      console.log(this.props.id)\r\n    }\r\n\r\n    this.resource = new Resource({ route: '/admin/ajax/users' });\r\n    this.rolesOptions = new Resource({ route: '/admin/ajax/role_options' });\r\n    this.permissionsOptions = new Resource({ route: '/admin/ajax/permissions_options' });\r\n\r\n    this.saveUser = this.saveUser.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const rolesOptions = await this.rolesOptions.getAll();\r\n    this.setState(state => ({ ...state, rolesOptions }));\r\n    const permissionsOptions = await this.permissionsOptions.getAll();\r\n    this.setState(state => ({ ...state, permissionsOptions }));\r\n    if (!this.state.id) {\r\n      return;\r\n    }\r\n\r\n    if (this.state.id) {\r\n\r\n      let user_data = await this.resource.get(this.state.id);\r\n\r\n      this.setState(state => {\r\n        return { ...state, user: user_data }\r\n      }, async () => {\r\n        let usermeta_data = await this.resource.get(this.state.id + \"/usermeta\");\r\n\r\n        this.setState(state => {\r\n          return { ...state, usermeta: usermeta_data }\r\n        });\r\n\r\n      });\r\n    }\r\n  }\r\n\r\n  async saveUser(e) {\r\n    e.preventDefault();\r\n    let res, usermeta_resource, usermeta_res;\r\n\r\n    if (this.state.id) {\r\n      res = await this.resource.put(this.state.id, this.state.user);\r\n    } else {\r\n      res = await this.resource.post(this.state.user);\r\n    }\r\n    console.log(res);\r\n\r\n\r\n\r\n    if (res) {\r\n\r\n      //Обновление меты\r\n\r\n      usermeta_resource = new Resource({ route: '/admin/ajax/users/' + res.id + \"/usermeta\" });\r\n\r\n      usermeta_res = await usermeta_resource.post(this.state.usermeta);\r\n\r\n      if (usermeta_res) {\r\n        this.setState(state => {\r\n          return { ...state, redirectAfterSave: true }\r\n        });\r\n      }\r\n      else {\r\n        this.setState(state => {\r\n          return { ...state, redirectAfterError: true, redirect_error_url: this.state.redirect_error_url + \"/user/\" + res.id }\r\n        });\r\n      }\r\n\r\n\r\n    } else {\r\n      /*this.setState(state=>{\r\n          return {...state, value: {}}\r\n      });*/\r\n    }\r\n  }\r\n\r\n  changeValue(e, source = \"user\") {\r\n    let field = e.target.name;\r\n    let value = e.target.value;\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state[source][field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  changeRolesHandler = roles => {\r\n    this.setState({\r\n      usermeta: {\r\n        ...this.state.usermeta,\r\n        roles: roles ? roles.map(role => role.value) : []\r\n      },\r\n      user:{\r\n        ...this.state.user,\r\n        _roles: roles ? roles.map(role => role.value) : []\r\n      }\r\n    })\r\n  };\r\n\r\n  changePermissionsHandler = permissions => {\r\n    this.setState({\r\n      usermeta: {\r\n        ...this.state.usermeta,\r\n        permissions: permissions ? permissions.map(permission => permission.value) : []\r\n      },\r\n      user:{\r\n        ...this.state.user,\r\n        _permissions: permissions ? permissions.map(permission => permission.value) : []\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const { rolesOptions, permissionsOptions } = this.state;\r\n    const { _roles: roles = [], _permissions: permissions = [] } = this.state.user;\r\n    if (this.state.redirectAfterSave) {\r\n      return <Redirect to={this.props.redirect_url} />\r\n    }\r\n    if (this.state.redirectAfterError) {\r\n      return <Redirect to={this.state.redirect_error_url} />\r\n    }\r\n    return <form className=\"admin-form\" onSubmit={this.saveUser}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-name\">Name</label>\r\n        <input type=\"text\" id=\"name\" name=\"name\" required={1}\r\n          value={this.state.user.name || ''}\r\n               disabled={this.props.id}\r\n          onChange={(e) => { this.changeValue(e) }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-title\">Email</label>\r\n        <input type=\"email\" id=\"email\" name=\"email\" required={1}\r\n          value={this.state.user.email || ''}\r\n          onChange={(e) => { this.changeValue(e) }}\r\n               disabled={this.props.id}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      {!this.state.id ?\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"page-description\">Password</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" required={1}\r\n            value={this.state.user.password || ''}\r\n            onChange={(e) => { this.changeValue(e) }}\r\n            className=\"form-control\" />\r\n        </div> : null}\r\n      {!this.state.id ?\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"page-description\">Confirm Password</label>\r\n          <input type=\"password\" id=\"password_confirmation\" name=\"password_confirmation\" required={1}\r\n            value={this.state.user.password_confirmation || ''}\r\n            onChange={(e) => { this.changeValue(e) }}\r\n            className=\"form-control\" />\r\n        </div> : null}\r\n\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">First Name</label>\r\n        <input type=\"text\" id=\"first_name\" name=\"first_name\"\r\n          value={this.state.usermeta.first_name || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">Second Name</label>\r\n        <input type=\"text\" id=\"second_name\" name=\"second_name\"\r\n          value={this.state.usermeta.second_name || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"page-description\">Patronymic</label>\r\n        <input type=\"text\" id=\"patronymic\" name=\"patronymic\"\r\n          value={this.state.usermeta.patronymic || ''}\r\n          onChange={(e) => { this.changeValue(e, \"usermeta\") }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"roles\">Roles</label>\r\n        <AltrpSelect id=\"roles\"\r\n          closeMenuOnSelect={false}\r\n          value={_.filter(rolesOptions, r => roles && roles.indexOf(r.value) >= 0)}\r\n          isMulti={true}\r\n          onChange={this.changeRolesHandler}\r\n          options={rolesOptions} />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"permissions\">Permissions</label>\r\n        <AltrpSelect id=\"permissions\"\r\n          value={_.filter(permissionsOptions, p => permissions && permissions.indexOf(p.value) >= 0)}\r\n          closeMenuOnSelect={false}\r\n          isMulti={true}\r\n          onChange={this.changePermissionsHandler}\r\n          options={permissionsOptions} />\r\n      </div>\r\n\r\n      <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default UserForm;","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport UserForm from \"./UserForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddUserPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      redirectAfterSave: false,\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/users'});\r\n    \r\n    //this.savePage = this.savePage.bind(this);\r\n  }\r\n  /*async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n    let id = this.props.location.pathname.split('/');\r\n    id = id[id.length - 1];\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }*/\r\n  /*async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }*/\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/users\"/>\r\n    }\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to={\"/admin/users\"}>Users</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Users</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-users-form\">\r\n                <UserForm redirect_url=\"/admin/users\"/>\r\n            </div>\r\n        </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddUserPage);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport UserForm from \"./UserForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass EditUserPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        user_id: this.props.match.params.id,\r\n        redirectAfterSave: false,\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/users/user'});\r\n    \r\n    //this.savePage = this.savePage.bind(this);\r\n  }\r\n  /*async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n    let id = this.props.location.pathname.split('/');\r\n    id = id[id.length - 1];\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }*/\r\n  /*async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }*/\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/users\"/>\r\n    }\r\n    return <div className=\"admin-users\">\r\n        <div className=\"wrapper\">\r\n            <div className=\"admin-heading-users\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to={\"/admin/users\"}>Users</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Users</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-users-form\">\r\n                <UserForm redirect_url=\"/admin/users\" id={this.state.user_id} />\r\n            </div>\r\n        </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditUserPage);","import React, {Component} from \"react\";\r\nimport PluginSvg from \"../../svgs/plugins.svg\";\r\n\r\nexport default class UsersTools extends Component{\r\n  render(){ return <div id=\"content\">\r\n\r\n          <div className=\"admin-heading-users\">\r\n            <div className=\"admin-breadcrumbs\">\r\n              <a className=\"admin-breadcrumbs__link\" href=\"#\">Users</a>\r\n              <span className=\"admin-breadcrumbs__separator\">/</span>\r\n              <span className=\"admin-breadcrumbs__current\">Tools</span>\r\n            </div>\r\n          </div>\r\n\r\n          <ul className=\"nav nav-tabs\">\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link active\" href=\"#\">Tools</a>\r\n            </li>\r\n          </ul>\r\n          <div className=\"border border-top-0\">\r\n            <div className=\"row d-flex\">\r\n              <div className=\"col-sm-8 d-flex change-role\">\r\n\r\n                <span>Change role</span>\r\n                <select className=\"form-control form-control-sm\">\r\n                  <option value=\"1\">Editor</option>\r\n                  <option value=\"2\">Moderator</option>\r\n                </select>\r\n                <div className=\"form-check form-check-inline\">\r\n                  <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"checkbox__1\"/>\r\n                    <label className=\"form-check-label\" htmlFor=\"checkbox__1\">Readable features</label>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"row group-table border border-bottom-0 border-left-0 border-right-0 no-gutters\">\r\n              <div className=\"col-3\">\r\n                <span className=\"text-group\">Groups</span>\r\n                <span className=\"text-total\">(Total/Allowed)</span>\r\n              </div>\r\n              <div className=\"col-6 form-check form-check-inline\">\r\n                <input className=\"form-check-input\" type=\"checkbox\" id=\"checkbox__2\"/>\r\n                  <label className=\"form-check-label\" htmlFor=\"checkbox__2\">Fast filter:</label>\r\n\r\n                  <input type=\"search\" className=\"search-tools form-control-sm\" placeholder=\"\"\r\n                         aria-controls=\"example1\"/>\r\n                    <input className=\"form-check-input\" type=\"checkbox\" id=\"checkbox__3\"/>\r\n                      <label className=\"form-check-label\" htmlFor=\"checkbox__3\">Only Allowed</label>\r\n\r\n              </div>\r\n              <div className=\"col-3\">\r\n                <form action=\"#\" className=\"form-tools\">\r\n                  <button type=\"submit\" className=\"btn-tools\">Save Changes</button>\r\n                </form>\r\n\r\n              </div>\r\n            </div>\r\n            <div className=\"row group-table-trees border border-bottom-0 border-left-0 border-right-0 no-gutters\">\r\n              <div className=\"col-3\">\r\n                <div className=\"treeview\">\r\n                  <ul>\r\n                    <li>\r\n                      <div>\r\n                        <p>\r\n                          <a href=\"#\" className=\"core\">Core (112/2)</a>\r\n                        </p>\r\n                      </div>\r\n                      <ul>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Dashboard (10/1)</a>\r\n                            </p>\r\n                            <p className=\"form-group-p\"><a href=\"#\">Rename</a><span> | </span><a\r\n                              href=\"#\">Copy</a><span> | </span><a href=\"#\">Delete</a></p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Assets (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Tables (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Templates (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Reports (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Users (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li>\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Plugins (10/1)</a>\r\n                            </p>\r\n                          </div>\r\n                        </li>\r\n                        <li className=\"cl\">\r\n                          <div>\r\n                            <p>\r\n                              <a href=\"#\">Setings (42/5)</a>\r\n                            </p>\r\n                          </div>\r\n                          <ul className=\"l\">\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Builder (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Import/Export (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Integration (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Sender (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Acquiring (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                            <li>\r\n                              <div>\r\n                                <p>\r\n                                  <a href=\"#\">Tuner (10/2)</a>\r\n                                </p>\r\n                              </div>\r\n                            </li>\r\n                          </ul>\r\n                        </li>\r\n                      </ul>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n\r\n              </div>\r\n              <div className=\"col-6 form-check form-check-group\">\r\n                <fieldset className=\"form-group\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm-10\">\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios1\" value=\"option1\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios1\">\r\n                            Create Template\r\n                          </label>\r\n                          <p className=\"form-group-p\"><a href=\"#\">Rename</a><span> | </span><a\r\n                            href=\"#\">Copy</a><span> | </span><a href=\"#\">Delete</a></p>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios2\" value=\"option2\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios2\">\r\n                            Duplicate Template\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios3\" value=\"option3\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios3\">\r\n                            Activate / Deactivate Widgets\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios4\" value=\"option4\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios4\">\r\n                            Setup Integration\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios5\" value=\"option5\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios5\">\r\n                            Import / Export Templates\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios6\" value=\"option6\"/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios6\">\r\n                            Delete Template\r\n                          </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"gridRadios7\" value=\"option7\" defaultChecked/>\r\n                          <label className=\"form-check-label\" htmlFor=\"gridRadios7\">\r\n                            Edit Template\r\n                          </label>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </fieldset>\r\n              </div>\r\n              <div className=\"col-3 \">\r\n                <form action=\"#\" className=\"group-vertical\">\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Rename Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Delete Role</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Group</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Add New Permission</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Tools Export</button>\r\n                  <button type=\"submit\" className=\"btn btn-outline-dark btn-sm\">Tools Import</button>\r\n                </form>\r\n                <form action=\"#\" className=\"dangerous\">\r\n                  <span>Warning! that “Reset” action could be dangerous</span>\r\n                  <button type=\"submit\" className=\"btn-danger\">RESET</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {iconsManager} from \"../js/helpers\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\n\r\n\r\nexport default class Assets extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.onDragOver = this.onDragOver.bind(this);\r\n    this.onDragLeave = this.onDragLeave.bind(this);\r\n    this.onDrop = this.onDrop.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.deleteClick = this.deleteClick.bind(this);\r\n    this.state = {\r\n      uploaderClasses: 'admin-assets__uploader uploader',\r\n      assets: [],\r\n      itemDeleteClasses: 'item__delete',\r\n    };\r\n    this.resource  = new Resource({route: '/admin/ajax/media'});\r\n  }\r\n  deleteClick(e){\r\n    let assetId = e.currentTarget.dataset.assetid;\r\n    this.setState(state=>{\r\n      return{...state, itemDeleteClasses: 'item__delete altrp-disabled'}\r\n    });\r\n    this.resource.delete(assetId).then(res=>{\r\n      if(res.success){\r\n        let newAssets = [...this.state.assets];\r\n        newAssets = _.filter(newAssets, item => !(item.id===Number(assetId)));\r\n        this.setState(state=>{\r\n          return{...state, assets: newAssets, itemDeleteClasses: 'item__delete'};\r\n        })\r\n      }\r\n    });\r\n  }\r\n  updateAssets(files){\r\n    this.resource.postFiles(files).then(res=>{\r\n      if(res.length){\r\n        let newAssets = res.concat(this.state.assets);\r\n        this.setState(state=>{\r\n          return{...state, assets: newAssets}\r\n        })\r\n      }\r\n    })\r\n  }\r\n  onDrop(e){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.updateAssets(e.dataTransfer.files);\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader'}\r\n    });\r\n  }\r\n  componentDidMount(){\r\n    this.resource.getAll().then(res=>{\r\n      this.setState(state=>{\r\n        return {...state, assets: res}\r\n      })\r\n    });\r\n  }\r\n  onChange(e){\r\n    this.updateAssets(e.target.files);\r\n  }\r\n  onDragOver(e){\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader uploader_drag-over'}\r\n    });\r\n  }\r\n  onDragLeave(){\r\n    this.setState(state=>{\r\n      return {...state, uploaderClasses: 'admin-assets__uploader uploader'}\r\n    });\r\n  }\r\n  render() {\r\n    let UploadIcon = iconsManager().getIconComponent('upload');\r\n    let CloseIcon = iconsManager().getIconComponent('close');\r\n    return <div className=\"admin-assets admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Assets</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Assets</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <div className={this.state.uploaderClasses}\r\n             onDragLeave={this.onDragLeave}\r\n             onDrop={this.onDrop}\r\n             onDragOver={this.onDragOver}>\r\n          <label className=\"uploader__label d-flex flex-column align-items-center\">\r\n            <UploadIcon width={100} height={100} className=\"icon\"/>\r\n            <input type=\"file\"\r\n                   accept=\"image/*\"\r\n                   multiple={true}\r\n                   onChange={this.onChange}\r\n                   className=\"uploader__input\"/>\r\n            <span className=\"uploader__text text text_bold\">\r\n              Drag or Choose File\r\n            </span>\r\n          </label>\r\n        </div>\r\n        <div className=\"admin-assets__list p-4 mt-4 assets-list d-flex flex-wrap\">\r\n          {\r\n            this.state.assets.map(asset=>{\r\n              return<div className=\"assets-list__item item col-1\" key={asset.id} >\r\n                <div className=\"item__background\"\r\n                     style={{'backgroundImage': `url('${asset.url}')`}}/>\r\n                <button className={this.state.itemDeleteClasses}\r\n                        data-assetid={asset.id}\r\n                        title=\"Delete\"\r\n                        onClick={this.deleteClick}>\r\n                  <CloseIcon className=\"item__delete-icon\"/>\r\n                </button>\r\n              </div>}\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n","export const BAR = \"CHART/BAR\";\r\nexport const PIE = \"CHART/PIE\";\r\nexport const DONUT = \"CHART/DONUT\";\r\nexport const AREA = \"CHART/AREA\";\r\nexport const LINE = \"CHART/LINE\";\r\nexport const TABLE = \"CHART/TABLE\";\r\n\r\nexport const widgetTypes = [\r\n  { name: \"Столбцы\", value: BAR },\r\n  { name: \"Круговая диаграмма\", value: PIE },\r\n  { name: \"Кольцевая диаграмма\", value: DONUT },\r\n  { name: \"Линии\", value: LINE },\r\n  { name: \"Графики\", value: AREA },\r\n  { name: \"Таблица\", value: TABLE },\r\n];\r\n\r\nexport const getTypeName = (value) => widgetTypes.find((w) => w.value === value).name;\r\n","import React from \"react\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-border\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nconst EmptyWidget = ({ text }) => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-container__text\">{text ? text : \"Нет данных\"}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyWidget;\r\n","import axios from \"axios\";\r\n\r\nexport const queryString = (obj = {}) =>\r\n  Object.keys(obj).reduce((str, key, i) => {\r\n    let delimiter, val;\r\n    delimiter = i === 0 ? \"?\" : \"&\";\r\n    key = encodeURIComponent(key);\r\n    val = encodeURIComponent(obj[key]);\r\n    return [str, delimiter, key, \"=\", val].join(\"\");\r\n  }, \"\");\r\n\r\nexport const getWidgetData = async (url, filter) => {\r\n  const params = queryString(filter);\r\n  try {\r\n    return await axios(url + params);\r\n  } catch (error) {\r\n    return { status: 500 };\r\n  }\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  BarChart,\r\n  BarSeries,\r\n  Bar,\r\n  Gradient,\r\n  GradientStop,\r\n  DiscreteLegend,\r\n  DiscreteLegendEntry,\r\n} from \"reaviz\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicBarChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <BarChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        series={\r\n          <BarSeries\r\n            colorScheme={widget.options.colorScheme}\r\n            bar={<Bar gradient={<Gradient stops={[<GradientStop stopOpacity={1} />]} />} />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicBarChart;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { PieChart, PieArcSeries, PieArcLabel, DiscreteLegend, DiscreteLegendEntry } from \"reaviz\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicPieChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data || []);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if ((! data) || data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <PieChart\r\n        height={height}\r\n        width={width}\r\n        data={data || []}\r\n        series={\r\n          <PieArcSeries\r\n            explode={widget.options.explode}\r\n            colorScheme={widget.options.colorScheme}\r\n            label={<PieArcLabel fontSize={12} fontFill=\"#000000\" />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicPieChart;\r\n","import React from \"react\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner-border\" style={{ width: \"3rem\", height: \"3rem\" }} role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  AreaChart,\r\n  AreaSeries,\r\n  MarkLine,\r\n  Line,\r\n  LinearXAxis,\r\n  LinearXAxisTickSeries,\r\n  LinearXAxisTickLabel,\r\n  Area,\r\n  Gradient,\r\n  GradientStop,\r\n} from \"reaviz\";\r\n\r\nimport format from \"date-fns/format\";\r\nimport formatDistanceStrict from \"date-fns/formatDistanceStrict\";\r\nimport ru from \"date-fns/locale/ru\";\r\n\r\nimport Spinner from \"../Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicAreaChart = ({ widget, width = 300, height = 300, color = \"#FFD51F\" }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200 && typeof charts.data !== \"string\") {\r\n      const newData = charts.data.data.map((item) => {\r\n        const key = new Date(item.key);\r\n        if (key) {\r\n          return {\r\n            key,\r\n            data: item.data,\r\n          };\r\n        }\r\n      });\r\n      setData(newData);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const formattingDate = (d) => {\r\n    //  Первая дата\r\n    const firstDate = data.slice().shift();\r\n    // Последняя дата\r\n    const lastDate = data.slice().pop();\r\n    // Разница между датами в месяцах\r\n    const diff = parseInt(\r\n      formatDistanceStrict(firstDate.key, lastDate.key, {\r\n        unit: \"month\",\r\n      })\r\n    );\r\n\r\n    if (diff >= 0 && diff <= 12) {\r\n      return format(d, \"d LLL\", { locale: ru });\r\n    } else {\r\n      return format(d, \"d MMM yy\", { locale: ru });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (!Array.isArray(data) || data.length === 0) return <EmptyWidget />;\r\n\r\n  return (\r\n    <>\r\n      <AreaChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        xAxis={\r\n          <LinearXAxis\r\n            type=\"time\"\r\n            tickSeries={\r\n              <LinearXAxisTickSeries label={<LinearXAxisTickLabel format={formattingDate} />} />\r\n            }\r\n          />\r\n        }\r\n        series={\r\n          <AreaSeries\r\n            type={widget.options.type || \"standard\"}\r\n            markLine={<MarkLine strokeWidth={0} />}\r\n            line={<Line strokeWidth={0} />}\r\n            area={\r\n              <Area\r\n                gradient={<Gradient color={color} stops={[<GradientStop color={color} />]} />}\r\n              />\r\n            }\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicAreaChart;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  LineChart,\r\n  LineSeries,\r\n  Line,\r\n  LinearXAxis,\r\n  LinearXAxisTickSeries,\r\n  LinearXAxisTickLabel,\r\n} from \"reaviz\";\r\nimport format from \"date-fns/format\";\r\nimport formatDistanceStrict from \"date-fns/formatDistanceStrict\";\r\nimport ru from \"date-fns/locale/ru\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicLineChart = ({ widget, width = 300, height = 300, strokeWidth = 3 }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [data, setData] = useState([]);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      const newData = charts.data.data.map((item) => {\r\n        const key = new Date(item.key);\r\n        if (key) {\r\n          return {\r\n            key,\r\n            data: item.data,\r\n          };\r\n        }\r\n      });\r\n      setData(newData);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const formattingDate = (d) => {\r\n    //  Первая дата\r\n    const firstDate = data.slice().shift();\r\n    // Последняя дата\r\n    const lastDate = data.slice().pop();\r\n    // Разница между датами в месяцах\r\n    const diff = parseInt(\r\n      formatDistanceStrict(firstDate.key, lastDate.key, {\r\n        unit: \"month\",\r\n      })\r\n    );\r\n\r\n    if (diff >= 0 && diff <= 12) {\r\n      return format(d, \"d MMM\", { locale: ru });\r\n    } else {\r\n      return format(d, \"d MMM yy\", { locale: ru });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  return (\r\n    <>\r\n      <LineChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        xAxis={\r\n          <LinearXAxis\r\n            type=\"time\"\r\n            tickSeries={\r\n              <LinearXAxisTickSeries\r\n                label={\r\n                  <LinearXAxisTickLabel\r\n                    //fontSize={12}\r\n                    //fill=\"#000000\"\r\n                    format={formattingDate}\r\n                  />\r\n                }\r\n              />\r\n            }\r\n          />\r\n        }\r\n        series={\r\n          <LineSeries line={<Line strokeWidth={strokeWidth} />} colorScheme={widget.colorScheme} />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicLineChart;\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst sortData = (key, order = \"desc\") => {\r\n  return function innerSort(a, b) {\r\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\r\n      return 0;\r\n    }\r\n\r\n    const varA = typeof a[key] === \"string\" ? a[key].toUpperCase() : a[key];\r\n    const varB = typeof b[key] === \"string\" ? b[key].toUpperCase() : b[key];\r\n\r\n    let comparison = 0;\r\n    if (varA > varB) {\r\n      comparison = 1;\r\n    } else if (varA < varB) {\r\n      comparison = -1;\r\n    }\r\n    return order === \"desc\" ? comparison * -1 : comparison;\r\n  };\r\n};\r\n\r\nconst DynamicTableWidget = ({ widget }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data.sort(sortData(\"data\")));\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  const summary = useMemo(() => data.reduce((acc, item) => acc + item.data, 0), [data]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  if (widget.options.isVertical) {\r\n    return (\r\n      <div className=\"widget-table\">\r\n        <table className=\"vertical-table\">\r\n          <tbody>\r\n            {data.map((item, key) => (\r\n              <tr key={key}>\r\n                <td>{item.key}</td>\r\n                <td>{item.data}</td>\r\n              </tr>\r\n            ))}\r\n            <tr>\r\n              <td>ИТОГО</td>\r\n              <td>{summary}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"widget-table\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {data.map((item, key) => (\r\n              <th key={key}>{item.key}</th>\r\n            ))}\r\n            <th>ИТОГО</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            {data.map((item, key) => (\r\n              <td key={key}>{item.data}</td>\r\n            ))}\r\n            <td>{summary}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicTableWidget;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { PieChart, PieArcSeries, PieArcLabel, DiscreteLegend, DiscreteLegendEntry } from \"reaviz\";\r\nimport Spinner from \"./Spinner\";\r\nimport EmptyWidget from \"./EmptyWidget\";\r\n\r\nimport { getWidgetData } from \"../services/getWidgetData\";\r\n\r\nconst DynamicDonutChart = ({ widget, width = 300, height = 300 }) => {\r\n  const [data, setData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    const charts = await getWidgetData(widget.source, widget.filter);\r\n    if (charts.status === 200) {\r\n      setData(charts.data.data);\r\n      setIsLoading(false);\r\n    }\r\n  }, [widget]);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) return <Spinner />;\r\n\r\n  if (data.length === 0) return <EmptyWidget />;\r\n\r\n  // Формируем легенду\r\n  const entries = data.map((item, i) => {\r\n    return (\r\n      <DiscreteLegendEntry\r\n        key={i}\r\n        className=\"discrete__legend-item\"\r\n        label={`${item.key} (${item.data})`}\r\n        //color={colorScheme(item, i)}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <PieChart\r\n        height={height}\r\n        width={width}\r\n        data={data}\r\n        series={\r\n          <PieArcSeries\r\n            doughnut={true}\r\n            colorScheme={widget.options.colorScheme}\r\n            label={<PieArcLabel fontSize={12} fontFill=\"#000000\" />}\r\n          />\r\n        }\r\n      />\r\n      {widget.options?.legend && (\r\n        <DiscreteLegend\r\n          className=\"discrete__legend\"\r\n          orientation={widget.options.legend}\r\n          entries={entries}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DynamicDonutChart;\r\n","import React from \"react\";\r\n\r\nimport { BAR, PIE, LINE, AREA, TABLE, DONUT } from \"./widgetTypes\";\r\n\r\nimport DynamicBarChart from \"./widgets/DynamicBarChart\";\r\nimport DynamicPieChart from \"./widgets/DynamicPieChart\";\r\nimport DynamicAreaChart from \"./widgets/DynamicAreaChart\";\r\nimport DynamicLineChart from \"./widgets/DynamicLineChart\";\r\nimport DynamicTableWidget from \"./widgets/DynamicTableWidget\";\r\nimport DynamicDonutChart from \"./widgets/DynamicDonutChart\";\r\n\r\nconst WidgetDiagram = ({ widget, width = 360, height = 300 }) => {\r\n  switch (widget.type) {\r\n    case BAR:\r\n      return <DynamicBarChart width={width} height={height} widget={widget} />;\r\n    case PIE:\r\n      return <DynamicPieChart width={width} height={height} widget={widget} />;\r\n    case DONUT:\r\n      return <DynamicDonutChart width={width} height={height} widget={widget} />;\r\n    case LINE:\r\n      return <DynamicLineChart width={width} height={height} widget={widget} />;\r\n    case TABLE:\r\n      return <DynamicTableWidget width={width} height={height} widget={widget} />;\r\n    case AREA:\r\n      return <DynamicAreaChart width={width} height={height} widget={widget} />;\r\n    default:\r\n      return <></>;\r\n  }\r\n};\r\n\r\nexport default WidgetDiagram;\r\n","export default [\r\n  { name: \"Информация о шаблонах\", url: \"/admin/ajax/analytics\" },\r\n  { name: \"Пустые данные\", url: \"/admin/ajax/analytics/none\" },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { schemes } from \"reaviz\";\r\n\r\nimport dataSources from \"./dataSources\";\r\nimport { TABLE, widgetTypes } from \"./widgetTypes\";\r\nimport WidgetDiagram from \"./WidgetDiagram\";\r\n\r\nconst EditWidget = ({ diagram, onSave, show, setShow }) => {\r\n  const [widget, setWidget] = useState(diagram);\r\n\r\n  const handleSave = () => {\r\n    onSave(widget);\r\n    setShow(false);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={() => setShow(false)} animation={false} size=\"lg\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Редактировать виджет #{widget.id}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Row>\r\n          <Col>\r\n            <Form>\r\n              <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>Название виджета</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={widget.name}\r\n                  onChange={(e) => setWidget({ ...widget, name: e.target.value })}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Тип виджета</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.type}\r\n                  onChange={(e) => setWidget({ ...widget, type: e.target.value })}\r\n                >\r\n                  {widgetTypes.map(({ name, value }, key) => (\r\n                    <option key={key} value={value}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Цветовая схема</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.options.colorScheme}\r\n                  onChange={(e) =>\r\n                    setWidget({\r\n                      ...widget,\r\n                      options: { ...widget.options, colorScheme: e.target.value },\r\n                    })\r\n                  }\r\n                >\r\n                  {Object.keys(schemes).map((name, key) => (\r\n                    <option key={key}>{name}</option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Источник данных</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.source}\r\n                  onChange={(e) => setWidget({ ...widget, source: e.target.value })}\r\n                  required\r\n                >\r\n                  <option value=\"\">Выберите источник</option>\r\n                  {dataSources.map(({ name, url }, key) => (\r\n                    <option key={key} value={url}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              {widget.type === TABLE && (\r\n                <Form.Group>\r\n                  <Form.Check\r\n                    type=\"checkbox\"\r\n                    checked={widget.options.isVertical}\r\n                    label=\"Вертикальная таблица\"\r\n                    onChange={(e) =>\r\n                      setWidget({\r\n                        ...widget,\r\n                        options: { ...widget.options, isVertical: e.target.checked },\r\n                      })\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n              )}\r\n            </Form>\r\n          </Col>\r\n          <Col>\r\n            <Row>\r\n              <div className=\"widget-placeholder\">\r\n                {widget && <WidgetDiagram widget={widget} width={400} />}\r\n              </div>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setShow(false)}>\r\n          Закрыть\r\n        </Button>\r\n        <Button variant=\"warning\" onClick={handleSave} disabled={widget.name === \"\"}>\r\n          Сохранить изменения\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditWidget;\r\n","import React, { useState } from \"react\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { schemes } from \"reaviz\";\r\n\r\nimport dataSources from \"./dataSources\";\r\nimport { TABLE, widgetTypes } from \"./widgetTypes\";\r\nimport WidgetDiagram from \"./WidgetDiagram\";\r\n\r\nconst WidgetParams = ({ show, setShow, onSave }) => {\r\n  const [widget, setWidget] = useState({\r\n    name: \"\",\r\n    source: \"\",\r\n    type: TABLE,\r\n    options: {\r\n      colorScheme: \"Set1\",\r\n    },\r\n  });\r\n\r\n  const handleSave = () => {\r\n    // Скрываем модальку\r\n    setShow(false);\r\n    onSave(widget);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={() => setShow(false)} animation={false} size=\"lg\" centered>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Добавить виджет</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Row>\r\n          <Col>\r\n            <Form>\r\n              <Form.Group controlId=\"formGroupEmail\">\r\n                <Form.Label>Название виджета</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={widget.name}\r\n                  onChange={(e) => setWidget({ ...widget, name: e.target.value })}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Тип виджета</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.type}\r\n                  onChange={(e) => setWidget({ ...widget, type: e.target.value })}\r\n                >\r\n                  {widgetTypes.map(({ name, value }, key) => (\r\n                    <option key={key} value={value}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Цветовая схема</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.options.colorScheme}\r\n                  onChange={(e) =>\r\n                    setWidget({\r\n                      ...widget,\r\n                      options: { ...widget.options, colorScheme: e.target.value },\r\n                    })\r\n                  }\r\n                >\r\n                  {Object.keys(schemes).map((name, key) => (\r\n                    <option key={key}>{name}</option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Источник данных</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  custom\r\n                  value={widget.source}\r\n                  onChange={(e) => setWidget({ ...widget, source: e.target.value })}\r\n                  required\r\n                >\r\n                  <option value=\"\">Выберите источник</option>\r\n                  {dataSources.map(({ name, url }, key) => (\r\n                    <option key={key} value={url}>\r\n                      {name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n              {widget.type === TABLE && (\r\n                <Form.Group>\r\n                  <Form.Check\r\n                    type=\"checkbox\"\r\n                    checked={widget.options?.isVertical}\r\n                    label=\"Вертикальная таблица\"\r\n                    onChange={(e) =>\r\n                      setWidget({\r\n                        ...widget,\r\n                        options: { ...widget.options, isVertical: e.target.checked },\r\n                      })\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n              )}\r\n            </Form>\r\n          </Col>\r\n          <Col>\r\n            <Row>\r\n              <div className=\"widget-placeholder\">\r\n                {widget.source && <WidgetDiagram widget={widget} width={400} />}\r\n              </div>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setShow(false)}>\r\n          Закрыть\r\n        </Button>\r\n        <Button variant=\"warning\" onClick={handleSave} disabled={widget.name === \"\"}>\r\n          Сохранить изменения\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WidgetParams;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { schemes } from \"reaviz\";\r\nimport axios from \"axios\";\r\n\r\nimport GearFill from \"react-bootstrap-icons/dist/icons/gear-fill\";\r\nimport TrashFill from \"react-bootstrap-icons/dist/icons/trash-fill\";\r\n\r\nimport WidgetDiagram from \"./dashboard/WidgetDiagram\";\r\nimport EditWidget from \"./dashboard/EditWidget\";\r\nimport AddWidget from \"./dashboard/AddWidget\";\r\n\r\nfunction Dashboard() {\r\n  const [diagrams, setDiagrams] = useState([]);\r\n\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [selectedWidget, setSelectedWidget] = useState({});\r\n\r\n  /*\r\n   * Показываем окно настроек\r\n   */\r\n  const showSettingsModal = (widget) => {\r\n    setSelectedWidget(widget);\r\n    setShowEditForm(true);\r\n  };\r\n\r\n  /*\r\n   * Удаляем диаграмму\r\n   */\r\n  const removeDiagram = ({ id }) => {\r\n    // Ищем индекс\r\n    const index = diagrams.findIndex((item) => item.id === id);\r\n    // Удаляем локально\r\n    setDiagrams(diagrams.filter((item, i) => (i !== index ? item : null)));\r\n    // Удаляем с сервера\r\n    axios.delete(\"/admin/ajax/diagrams/\" + id);\r\n  };\r\n\r\n  /*\r\n   * Добавляем диаграмму\r\n   */\r\n  const addDiagram = async (widget) => {\r\n    // Добавляем на сервер\r\n    const data = {\r\n      title: widget.name,\r\n      settings: JSON.stringify({ ...widget }),\r\n    };\r\n    const req = await axios.post(\"/admin/ajax/diagrams\", data);\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      // Добавляем в локальный стейт\r\n      setDiagrams([...diagrams, { ...widget, id: req.data.id }]);\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Обновляем диаграмму\r\n   */\r\n  const updateDiagram = (widget) => {\r\n    // Находим индекс виджета по id\r\n    const itemIndex = diagrams.findIndex((item) => item.id === widget.id);\r\n    // Обновляем локальные настройки\r\n    setDiagrams(diagrams.map((item, index) => (itemIndex === index ? widget : item)));\r\n    // Формируем данные для БД\r\n    const data = {\r\n      title: widget.name,\r\n      settings: JSON.stringify({ ...widget }),\r\n    };\r\n    // Отправляем новые настройки на сервер\r\n    axios.put(\"/admin/ajax/diagrams/\" + widget.id, data);\r\n  };\r\n\r\n  /*\r\n   * Получаем список диаграмм\r\n   */\r\n  const getDiagrams = useCallback(async () => {\r\n    const req = await axios(\"/admin/ajax/diagrams\");\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      // Приводим результат запроса к соотв. виду.\r\n      const diagrams = req.data.map((item) => {\r\n        const settings = JSON.parse(item.settings);\r\n        return { id: item.id, ...settings };\r\n      });\r\n      // Добавляем в локальный стейт\r\n      setDiagrams(diagrams);\r\n    }\r\n  }, [setDiagrams]);\r\n\r\n  /*\r\n   * Обновляем диаграммы при монтировании\r\n   */\r\n  useEffect(() => {\r\n    getDiagrams();\r\n  }, [getDiagrams]);\r\n\r\n  return (\r\n    <div className=\"admin-templates admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">\r\n            Analytics\r\n          </a>\r\n        </div>\r\n        <button onClick={() => setShowAddForm(true)} className=\"btn\">\r\n          Add Widget\r\n        </button>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <div className=\"charts\">\r\n          {diagrams.map((widget) => (\r\n            <div key={widget.id} className=\"card\" style={{ width: widget.width }}>\r\n              <div className=\"card-header\">\r\n                <div className=\"card-header__name\">{widget.name}</div>\r\n                <div className=\"card-header__buttons d-print-none\">\r\n                  <button\r\n                    className=\"d-none d-sm-inline-block\"\r\n                    type=\"button\"\r\n                    title=\"Настроить виджет\"\r\n                    onClick={() => showSettingsModal(widget)}\r\n                  >\r\n                    <GearFill color=\"#8E94AA\" />\r\n                  </button>\r\n                  <button\r\n                    className=\"d-none d-sm-inline-block\"\r\n                    type=\"button\"\r\n                    title=\"Удалить виджет\"\r\n                    onClick={() => removeDiagram(widget)}\r\n                  >\r\n                    <TrashFill color=\"#8E94AA\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <WidgetDiagram widget={widget} width={360} />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {showEditForm && (\r\n          <EditWidget\r\n            show={showEditForm}\r\n            setShow={setShowEditForm}\r\n            diagram={selectedWidget}\r\n            onSave={updateDiagram}\r\n          />\r\n        )}\r\n        {showAddForm && (\r\n          <AddWidget show={showAddForm} setShow={setShowAddForm} onSave={addDiagram} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","import React, {Component} from \"react\";\r\n\r\n\r\nexport default class Plugins extends Component{\r\n  render(){\r\n    return <div>Plugins</div>;\r\n  }\r\n\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setModalSettings, toggleModal } from \"../js/store/modal-settings/actions\";\r\n\r\nimport AdminTable from \"./AdminTable\";\r\n\r\nfunction Reports() {\r\n  const dispatch = useDispatch();\r\n  const [reports, setReports] = useState([]);\r\n\r\n  const openPreview = (item) => {\r\n    window.open(item.preview, \"_blank\");\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      name: \"id\",\r\n      title: \"ID\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"Name\",\r\n      url: true,\r\n      target: \"_blank\",\r\n    },\r\n    {\r\n      name: \"description\",\r\n      title: \"Description\",\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"Updated At\",\r\n    },\r\n    {\r\n      name: \"preview\",\r\n      title: \"Preview\",\r\n      is_button: true,\r\n      button: {\r\n        class: \"\",\r\n        function: openPreview,\r\n        title: \"Preview\",\r\n      },\r\n    },\r\n  ];\r\n\r\n  const showModal = () => {\r\n    const modalSettings = {\r\n      title: \"Add New Report\",\r\n      submitButton: \"Add\",\r\n      active: true,\r\n      submit: function(formData) {\r\n        return axios.post(\"/admin/ajax/reports\", formData);\r\n      },\r\n      fields: [\r\n        {\r\n          name: \"name\",\r\n          label: \"Report Name\",\r\n          required: true,\r\n        },\r\n        {\r\n          name: \"description\",\r\n          label: \"Description\",\r\n          required: true,\r\n        },\r\n      ],\r\n      success: function(res) {\r\n        setReports([...reports, res.data]);\r\n        dispatch(toggleModal());\r\n      },\r\n    };\r\n    dispatch(setModalSettings(modalSettings));\r\n  };\r\n\r\n  // Функция получения отчетов из БД\r\n  const getReports = async () => {\r\n    const req = await axios(\"/admin/ajax/reports\");\r\n    if (req.status === 200 && typeof req.data !== \"string\") {\r\n      setReports(req.data);\r\n    }\r\n  };\r\n\r\n  // Получаем отчеты при рендере компонента\r\n  useEffect(() => {\r\n    getReports();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"admin-tables admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">\r\n            Reports\r\n          </a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Reports</span>\r\n        </div>\r\n        <button onClick={showModal} className=\"btn\">\r\n          Add New\r\n        </button>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({reports.length || \"0\"})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        {reports.length > 0 && <AdminTable columns={columns} rows={reports} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reports;\r\n","import React, {Component} from \"react\";\r\nimport AdminTable from \"./AdminTable\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\nexport default class Tables extends Component{\r\n\t\r\n\tconstructor(props) {\r\n            super(props);\r\n            this.state = {\r\n                editUrl: \"/admin/tables\",\r\n              tag: 'Link',\r\n                modules: [],\r\n                columns: [\r\n                    {\r\n                        name: 'title',\r\n                        title: 'Title',\r\n                        url: true,\r\n                      editUrl: true,\r\n                      tag : 'Link',\r\n                    },\r\n                    {\r\n                        name: 'name',\r\n                        title: 'Name',\r\n                        url: true,\r\n                      editUrl: true,\r\n                      tag : 'Link',\r\n                    },\r\n                    {\r\n                        name: 'description',\r\n                        title: 'Description',\r\n                    },\r\n                    {\r\n                        name: 'setting',\r\n                        title: 'Setting',\r\n                        url: true,\r\n                    },\r\n                    {\r\n                        name: 'updated_at',\r\n                        title: 'Updated At',\r\n                    },\r\n\t\t]\r\n            };\r\n            \r\n            this.resource = new Resource({\r\n                route: '/admin/ajax/tables'\r\n            });\r\n\t\t\r\n\t}\r\n\t\r\n\tasync componentDidMount(){\r\n            this.resource.getAll().then(modules=>{\r\n                this.setModules(modules);\r\n            });\r\n        }\r\n\t\r\n\tsetModules(modules){\r\n            console.log(modules);\r\n            let urlModules = modules.map((row) => {\r\n                row.editUrl = \"/admin/tables/edit/\" + row.id;\r\n                return row;\r\n            });\r\n            \r\n            console.log(urlModules);\r\n            this.setState((state) => {\r\n\t\treturn {modules: urlModules};\r\n            });\r\n        }\r\n\t\r\n\trender(){\r\n            return <div className=\"admin-tables admin-page\">\r\n                <div className=\"admin-heading\">\r\n                    <div className=\"admin-breadcrumbs\">\r\n                        <a className=\"admin-breadcrumbs__link\" href=\"#\">Tables</a>\r\n                        <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                        <span className=\"admin-breadcrumbs__current\">All Tables</span>\r\n                    </div>\r\n                    <Link className=\"btn\" to=\"/admin/tables/add\">Add New</Link>\r\n                    <div className=\"admin-filters\">\r\n                        <span className=\"admin-filters__current\">All ({this.state.modules.length || '0'})</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"admin-content\">\r\n                    <AdminTable columns={this.state.columns} rows={this.state.modules}/>\r\n                </div>\r\n            </div>;\r\n\t}\r\n\t\t\r\n    \r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"7\" height=\"10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1 8.5L5 5 1 1\" stroke=\"#343B4C\" strokeWidth=\"1.5\" /></svg>);","import React, {Component} from \"react\";\r\nimport Left from \"../svgs/left.svg\";\r\nimport Right from \"../svgs/right.svg\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport \"../sass/components/admin-pagination.scss\"\r\n\r\nclass Pagination extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      currentPage: 1,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Задает текущую страницу\r\n   * @param num\r\n   */\r\n  setCurrentPage(num) {\r\n    num = parseInt(num) || 1;\r\n    if(num <= 1) {\r\n      this.setState({currentPage: 1});\r\n      this.props.changePage(1);\r\n      return;\r\n    }\r\n    if(num >= this.props.pageCount) {\r\n      this.setState({currentPage: this.props.pageCount});\r\n      this.props.changePage(this.props.pageCount);\r\n      return;\r\n    }\r\n    this.setState({currentPage: num});\r\n    this.props.changePage(num)\r\n\r\n  }\r\n\r\n  /**\r\n   * надо проверить, чтобы при обновлении props.pageCount state.currentPage было меньше\r\n   */\r\n  componentDidUpdate(){\r\n\r\n    if(this.state.currentPage > this.props.pageCount){\r\n      this.setCurrentPage(this.props.currentPage || this.props.pageCount);\r\n    }\r\n  }\r\n  render(){\r\n    return<div className=\"pagination\">\r\n      <div className=\"version\">\r\n        <p className=\"pagination__version\">\r\n          {/*App creating*/}\r\n          {/*with*/}\r\n          {/*<a className=\"pagination__link\"*/}\r\n             {/*target=\"_blank\"*/}\r\n             {/*href=\"https://altrp.com/\">Altrp</a>*/}\r\n          {/*/*/}\r\n          Version {altrp_version} </p>\r\n      </div>\r\n      <div className=\"pagination__buttons\">\r\n        <p className=\"pagination__text\">{ this.props.itemsCount} Items</p>\r\n        <div className={this.state.currentPage <= 1 ? \" pagination__disabled pagination__toStart pagination__move\" : \"pagination__move pagination__toStart\"}\r\n        onClick={()=> this.setCurrentPage(1) }>\r\n          <Right className=\"right__arrow\" />\r\n          <Right className=\"right__arrow\" />\r\n        </div>\r\n        <div className={this.state.currentPage <= 1 ? \"pagination__disabled pagination__prev pagination__move\" : \"pagination__move pagination__prev\" } \r\n        onClick={()=> this.setCurrentPage(--this.state.currentPage) } ><Right className=\"right__arrow\" /> </div>\r\n        <input type=\"text\"\r\n               className=\"pagination__indicator\"\r\n               value={this.state.currentPage || 1}\r\n               onChange={e=> this.setCurrentPage(e.target.value.replace(/[^0-9]/g, '') || 1) } />\r\n        <div className=\"pagination__map\">of {this.props.pageCount}</div>\r\n        <div className={this.state.currentPage >= this.props.pageCount ? \"pagination__disabled pagination__next pagination__move\" : \"pagination__move pagination__next\"} onClick={()=>{\r\nthis.setCurrentPage(++this.state.currentPage);\r\n        }}> <Right/> </div>\r\n        <div className={this.state.currentPage >= this.props.pageCount ? \"pagination__disabled pagination__move\" : \"pagination__move\"}\r\n        onClick={()=> this.setCurrentPage(this.props.pageCount) }>\r\n          <Right/> <Right/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Pagination","import React, {Component} from \"react\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport AdminTable from \"./AdminTable\";\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport { generateId, redirect, objectDeepCleaning } from \"../js/helpers\";\r\nimport Pagination from \"./Pagination\";\r\n\r\n\r\nexport default class Templates extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      templates: [],\r\n      allTemplates: [],\r\n      templateAreas: [],\r\n      activeTemplateArea: {},\r\n      pageCount: 1,\r\n      currentPage: 1,\r\n    };\r\n    this.resource = new Resource({\r\n      route: '/admin/ajax/templates'\r\n    });\r\n    this.templateTypesResource = new Resource({\r\n      route: '/admin/ajax/areas'\r\n    });\r\n    this.onClick = this.onClick.bind(this);\r\n    this.changePage = this.changePage.bind(this);\r\n    this.changeActiveArea = this.changeActiveArea.bind(this);\r\n    this.generateTemplateJSON = this.generateTemplateJSON.bind(this);\r\n  }\r\n  changeActiveArea(e){\r\n    let areaId = parseInt(e.target.dataset.area);\r\n    let activeTemplateArea = {};\r\n    this.state.templateAreas.forEach(area=>{\r\n      if(area.id === areaId){\r\n        activeTemplateArea = area;\r\n      }\r\n    });\r\n    this.setActiveArea(activeTemplateArea)\r\n  }\r\n\r\n  /**\r\n   * Смена текущей страницы\r\n   */\r\n  changePage(currentPage){\r\n    this.updateTemplates(currentPage, this.state.activeTemplateArea);\r\n    this.setState(state => ({ ...state, currentPage}));\r\n  }\r\n\r\n  /**\r\n   * Сменить текущую область шаблона (вкладка)\r\n   * @param activeTemplateArea\r\n   */\r\n  setActiveArea(activeTemplateArea){\r\n    this.updateTemplates(1, activeTemplateArea);\r\n    this.setState(state=>{\r\n      return{...state, activeTemplateArea};\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Метод для обновления списка шаблонов\r\n   * @param currentPage\r\n   * @param activeTemplateArea\r\n   */\r\n  updateTemplates(currentPage, activeTemplateArea){\r\n    this.resource.getQueried({\r\n      area: activeTemplateArea.name,\r\n      page: currentPage,\r\n      pageSize: 10,\r\n    }).then(res=>{\r\n      this.setState(state=> {\r\n        return {\r\n          ...state,\r\n          pageCount: res.pageCount,\r\n          templates: res.templates\r\n        }\r\n      });\r\n    });\r\n  }\r\n  /** @function generateTemplateJSON\r\n  * Генерируем контент файла template в формате JSON\r\n  * @param {object} template Данные, получаемые с сервера\r\n  * @return {strig} Строка в формате JSON\r\n  */\r\n  generateTemplateJSON(template) {\r\n    const data = objectDeepCleaning(JSON.parse(template.data))\r\n    const json = JSON.stringify({ \r\n      template_area: this.state.activeTemplateArea.name, \r\n      data\r\n    });\r\n    console.log(JSON.parse(json))\r\n    return json;\r\n  }\r\n  /** @function downloadJSONFile\r\n  * Скачиваем файл\r\n  * @param {object} template Данные, получаемые с сервера\r\n  */\r\n  downloadJSONFile(template) {\r\n    const element = document.createElement(\"a\");\r\n    const file = new Blob([this.generateTemplateJSON(template)], { type: 'text/plain' });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = `${template.name}.json`;\r\n    document.body.appendChild(element); // Required for this to work in FireFox\r\n    element.click();\r\n  }\r\n  async componentDidMount(){\r\n    let templateAreas = await this.templateTypesResource.getAll();\r\n    this.setActiveArea(templateAreas[0]);\r\n    this.setState(state=>{\r\n      return{...state,templateAreas}\r\n    });\r\n    this.updateTemplates(this.state.currentPage, this.state.activeTemplateArea)\r\n  }\r\n  onClick(){\r\n    let modalSettings = {\r\n      title: 'Add New Template',\r\n      submitButton: 'Add',\r\n      submit: function(formData){\r\n        let data = {\r\n          name: formData.title,\r\n          title: formData.title,\r\n          area: formData.area,\r\n          data:{\r\n            children: [],\r\n            id: generateId(),\r\n            name: \"root-element\",\r\n            settings: {},\r\n            type: \"root-element\",\r\n          }\r\n        };\r\n        return (new Resource({route:'/admin/ajax/templates'})).post(data)\r\n      },\r\n      fields: [\r\n        {\r\n          name: 'title',\r\n          label: 'Template Name',\r\n          required: true,\r\n        },\r\n        {\r\n          name: 'area',\r\n          label: 'Area Name',\r\n          required: true,\r\n          type: 'select',\r\n          options: this.getAreasOptions(),\r\n          defaultValue: this.state.activeTemplateArea.id\r\n        }\r\n      ],\r\n      success: function(res){\r\n        if(res.redirect && res.url){\r\n          redirect(res.url)\r\n        }\r\n      },\r\n      active: true,\r\n    };\r\n    store.dispatch(setModalSettings(modalSettings));\r\n  }\r\n  getAreasOptions(){\r\n    return this.state.templateAreas;\r\n  }\r\n  setTemplates(templates){\r\n    let allTemplates = templates;\r\n    templates = templates.filter(template=>{\r\n      return template.area === this.state.activeTemplateArea.name;\r\n    });\r\n    this.setState(state=>{\r\n      return{...state, templates, allTemplates};\r\n    });\r\n  }\r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Templates</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">All Templates</span>\r\n        </div>\r\n        <button onClick={this.onClick} className=\"btn\">Add New</button>\r\n        <div className=\"admin-filters\">\r\n          <span className=\"admin-filters__current\">All ({this.state.allTemplates.length || ''})</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <ul className=\"nav nav-pills admin-pills\">\r\n          {this.state.templateAreas.map(area=>{\r\n            let tabClasses = ['nav-link',];\r\n            if(this.state.activeTemplateArea.name === area.name){\r\n              tabClasses.push('active');\r\n            }\r\n            return<li className=\"nav-item\" key={area.id}>\r\n              <button className={tabClasses.join(' ')}\r\n                      onClick={this.changeActiveArea}\r\n                      data-area={area.id}>{area.title}</button>\r\n            </li>\r\n          })}\r\n        </ul>\r\n        <AdminTable columns={[\r\n          {\r\n            name: 'title',\r\n            title: 'Title',\r\n            url: true,\r\n            target: '_blank',\r\n          },\r\n          {\r\n            name: 'author',\r\n            title: 'Author',\r\n          },\r\n          ]}\r\n          rows={this.state.templates}\r\n          quickActions={[{ tag: 'a', props: {\r\n            href: '/admin/editor?template_id=:id',\r\n            target: '_blank',\r\n            // className: ''\r\n            },\r\n            title: 'Edit'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates/:id/reviews',\r\n            method: 'delete',\r\n            // className: ''\r\n            title: 'Clear History'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates',\r\n            method: 'get',\r\n            after: response => this.downloadJSONFile(response),\r\n            title: 'Export'\r\n          }, {\r\n            tag: 'button',\r\n            route: '/admin/ajax/templates/:id',\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateTemplates(this.state.currentPage, this.state.activeTemplateArea),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n        />\r\n        <Pagination pageCount={this.state.pageCount || 1}\r\n                    currentPage={this.state.currentPage}\r\n                    changePage={this.changePage}\r\n                    itemsCount={this.state.templates.length }\r\n        />\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"10\" height=\"11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M5.583 5.354L9.23 1.707 8.523 1 4.9 4.622 1.753 1.024 1 1.683l3.212 3.67L1 9.025l.753.659L4.9 6.085l3.622 3.622L9.23 9 5.583 5.354z\" fill=\"#343B4C\" /><path d=\"M9.23 1.707l.177.177.176-.177-.176-.177-.177.177zM5.583 5.354l-.176-.177-.177.177.177.176.176-.176zM8.523 1L8.7.823 8.523.646l-.177.177.177.177zM4.9 4.622l-.188.165.175.2.19-.188-.177-.177zM1.753 1.024L1.94.86 1.776.672l-.188.164.165.188zM1 1.683l-.165-.188-.188.164.165.188L1 1.683zm3.212 3.67l.188.165.144-.164-.144-.165-.188.165zM1 9.025L.812 8.86l-.165.188.188.164L1 9.024zm.753.659l-.165.188.188.165.165-.189-.188-.164zM4.9 6.085l.176-.177-.189-.189-.175.201.188.165zm3.622 3.622l-.177.177.177.177.177-.177-.177-.177zM9.23 9l.177.177L9.583 9l-.176-.177L9.23 9zm-.177-7.47L5.407 5.177l.353.353 3.647-3.646-.354-.354zm-.707-.353l.707.707.354-.354L8.7.823l-.354.354zM5.077 4.799L8.7 1.177 8.346.823 4.724 4.445l.353.354zm-3.513-3.61l3.149 3.598.376-.33L1.94.86l-.377.329zm-.4.682l.753-.659-.33-.376-.752.659.33.376zM4.4 5.189l-3.212-3.67-.376.328 3.212 3.671.376-.33zm-.376 0L.812 8.859l.376.33L4.4 5.519l-.376-.33zM.835 9.212l.753.659.33-.376-.753-.659-.33.376zm1.106.635L5.089 6.25l-.377-.33-3.148 3.598.377.33zm2.783-3.585l3.622 3.622.354-.354-3.623-3.622-.353.354zM8.7 9.884l.707-.707-.354-.354-.707.707.354.354zm.707-1.06L5.76 5.176l-.353.353 3.646 3.647.354-.354z\" fill=\"#000\" /></svg>);","import {connect} from \"react-redux\";\r\nimport React, {Component} from \"react\";\r\nimport TimesIcon from '../svgs/times.svg';\r\nimport store from \"../js/store/store\";\r\nimport {toggleModal} from \"../js/store/modal-settings/actions\";\r\n\r\n\r\nclass AdminModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.toggleModal = this.toggleModal.bind(this);\r\n    this.changeValue = this.changeValue.bind(this);\r\n    this.storeSubscribe = this.storeSubscribe.bind(this);\r\n    this.submit = this.submit.bind(this);\r\n    this.formData = {};\r\n    props.fields.forEach(field=>{\r\n      if(field.defaultValue){\r\n        this.formData[field.name] = field.defaultValue;\r\n      }\r\n    });\r\n    this.state = {\r\n      errors: [],\r\n    };\r\n    store.subscribe(this.storeSubscribe);\r\n  }\r\n  storeSubscribe(){\r\n    store.getState().modalSettings.fields.forEach(field=>{\r\n      if(field.defaultValue){\r\n        this.formData[field.name] = field.defaultValue;\r\n      }\r\n    });\r\n  }\r\n  submit() {\r\n    let valid = true;\r\n    let errors = this.props.fields.map(field => {\r\n      if (field.required &&\r\n          !this.formData[field.name]) {\r\n        valid = false;\r\n        return field.errorMessage || `Need complete this field`;\r\n      }\r\n    });\r\n    if (! valid) {\r\n      this.setState(state => {\r\n        return {...state, errors}\r\n      });\r\n      return;\r\n    }\r\n    this.props.submit(this.formData).then(this.props.success)\r\n  }\r\n\r\n  changeValue(e) {\r\n    let target = e.target;\r\n    this.formData[target.dataset.field] = target.value;\r\n    let errors = [...this.state.errors];\r\n    errors[target.dataset.error] = '';\r\n    this.setState(state => {\r\n      return {...state, errors}\r\n    });\r\n  }\r\n\r\n  toggleModal() {\r\n    store.dispatch(toggleModal());\r\n  }\r\n\r\n  render() {\r\n    let modalClasses = 'admin-modal';\r\n    if (this.props.active) {\r\n      modalClasses += ' admin-modal_active';\r\n    }\r\n    return <div className={modalClasses}>\r\n      <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n      <div className=\"admin-modal-content\">\r\n        <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n        <div className=\"admin-caption\">{this.props.title}</div>\r\n        <div className=\"admin-modal-form form\">\r\n          {\r\n            this.props.fields.map((field, idx) => <label className=\"form-label\"\r\n                                                         data-field={field.name}\r\n                                                         key={field.name}>{field.label}\r\n              {(field.type !== 'select') ?\r\n                  <input type={field.type || 'text'}\r\n                         className=\"form__input\"\r\n                         data-field={field.name}\r\n                         data-error={idx}\r\n                         defaultValue={field.defaultValue || ''}\r\n                         onChange={this.changeValue}/> :\r\n                  <select className=\"form__input\"\r\n                          data-field={field.name}\r\n                          data-error={idx}\r\n                          defaultValue={field.defaultValue || ''}\r\n                          onChange={this.changeValue}>\r\n                    <option value=\"\"/>\r\n                    {\r\n                      field.options.map(option =>\r\n                          <option key={option.id}\r\n                                  value={option.id}\r\n                                  children={option.title || option.name}/>)\r\n                    }\r\n                  </select>\r\n              }\r\n              {this.state.errors[idx] ? <span className=\"form-label__error\">{this.state.errors[idx]}</span> : ''}\r\n            </label>)\r\n          }\r\n          <div className=\"form-bottom\">\r\n            <button className=\"btn btn_success\" onClick={this.submit}>{this.props.submitButton}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.modalSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AdminModal);\r\n","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AltrpSelect from \"./altrp-select/AltrpSelect\";\r\n\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: {},\r\n      value: {},\r\n      redirectAfterSave: false,\r\n      templates: [],\r\n      models: [],\r\n    };\r\n    this.resource = new Resource({route: '/admin/ajax/pages'});\r\n    this.model_resource = new Resource({route: '/admin/ajax/models_options'});\r\n    this.templateResource = new Resource({route: '/admin/ajax/templates'});\r\n    this.savePage = this.savePage.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Компонент загрузился\r\n   * получыаем данный страницы + опции для шаблона\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount(){\r\n    let res = await this.templateResource.getOptions();\r\n    this.setState(state=>{\r\n      return{...state, templates: res}\r\n    });\r\n\r\n    let models_res = await this.model_resource.getAll();\r\n    this.setState(state=>{\r\n      return{...state, models: models_res}\r\n    });\r\n    let id = this.props.match.params.id;\r\n    id = parseInt(id);\r\n    if(id){\r\n      let pageData = await this.resource.get(id);\r\n      this.setState(state=>{\r\n        return{...state, value:pageData, id}\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Сохранить страницу или добавить новую\r\n   * @param e\r\n   * @return {Promise<void>}\r\n   */\r\n  async savePage(e){\r\n    e.preventDefault();\r\n    let res;\r\n    let path = this.state.value.path;\r\n    path = path.split('\\\\').join('/');\r\n    path = (path[0] !== '/') ? `/${path}` : path;\r\n\r\n    let redirect = this.state.value.redirect;\r\n    redirect = (redirect || '').split('\\\\').join('/');\r\n    if(redirect){\r\n      redirect = (redirect[0] !== '/') ? `/${redirect}` : redirect;\r\n    }\r\n    this.state.value.redirect = redirect;\r\n    this.state.value.path = path;\r\n    if(this.state.id){\r\n      res = await this.resource.put(this.state.id, this.state.value);\r\n    } else {\r\n      res = await this.resource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.setState(state=>{\r\n        return {...state, redirectAfterSave: true}\r\n      });\r\n    } else {\r\n      this.setState(state=>{\r\n        return {...state, value: {}}\r\n      });\r\n    }\r\n  }\r\n  changeValue(value, field){\r\n    if(field === 'path'){\r\n      value = value.split('\\\\').join('/');\r\n      value = (value[0] !== '/') ? `/${value}` : value;\r\n    }\r\n    if(field === 'redirect'){\r\n      value = value.split('\\\\').join('/');\r\n      if(value){\r\n        value = (value[0] !== '/') ? `/${value}` : value;\r\n      }\r\n    }\r\n    this.setState(state=>{\r\n      state = {...state};\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n  render() {\r\n    if(this.state.redirectAfterSave){\r\n      return<Redirect to=\"/admin/pages\"/>\r\n    }\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/pages\">Pages</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{this.state.value.title || 'Add New Page'}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <form className=\"admin-form\" onSubmit={this.savePage}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-title\">Title</label>\r\n            <input type=\"text\" id=\"page-title\" required={1}\r\n                   value={this.state.value.title || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'title')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-path\">Path</label>\r\n            <input type=\"text\" id=\"page-path\" required={1}\r\n                   value={this.state.value.path || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'path')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          {/*<div className=\"form-group\">*/}\r\n            {/*<label htmlFor=\"page-template\">Content Template</label>*/}\r\n            {/*<select id=\"page-template\"*/}\r\n                   {/*value={this.state.value.template_id || ''}*/}\r\n                   {/*onChange={e => {this.changeValue(e.target.value, 'template_id')}}*/}\r\n                   {/*className=\"form-control\">*/}\r\n              {/*<option value=\"\"/>*/}\r\n              {/*{*/}\r\n                {/*this.state.templates.map(template=>{*/}\r\n                  {/*return <option value={template.value} key={template.value}>{template.label}</option>*/}\r\n                {/*})*/}\r\n              {/*}*/}\r\n            {/*</select>*/}\r\n          {/*</div>*/}\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-model\">Model</label>\r\n            <select id=\"page-model\"\r\n                   value={this.state.value.model_id || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'model_id')}}\r\n                   className=\"form-control\">\r\n              <option value=\"\"/>\r\n              {\r\n                this.state.models.map(model=>{\r\n                  return <option value={model.value} key={model.value}>{model.label}</option>\r\n                })\r\n              }\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"page-roles\">Roles</label>\r\n            <AltrpSelect id=\"page-roles\"\r\n                         isMulti={true}\r\n                         optionsRoute=\"/admin/ajax/role_options\"\r\n                         placeholder=\"All\"\r\n                         defaultOptions={[\r\n                           {\r\n                             value: 'guest',\r\n                             label: 'Guest',\r\n                           }\r\n                         ]}\r\n                         value={this.state.value.roles}\r\n                         onChange={value => {this.changeValue(value, 'roles')}}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"redirect\">Redirect</label>\r\n            <input type=\"text\" id=\"redirect\"\r\n                   value={this.state.value.redirect || ''}\r\n                   onChange={e => {this.changeValue(e.target.value, 'redirect')}}\r\n                   className=\"form-control\"/>\r\n          </div>\r\n          <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n        </form>\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddPage);\r\n","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"20\" height=\"22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M10 22a2.75 2.75 0 002.749-2.75H7.25A2.75 2.75 0 0010 22zm9.255-6.433c-.83-.892-2.383-2.234-2.383-6.63 0-3.338-2.341-6.01-5.498-6.667v-.895a1.375 1.375 0 10-2.748 0v.895C5.469 2.926 3.128 5.6 3.128 8.938c0 4.395-1.553 5.737-2.383 6.63a1.343 1.343 0 00-.37.932 1.376 1.376 0 001.38 1.375h16.49c.822 0 1.376-.67 1.38-1.375a1.342 1.342 0 00-.37-.933z\" fill=\"#8E94AA\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"18\" height=\"18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M11.625 13.5h-.75a.375.375 0 00-.375.375V16.5h-9v-15h9v2.625c0 .207.168.375.375.375h.75A.375.375 0 0012 4.125V1.5A1.5 1.5 0 0010.5 0h-9A1.5 1.5 0 000 1.5v15A1.5 1.5 0 001.5 18h9a1.5 1.5 0 001.5-1.5v-2.625a.375.375 0 00-.375-.375z\" fill=\"#8E94AA\" /><path d=\"M17.878 8.724l-4.5-4.125a.374.374 0 00-.628.276v.75c0 .106.045.208.124.279l2.607 2.346H4.875a.375.375 0 00-.375.375v.75c0 .208.168.375.375.375h10.606l-2.607 2.347a.375.375 0 00-.124.278v.75a.375.375 0 00.628.277l4.5-4.125a.374.374 0 000-.553z\" fill=\"#8E94AA\" /></svg>);","import React, {Component} from \"react\";\r\nimport BellIcon from './../svgs/bell.svg';\r\nimport UserIcon from './../svgs/user.svg';\r\nimport LogoutIcon from './../svgs/logout.svg';\r\nimport {logout} from \"../js/helpers\";\r\n\r\nclass UserTopPanel extends Component {\r\n  render(){\r\n    return<div className=\"admin-user-top-panel top-panel d-flex align-items-center\">\r\n      <a href=\"#\" className=\"top-panel-notification notification\">\r\n        <BellIcon className=\"notification__icon\"/>\r\n      </a>\r\n      <UserIcon className=\"top-panel__portrait\"/>\r\n      <div className=\"top-panel__greeting\">Hello, administrator</div>\r\n      <button className=\"top-panel-logout logout\" onClick={logout}>\r\n        <LogoutIcon className=\"logout__icon\"/>\r\n      </button>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default UserTopPanel","import {SET_CURRENT_ELEMENT} from './actions'\r\n\r\nconst defaultState = {\r\n  currentElement: {}\r\n};\r\n\r\nexport function currentElementReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_ELEMENT:{\r\n      state = {\r\n        currentElement: action.element,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import { CHANGE_TEMPLATE_STATUS } from \"./actions\";\r\nimport  CONSTANTS  from \"../../consts\";\r\n\r\nconst defaultState = {\r\n  status: CONSTANTS.TEMPLATE_UPDATED,\r\n};\r\n\r\nexport function templateStatusReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case CHANGE_TEMPLATE_STATUS:\r\n      return { ...state, status: action.status };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {START_DRAG, STOP_DRAG} from './actions'\r\n\r\nconst defaultState = {\r\n  dragState: STOP_DRAG\r\n};\r\n\r\nexport function elementDragReducer(state, action) {\r\n  if(! state){\r\n    return defaultState;\r\n  }\r\n  if(! action){\r\n    return{dragState: STOP_DRAG}\r\n  }\r\n  switch (action.type) {\r\n    case STOP_DRAG:{\r\n      state = {\r\n        dragState: STOP_DRAG,\r\n        element:null,\r\n      };\r\n    }break;\r\n    case START_DRAG:{\r\n      state = {\r\n        dragState: START_DRAG,\r\n        element: action.element\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","export const START_DRAG = 'START_DRAG';\r\nexport const STOP_DRAG = 'STOP_DRAG';\r\nexport const CHANGE_DRAG_STATE = 'CHANGE_DRAG_STATE';\r\n\r\nexport function startDrag(element) {\r\n  return {\r\n    type: START_DRAG,\r\n    element\r\n  };\r\n}\r\nexport function stopDrag() {\r\n  return {\r\n    type: STOP_DRAG,\r\n  };\r\n}\r\n\r\n\r\n","import {SET_CURRENT_CONTEXT_ELEMENT} from './actions'\r\n\r\nconst defaultState = {\r\n  currentElement: {}\r\n};\r\n\r\nexport function currentElementContextReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_CONTEXT_ELEMENT:{\r\n      state = {\r\n        currentElement: action.element,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {SHOW_DYNAMIC_CONTENT, HIDE_DYNAMIC_CONTENT, TOGGLE_DYNAMIC_CONTENT} from './actions'\r\n\r\nconst defaultState = {\r\n  show: false,\r\n  params: {\r\n    type: 'text',\r\n  },\r\n  element: null,\r\n  onSelect: (contentData)=>{\r\n    console.log(contentData);\r\n  }\r\n};\r\n\r\nexport function dynamicContentReducer(state, action) {\r\n  state = state || {...defaultState};\r\n  switch (action.type) {\r\n    case SHOW_DYNAMIC_CONTENT:{\r\n      state = {\r\n        params: {...action.params},\r\n        element: action.element,\r\n        show: true,\r\n      };\r\n    }break;\r\n    case TOGGLE_DYNAMIC_CONTENT:{\r\n      state = {\r\n        params: {...action.params},\r\n        element: action.element,\r\n        show: ! state.show,\r\n      };\r\n    }break;\r\n    case HIDE_DYNAMIC_CONTENT:{\r\n      state = {\r\n          ...defaultState,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}","import {CONTROLLER_VALUE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  value: '',\r\n  controlId: ''\r\n\r\n};\r\n\r\nexport function controllerReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case CONTROLLER_VALUE:{\r\n      state = {\r\n        ...action.data,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}\r\n","import {SET_ACTIVE_SECTION} from './actions';\r\n\r\nconst defaultState = {};\r\n\r\nexport function settingSectionMenuReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_SECTION:\r\n      let newState = {...state};\r\n      newState[action.elementName] = newState[action.elementName] || {};\r\n      /**\r\n       * При повторном клике сохраним null, чтобы ни одна не была открыта\r\n       */\r\n      if(newState[action.elementName][action.tab] !== action.sectionID){\r\n        newState[action.elementName][action.tab] = action.sectionID;\r\n      } else {\r\n        newState[action.elementName][action.tab] = null;\r\n      }\r\n      return newState;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import {SET_CURRENT_TAB} from \"./actions\"\r\n\r\nconst defaultState = {\r\n  currentTab: ''\r\n};\r\n\r\nexport function currentTabReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_CURRENT_TAB:{\r\n      state = {\r\n        currentTab: action.tab,\r\n      };\r\n    }break;\r\n  }\r\n  return state;\r\n}\r\n","import { SET_CURRENT_STATE } from \"./actions\"\r\n\r\nconst defaultState = {\r\n  title: \"N\",\r\n  value: \"\",\r\n};\r\n\r\nexport function currentStateReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_CURRENT_STATE: {\r\n      state = {\r\n        ...state,\r\n        title: action.title,\r\n        value: action.value,\r\n      };\r\n    }\r\n      break;\r\n  }\r\n  return state;\r\n}\r\n","import { SET_CURRENT_SCREEN } from './actions'\r\nimport CONSTANTS from \"../../consts\";\r\n\r\nconst defaultState = CONSTANTS.SCREENS[0];\r\n\r\nexport function currentScreenReducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SET_CURRENT_SCREEN: {\r\n      state = {\r\n        ...action.screen\r\n      };\r\n      return state;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}","import {SET_TEMPLATE_DATA} from './actions'\r\n\r\nconst defaultState = {\r\n};\r\n\r\nexport function templateDataReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case SET_TEMPLATE_DATA:{\r\n      state = action.templateData;\r\n    }break;\r\n  }\r\n  return state;\r\n}","import { combineReducers } from 'redux';\r\nimport { currentElementReducer } from './current-element/reducers';\r\nimport { templateStatusReducer } from \"./template-status/reducers\";\r\nimport { elementDragReducer } from \"./element-drag/reducers\";\r\nimport { assetsSettingsReducer } from \"./assets-browser/reducers\";\r\nimport { currentElementContextReducer } from \"./current-context-element/reducers\";\r\nimport { dynamicContentReducer } from \"./dynamic-content/reducers\";\r\nimport { controllerReducer } from \"./controller-value/reducers\";\r\nimport { settingSectionMenuReducer } from \"./setting-section/reducers\"\r\nimport { currentTabReducer } from \"./active-settings-tab/reducers\";\r\nimport { currentStateReducer } from \"./state-section/reducers\";\r\nimport { currentScreenReducer } from './responsive-switcher/reducers';\r\nimport {currentModelReducer} from \"../../../../front-app/src/js/store/current-model/reducers\";\r\nimport {templateDataReducer} from \"./template-data/reducers\";\r\nimport {currentUserReducer} from \"../../../../front-app/src/js/store/current-user/reducers\";\r\n\r\nexport default combineReducers({\r\n  currentElement: currentElementReducer,\r\n  currentContextElement: currentElementContextReducer,\r\n  templateStatus: templateStatusReducer,\r\n  elementDrag: elementDragReducer,\r\n  assetsManagerSettings: assetsSettingsReducer,\r\n  dynamicContentState: dynamicContentReducer,\r\n  controllerValue: controllerReducer,\r\n  settingSectionMenu: settingSectionMenuReducer,\r\n  currentTab: currentTabReducer,\r\n  currentState: currentStateReducer,\r\n  currentScreen: currentScreenReducer,\r\n  currentModel: currentModelReducer,\r\n  templateData: templateDataReducer,\r\n  currentUser: currentUserReducer,\r\n});\r\n","export const SET_CURRENT_ELEMENT = 'SET_CURRENT_ELEMENT';\r\nexport const DROP_ELEMENT = 'ADD_CURRENT_ELEMENT';\r\n\r\nexport function setCurrentElement(element) {\r\n  return {\r\n    type: SET_CURRENT_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\nexport function dropCurrentElement(element) {\r\n  return {\r\n    type: DROP_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\n","export const SET_CURRENT_CONTEXT_ELEMENT = 'SET_CURRENT_CONTEXT_ELEMENT';\r\n\r\nexport function setCurrentContextElement(element) {\r\n  return {\r\n    type: SET_CURRENT_CONTEXT_ELEMENT,\r\n    element\r\n  };\r\n}\r\n\r\n","export const CHANGE_TEMPLATE_STATUS = 'CHANGE_TEMPLATE_STATUS';\r\n\r\nexport function changeTemplateStatus(status) {\r\n  return {\r\n    type: CHANGE_TEMPLATE_STATUS,\r\n    status\r\n  };\r\n}\r\n\r\n","export const SHOW_DYNAMIC_CONTENT = 'SHOW_DYNAMIC_CONTENT';\r\nexport const HIDE_DYNAMIC_CONTENT = 'HIDE_DYNAMIC_CONTENT';\r\nexport const TOGGLE_DYNAMIC_CONTENT = 'TOGGLE_DYNAMIC_CONTENT';\r\n\r\n/**\r\n *\r\n * @param params\r\n * @param element - Элемент, на которые кликнули\r\n * @return {{type: string, params: *, element: *}}\r\n */\r\nexport function showDynamicContent(params, element) {\r\n  return {\r\n    type: SHOW_DYNAMIC_CONTENT,\r\n    params,\r\n    element\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param params\r\n * @param element - Элемент, на которые кликнули\r\n * @return {{type: string, params: *, element: *}}\r\n */\r\nexport function toggleDynamicContent(params, element) {\r\n  return {\r\n    type: TOGGLE_DYNAMIC_CONTENT,\r\n    params,\r\n    element\r\n  };\r\n}\r\n\r\nexport function closeDynamicContent() {\r\n  return {\r\n    type:  HIDE_DYNAMIC_CONTENT,\r\n  };\r\n}\r\n\r\n","export const CONTROLLER_VALUE = 'CONTROLLER_VALUE';\r\n/**\r\n *\r\n * @param {*} value\r\n * @param {string} controlId\r\n * @returns {{data: {controlId: *, value: *}, type: string}}\r\n */\r\nexport function controllerValue(value, controlId) {\r\n  return {\r\n    type: CONTROLLER_VALUE,\r\n    data: {\r\n      controlId,\r\n      value\r\n    }\r\n  };\r\n}\r\n\r\n","export const SET_ACTIVE_SECTION = \"SET_ACTIVE_SECTION\";\r\n\r\nexport function setActiveSection(elementName, tab, sectionID) {\r\n  return {\r\n    type: SET_ACTIVE_SECTION,\r\n    elementName,\r\n    tab,\r\n    sectionID\r\n  }\r\n}\r\n","export const SET_CURRENT_TAB = \"SET_CURRENT_TAB\";\r\n\r\nexport function setCurrentTab(tab) {\r\n  return {\r\n    type: SET_CURRENT_TAB,\r\n    tab\r\n  };\r\n}\r\n","export const SET_CURRENT_STATE = \"SET_CURRENT_STATE\";\r\n\r\nexport function setCurrentState(title, value) {\r\n  return {\r\n    type: SET_CURRENT_STATE,\r\n    title,\r\n    value,\r\n  };\r\n};\r\n","export const SET_CURRENT_SCREEN = \"SET_CURRENT_SCREEN\";\r\n\r\nexport function setCurrentScreen(screen) {\r\n  return {\r\n    type: SET_CURRENT_SCREEN,\r\n    screen\r\n  }\r\n}","export const SET_TEMPLATE_DATA = 'SET_TEMPLATE_DATA';\r\nexport function setTemplateData(templateData) {\r\n  return {\r\n    type: SET_TEMPLATE_DATA,\r\n    templateData\r\n  };\r\n}\r\n\r\n","import { createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nlet store = createStore(rootReducer, composeWithDevTools());\r\n\r\nexport default store;\r\n\r\n/**\r\n * Возвращает текущий элемент (тот который в данный момент редлактируется)\r\n * @return {BaseElement}\r\n */\r\nexport function getCurrentElement() {\r\n  return store.getState().currentElement.currentElement;\r\n}\r\n\r\nexport function getCurrentTab() {\r\n  return store.getState().currentTab.currentTab;\r\n}\r\n\r\nexport function getElementState() {\r\n  return store.getState().currentState;\r\n}\r\n\r\n/**\r\n * Возвращает текущие настройки окна редактора\r\n *\r\n * @return {{}} - объект содержит свойства:\r\n * name\r\n * icon\r\n * id\r\n * width\r\n * css\r\n *\r\n */\r\nexport function getCurrentScreen() {\r\n  return store.getState().currentScreen;\r\n}\r\n","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Times from \"../../../svgs/times.svg\";\r\nimport { assetsToggle } from \"../../store/assets-browser/actions\";\r\nimport { iconsManager } from \"../../helpers\";\r\nimport Resource from \"../Resource\";\r\nimport '../../../sass/assets-browser.scss';\r\n\r\n\r\nclass AssetsBrowser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      // activeTab: 'icons',\r\n      activeTab: \"media\",\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: \"icons\",\r\n          title: \"Icons Library\"\r\n        },\r\n        {\r\n          name: \"media\",\r\n          title: \"Media Library\"\r\n        }\r\n      ],\r\n      assets: this.getAssets(\"media\"),\r\n      // assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n      mediaAssets: []\r\n    };\r\n    this.mediaResource = new Resource({ route: \"/admin/ajax/media\" });\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      let res = await this.mediaResource.getAll();\r\n\r\n      this.setState(state => {\r\n        state = { ...state, mediaAssets: res };\r\n        if (state.activeTab === \"media\") {\r\n          state.assets = res;\r\n        }\r\n        return state;\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  }\r\n  getAssets(tab) {\r\n    if (!tab) {\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab) {\r\n      case \"icons\": {\r\n        return iconsManager().getIconsList();\r\n      }\r\n      case \"media\": {\r\n        return this.state ? this.state.mediaAssets : [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e) {\r\n    let selectedAsset = e.currentTarget.dataset.assetname;\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset };\r\n    });\r\n  }\r\n\r\n  tabClick(e) {\r\n    this.setActiveTab(e.target.dataset.tab);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.setState(state => {\r\n      return { ...state, activeTab: tab, assets: this.getAssets(tab) };\r\n    });\r\n  }\r\n\r\n  toggleBrowser() {\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  chooseAsset() {\r\n    let asset;\r\n    this.state.assets.forEach(item => {\r\n      if (item.name === this.state.selectedAsset) {\r\n        asset = item;\r\n      }\r\n    });\r\n    if (!asset) {\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`;\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render() {\r\n    let classes = \"assets-browser\";\r\n    if (this.props.active) {\r\n      classes += \" assets-browser_active\";\r\n    }\r\n    let buttonClasses = \"btn\";\r\n    if (!this.state.selectedAsset) {\r\n      buttonClasses += \" btn_disabled\";\r\n    } else {\r\n      buttonClasses += \" btn_success\";\r\n    }\r\n    return (\r\n      <div className={classes}>\r\n        <div className=\"assets-browser__bg\" onClick={this.toggleBrowser} />\r\n        <div className=\"assets-browser-content\">\r\n          <div className=\"assets-browser-top\">\r\n            <div className=\"caption\">Append Media</div>\r\n            <button className=\"btn btn_bare assets-browser__close\" onClick={this.toggleBrowser} >\r\n              <Times className=\"icon\"/>\r\n            </button>\r\n            <div className=\"assets-browser-nav\">\r\n              {this.state.tabs.map(tab => {\r\n                let tabClasses = \"assets-browser__tab\";\r\n                if (this.state.activeTab === tab.name) {\r\n                  tabClasses += \" assets-browser__tab_active\";\r\n                }\r\n                return (\r\n                  <button\r\n                    className={tabClasses}\r\n                    onClick={this.tabClick}\r\n                    key={tab.name}\r\n                    data-tab={tab.name}\r\n                  >\r\n                    {tab.title}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {this.state.assets.length ? (\r\n            <div className=\"assets-browser-choose-frame\">\r\n              {this.state.assets.map(asset => {\r\n                let AssetContent;\r\n                let classes = \"asset-choose\";\r\n                let assetProps = {\r\n                  className: \"asset-choose__content\"\r\n                };\r\n                if (this.state.activeTab === \"icons\") {\r\n                  AssetContent = asset.iconComponent;\r\n                  classes += \" asset-choose_icon\";\r\n                  // assetProps.viewBox = '0 0 20 20';\r\n                  // assetProps.viewport = '0 0 10 10';\r\n                  assetProps.width = \"20\";\r\n                  assetProps.height = \"20\";\r\n                }\r\n                if (this.state.activeTab === \"media\") {\r\n                  AssetContent = \"img\";\r\n                  assetProps.src = asset.url;\r\n                  classes += \" asset-choose_media\";\r\n                  asset.name = asset.filename;\r\n                  asset.assetType = \"media\";\r\n                }\r\n                if (this.state.selectedAsset === asset.name) {\r\n                  classes += \" asset-choose_selected\";\r\n                }\r\n                return (\r\n                  <div\r\n                    className={classes}\r\n                    data-assetname={asset.name}\r\n                    key={asset.name}\r\n                    onClick={this.selectAsset}\r\n                  >\r\n                    <AssetContent {...assetProps} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <div className=\"assets-browser-bottom\">\r\n            <button className={buttonClasses} onClick={this.chooseAsset}>\r\n              Choose\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import {getCurrentScreen, getElementState} from \"./store/store\";\r\nimport {isEditor} from \"../../../front-app/src/js/helpers\";\r\nimport CONSTANTS from \"./consts\";\r\n\r\nexport function getTemplateId(){\r\n  return (new URL(window.location)).searchParams.get('template_id');\r\n}\r\n/**\r\n * @param {array} names\r\n * */\r\nexport function getClassNames(names) {\r\n  if(! names.length){\r\n    return '';\r\n  }\r\n  let result = '';\r\n  for(let cssClass of names){\r\n    result += cssClass + ' ';\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function settingToState(setting) {\r\n  if(! setting){\r\n    return{};\r\n  }\r\n    return {\r\n    value: setting.getValue(),\r\n    label: setting.getLabel(),\r\n  };\r\n}\r\n\r\nexport function getEditorContent(){\r\n  return window.frames[0].window.altrpEditorContent;\r\n}\r\n/**\r\n * @return {Editor}\r\n * */\r\nexport function getEditor() {\r\n  return window.altrpEditor || window.parent.altrpEditor;\r\n}\r\n\r\nexport function editorSetCurrentElement(element){\r\n  getEditor().modules.templateDataStorage.setCurrentElement(element);\r\n}\r\n/**\r\n * @return {TemplateDataStorage}\r\n * */\r\nexport function getTemplateDataStorage() {\r\n  return window.altrpEditor.modules.templateDataStorage\r\n}\r\n\r\n/**\r\n *\r\n * @return {ElementsFactory}\r\n */\r\nexport function getFactory() {\r\n  return getEditor().modules.elementsFactory;\r\n}\r\n/**\r\n * @param {Event} e\r\n * @param {HTMLElement} element\r\n * */\r\nexport function topOrBottomHover(e, element) {\r\n  let rect = element.getBoundingClientRect();\r\n  let y = e.clientY - rect.top;\r\n  return (y < (rect.height / 2)) ? 'top' : 'bottom';\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n  return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Генерирует суфикс для всех настроек\r\n * на основе elementState и разврешения\r\n * @param {Controller} controller\r\n * @return {string}\r\n */\r\nexport function getElementSettingsSuffix(controller) {\r\n  let suffix_1 = getElementState().value;\r\n  let suffix_2 = (getCurrentScreen().name === CONSTANTS.DEFAULT_BREAKPOINT) ? '' : getCurrentScreen().name;\r\n  if(! (suffix_2 || suffix_1)){\r\n    return '';\r\n  }\r\n  return `_${getElementState().value}_${getCurrentScreen().name}`\r\n}\r\n\r\n/**\r\n * Конвертируем RGBA в HEX формат\r\n * @param {String} строка в формате CSS-правила\r\n * @return {string}\r\n */\r\nexport function rgb2hex(rgb) {\r\n  if (rgb) rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\r\n  return (rgb && rgb.length === 4) ? \"#\" +\r\n    (\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +\r\n    (\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2) +\r\n    (\"0\" + parseInt(rgb[3], 10).toString(16)).slice(-2) : '';\r\n}\r\n\r\nexport function cutString(string, maxLength = 80) {\r\n  if (string.length <= maxLength) return string;\r\n  return string.slice(0, maxLength) + '...';\r\n}\r\n\r\nexport function sortOptions(options, sortDirection) {\r\n  options.sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase() ? 1 : b.label.toLowerCase() > a.label.toLowerCase() ? -1 : 0);\r\n  return sortDirection === \"asc\" ? options : options.reverse();\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Pagination from \"./Pagination\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columnsModel = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  },\r\n  {\r\n    name: 'updated_at',\r\n    title: 'Updated At'\r\n  }\r\n];\r\nconst columnsDataSource = [\r\n  {\r\n    name: 'name',\r\n    title: 'Name',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'model.title',\r\n    title: 'Model'\r\n  },\r\n  {\r\n    name: 'route',\r\n    title: 'Route'\r\n  },\r\n  {\r\n    name: 'type',\r\n    title: 'Type'\r\n  }\r\n];\r\n\r\nexport default class Models extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab: 0,\r\n      modelsCurrentPage: 1,\r\n      dataSourcesCurrentPage: 1,\r\n      models: [],\r\n      modelsSearch: '',\r\n      modelsPageCount: 1,\r\n      modelsCount: 0,\r\n      dataSources: [],\r\n      dataSourcesSearch: '',\r\n      dataSourcesPageCount: 1,\r\n      dataSourcesCount: 0,\r\n    };\r\n    this.switchTab = this.switchTab.bind(this);\r\n    this.changePage = this.changePage.bind(this);\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n    this.dataSourcesResource = new Resource({ route: '/admin/ajax/data_sources' });\r\n    this.itemsPerPage = 10;\r\n  }\r\n\r\n  switchTab(activeTab) {\r\n    this.setState(state => ({ ...state, activeTab }))\r\n  }\r\n\r\n  changePage(currentPage, pagination) {\r\n    this.setState(state => ({ ...state, [pagination]: { ...state[pagination], currentPage } }));\r\n  }\r\n\r\n  /**\r\n   * Обновить список источников данных\r\n   */\r\n  getDataSources = async (dataSourcesSearch) => {\r\n    let res = await this.dataSourcesResource.getQueried({\r\n      page: this.state.dataSourcesCurrentPage,\r\n      pageSize: this.itemsPerPage,\r\n      preset: false,\r\n      s: dataSourcesSearch\r\n    });\r\n    this.setState(state => {\r\n      return {\r\n        ...state,\r\n        dataSources: res.data_sources,\r\n        dataSourcesSearch,\r\n        dataSourcesPageCount: res.pageCount\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Обновить список моделей\r\n   */\r\n  getModels = async (modelsSearch) => {\r\n    let res = await this.modelsResource.getQueried({\r\n      page: this.state.modelsCurrentPage,\r\n      pageSize: this.itemsPerPage,\r\n      preset: false,\r\n      s: modelsSearch\r\n    });\r\n    this.setState(state => {\r\n      return {\r\n        ...state,\r\n        models: res.models,\r\n        modelsSearch,\r\n        modelsPageCount: res.pageCount\r\n      }\r\n    });\r\n  };\r\n\r\n  // slicePage = (array, page, itemsPerPage) => {\r\n  //   return array.slice(page * itemsPerPage - itemsPerPage, page * itemsPerPage);\r\n  // }\r\n\r\n  async componentDidMount() {\r\n    // get: /admin/ajax/models .then(models => {\r\n    //   this.setState({models});\r\n    // });\r\n    let models = await this.modelsResource.getAll();\r\n    this.setState(state => ({\r\n      ...state,\r\n      modelsCount: models.models.length\r\n    }));\r\n\r\n    let data_sources = await this.dataSourcesResource.getAll();\r\n    this.setState(state => ({\r\n      ...state,\r\n      dataSourcesCount: data_sources.data_sources.length\r\n    }));\r\n\r\n    this.getModels();\r\n    this.getDataSources();\r\n  }\r\n\r\n  /**\r\n   * фильтрация по строке\r\n   */\r\n  changeSearchHandler = e => {\r\n    let modelsSearch = e.target.value;\r\n    this.getModels(modelsSearch);\r\n\r\n  };\r\n\r\n  /**\r\n   * фильтрация по строке\r\n   */\r\n  changeDataSourcesSearchHandler = e => {\r\n    let dataSourcesSearch = e.target.value;\r\n    this.getDataSources(dataSourcesSearch);\r\n  };\r\n\r\n  render() {\r\n    const { activeTab, models, dataSources, modelsCurrentPage, dataSourcesCurrentPage, modelsSearch, dataSourcesSearch,\r\n      modelsPageCount, dataSourcesPageCount, modelsCount, dataSourcesCount } = this.state;\r\n\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Tables</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{activeTab === 0 ? 'All Models' : 'All Data Sources'}</span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/tables/${activeTab === 0 ? 'models' : 'data-sources'}/add`}>Add New</Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={activeTab} onSelect={this.switchTab}>\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Tab>\r\n              Models\r\n            </Tab>\r\n            <Tab>\r\n              Data Sources\r\n            </Tab>\r\n          </TabList>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columnsModel}\r\n              search={{\r\n                value: modelsSearch||'',\r\n                changeHandler:this.changeSearchHandler\r\n              }}\r\n              quickActions={[{\r\n                tag: 'Link', props: {\r\n                  href: '/admin/tables/models/edit/:id',\r\n                },\r\n                title: 'Edit'\r\n              }, {\r\n                tag: 'button',\r\n                route: '/admin/ajax/models/:id',\r\n                method: 'delete',\r\n                confirm: 'Are You Sure?',\r\n                after: () => {this.getModels()},\r\n                className: 'quick-action-menu__item_danger',\r\n                title: 'Trash'\r\n              }]}\r\n              rows={models.map(model => ({\r\n                ...model,\r\n                editUrl: '/admin/tables/models/edit/' + model.id\r\n              }))}\r\n            />\r\n            <Pagination pageCount={modelsPageCount || 1}\r\n              currentPage={modelsCurrentPage || 1}\r\n              changePage={modelsCurrentPage => {\r\n                if(this.state.modelsCurrentPage !== modelsCurrentPage){\r\n                  this.setState({modelsCurrentPage}, this.getModels)}\r\n                }\r\n              }\r\n              itemsCount={modelsCount}\r\n            />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columnsDataSource}\r\n              search={{\r\n                value: dataSourcesSearch||'',\r\n                changeHandler:this.changeDataSourcesSearchHandler\r\n              }}\r\n              rows={dataSources.map(dataSource => ({\r\n                ...dataSource,\r\n                editUrl: '/admin/tables/data-sources/edit/' + dataSource.id\r\n              }))}\r\n            />\r\n            <Pagination pageCount={Math.ceil(dataSources.length / this.itemsPerPage)}\r\n              currentPage={dataSourcesCurrentPage}\r\n              changePage={dataSourcesCurrentPage => this.setState({ dataSourcesCurrentPage })}\r\n              itemsCount={dataSources.length}\r\n            />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport { titleToName }from \"../../js/helpers\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n\r\nclass EditModelForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: {...this.props.model}\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.deleteHandler = this.deleteHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Сменить значение поля модели\r\n   * @param value\r\n   * @param field\r\n   */\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      return state\r\n    });\r\n  }\r\n\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state, value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Обновляем state при получении новых props (model)\r\n   */\r\n  componentDidUpdate(prevProps){\r\n    if(this.props !== prevProps){\r\n      this.setState(state => {\r\n        state = { ...state };\r\n        state.value = {...this.props.model};\r\n        return state\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Обработка формы\r\n   * @param e\r\n   */\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    if(_.isFunction(this.props.onSubmit)){\r\n      delete this.state.value.created_at;\r\n      delete this.state.value.updated_at;\r\n      this.props.onSubmit(this.state.value);\r\n    } else {\r\n      console.log(this.state.value);\r\n    }\r\n  }\r\n\r\n  async deleteHandler() {\r\n    // delete: /admin/ajax/models/{model_id}\r\n    let res = await (new Resource({route: '/admin/ajax/models'}).delete(this.props.model.id));\r\n    this.setState(state=>({...state, redirect: '/admin/tables/models/'}))\r\n  }\r\n\r\n  render() {\r\n    const model = this.state.value;\r\n    if(this.state.redirect){\r\n      return <Redirect to={this.state.redirect} push={true}/>\r\n    }\r\n    return <form className=\"admin-form row\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group col-12\">\r\n        <label htmlFor=\"page-title\">Model Title</label>\r\n        <input type=\"text\" id=\"page-title\" required\r\n          value={model.title || ''}\r\n          onChange={this.titleChangeHandler}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-name\">Model Name</label>\r\n        <input type=\"text\" id=\"page-name\" required\r\n          value={model.name || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-description\">Parent Model</label>\r\n        <input type=\"text\" id=\"page-description\"\r\n               value={model.parent_model_id || ''}\r\n               onChange={e => { this.changeValue(e.target.value, 'parent_model_id') }}\r\n               className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group col-4\">\r\n        <label htmlFor=\"page-description\">Model Description</label>\r\n        <input type=\"text\" id=\"page-description\"\r\n          value={model.description || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n      {(model.id) ? '' : <div className=\"form-group col-12 \">\r\n        <label htmlFor=\"model-table_id\" className=\"label_checkbox\">Table</label>\r\n        <AltrpSelect\r\n            id=\"model-table_id\"\r\n            defaultOptions={[\r\n              {\r\n                value: '',\r\n                label: ' ',\r\n              }\r\n            ]}\r\n            value={this.state.value.table_id || ''}\r\n            isDisabled={model.id}\r\n            onChange={value => {this.changeValue(value, 'table_id')}}\r\n            optionsRoute=\"/admin/ajax/tables/options\"/>\r\n      </div>}\r\n      <div className=\"row col-12\">\r\n        <div className=\"form-group col-6 form-check-inline\">\r\n          <input type=\"checkbox\" id=\"page-soft_deletes\"\r\n            checked={model.soft_deletes}\r\n            onChange={e => { this.changeValue(e.target.checked, 'soft_deletes') }}\r\n            className=\"form-check-input form-check-input\" />\r\n          <label htmlFor=\"page-soft_deletes\" className=\"label_checkbox\">Soft Deletes</label>\r\n        </div>\r\n        <div className=\"form-group col-6 form-check-inline\">\r\n          <input type=\"checkbox\" id=\"page-time_stamps\"\r\n            checked={model.time_stamps}\r\n            onChange={e => { this.changeValue(e.target.checked, 'time_stamps') }}\r\n            className=\"form-check-input form-check-input_inline\" />\r\n          <label htmlFor=\"page-time_stamps\" className=\"label_checkbox\">Time Stamps</label>\r\n        </div>\r\n\r\n      </div>\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">{this.props.submitText}</button>\r\n        <Link to=\"/admin/tables/models\"><button className=\"btn\">Cancel</button></Link>\r\n        {this.props.edit\r\n            ? <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>Delete</button>\r\n            : ''}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default EditModelForm;\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter, Redirect } from \"react-router-dom\";\r\nimport EditModelForm from \"./EditModelForm\";\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  }\r\n];\r\n\r\n\r\nclass EditModel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { id } = this.props.match.params;\r\n    this.state = {\r\n      model: {\r\n        name: '',\r\n        title: '',\r\n        description: '',\r\n        bounded_model: '',\r\n        soft_deletes: false,\r\n        time_stamps: false\r\n      },\r\n      fields: null,\r\n      relations: null,\r\n      id,\r\n      queries: [],\r\n      // sql_editors: [],\r\n      // fields: [],\r\n      // relations: []\r\n    };\r\n\r\n    this.modelsResource = new Resource({route: '/admin/ajax/models'});\r\n    if(id){\r\n      this.fieldsResource = new Resource({route: `/admin/ajax/models/${id}/fields`});\r\n      this.relationsResource = new Resource({route: `/admin/ajax/models/${id}/relations`});\r\n      this.queriesResource = new Resource({route: `/admin/ajax/models/${id}/queries`});\r\n    }\r\n  }\r\n\r\n  updateFields = async() => {\r\n    let fields = await this.fieldsResource.getAll();\r\n    fields = fields.filter(({ name }) => name !== 'id');\r\n    this.setState(state => ({ ...state, fields }));\r\n  }\r\n\r\n  updateRelations = async() => {\r\n    let relations = await this.relationsResource.getAll();\r\n    this.setState(state => ({ ...state, relations }));\r\n  }\r\n\r\n  updateQueries = async () => {\r\n    let queries = await this.queriesResource.getAll();\r\n    this.setState(state => ({ ...state, queries }));\r\n  }\r\n\r\n  /**\r\n   * Загрузим данные модели\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount() {\r\n    // TODO: делать запросы асинхронно\r\n    if(this.state.id){\r\n      let model = await this.modelsResource.get(this.state.id);\r\n      let relations = await this.relationsResource.getAll();\r\n      let fields = await this.fieldsResource.getAll();\r\n      let queries = await this.queriesResource.getAll();\r\n      fields = fields.filter(({name}) => name !== 'id');\r\n      this.setState(state=>({\r\n          ...state,\r\n        model,\r\n        relations,\r\n        fields,\r\n        queries\r\n      }))\r\n    }\r\n  }\r\n  /**\r\n   * Обработка формы\r\n   * @return {*}\r\n   */\r\n  onSubmit = async (model) => {\r\n    let res;\r\n    if(this.state.id){\r\n      res = await this.modelsResource.put(this.state.id ,model);\r\n    } else {\r\n      res = await this.modelsResource.post(model);\r\n    }\r\n    this.props.history.push(\"/admin/tables/models\");\r\n  };\r\n  render() {\r\n    const { model, fields, relations, queries, sql_editors } = this.state;\r\n\r\n    const { id } = this.props.match.params;\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Tables / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">{this.state.id ? 'Edit Model' : 'Add Model'}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <EditModelForm model={model}\r\n                       submitText={model.id ? 'Save' : 'Add'}\r\n                       edit={model.id}\r\n                       onSubmit={this.onSubmit}/>\r\n\r\n\r\n        {fields ?  <><h2 className=\"sub-header\">Fields</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          quickActions={[{ tag: 'Link', props: {\r\n              href: `/admin/tables/models/${id}/fields/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          } , {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${id}/fields/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateFields(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n          rows={fields.map(field => ({ ...field, editUrl: `/admin/tables/models/${model.id}/fields/edit/${field.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/fields/add`}>Add Field</Link>\r\n        </> : ''}\r\n        {relations ?<>\r\n        <h2 className=\"sub-header\">Relations</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          quickActions={[{ tag: 'Link', props: {\r\n              href: `/admin/tables/models/${id}/relations/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          } , {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${id}/relations/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateRelations(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n          rows={relations.map(relation => ({ ...relation, editUrl: `/admin/tables/models/${model.id}/relations/edit/${relation.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/relations/add`}>Add Relation</Link>\r\n        </> : ''}\r\n        {queries ? <>\r\n        <h2 className=\"sub-header\">Queries</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          rows={queries.map(query => ({ ...query, editUrl: `/admin/tables/models/${model.id}/queries/edit/${query.id}` }))}\r\n          quickActions={[{\r\n            tag: 'Link', props: {\r\n              href: `/admin/tables/models/${model.id}/queries/edit/:id`,\r\n            },\r\n            title: 'Edit'\r\n          }, {\r\n            tag: 'button',\r\n            route: `/admin/ajax/models/${model.id}/queries/:id`,\r\n            method: 'delete',\r\n            confirm: 'Are You Sure?',\r\n            after: () => this.updateQueries(),\r\n            className: 'quick-action-menu__item_danger',\r\n            title: 'Trash'\r\n          }]}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/queries/add`}>Add Query</Link>\r\n        </> : ''}\r\n        {sql_editors ? <>\r\n        <h2 className=\"sub-header\">SQL Editors</h2>\r\n        <AdminTable\r\n          columns={columns}\r\n          rows={sql_editors.map(query => ({ ...query, editUrl: `/admin/tables/models/${model.id}/sql_editors/edit/${query.id}` }))}\r\n        />\r\n        <Link className=\"btn btn_add\" to={`/admin/tables/models/${model.id}/sql_editors/add`}>Add Editor</Link>\r\n        </> : ''}\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditModel);","import React, { Component } from \"react\";\r\n\r\nclass FieldCalculationLogic extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rightType: \"string\",\r\n      is1stString: true,\r\n      is2ndString: true,\r\n      right: {\r\n        string: '',\r\n        fieldId: '',\r\n        string_1: '',\r\n        fieldId_1: '',\r\n        string_2: '',\r\n        fieldId_2: '',\r\n      }\r\n    };\r\n    this.rightTypeHandler = this.rightTypeHandler.bind(this);\r\n    this.rightChangeHandler = this.rightChangeHandler.bind(this);\r\n    this.setRight = this.setRight.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { right } = this.props.item;\r\n    if (right) {\r\n      typeof this.props.item.right === \"string\" ?\r\n        this.setState({ rightType: \"string\", right: { ...this.state.right, string: right } }) :\r\n        this.setState({ rightType: \"object\", right: { ...this.state.right, fieldId: right.id } })\r\n    }\r\n  }\r\n\r\n  rightTypeHandler(type) {\r\n    this.setState(_state => ({ rightType: type }), this.setRight)\r\n  }\r\n\r\n  rightChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      state.right[name] = value;\r\n      return state;\r\n    }, this.setRight)\r\n  }\r\n\r\n  operatorChangeHandler(value) {\r\n    switch (value) {\r\n      case \"not-null\":\r\n      case \"null\":\r\n        this.rightTypeHandler(\"null\");\r\n        break;\r\n      case \"between\":\r\n        this.rightTypeHandler(\"array\");\r\n        break;\r\n      default:\r\n        this.rightTypeHandler(\"string\");\r\n        break;\r\n    }\r\n    this.props.changeHandler({ value, name: \"operator\" });\r\n  }\r\n\r\n  setRight() {\r\n    const { rightType, is1stString, is2ndString, right } = this.state;\r\n    let value;\r\n\r\n    switch (rightType) {\r\n      case \"string\":\r\n        value = right.string;\r\n        break;\r\n      case \"object\":\r\n        value = { id: right.fieldId }\r\n        break;\r\n      case \"null\":\r\n        value = null\r\n        break;\r\n      case \"array\":\r\n        value = [\r\n          is1stString ? right.string_1 : { id: right.fieldId_1 },\r\n          is2ndString ? right.string_2 : { id: right.fieldId_2 }\r\n        ]\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.props.changeHandler({ name: \"right\", value });\r\n  }\r\n\r\n  render() {\r\n    const { item, index, fieldsOptions, changeHandler, deleteItemHandler } = this.props;\r\n    const { rightType, right, is1stString, is2ndString } = this.state;\r\n    return <>\r\n      <div className=\"flex-container\">\r\n        <p>if</p>\r\n        <button className=\"btn btn_failure\" type=\"button\" onClick={deleteItemHandler}>\r\n          Delete\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor={\"left\" + index}>Field Name</label>\r\n        <select className=\"form-control\" id={\"left\" + index} name=\"left\" required\r\n          value={item.left}\r\n          onChange={({ target: { value, name } }) => changeHandler({ value, name })}\r\n        >\r\n          <option disabled value=\"\" />\r\n          {fieldsOptions.map(({ value, label }) =>\r\n            <option value={value} key={value}>{label}</option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <p>Comparison Operators</p>\r\n\r\n      <div className=\"form-group\">\r\n        <select className=\"form-control\" name=\"operator\" required\r\n          value={item.operator}\r\n          onChange={({ target: { value } }) => this.operatorChangeHandler(value)}\r\n        >\r\n          <option value=\"\" disabled />\r\n          {/* <option value=\"not-null\">Not Null</option>\r\n          <option value=\"null\">Null</option> */}\r\n          <option value=\"==\">Equals</option>\r\n          <option value=\"<>\">Not Equals</option>\r\n          {/* <option value=\"between\">Between</option> */}\r\n          <option value=\">\">&gt;</option>\r\n          <option value=\">=\">&gt;=</option>\r\n          <option value=\"<\">&lt;</option>\r\n          <option value=\"<=\">&lt;=</option>\r\n        </select>\r\n      </div>\r\n\r\n      {[\"string\", \"object\"].includes(rightType) &&\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={rightType === \"string\"}\r\n                onChange={() => this.rightTypeHandler(\"string\")}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string\"\r\n              required={rightType === \"string\"}\r\n              value={right.string}\r\n              disabled={rightType !== \"string\"}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={rightType === \"object\"}\r\n                onChange={() => this.rightTypeHandler(\"object\")}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId\"\r\n              required={rightType === \"object\"}\r\n              value={right.fieldId}\r\n              disabled={rightType !== \"object\"}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>}\r\n\r\n      {rightType === \"array\" && <>\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={is1stString}\r\n                onChange={() => this.setState({ is1stString: true }, this.setRight)}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string_1\"\r\n              required={is1stString}\r\n              value={right.string_1}\r\n              disabled={!is1stString}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={!is1stString}\r\n                onChange={() => this.setState({ is1stString: false }, this.setRight)}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId_1\"\r\n              required={!is1stString}\r\n              value={right.fieldId_1}\r\n              disabled={is1stString}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"centred\">and</p>\r\n\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={is2ndString}\r\n                onChange={() => this.setState({ is2ndString: true }, this.setRight)}\r\n              />\r\n            </label>\r\n            <input type=\"text\" className=\"form-control\" name=\"string_2\"\r\n              required={is2ndString}\r\n              value={right.string_2}\r\n              disabled={!is2ndString}\r\n              onChange={this.rightChangeHandler}\r\n            />\r\n          </div>\r\n\r\n          <p className=\"form-group__inline-wrapper__divider\">or</p>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label htmlFor={\"right\" + index}>Field Name\r\n              <input type=\"radio\" className=\"disabling-radio\"\r\n                checked={!is2ndString}\r\n                onChange={() => this.setState({ is2ndString: false }, this.setRight)}\r\n              />\r\n            </label>\r\n            <select className=\"form-control\" id={\"right\" + index} name=\"fieldId_2\"\r\n              required={!is2ndString}\r\n              value={right.fieldId_2}\r\n              disabled={is2ndString}\r\n              onChange={this.rightChangeHandler}\r\n            >\r\n              <option disabled value=\"\" />\r\n              {fieldsOptions.map(({ value, label }) =>\r\n                <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </>}\r\n\r\n      <p>Then = </p>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor={\"result\" + index}>Value</label>\r\n        <input type=\"text\" className=\"form-control\" id={\"result\" + index} name=\"result\" required\r\n          value={item.result}\r\n          onChange={({ target: { value, name } }) => changeHandler({ value, name })}\r\n        />\r\n      </div>\r\n      <p>E.g. [field_name]*[field_name] + 10</p>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default FieldCalculationLogic;\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\nimport FieldCalculationLogic from \"./FieldCalculationLogic\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { titleToName } from \"../../js/helpers\";\r\n\r\nconst fieldTypeOptions = [\r\n  {\r\n    value: 'string',\r\n    label: 'String'\r\n  },\r\n  {\r\n    value: 'integer',\r\n    label: 'integer'\r\n  },\r\n  {\r\n    value: 'bigInteger',\r\n    label: 'Big Integer'\r\n  },\r\n  {\r\n    value: 'float',\r\n    label: 'Float'\r\n  },\r\n  {\r\n    value: 'boolean',\r\n    label: 'Boolean'\r\n  },\r\n  {\r\n    value: 'text',\r\n    label: 'Text'\r\n  },\r\n  {\r\n    value: 'longText',\r\n    label: 'Long Text'\r\n  },\r\n  {\r\n    value: 'calculated',\r\n    label: 'Calculated'\r\n  },\r\n  {\r\n    value: 'date',\r\n    label: 'Date'\r\n  },\r\n  {\r\n    value: 'time',\r\n    label: 'Time'\r\n  },\r\n  {\r\n    value: 'year',\r\n    label: 'Year'\r\n  },\r\n  {\r\n    value: 'dateTime',\r\n    label: 'Datetime'\r\n  },\r\n  {\r\n    value: 'geometry',\r\n    label: 'Geometry'\r\n  },\r\n  {\r\n    value: 'json',\r\n    label: 'JSON'\r\n  },\r\n  {\r\n    value: 'binary',\r\n    label: 'Binary'\r\n  },\r\n];\r\nconst attributeOptions = [\r\n\r\n  {\r\n    value: 'unsigned',\r\n    label: 'UNSIGNED'\r\n  }\r\n];\r\nconst inputTipeOptions = ['textarea', 'text', 'number', 'slider', 'WYSIWYG', 'color', 'select', 'checkbox', 'radio button'];\r\n\r\n\r\nclass AddFieldForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isAlways: false,\r\n      fieldsOptions: [],\r\n      value: {\r\n        name: '',\r\n        title: '',\r\n        description: '',\r\n        is_label: false,\r\n        is_title: false,\r\n        is_auth: false,\r\n        type: 'string',\r\n        length_value: '',\r\n        default: '',\r\n        attribute: '',\r\n        input_type: 'text',\r\n        options: '',\r\n        null: false,\r\n        indexed: false,\r\n        editable: true,\r\n        calculation: '',\r\n        calculation_logic: [\r\n          { left: '', operator: '', result: '', right: '' }\r\n        ],\r\n      },\r\n      // value: this.props.field || {},\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.itemChangeHandler = this.itemChangeHandler.bind(this);\r\n    this.addItemHandler = this.addItemHandler.bind(this);\r\n    this.deleteItemHandler = this.deleteItemHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n\r\n    this.filedsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/fields` });\r\n    this.fieldsOptionsResource = new Resource({\r\n      route: `/admin/ajax/models/${this.props.match.params.modelId}/field_options`\r\n    });\r\n  }\r\n  /**\r\n   * новый field в props\r\n   * */\r\n  // componentDidUpdate(prevProps){\r\n  //   if(this.props !== prevProps){\r\n  //     this.setState(state => {\r\n  //       state = { ...state };\r\n  //       state.value = {...this.props.field};\r\n  //       return state\r\n  //     });\r\n  //   }\r\n  // }\r\n  /**\r\n   * Изменение данны с валидацией\r\n   * @param {string} value\r\n   * @param {string} field\r\n   */\r\n\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      if (field === 'default') {\r\n\r\n        if(state.value.size && value.length > state.value.size){\r\n          value = value.substring(0, parseInt(state.value.size))\r\n        }\r\n        switch (state.value.type) {\r\n          case 'boolean':{\r\n            if(value === ''){\r\n              value = null;\r\n            } else if (value != '0' && value != '1'){\r\n              value = 1;\r\n            }\r\n          }\r\n          break;\r\n          case 'bigInteger':{\r\n            if(!isNaN(value) && value !== '0'){\r\n              value = parseInt(value);\r\n            } else if(value === ''){\r\n              value = null;\r\n            } else {\r\n              value = '0';\r\n            }\r\n          }\r\n          break;\r\n          case 'integer':{\r\n            if(!isNaN(value) && value !== '0'){\r\n              value = parseInt(value);\r\n            } else if(value === ''){\r\n              value = null;\r\n            } else {\r\n              value = '0';\r\n            }\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state, value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: this.props.match.params.id ? state.value.name : titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    const { history, match } = this.props;\r\n    const { name, title, description, is_label, is_title, is_auth, type, size, default: default_, attribute, input_type,\r\n      options, null: _null, indexed, editable, calculation, calculation_logic } = this.state.value;\r\n\r\n    let data = {};\r\n\r\n    if (type === \"calculated\") {\r\n      this.state.isAlways ?\r\n        data = { title, description, type, calculation, name, } :\r\n        data = { title, description, type, calculation_logic, name, };\r\n    } else {\r\n      data = { name, title, description, is_label, is_title, is_auth, type, size, default: default_, attribute, input_type, null: _null, indexed, editable };\r\n      if (['select', 'checkbox', 'radio button'].includes(input_type)) {\r\n        data = { ...data, options };\r\n      }\r\n      console.log(default_);\r\n      if (['integer', 'bigInteger'].includes(type)) {\r\n        data.default = default_;\r\n      }\r\n    }\r\n\r\n    if (_.isFunction(this.props.onSubmit)) {\r\n      this.props.onSubmit(data);\r\n    }\r\n  }\r\n\r\n  addItemHandler() {\r\n    this.setState(state => {\r\n      state.value.calculation_logic\r\n        .push({ left: '', operator: '', result: '', right: '' });\r\n      return state;\r\n    })\r\n  }\r\n\r\n  deleteItemHandler(index) {\r\n    this.setState(state => {\r\n      state.value.calculation_logic.splice(index, 1);\r\n      return state;\r\n    })\r\n  }\r\n\r\n  itemChangeHandler({ name, value }, index) {\r\n    this.setState(state => {\r\n      state.value.calculation_logic[index][name] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { options } = await this.fieldsOptionsResource.getAll();\r\n\r\n    if (this.props.match.params.id) {\r\n      let value = await this.filedsResource.get(this.props.match.params.id);\r\n\r\n      if (typeof value.calculation_logic === 'string') {\r\n        value.calculation_logic = JSON.parse(value.calculation_logic);\r\n      }  \r\n      this.setState(state => ({ ...state, isAlways: value.calculation ? true : false ,  value: { ...state.value, ...value } }));\r\n    }\r\n    this.setState(state => ({ ...state, fieldsOptions: options }));\r\n  }\r\n\r\n  render() {\r\n    const { modelId } = this.props.match.params;\r\n    return <form className=\"admin-form field-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group \">\r\n        <label htmlFor=\"field-title\">Field Title</label>\r\n        <input type=\"text\" id=\"field-title\" required\r\n          value={this.state.value.title || ''}\r\n          onChange={this.titleChangeHandler}\r\n          className=\"form-control\" />\r\n      </div>\r\n      <div className=\"form-group__inline-wrapper\">\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label htmlFor=\"field-name\">Field Name</label>\r\n          <input type=\"text\" id=\"field-name\" required readOnly={this.props.match.params.id}\r\n            value={this.state.value.name || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n        <div className=\"form-group form-group_width65\">\r\n          <label htmlFor=\"field-description\">Field Description</label>\r\n          <input type=\"text\" id=\"field-description\"\r\n            value={this.state.value.description || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"field-type\">Field Type</label>\r\n        <select id=\"field-type\" required\r\n          value={this.state.value.type || ''}\r\n          onChange={e => { this.changeValue(e.target.value, 'type') }}\r\n          className=\"form-control\"\r\n        >\r\n          <option value=\"\" />\r\n          {fieldTypeOptions.map(item =>\r\n            <option key={item.value} value={item.value}>\r\n              {item.label}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      {this.state.value.type === 'calculated' ?\r\n        <>\r\n          <div className=\"form-group col-6 form-check-inline\">\r\n            <input type=\"checkbox\" id=\"always\"\r\n              className=\"form-check-input\"\r\n              checked={this.state.isAlways}\r\n              onChange={e => this.setState({ isAlways: e.target.checked })}\r\n            />\r\n            <label htmlFor=\"always\" className=\"label_checkbox\">Always</label>\r\n          </div>\r\n\r\n          {this.state.isAlways ?\r\n            <>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"calculation\">Calculation</label>\r\n                <input type=\"text\" className=\"form-control\" id=\"calculation\"\r\n                  value={this.state.value.calculation}\r\n                  onChange={e => { this.changeValue(e.target.value, 'calculation') }}\r\n                />\r\n              </div>\r\n              <p>E.g. [field_name]*[field_name] + 10</p>\r\n            </> :\r\n            <>\r\n              {this.state.value.calculation_logic.map((item, index) => <>\r\n                {index !== 0 && <hr />}\r\n                <FieldCalculationLogic\r\n                  item={item}\r\n                  index={index}\r\n                  fieldsOptions={this.state.fieldsOptions}\r\n                  key={index}\r\n                  changeHandler={item => this.itemChangeHandler(item, index)}\r\n                  deleteItemHandler={() => this.deleteItemHandler(index)}\r\n                />\r\n              </>)}\r\n              <button className=\"btn\" type=\"button\" onClick={this.addItemHandler}>\r\n                + Calculated Logic\r\n              </button>\r\n            </>}\r\n        </> :\r\n        <>\r\n          <div className=\"checkbox-group\">\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_label\"\r\n                checked={this.state.value.is_label}\r\n                onChange={e => { this.changeValue(e.target.checked, 'is_label') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_label\">As Label</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_title\"\r\n                checked={this.state.value.is_title}\r\n                onChange={e => { this.changeValue(e.target.checked, 'is_title') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_title\">As Title</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-is_auth\"\r\n                     checked={this.state.value.is_auth}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'is_auth') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_auth\">Set Auth</label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group__inline-wrapper\">\r\n            <div className=\"form-group form-group_width47\">\r\n              <label htmlFor=\"field-length_value\">Length/Value</label>\r\n              <input type=\"number\" id=\"field-length_value\"\r\n                value={this.state.value.size || ''}\r\n                onChange={e => { this.changeValue(+e.target.value, 'size') }}\r\n                className=\"form-control\" />\r\n            </div>\r\n\r\n            <div className=\"form-group form-group_width47\">\r\n              <label htmlFor=\"field-default\">Default</label>\r\n              <input type=\"text\" id=\"field-default\"\r\n                value={this.state.value.default || ''}\r\n                onChange={e => { this.changeValue(e.target.value, 'default') }}\r\n                className=\"form-control\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"field-attribute\">Attribute</label>\r\n            <select id=\"field-attribute\"\r\n              value={this.state.value.attribute || ''}\r\n              onChange={e => { this.changeValue(e.target.value, 'attribute') }}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" />\r\n              {attributeOptions.map(item =>\r\n                <option key={item.value} value={item.value}>\r\n                  {item.label}\r\n                </option>)}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"field-input_type\">Input Type</label>\r\n            <select id=\"field-input_type\" required\r\n              value={this.state.value.input_type || ''}\r\n              onChange={e => { this.changeValue(e.target.value, 'input_type') }}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {inputTipeOptions.map(item =>\r\n                <option key={item} value={item}>\r\n                  {item}\r\n                </option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {['select', 'checkbox', 'radio button'].includes(this.state.value.input_type) && <>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"field-options\">Options</label>\r\n              <textarea id=\"field-options\"\r\n                value={this.state.value.options || ''}\r\n                onChange={e => { this.changeValue(e.target.value, 'options') }}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <p>Enter each choice on a new line.</p>\r\n            <p>Fro more control, you may specify both a value and label like this:</p>\r\n            <p>red | Red</p>\r\n          </>}\r\n\r\n          <div className=\"checkbox-group\">\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-nullable\"\r\n                checked={this.state.value.null}\r\n                onChange={e => { this.changeValue(e.target.checked, 'null') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-nullable\">Nullable</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-indexed\"\r\n                checked={this.state.value.indexed}\r\n                onChange={e => { this.changeValue(e.target.checked, 'indexed') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-indexed\">Indexed</label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <input type=\"checkbox\" id=\"field-editable\"\r\n                checked={this.state.value.editable}\r\n                onChange={e => { this.changeValue(e.target.checked, 'editable') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-editable\">Editable</label>\r\n            </div>\r\n          </div>\r\n        </>\r\n      }\r\n      <div className=\"btn__wrapper btn_add\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to={`/admin/tables/models/edit/${modelId}`}>Cancel</Link>\r\n        {/* TODO: отображать кнопку если в форме редактируются данные\r\n          повесить обработчик удаления\r\n        <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddFieldForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport AddFieldForm from \"./AddFieldForm\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass EditField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelTitle: 'Model Title',\r\n      field: {},\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n    this.filedsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/fields` });\r\n  }\r\n  async componentDidMount() {\r\n    const { modelId } = this.props.match.params;\r\n    let model = await this.modelsResource.get(modelId);\r\n    this.setState({ modelTitle: model.title });\r\n  }\r\n\r\n  /**\r\n   * отправка данных\r\n   * @return {*}\r\n   */\r\n  onSubmit = async data => {\r\n    const { modelId } = this.props.match.params;\r\n    const { history } = this.props;\r\n    if (this.props.match.params.id) {\r\n      let res = await this.filedsResource.put(this.props.match.params.id, data);\r\n      history.push(`/admin/tables/models/edit/${modelId}`);\r\n    } else {\r\n      let res = await this.filedsResource.post(data);\r\n      history.push(`/admin/tables/models/edit/${modelId}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { modelTitle } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <Link className=\"admin-breadcrumbs__link\" to={`/admin/tables/models/edit/${modelId}`}>\r\n            {modelTitle}\r\n          </Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Field</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddFieldForm onSubmit={this.onSubmit} />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(EditField);","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {titleToName} from \"../../js/helpers\";\r\n\r\nconst relationTypeOptions = [\r\n  {\r\n    value: 'hasOne',\r\n    label: 'Has One'\r\n  },\r\n  {\r\n    value: 'belongsTo',\r\n    label: 'Belongs To'\r\n  },\r\n  {\r\n    value: 'hasMany',\r\n    label: 'Has Many'\r\n  },\r\n];\r\nconst deleteUpdateOptions = [\r\n  {\r\n    value: 'cascade',\r\n    label: 'cascade'\r\n  },\r\n  {\r\n    value: 'set null',\r\n    label: 'set null'\r\n  },\r\n  {\r\n    value: 'no action',\r\n    label: 'no action'\r\n  },\r\n  {\r\n    value: 'restrict',\r\n    label: 'restrict'\r\n  }\r\n];\r\n\r\nclass AddRelationForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelsOptions: [],\r\n      value: {\r\n        title: '',\r\n        description: '',\r\n        type: '',\r\n        model_id: this.props.match.params.modelId,\r\n        add_belong_to: false,\r\n        editable: true,\r\n        always_with: false,\r\n        local_key: '',\r\n        foreign_key: '',\r\n        onDelete: 'set null',\r\n        onUpdate: 'set null'\r\n      },\r\n      selfFieldsOptions: [],\r\n      foreignFieldsOptions: [],\r\n      relationTypeOptions,\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/model_options' });\r\n    this.relationsResource = new Resource({ route: `/admin/ajax/models/${this.props.match.params.modelId}/relations` });\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { options } = await this.modelsResource.getAll();\r\n    const { modelId, id } = this.props.match.params;\r\n    //Модель может ссылаться на саму себя\r\n    //options = options.filter(option=>(Number(option.value) !== Number(modelId)));\r\n    this.setState({ modelsOptions: options });\r\n    let fields = await (new Resource({route: `/admin/ajax/models/${modelId}/fields`})).getAll();\r\n    let selfFieldsOptions = fields.map(field=>({\r\n      label: field.title,\r\n      value: field.name,\r\n    }));\r\n    this.setState(state=>({...state, selfFieldsOptions}));\r\n    if(id){\r\n      let value = await this.relationsResource.get(id);\r\n      this.updateForeignFieldOptions(value.target_model_id);\r\n      this.changeTargetModel(value.target_model_id);\r\n      this.setState(state=>({...state, value}));\r\n    }\r\n  }\r\n  /**\r\n   * Проверяем значение при смене модели\r\n   * если модель это User, то скроем Add Reverse Relation\r\n   * и уберем из вариантов связей Has many\r\n   * @param {string} value\r\n   */\r\n  changeTargetModel(value) {\r\n    let modelName = '';\r\n    this.state.modelsOptions.forEach(option=>{\r\n      if(parseInt(option.value) === parseInt(value)){\r\n        modelName = option.label;\r\n      }\r\n    });\r\n    let _relationTypeOptions = relationTypeOptions.filter(option=>{\r\n      if(modelName !== 'User'){\r\n        return true;\r\n      }\r\n      return option.value !== 'hasMany';\r\n    });\r\n    if(modelName === 'User'){\r\n      this.changeValue('hasOne', 'type');\r\n      this.changeValue(false, 'add_belong_to');\r\n    }\r\n    this.setState(state =>({...state, hideAddBelongTo:modelName === 'User', relationTypeOptions:_relationTypeOptions}));\r\n  }\r\n/**\r\n * Изменить значение\r\n * @param {*} value\r\n * @param {string} field\r\n */\r\n  changeValue(value, field) {\r\n  const { id } = this.props.match.params;\r\n\r\n  if(field === 'target_model_id'){\r\n    this.changeTargetModel(value);\r\n  }\r\n  this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      if(field === 'title' && ! id){\r\n        state.value.name = titleToName(value);\r\n      }\r\n      if((field === 'name')){\r\n        state.value.name = titleToName(value);\r\n      }\r\n      if(field === 'foreign_key'){\r\n        state.value[field] = titleToName(value);\r\n      }\r\n      if(field === 'target_model_id'){\r\n        this.updateForeignFieldOptions(value)\r\n      }\r\n      return state\r\n    })\r\n  }\r\n\r\n  /**\r\n   * При изменении модели для связи изменяем опции\r\n   * @param {string} modelId\r\n   */\r\n  async updateForeignFieldOptions(modelId){\r\n    let fields = await (new Resource({route: `/admin/ajax/models/${modelId}/fields`})).getAll();\r\n    let foreignFieldsOptions = fields.map(field=>({\r\n      label: field.title,\r\n      value: field.name,\r\n    }));\r\n    this.setState(state=>({...state, foreignFieldsOptions}))\r\n\r\n  }\r\n  /**\r\n   * Отправка данных\r\n   */\r\n  async submitHandler(e) {\r\n    e.preventDefault();\r\n    const { history, match } = this.props;\r\n    const data = this.state.value;\r\n    if (this.props.match.params.id) {\r\n      let res = await this.relationsResource.put(this.props.match.params.id, data);\r\n    } else {\r\n      let res = await this.relationsResource.post(data);\r\n    }\r\n    history.push(`/admin/tables/models/edit/${match.params.modelId}`);\r\n  }\r\n\r\n  /**\r\n   * вывод поля Local Key\r\n   */\r\n  renderLocalKey(){\r\n    const { id } = this.props.match.params;\r\n\r\n    return <div className=\"form-group form-group_width47\">\r\n      <label htmlFor=\"relation-local_key\">Local Key</label>\r\n      <select  id=\"relation-local_key\"\r\n             value={this.state.value.local_key || ''}\r\n             className=\"form-control\"\r\n             onChange={e => { this.changeValue(e.target.value, 'local_key') }}\r\n      >\r\n        <option disabled value=\"\" />\r\n        {this.state.selfFieldsOptions.map(({ value, label }) =>\r\n            <option key={value} value={value}>\r\n              {label}\r\n            </option>)}\r\n      </select>\r\n    </div>\r\n\r\n  }\r\n\r\n/**\r\n   * вывод поля Foreign Key\r\n   */\r\n  renderForeignKey(){\r\n    const { id } = this.props.match.params;\r\n\r\n    return<div className=\"form-group form-group_width47\">\r\n      <label htmlFor=\"relation-foreign_key\">Foreign Key</label>\r\n      <select id=\"relation-foreign_key\"\r\n        value={this.state.value.foreign_key || ''}\r\n        onChange={e => { this.changeValue(e.target.value, 'foreign_key') }}\r\n        className=\"form-control\"\r\n      >\r\n        <option disabled value=\"\" />\r\n        {this.state.foreignFieldsOptions.map(({ value, label }) =>\r\n          <option key={value} value={value}>\r\n            {label}\r\n          </option>)}\r\n      </select>\r\n    </div>\r\n  }\r\n\r\n\r\n  render() {\r\n    const { id } = this.props.match.params;\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"row\">\r\n        <div className=\"form-group col-12\">\r\n          <label htmlFor=\"relation-title\">Relation Title</label>\r\n          <input type=\"text\" id=\"relation-title\" required\r\n            value={this.state.value.title || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'title') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n          <label htmlFor=\"relation-title\">Relation Name</label>\r\n          <input type=\"text\" id=\"relation-title\" required readOnly={id}\r\n            value={this.state.value.name || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'name') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-8\">\r\n          <label htmlFor=\"relation-description\">Relation Description</label>\r\n          <input type=\"text\" id=\"relation-description\" readOnly={id}\r\n            value={this.state.value.description || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"relation-type\">Relation Type</label>\r\n          <select id=\"relation-type\" required disabled={id}\r\n            value={this.state.value.type}\r\n            onChange={e => { this.changeValue(e.target.value, 'type') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.relationTypeOptions.map(item =>\r\n              <option key={item.value} value={item.value}>\r\n                {item.label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"relation-model_id\">Model to Bound</label>\r\n          <select id=\"relation-model_id\" required\r\n            value={this.state.value.target_model_id || ''}\r\n            onChange={e => { this.changeValue(e.target.value, 'target_model_id') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"form-group col-4\">\r\n          {this.state.hideAddBelongTo || this.state.value.type === 'belongsTo' ? '' : <><input type=\"checkbox\" id=\"relation-add_belong_to\"\r\n            checked={this.state.value.add_belong_to} readOnly={id}\r\n            onChange={e => { this.changeValue(e.target.checked, 'add_belong_to') }}\r\n          />\r\n          <label className=\"checkbox-label\" htmlFor=\"relation-add_belong_to\">Add Reverse Relation</label></>}\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n          { (! ['hasMany', 'belongsTo'].includes(this.state.value.type)) ?\r\n              <><input type=\"checkbox\"\r\n                       id=\"field-editable\"\r\n                       checked={this.state.value.editable}\r\n                       onChange={e => { this.changeValue(e.target.checked, 'editable') }}\r\n          />\r\n            <label className=\"checkbox-label\" htmlFor=\"field-editable\">Editable</label></> : ''}\r\n\r\n        </div>\r\n        <div className=\"form-group col-4\">\r\n         <input type=\"checkbox\"\r\n                id=\"field-always_with\"\r\n                checked={this.state.value.always_with}\r\n                onChange={e => { this.changeValue(e.target.checked, 'always_with') }}\r\n          />\r\n            <label className=\"checkbox-label\" htmlFor=\"field-always_with\">Always With</label>\r\n        </div>\r\n      </div>\r\n      <div className=\"form-group__inline-wrapper\">\r\n        {this.renderLocalKey()}\r\n        {this.renderForeignKey()}\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"onDelete\">On Delete</label>\r\n          <select id=\"onDelete\" required\r\n            value={this.state.value.onDelete}\r\n            onChange={e => { this.changeValue(e.target.value, 'onDelete') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {deleteUpdateOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label.toUpperCase()}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"onUpdate\">On Update</label>\r\n          <select id=\"onUpdate\" required\r\n            value={this.state.value.onUpdate}\r\n            onChange={e => { this.changeValue(e.target.value, 'onUpdate') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {deleteUpdateOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label.toUpperCase()}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n       <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n        {/* <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddRelationForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport AddRelationForm from \"./AddRelationForm\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass AddRelation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modelTitle: 'Model Title'\r\n    };\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/models' });\r\n  }\r\n  \r\n  async componentDidMount() {\r\n    const { modelId } = this.props.match.params;\r\n    let model = await this.modelsResource.get(modelId);\r\n    this.setState({ modelTitle: model.title })\r\n  }\r\n\r\n  render() {\r\n    const { modelTitle } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <Link className=\"admin-breadcrumbs__link\" to={`/admin/tables/models/edit/${modelId}`}>\r\n            {modelTitle}\r\n          </Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Relation</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddRelationForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(AddRelation);","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst typeOptions = ['resource', 'Get Queried', 'create', 'read', 'update', 'delete', 'options'];\r\nconst mockedOptions = [\r\n  { value: 1, label: \"Model title 1\" },\r\n  { value: 2, label: \"Model title 2\" },\r\n  { value: 3, label: \"Model title 3\" },\r\n];\r\n\r\nclass AddDataSourceForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // modelsOptions: [],   TODO: заменить замоканые данные\r\n      modelsOptions: mockedOptions,\r\n      value: {\r\n        title: '',\r\n        description: '',\r\n        type: [],\r\n        model_id: '',\r\n        with: [],\r\n        route: '',\r\n        roles: []\r\n      },\r\n    };\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.multipleSelectChangeHandler = this.multipleSelectChangeHandler.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // get: get: /admin/ajax/model_options .then(modelsOptions => {\r\n    //   this.setState({ modelsOptions });\r\n    // });\r\n  }\r\n\r\n  changeValue(value, field) {\r\n    console.log(value)\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      state.value[field] = value;\r\n      return state\r\n    })\r\n  }\r\n\r\n  multipleSelectChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      const array = state.value[name];\r\n\r\n      if (array.includes(value)) {\r\n        const index = array.indexOf(value);\r\n        array.splice(index, 1);\r\n      } else {\r\n        array.push(value);\r\n      }\r\n      \r\n      return state;\r\n    })\r\n  }\r\n\r\n  submitHandler(e) {\r\n    e.preventDefault();\r\n    // post: /admin/ajax/models (value)\r\n    console.log(this.state.value);\r\n  }\r\n\r\n  render() {\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label htmlFor=\"data-source-title\">Data Source Title</label>\r\n          <input type=\"text\" id=\"data-source-title\" required\r\n            value={this.state.value.title}\r\n            onChange={e => { this.changeValue(e.target.value, 'title') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width65\">\r\n          <label htmlFor=\"data-source-description\">Data Source Description</label>\r\n          <input type=\"text\" id=\"data-source-description\" required\r\n            value={this.state.value.description}\r\n            onChange={e => { this.changeValue(e.target.value, 'description') }}\r\n            className=\"form-control\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-type\">Data Source Type</label>\r\n        <select id=\"data-source-type\" required multiple\r\n          name=\"type\"\r\n          value={this.state.value.type}\r\n          onChange={this.multipleSelectChangeHandler}\r\n          className=\"form-control\"\r\n        >\r\n          <option disabled value=\"\" />\r\n          {typeOptions.map(item =>\r\n            <option key={item} value={item}>\r\n              {item}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"data-source-model_id\">Model</label>\r\n          <select id=\"data-source-model_id\" required\r\n            value={this.state.value.model_id}\r\n            onChange={e => { this.changeValue(e.target.value, 'model_id') }}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"data-source-with\">With</label>\r\n          <select id=\"data-source-with\" required multiple\r\n            name=\"with\"\r\n            value={this.state.value.with}\r\n            onChange={this.multipleSelectChangeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {this.state.modelsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-route\">Route</label>\r\n        <input type=\"text\" id=\"data-source-route\" required\r\n          value={this.state.value.route}\r\n          onChange={e => { this.changeValue(e.target.value, 'route') }}\r\n          className=\"form-control\" />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"data-source-roles\">Access</label>\r\n        <select id=\"data-source-roles\" required multiple\r\n          name=\"roles\"\r\n          value={this.state.value.roles}\r\n          onChange={this.multipleSelectChangeHandler}\r\n          className=\"form-control\"\r\n        >\r\n          <option disabled value=\"\" />\r\n          {this.state.modelsOptions.map(({ value, label }) =>\r\n            <option key={value} value={value}>\r\n              {label}\r\n            </option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n        {/* <button className=\"btn btn_failure\">Delete</button> */}\r\n      </div>\r\n    </form>;\r\n  }\r\n}\r\n\r\nexport default AddDataSourceForm;","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddDataSourceForm from \"./AddDataSourceForm\";\r\n\r\nclass AddDataSource extends Component {\r\n  render() {\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/models\">Models / All Models</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">Add New Data Source</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <AddDataSourceForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default AddDataSource;","import React, { Component } from \"react\";\r\n\r\nconst typeOptions = ['sum', 'min', 'max', 'avg', 'count', 'distinct', 'count_distinct'];\r\n\r\nclass AggregateComponent extends Component {\r\n  render() {\r\n    const { type, column, alias } = this.props.item;\r\n    const { columnsOptions, changeHandler } = this.props;\r\n    return <div className=\"form-segment form-group__inline-wrapper\">\r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Type\r\n          <select required name=\"type\"\r\n            value={type}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {typeOptions.map(type =>\r\n              <option key={type} value={type}>\r\n                {type}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Field\r\n          <select required name=\"column\"\r\n            value={column}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            <option value=\"*\">All</option>\r\n            {columnsOptions.map(({ value, label }) =>\r\n              <option key={value} value={value}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n      \r\n      <div className=\"form-group form-group_width30\">\r\n        <label>Alias\r\n          <input type=\"text\" required name=\"alias\"\r\n            value={alias}\r\n            onChange={changeHandler}\r\n            className=\"form-control\" />\r\n        </label>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default AggregateComponent;","import React, { Component } from \"react\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst tablesOptions = tableId => new Resource({ route: `/admin/ajax/tables/${tableId}/columns` });\r\nclass JoinComponent extends Component {\r\n  state = {\r\n    targetColumnOptions: []\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { target_table } = this.props.item;\r\n    if (prevProps.item.target_table !== target_table) {\r\n      tablesOptions(target_table).getAll()\r\n        .then(targetColumnOptions => this.setState({ targetColumnOptions }));\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { target_table } = this.props.item;\r\n    if (target_table) {\r\n      tablesOptions(target_table).getAll()\r\n        .then(targetColumnOptions => this.setState({ targetColumnOptions }));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { type, target_table, source_column, operator, target_column } = this.props.item;\r\n    const { changeHandler, tablesOptions, sourceColumnOptions } = this.props;\r\n    const { targetColumnOptions } = this.state;\r\n    return <div className=\"form-segment\">\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Type\r\n            <select required name=\"type\"\r\n              value={type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              <option value=\"inner_join\">Inner Join</option>\r\n              <option value=\"left_join\">Left Join</option>\r\n              <option value=\"right_join\">Right Join</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Target Table\r\n          <select required name=\"target_table\"\r\n              value={target_table}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {tablesOptions.map(({ value, label }) =>\r\n                <option disabled={value === target_table} value={value} key={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Source Column\r\n          <select required name=\"source_column\"\r\n              value={source_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {sourceColumnOptions.map(({ label, value }) => <option value={value} key={value}>{label}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Operator\r\n            <select required name=\"operator\"\r\n              value={operator}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" disabled />\r\n              <option value=\"=\">Equals</option>\r\n              <option value=\"!=\">Not Equals</option>\r\n              <option value=\"like\">Like</option>\r\n              <option value=\">\">&gt;</option>\r\n              <option value=\">=\">&gt;=</option>\r\n              <option value=\"<\">&lt;</option>\r\n              <option value=\"<=\">&lt;=</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Target Column\r\n            <select required name=\"target_column\"\r\n              value={target_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\">{!target_table ? 'Choose Table First' : ''}</option>\r\n              {targetColumnOptions.map(({ id, title }) => <option value={id} key={id}>{title}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default JoinComponent;","/** @function getDateFormat\r\n  * @param {string} type тип поля where_date\r\n  * @return {string} формат отображаемых данных\r\n */\r\nexport function getDatePickerFormat(type) {\r\n  switch (type) {\r\n    case 'datetime':\r\n      return \"yyyy/MM/dd h:mm:ss\";\r\n    case 'date':\r\n      return \"yyyy/MM/dd\";\r\n    case 'time':\r\n      return \"h:mm:ss\";\r\n    case 'day':\r\n      return \"dd\";\r\n    case 'month':\r\n      return \"MM\";\r\n    case 'year':\r\n      return \"yyyy\";\r\n\r\n    default:\r\n      return \"yyyy\";\r\n  }\r\n}\r\n\r\n/** @function getDateFormat\r\n * Функция схожа с getDateFormat, с тем различием\r\n что moment запрашивает дату в формате DD - заглавные буквы\r\n * @param {string} type - тип поля where_date\r\n * @return {string | undefined} формат строки, получаемой из объекта Date\r\n */\r\nexport function getMomentFormat(type) {\r\n  switch (type) {\r\n    case 'datetime':\r\n      return \"YYYY/MM/DD H:mm:ss\";\r\n    case 'date':\r\n      return \"YYYY/MM/DD\";\r\n    case 'time':\r\n      return \"H:mm:ss\";\r\n    case 'day':\r\n      return \"DD\";\r\n    case 'month':\r\n      return \"MM\";\r\n    case 'year':\r\n      return \"YYYY\";\r\n\r\n    default:\r\n      return \"YYYY\";\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport moment from \"moment\";\r\nimport { getDatePickerFormat, getMomentFormat } from \"./helpers\";\r\n\r\nconst conditionTypeOptions = ['where', 'or_where', 'where_between', 'where_in', 'where_date', 'where_column'];\r\nconst dateTypesOptions = [\r\n  { value: 'datetime', label: 'Date - Time' },\r\n  { value: 'date', label: 'Date' },\r\n  { value: 'time', label: 'Time' },\r\n  { value: 'day', label: 'Day' },\r\n  { value: 'month', label: 'Month' },\r\n  { value: 'year', label: 'Year' }\r\n];\r\n\r\nclass ConditionComponent extends Component {\r\n  state = { isDateVar: false }\r\n\r\n  dateValueFormatChange = () => {\r\n    const { isDateVar } = this.state;\r\n\r\n    this.props.changeHandler({\r\n      target: {\r\n        value: isDateVar ? moment(new Date()).format(getMomentFormat(this.props.item.type)) : '',\r\n        name: \"value\"\r\n      }\r\n    });\r\n    this.setState({ isDateVar: !isDateVar });\r\n  }\r\n\r\n  render() {\r\n    const { columnsOptions, changeHandler, isFirst } = this.props;\r\n    const { condition_type, column, operator, value, or, not, values, type,\r\n      first_column, second_column } = this.props.item;\r\n    const { isDateVar } = this.state;\r\n\r\n    return <div className=\"form-segment\">\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width30\">\r\n          <label>Condition Type\r\n            <select required name=\"condition_type\"\r\n              value={condition_type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {conditionTypeOptions.map(type =>\r\n                <option key={type} value={type} disabled={isFirst && type === 'or_where'}>\r\n                  {type}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        {condition_type && condition_type !== \"where_column\" && <div className=\"form-group form-group_width30\">\r\n          <label>Field\r\n            <select required name=\"column\"\r\n              value={column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>}\r\n\r\n        {['where', 'or_where', 'where_column'].includes(condition_type) &&\r\n          <div className=\"form-group form-group_width30\">\r\n            <label>Operator\r\n              <select required name=\"operator\"\r\n                value={operator}\r\n                onChange={changeHandler}\r\n                className=\"form-control\"\r\n              >\r\n                <option value=\"\" disabled />\r\n                <option value=\"=\">Equals</option>\r\n                <option value=\"!=\">Not Equals</option>\r\n                <option value=\"like\">Like</option>\r\n                <option value=\">\">&gt;</option>\r\n                <option value=\">=\">&gt;=</option>\r\n                <option value=\"<\">&lt;</option>\r\n                <option value=\"<=\">&lt;=</option>\r\n              </select>\r\n            </label>\r\n          </div>}\r\n\r\n        {['where_between', 'where_in', 'where_column'].includes(condition_type) && <>\r\n          {!isFirst && <div className=\"form-group form-group_checkbox form-group_width15\">\r\n            <label className=\"label_checkbox\">\r\n              <input type=\"checkbox\" name=\"or\"\r\n                className=\"form-check-input\"\r\n                checked={or}\r\n                onChange={changeHandler}\r\n              /> Or\r\n            </label>\r\n          </div>}\r\n\r\n          {condition_type !== 'where_column' && <div className=\"form-group form-group_checkbox form-group_width15\">\r\n            <label className=\"label_checkbox\">\r\n              <input type=\"checkbox\" name=\"not\"\r\n                className=\"form-check-input\"\r\n                checked={not}\r\n                onChange={changeHandler}\r\n              /> Not\r\n            </label>\r\n          </div>}\r\n        </>}\r\n\r\n        {condition_type === \"where_date\" && <div className=\"form-group form-group_width30\">\r\n          <label>Type\r\n            <select id=\"type\" required name=\"type\"\r\n              value={type}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {dateTypesOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>{label}</option>)}\r\n            </select>\r\n          </label>\r\n        </div>}\r\n      </div>\r\n\r\n      {['where', 'or_where'].includes(condition_type) &&\r\n        <div className=\"form-group\">\r\n          <label>Value\r\n            <input type=\"text\" required name=\"value\"\r\n              value={value}\r\n              onChange={changeHandler}\r\n              className=\"form-control\" />\r\n          </label>\r\n        </div>}\r\n\r\n      {['where_between'].includes(condition_type) &&\r\n        <div className=\"form-group__inline-wrapper\">\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value 1\r\n              <input type=\"text\" required name=\"value1\"\r\n                value={values[0] || ''}\r\n                onChange={changeHandler}\r\n                className=\"form-control\" />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"form-group form-group_width47\">\r\n            <label>Value 2\r\n              <input type=\"text\" required name=\"value2\"\r\n                value={values[1] || ''}\r\n                onChange={changeHandler}\r\n                className=\"form-control\" />\r\n            </label>\r\n          </div>\r\n        </div>}\r\n\r\n      {condition_type === \"where_in\" && <>\r\n        <div className=\"form-group\">\r\n          <label>Values\r\n            <textarea required name=\"values\"\r\n              value={values.join(\", \")}\r\n              onChange={changeHandler}\r\n              className=\"form-control\" />\r\n          </label>\r\n        </div>\r\n        <p>Comma Separated</p>\r\n      </>}\r\n\r\n      {condition_type === \"where_date\" && <div className=\"row\">\r\n        <div className=\"form-group col-6\">\r\n          <label>Operator\r\n              <select required name=\"operator\"\r\n              value={operator}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option value=\"\" disabled />\r\n              <option value=\"=\">Equals</option>\r\n              <option value=\"!=\">Not Equals</option>\r\n              <option value=\">\">&gt;</option>\r\n              <option value=\">=\">&gt;=</option>\r\n              <option value=\"<\">&lt;</option>\r\n              <option value=\"<=\">&lt;=</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className={`form-group col-6 ${[\"day\", \"month\"].includes(type) ? \"hide-blocks\" : \"\"}`}>\r\n          <label className=\"w-auto mb-0\">Value</label>\r\n          <label className=\"label_checkbox float-right w-auto\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isDateVar}\r\n              onChange={this.dateValueFormatChange}\r\n            /> Set Variable\r\n            </label>\r\n          {isDateVar ?\r\n            <input type=\"text\" required name=\"value\"\r\n              value={value}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            /> :\r\n            <DatePicker selected={moment(value, getMomentFormat(type))._d}\r\n              showTimeSelect={[\"datetime\", \"time\"].includes(type)}\r\n              showYearPicker={type === \"year\"}\r\n              showTimeSelectOnly={type === \"time\"}\r\n              showMonthYearPicker={type === \"month\"}\r\n              dateFormat={getDatePickerFormat(type)}\r\n              className=\"form-control\"\r\n              onChange={value => changeHandler({\r\n                target: {\r\n                  value: moment(value).format(getMomentFormat(type)),\r\n                  name: \"value\"\r\n                }\r\n              })}\r\n            />}\r\n        </div>\r\n      </div>}\r\n\r\n      {condition_type === \"where_column\" && <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>First Field\r\n            <select required name=\"first_column\"\r\n\r\n              value={first_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label>Second Field\r\n            <select required name=\"second_column\"\r\n              value={second_column}\r\n              onChange={changeHandler}\r\n              className=\"form-control\"\r\n            >\r\n              <option disabled value=\"\" />\r\n              {columnsOptions.map(({ value, label }) =>\r\n                <option key={value} value={value}>\r\n                  {label}\r\n                </option>)}\r\n            </select>\r\n          </label>\r\n        </div>\r\n      </div>}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default ConditionComponent;","import React, { Component } from \"react\";\r\n\r\nclass OrderByComponent extends Component {\r\n  render() {\r\n    const { type, column } = this.props.item;\r\n    const { columnsOptions, changeHandler } = this.props;\r\n\r\n    return <div className=\"form-segment form-group__inline-wrapper\">\r\n      <div className=\"form-group form-group_width47\">\r\n        <label>Field\r\n          <select required name=\"column\"\r\n            value={column}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option disabled value=\"\" />\r\n            {columnsOptions.map(({ value, label }) =>\r\n              <option key={value} value={label}>\r\n                {label}\r\n              </option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group form-group_width47\">\r\n        <label>Type\r\n          <select required name=\"type\"\r\n            value={type}\r\n            onChange={changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            {/*<option disabled value=\"\" />*/}\r\n            <option value=\"asc\">Asc</option>\r\n            <option value=\"desc\">Desc</option>\r\n          </select>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default OrderByComponent;","import React, { Component, Fragment } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport { titleToName } from \"../../js/helpers\";\r\nimport AggregateComponent from \"./AggregateComponent\";\r\nimport JoinComponent from \"./JoinComponent\";\r\nimport ConditionComponent from \"./ConditionComponent\";\r\nimport OrderByComponent from \"./OrderByComponent\";\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\nimport { getMomentFormat } from \"./helpers\";\r\n\r\nclass SQLBuilderForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { modelId, id } = this.props.match.params;\r\n    this.state = {\r\n      value: {\r\n        title: \"\",\r\n        name: \"\",\r\n        columns: [],\r\n        aggregates: [],\r\n        joins: [],\r\n        conditions: [],\r\n        relations: [],\r\n        order_by: [],\r\n        access: { roles: [], permissions: [] },\r\n        group_by: [],\r\n        // offset: 'REQUEST:pageSize * (REQUEST:page - 1)',\r\n        // limit: 'REQUEST:pageSize'\r\n      },\r\n      relationsOptions: [],\r\n      rolesOptions: [],\r\n      permissionsOptions: [],\r\n      tablesOptions: [],\r\n      selfFields: [],\r\n      selfFieldsOptions: [],\r\n      isAggregateRaw: false\r\n      // isOffsetDisable: true,\r\n      // isLimitDisable: true\r\n    };\r\n    this.counter = 0;\r\n    this.rolesOptions = new Resource({ route: '/admin/ajax/role_options' });\r\n    this.permissionsOptions = new Resource({ route: '/admin/ajax/permissions_options' });\r\n    this.tablesOptions = new Resource({ route: '/admin/ajax/tables_options' });\r\n    this.selfFieldsResource = new Resource({ route: `/admin/ajax/models/${modelId}/fields_only` });\r\n    this.relationsResource = new Resource({ route: `/admin/ajax/models/${modelId}/relations` });\r\n    this.sqlResource = new Resource({ route: `/admin/ajax/models/${modelId}/queries` });\r\n    this.submitHandler = this.submitHandler.bind(this);\r\n    this.multipleSelectChangeHandler = this.multipleSelectChangeHandler.bind(this);\r\n    this.aggregateChangeHandler = this.aggregateChangeHandler.bind(this);\r\n    this.aggregateAddHandler = this.aggregateAddHandler.bind(this);\r\n    this.aggregateDeleteHandler = this.aggregateDeleteHandler.bind(this);\r\n    this.joinChangeHandler = this.joinChangeHandler.bind(this);\r\n    this.joinAddHandler = this.joinAddHandler.bind(this);\r\n    this.joinDeleteHandler = this.joinDeleteHandler.bind(this);\r\n    this.conditionChangeHandler = this.conditionChangeHandler.bind(this);\r\n    this.orderByChangeHandler = this.orderByChangeHandler.bind(this);\r\n    this.orderByAddHandler = this.orderByAddHandler.bind(this);\r\n    this.orderByDeleteHandler = this.orderByDeleteHandler.bind(this);\r\n    this.titleChangeHandler = this.titleChangeHandler.bind(this);\r\n  }\r\n\r\n  /**\r\n   * запросы опций для селектов\r\n   *\r\n   */\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params\r\n    if (id) {\r\n      const value = await this.sqlResource.get(id);\r\n      this.setState(state => ({ ...state, value }));\r\n    }\r\n    const rolesOptions = await this.rolesOptions.getAll();\r\n    this.setState(state => ({ ...state, rolesOptions }));\r\n    const permissionsOptions = await this.permissionsOptions.getAll();\r\n    this.setState(state => ({ ...state, permissionsOptions }));\r\n    const tablesOptions = await this.tablesOptions.getAll();\r\n    this.setState(state => ({ ...state, tablesOptions }));\r\n    const selfFields = await this.selfFieldsResource.getAll();\r\n    let selfFieldsOptions = selfFields.map(field => {\r\n      return {\r\n        label: field.title,\r\n        value: field.name,\r\n      };\r\n    });\r\n    this.setState(state => ({ ...state, selfFields, selfFieldsOptions }));\r\n    const relations = await this.relationsResource.getAll();\r\n    let relationsOptions = relations.map(relation => {\r\n      return {\r\n        label: relation.title,\r\n        value: relation.name,\r\n      };\r\n    });\r\n    this.setState(state => ({ ...state, relationsOptions }));\r\n  }\r\n\r\n  /**\r\n   * Добавляет поля из добавленных связей\r\n   * @return {Promise<void>}\r\n   */\r\n  async addForeignFields() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Смена группировки\r\n   */\r\n  changeGroupBy = (group_by) => {\r\n    let _group_by = [];\r\n    if (group_by) group_by.forEach(r => {\r\n      _group_by.push(r.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.group_by = _group_by;\r\n      return newState;\r\n    });\r\n  };\r\n  /**\r\n   * Смена колонок\r\n   */\r\n  changeColumns = (columns) => {\r\n    let _columns = [];\r\n    if (columns) columns.forEach(c => {\r\n      _columns.push(c.value)\r\n    });\r\n    this.setState(state => ({ ...state, value: { ...state.value, columns: _columns } }));\r\n  };\r\n  /**\r\n   * Смена связей\r\n   */\r\n  changeRelations = (relations) => {\r\n    let _relations = [];\r\n    if (relations) relations.forEach(r => {\r\n      _relations.push(r.value)\r\n    });\r\n    this.setState(state => ({ ...state, value: { ...state.value, relations: _relations } }));\r\n  };\r\n  /**\r\n   * Смена ролей\r\n   */\r\n  changeRoles = (roles) => {\r\n    let _roles = [];\r\n    if (roles) roles.forEach(r => {\r\n      _roles.push(r.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.access.roles = _roles;\r\n      return newState;\r\n    });\r\n  };\r\n  /**\r\n   * Смена разрешений\r\n   */\r\n  changePermission = (permissions) => {\r\n    let _permissions = [];\r\n    if (permissions) permissions.forEach(p => {\r\n      _permissions.push(p.value)\r\n    });\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      newState.value.access.permissions = _permissions;\r\n      return newState;\r\n    });\r\n  };\r\n\r\n  valueChangeHandler = ({ target: { value, name } }) => {\r\n    this.setState(state => ({ ...state, value: { ...state.value, [name]: value } }));\r\n  }\r\n\r\n  // обработчик изменения поля title, изменяющий значение поля name\r\n  titleChangeHandler(e) {\r\n    e.persist();\r\n    this.setState(state => ({\r\n      ...state,\r\n      value: {\r\n        ...state.value,\r\n        title: e.target.value,\r\n        name: titleToName(e.target.value)\r\n      }\r\n    }))\r\n  }\r\n\r\n  // обработчики событий для массива aggregates\r\n  aggregateChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates[index] = { ...state.value.aggregates[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateAddHandler() {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates.push({ type: '', column: '', alias: ''/* , id: this.counter */ });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const aggregates = [...state.value.aggregates];\r\n      aggregates.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, aggregates }\r\n      };\r\n    });\r\n  }\r\n\r\n  aggregateToggle = () => {\r\n    this.setState(state => ({\r\n      isAggregateRaw: !state.isAggregateRaw,\r\n      value: {\r\n        ...state.value,\r\n        aggregates: state.isAggregateRaw ? [{ type: '', column: '', alias: '' }] : ''\r\n      }\r\n    }));\r\n  }\r\n\r\n  // обработчики событий для массива joins\r\n  joinChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins[index] = { ...state.value.joins[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  joinAddHandler() {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins.push({\r\n        type: '', target_table: '', source_column: '', operator: '', target_column: ''\r\n      });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  joinDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const joins = [...state.value.joins];\r\n      joins.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, joins }\r\n      };\r\n    });\r\n  }\r\n\r\n  // обработчики событий для массива conditions\r\n  conditionAddHandler = () => {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      conditions.push({ condition_type: '' });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  conditionChangeHandler({ target: { value, name, checked } }, index) {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      let condition;\r\n      if (name === 'condition_type') {\r\n        switch (value) {\r\n          case 'where':\r\n          case 'or_where':\r\n            condition = { condition_type: value, column: '', operator: '', value: '' };\r\n            break;\r\n          case 'where_between':\r\n          case 'where_in':\r\n            condition = index === 0 ?\r\n              { condition_type: value, not: false, column: '', values: [] } :\r\n              { condition_type: value, or: false, not: false, column: '', values: [] };\r\n            break;\r\n          case 'where_date':\r\n            condition = { condition_type: value, type: 'year', column: '', value: '2020' };\r\n            break;\r\n          case 'where_column':\r\n            condition = index === 0 ?\r\n              { condition_type: value, first_column: '', operator: '', second_column: '' } :\r\n              { condition_type: value, or: false, first_column: '', operator: '', second_column: '' };\r\n            break;\r\n\r\n          default:\r\n            throw new Error('invalid condition type');\r\n        }\r\n      } else {\r\n        switch (name) {\r\n          case 'value1':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              values: [value, state.value.conditions[index].values[1]]\r\n            };\r\n            break;\r\n          case 'value2':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              values: [state.value.conditions[index].values[0], value]\r\n            };\r\n            break;\r\n          case 'values':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: value.split(',').map(item => item.trim())\r\n            };\r\n            break;\r\n          case 'type':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              type: value,\r\n              value: moment(new Date()).format(getMomentFormat(value))\r\n            };\r\n            break;\r\n          case 'operator':\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: value\r\n            };\r\n            condition.condition_type === 'where_column' ?\r\n              condition.second_column = condition.second_column || '' :\r\n              condition.value = condition.value || ''\r\n            break;\r\n\r\n          default:\r\n            condition = {\r\n              ...state.value.conditions[index],\r\n              [name]: ['or', 'not'].includes(name) ? checked : value\r\n            };\r\n            break;\r\n        }\r\n\r\n      }\r\n      conditions[index] = condition;\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  conditionDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const conditions = [...state.value.conditions];\r\n      conditions.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, conditions }\r\n      };\r\n    });\r\n  }\r\n\r\n  // обработчики событий для массива orderBy\r\n  orderByChangeHandler({ target: { value, name } }, index) {\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by[index] = { ...state.value.order_by[index], [name]: value };\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    });\r\n  }\r\n\r\n  orderByAddHandler() {\r\n    // this.counter++;\r\n\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by.push({ type: 'asc', column: ''/* , id: this.counter */ });\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    });\r\n  }\r\n\r\n  orderByDeleteHandler(index) {\r\n    this.setState(state => {\r\n      const order_by = [...state.value.order_by];\r\n      order_by.splice(index, 1);\r\n      return {\r\n        ...state,\r\n        value: { ...state.value, order_by }\r\n      };\r\n    })\r\n  }\r\n\r\n  // обработчик изменения для multiple-селектов\r\n  multipleSelectChangeHandler({ target: { value, name } }) {\r\n    this.setState(state => {\r\n      const array = [...state[name]];\r\n\r\n      if (array.includes(value)) {\r\n        const index = array.indexOf(value);\r\n        array.splice(index, 1);\r\n      } else {\r\n        array.push(value);\r\n      }\r\n\r\n      return { ...state, [name]: array };\r\n    })\r\n  }\r\n\r\n  offsetDeleteHandler = () => {\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      delete newState.value.offset;\r\n      return newState;\r\n    })\r\n  }\r\n\r\n  limitDeleteHandler = () => {\r\n    this.setState(state => {\r\n      const newState = _.cloneDeep(state);\r\n      delete newState.value.offset;\r\n      delete newState.value.limit;\r\n      return newState;\r\n    })\r\n  }\r\n\r\n  submitHandler(e) {\r\n    const { modelId, id } = this.props.match.params;\r\n    e.preventDefault();\r\n\r\n    (id ?\r\n      this.sqlResource.put(id, this.state.value) :\r\n      this.sqlResource.post(this.state.value))\r\n      .then(() => this.props.history.push(`/admin/tables/models/edit/${modelId}`));\r\n  }\r\n\r\n  /**\r\n   * сохранить связи\r\n   */\r\n  setRelations = (relations) => {\r\n    let _relations = [];\r\n    relations.forEach(r => {\r\n      _relations.push(r.value);\r\n    });\r\n    this.setState(state => ({ ...state, relations: _relations }))\r\n  };\r\n  /**\r\n   * сохранить колонки\r\n   */\r\n  setColumns = (columns) => {\r\n    let _columns = [];\r\n    columns.forEach(c => {\r\n      _columns.push(c.value)\r\n    });\r\n    this.setState(state => ({ ...state, columns: _columns }))\r\n  };\r\n\r\n  render() {\r\n    const { title, name, relations, columns, aggregates, joins, conditions, order_by, group_by, offset, limit } = this.state.value;\r\n    const { roles, permissions } = this.state.value.access;\r\n    const { selfFieldsOptions, permissionsOptions, relationsOptions, rolesOptions, tablesOptions, isAggregateRaw /* isOffsetDisable, isLimitDisable  */ } = this.state;\r\n    const { modelId } = this.props.match.params;\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"row\">\r\n        <div className=\"form-group  col-6\">\r\n          <label htmlFor=\"title\">Title</label>\r\n          <input type=\"text\" id=\"title\" required name=\"title\"\r\n            value={title}\r\n            onChange={this.titleChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6 \">\r\n          <label htmlFor=\"name\">Name</label>\r\n          <input type=\"text\" id=\"name\" required name=\"name\"\r\n            value={name}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6\">\r\n          <label htmlFor=\"relations\">With</label>\r\n          <AltrpSelect\r\n            closeMenuOnSelect={false}\r\n            onChange={this.changeRelations}\r\n            value={_.filter(relationsOptions, r => relations.indexOf(r.value) >= 0)}\r\n            options={relationsOptions}\r\n            isMulti={true} />\r\n        </div>\r\n\r\n        <div className=\"form-group col-6\">\r\n          <label htmlFor=\"columns\">Fields</label>\r\n\r\n          <AltrpSelect\r\n            closeMenuOnSelect={false}\r\n            onChange={this.changeColumns}\r\n            value={_.filter(selfFieldsOptions, c => columns.indexOf(c.value) >= 0)}\r\n            options={selfFieldsOptions}\r\n            isMulti={true} />\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Access</h2>\r\n\r\n      <div className=\"form-group__inline-wrapper\">\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"roles\">Roles</label>\r\n\r\n          <AltrpSelect id=\"roles\"\r\n            closeMenuOnSelect={false}\r\n            value={_.filter(rolesOptions, r => roles.indexOf(r.value) >= 0)}\r\n            isMulti={true}\r\n            onChange={this.changeRoles}\r\n            options={rolesOptions} />\r\n        </div>\r\n\r\n        <div className=\"form-group form-group_width47\">\r\n          <label htmlFor=\"permissions\">Permissions</label>\r\n          <AltrpSelect id=\"roles\"\r\n            value={_.filter(permissionsOptions, p => permissions.indexOf(p.value) >= 0)}\r\n            closeMenuOnSelect={false}\r\n            isMulti={true}\r\n            onChange={this.changePermission}\r\n            options={permissionsOptions} />\r\n        </div>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Joins</h2>\r\n      {joins.map((item, index) => <Fragment key={index}>\r\n        {index !== 0 && <hr />}\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.joinDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        <JoinComponent item={item}\r\n          tablesOptions={tablesOptions}\r\n          sourceColumnOptions={selfFieldsOptions}\r\n          changeHandler={e => this.joinChangeHandler(e, index)}\r\n        />\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.joinAddHandler}>\r\n          + New Join\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Aggregates</h2>\r\n\r\n      {(!!aggregates.length || isAggregateRaw) &&\r\n        <div className=\"text-center\">\r\n          <button className={`btn ${isAggregateRaw ? 'btn_success' : ''}`} type=\"button\" onClick={this.aggregateToggle}>\r\n            Aggregate Raw\r\n          </button>\r\n        </div>}\r\n\r\n      {isAggregateRaw ?\r\n        <div className=\"form-group\">\r\n          <input type=\"text\" id=\"aggregates\" required name=\"aggregates\"\r\n            value={aggregates}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div> :\r\n        aggregates.map((item, index) => <Fragment key={index}>\r\n          {index !== 0 && <hr />}\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.aggregateDeleteHandler(index)}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <AggregateComponent item={item}\r\n            columnsOptions={selfFieldsOptions}\r\n            changeHandler={e => this.aggregateChangeHandler(e, index)}\r\n          />\r\n        </Fragment>)}\r\n\r\n      {!isAggregateRaw && <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.aggregateAddHandler}>\r\n          + New Aggregate\r\n        </button>\r\n      </div>}\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Conditions</h2>\r\n\r\n      {conditions.map((condition, index) => <Fragment key={index}>\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.conditionDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        {index !== 0 && <hr />}\r\n        <ConditionComponent\r\n          item={condition}\r\n          isFirst={index === 0}\r\n          columnsOptions={selfFieldsOptions}\r\n          changeHandler={e => this.conditionChangeHandler(e, index)}\r\n        />\r\n\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.conditionAddHandler}>\r\n          + New Condition\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Order By</h2>\r\n\r\n      {order_by.map((item, index) => <Fragment key={index}>\r\n        {index !== 0 && <hr />}\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn_failure\" type=\"button\" onClick={() => this.orderByDeleteHandler(index)}>\r\n            ✖\r\n          </button>\r\n        </div>\r\n        <OrderByComponent\r\n          item={item}\r\n          columnsOptions={selfFieldsOptions}\r\n          changeHandler={e => this.orderByChangeHandler(e, index)}\r\n        />\r\n      </Fragment>)}\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\" onClick={this.orderByAddHandler}>\r\n          + New Order\r\n        </button>\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Group By</h2>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"group_by\">Fields</label>\r\n\r\n        <AltrpSelect\r\n          id=\"group_by\"\r\n          closeMenuOnSelect={false}\r\n          onChange={this.changeGroupBy}\r\n          value={_.filter(selfFieldsOptions, f => group_by.indexOf(f.value) >= 0)}\r\n          options={selfFieldsOptions}\r\n          isMulti={true} />\r\n      </div>\r\n\r\n      <h2 className=\"admin-form__subheader centred\">Pagination Settings</h2>\r\n\r\n      <div className=\"centred\">\r\n        <button className=\"btn btn_success\" type=\"button\"\r\n          onClick={() => this.setState({ value: { ...this.state.value, limit: 'REQUEST:pageSize' } })}\r\n        >\r\n          Add Limit\r\n        </button>\r\n      </div>\r\n\r\n      {limit && <div className=\"centred mt-3\">\r\n        <button className=\"btn btn_success\" type=\"button\"\r\n          onClick={() => this.setState({ value: { ...this.state.value, offset: 'REQUEST:pageSize * (REQUEST:page - 1)' } })}\r\n        >\r\n          Add Offset\r\n        </button>\r\n      </div>}\r\n\r\n      <div className=\"row\">\r\n        {offset && <div className=\"form-group  col-6\">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={this.offsetDeleteHandler}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <label htmlFor=\"offset\">Offset</label>\r\n          {/* <label className=\"label_checkbox float-right\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isOffsetDisable}\r\n              onChange={() => this.setState({ isOffsetDisable: !isOffsetDisable })}\r\n            /> Blocked\r\n          </label> */}\r\n          <input type=\"text\" id=\"offset\" required name=\"offset\"\r\n            value={offset}\r\n            // disabled={isOffsetDisable}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>}\r\n\r\n        {limit && <div className=\"form-group col-6 \">\r\n          <div className=\"text-right\">\r\n            <button className=\"btn btn_failure\" type=\"button\" onClick={this.limitDeleteHandler}>\r\n              ✖\r\n            </button>\r\n          </div>\r\n          <label htmlFor=\"limit\">Limit</label>\r\n          {/* <label className=\"label_checkbox float-right\">\r\n            <input type=\"checkbox\"\r\n              className=\"form-check-input\"\r\n              checked={isLimitDisable}\r\n              onChange={() => this.setState({ isLimitDisable: !isLimitDisable })}\r\n            /> Blocked\r\n          </label> */}\r\n          <input type=\"text\" id=\"limit\" required name=\"limit\"\r\n            value={limit}\r\n            // disabled={isLimitDisable}\r\n            onChange={this.valueChangeHandler}\r\n            className=\"form-control\" />\r\n        </div>}\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper btn_add centred\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Save</button>\r\n        <Link className=\"btn\" to=\"/admin/tables/models\">Cancel</Link>\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(SQLBuilderForm);\r\n","import React, { Component } from \"react\";\r\nimport SQLBuilderForm from \"./sql-builder/SQLBuilderForm\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass SQLBuilder extends Component {\r\n  render() {\r\n    return <div className=\"admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">SQL</a>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <SQLBuilderForm />\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default withRouter(SQLBuilder);","import React, {Component} from \"react\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {titleToName} from \"../../js/helpers\";\r\nimport store from '../../js/store/store';\r\nimport AltrpSelect from \"../altrp-select/AltrpSelect\";\r\n\r\nclass SqlEditor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let storeState = store.getState();\r\n    this.state = {\r\n      modelTitle: 'Model Title',\r\n      value: {\r\n        paged: false,\r\n        is_object: false,\r\n        auth: false,\r\n      },\r\n      modelsOptions: [],\r\n      AceEditor: storeState.aceEditorReducer.AceEditor\r\n    };\r\n    this.sqlEditorResource = new Resource({route: `/admin/ajax/sql_editors`});\r\n    this.modelsResource = new Resource({ route: '/admin/ajax/model_options' });\r\n\r\n    store.subscribe(this.aceEditorObserver);\r\n  }\r\n\r\n  /**\r\n   * AceEditor загрузился\r\n   */\r\n  aceEditorObserver = () => {\r\n    let storeState = store.getState();\r\n    this.setState(state=>({\r\n        ...state,\r\n      AceEditor: storeState.aceEditorReducer.AceEditor\r\n    }))\r\n  };\r\n  /**\r\n   * Компонент загрузился\r\n   * @return {Promise<void>}\r\n   */\r\n  async componentDidMount() {\r\n    const {id} = this.props.match.params;\r\n    let { options } = await this.modelsResource.getAll();\r\n    options = options.filter(option=>(option.label !== 'User'));\r\n    this.setState({ modelsOptions: options });\r\n    if(id){\r\n      let value = await this.sqlEditorResource.get(id);\r\n      this.editor = null;\r\n      this.setState(state=>({\r\n          ...state,\r\n        value,\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Имзенить поле\r\n   * @param {*} value\r\n   * @param {string} field\r\n   */\r\n  changeValue(value, field) {\r\n    this.setState(state => {\r\n      state = { ...state };\r\n      if(field === 'name'){\r\n        state.value[field] = titleToName(value);\r\n      }else{\r\n        state.value[field] = value;\r\n      }\r\n      if(field === 'title') {\r\n        state.value.name = titleToName(value);\r\n      }\r\n      return state\r\n    })\r\n  }\r\n  /**\r\n   * отправка данных\r\n   * @return {*}\r\n   */\r\n  onSubmit = async e => {\r\n    const {id} = this.props.match.params;\r\n    e.preventDefault();\r\n    let res;\r\n    if(! this.state.value.sql){\r\n      return alert('Заполните SQL Query');\r\n    }\r\n    if(id){\r\n      res = await this.sqlEditorResource.put(id, this.state.value);\r\n    } else {\r\n      res = await this.sqlEditorResource.post(this.state.value);\r\n    }\r\n    if(res.success){\r\n      this.props.history.push('/admin/tables/sql_editors');\r\n    } else {\r\n      alert(res.message);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {id} = this.props.match.params;\r\n    console.log(this.state.value.sql);\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables/sql_editors\">All  SQL Editors</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n\r\n          <span className=\"admin-breadcrumbs__current\">Add SQL Query</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <form className=\"admin-form field-form\" onSubmit={this.onSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"form-group col-6\">\r\n              <label htmlFor=\"field-title\">Title</label>\r\n              <input type=\"text\" id=\"field-title\" required\r\n                     value={this.state.value.title || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'title')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group col-6\">\r\n              <label htmlFor=\"field-name\">Name</label>\r\n              <input type=\"text\" id=\"field-name\" required readOnly={id}\r\n                     value={this.state.value.name || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'name')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"field-name\">Description</label>\r\n              <input type=\"text\" id=\"field-description\"\r\n                     value={this.state.value.description || ''}\r\n                     onChange={e => {\r\n                       this.changeValue(e.target.value, 'description')\r\n                     }}\r\n                     className=\"form-control\"/>\r\n            </div>\r\n            {/*<div className=\"form-group col-12\">*/}\r\n              {/*<input type=\"checkbox\" id=\"relation-paged\"*/}\r\n                     {/*checked={this.state.value.paged}*/}\r\n                     {/*onChange={e => { this.changeValue(e.target.checked, 'paged') }}*/}\r\n              {/*/>*/}\r\n              {/*<label className=\"checkbox-label\" htmlFor=\"relation-paged\">Paged</label>*/}\r\n            {/*</div>*/}\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"relation-model_id\">Model</label>\r\n              <select id=\"relation-model_id\" required disabled={id}\r\n                      value={this.state.value.model_id || ''}\r\n                      onChange={e => { this.changeValue(e.target.value, 'model_id') }}\r\n                      className=\"form-control\"\r\n              >\r\n                <option disabled value=\"\" />\r\n                {this.state.modelsOptions.map(({ value, label }) =>\r\n                    <option key={value} value={value}>\r\n                      {label}\r\n                    </option>)}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <input type=\"checkbox\" id=\"field-auth\"\r\n                     checked={this.state.value.auth} value={this.state.value.auth}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'auth') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-auth\">Auth</label>\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <input type=\"checkbox\" id=\"field-is_object\"\r\n                     checked={this.state.value.is_object} value={this.state.value.is_object}\r\n                     onChange={e => { this.changeValue(e.target.checked, 'is_object') }}\r\n              />\r\n              <label className=\"checkbox-label\" htmlFor=\"field-is_object\">As Object</label>\r\n            </div>\r\n            {!this.state.value.auth ? '' : <><div className=\"form-group col-4\">\r\n              <label htmlFor=\"field-roles\">Roles</label>\r\n              <AltrpSelect id=\"field-roles\"\r\n                           isMulti={true}\r\n                           optionsRoute=\"/admin/ajax/role_options\"\r\n                           placeholder=\"All\"\r\n                           defaultOptions={[\r\n                             {\r\n                               value: null,\r\n                               label: 'All',\r\n                             }\r\n                           ]}\r\n                           value={this.state.value.roles}\r\n                           onChange={value => {this.changeValue(value, 'roles')}}\r\n              />\r\n            </div>\r\n            <div className=\"form-group col-4\">\r\n              <label htmlFor=\"field-permissions\">Permissions</label>\r\n              <AltrpSelect id=\"field-permissions\"\r\n                           isMulti={true}\r\n                           optionsRoute=\"/admin/ajax/permissions_options\"\r\n                           placeholder=\"All\"\r\n                           defaultOptions={[\r\n                             {\r\n                               value: null,\r\n                               label: 'All',\r\n                             }\r\n                           ]}\r\n                           value={this.state.value.permissions}\r\n                           onChange={value => {this.changeValue(value, 'permissions')}}\r\n              />\r\n            </div></>}\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"field-name\">SQL Query</label>\r\n              {this.state.AceEditor && (this.editor = (this.editor || <this.state.AceEditor\r\n                  mode=\"sql\"\r\n                  theme=\"textmate\"\r\n                  onChange={value => {\r\n                    this.changeValue(value, 'sql')\r\n                  }}\r\n                  className=\"field-ace\"\r\n                  name=\"aceEditor\"\r\n                  height=\"15em\"\r\n                  setOptions={{\r\n                    value: this.state.value.sql || ''\r\n                  }}\r\n                  showPrintMargin={false}\r\n                  style={{\r\n                    width: '100%'\r\n                  }}\r\n                  enableLiveAutocompletion={true} />))}\r\n            </div>\r\n          </div>\r\n          <div className=\"btn__wrapper btn_add\">\r\n            <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n            <Link className=\"btn\" to={`/admin/tables/sql_editors`}>Cancel</Link>\r\n            {/* TODO: отображать кнопку если в форме редактируются данные\r\n          повесить обработчик удаления\r\n        <button className=\"btn btn_failure\">Delete</button> */}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(SqlEditor);\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { Tab, TabList, TabPanel, Tabs } from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport { Link, withRouter } from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'name',\r\n    title: 'Name',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'display_name',\r\n    title: 'Display Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  }\r\n];\r\n\r\nconst rolesResource = new Resource({ route: '/admin/ajax/roles' });\r\nconst permissionsResource = new Resource({ route: '/admin/ajax/permissions' });\r\n\r\nclass AccessOptions extends Component {\r\n  state = {\r\n    roles: [],\r\n    permissions: [],\r\n  };\r\n  /**\r\n   * Список ролей\r\n   */\r\n  getRoles = async () => {\r\n    const roles = await rolesResource.getAll();\r\n    this.setState({ roles });\r\n  }\r\n  /**\r\n   * Список permissions\r\n   */\r\n  getPermissions = async () => {\r\n    const permissions = await permissionsResource.getAll();\r\n    this.setState({ permissions });\r\n  }\r\n\r\n  // slicePage = (array, page, itemsPerPage) => {\r\n  //   return array.slice(page * itemsPerPage - itemsPerPage, page * itemsPerPage);\r\n  // }\r\n\r\n  componentDidMount() {\r\n    this.getRoles();\r\n    this.getPermissions();\r\n  }\r\n\r\n  render() {\r\n    const { roles, permissions } = this.state;\r\n    const activeTab = this.props.location.pathname === \"/admin/access/roles\" ? 0 : 1;\r\n\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">Access</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {activeTab === 0 ? 'All Roles' : 'All Permissions'}\r\n          </span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/access/${activeTab === 0 ? 'roles' : 'permissions'}/add`}>\r\n          Add New\r\n        </Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <Tabs selectedIndex={activeTab} onSelect={() => {}}>\r\n          <TabList className=\"nav nav-pills admin-pills\">\r\n            <Link to=\"/admin/access/roles\"><Tab>Roles</Tab></Link>\r\n            <Link to=\"/admin/access/permissions\"><Tab>Permissions</Tab></Link>\r\n          </TabList>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columns}\r\n              quickActions={[\r\n                {\r\n                  tag: 'Link',\r\n                  props: { href: '/admin/access/roles/edit/:id' },\r\n                  title: 'Edit'\r\n                },\r\n                {\r\n                  tag: 'button',\r\n                  route: '/admin/ajax/roles/:id',\r\n                  method: 'delete',\r\n                  confirm: 'Are You Sure?',\r\n                  after: () => this.getRoles(),\r\n                  className: 'quick-action-menu__item_danger',\r\n                  title: 'Trash'\r\n                }\r\n              ]}\r\n              rows={roles.map(role => ({\r\n                ...role,\r\n                editUrl: '/admin/access/roles/edit/' + role.id\r\n              }))}\r\n            />\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <AdminTable\r\n              columns={columns}\r\n              quickActions={[\r\n                {\r\n                  tag: 'Link',\r\n                  props: { href: '/admin/access/permissions/edit/:id' },\r\n                  title: 'Edit'\r\n                },\r\n                {\r\n                  tag: 'button',\r\n                  route: '/admin/ajax/permissions/:id',\r\n                  method: 'delete',\r\n                  confirm: 'Are You Sure?',\r\n                  after: () => this.getPermissions(),\r\n                  className: 'quick-action-menu__item_danger',\r\n                  title: 'Trash'\r\n                }\r\n              ]}\r\n              rows={permissions.map(permission => ({\r\n                ...permission,\r\n                editUrl: '/admin/access/permissions/edit/' + permission.id\r\n              }))}\r\n            />\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default withRouter(AccessOptions);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst rolesResource = new Resource({ route: '/admin/ajax/roles' });\r\n\r\nclass RoleForm extends Component {\r\n  state = {\r\n    name: '',\r\n    display_name: '',\r\n    description: ''\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    if (id) {\r\n      const { name, display_name, description } = await rolesResource.get(id);\r\n      this.setState({ name, display_name, description });\r\n    }\r\n  }\r\n\r\n  changeHandler = ({ target: { value, name } }) => {\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  deleteHandler = () => {\r\n    const { id } = this.props.match.params;\r\n    rolesResource.delete(id)\r\n      .then(() => this.props.history.push('/admin/access/roles'));\r\n  }\r\n\r\n  submitHandler = e => {\r\n    const { id } = this.props.match.params;\r\n    e.preventDefault();\r\n    (id ? rolesResource.put(id, this.state) : rolesResource.post(this.state))\r\n      .then(() => this.props.history.push('/admin/access/roles'));\r\n  }\r\n\r\n  render() {\r\n    const { name, display_name, description } = this.state;\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"name\">Name</label>\r\n        <input type=\"text\" id=\"name\" required name=\"name\"\r\n          value={name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"display_name\">Display Name</label>\r\n        <input type=\"text\" id=\"display_name\" name=\"display_name\"\r\n          value={display_name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input type=\"text\" id=\"description\" required name=\"description\"\r\n          value={description}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link to=\"/admin/access/roles\"><button className=\"btn\">Cancel</button></Link>\r\n        {isEditing && <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>\r\n          Delete\r\n        </button>}\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(RoleForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport RoleForm from \"./RoleForm\";\r\n\r\nclass RolePage extends Component {\r\n  render() {\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/access\">Access / All Roles</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {isEditing ? 'Edit Role' : 'Add New Role'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <RoleForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(RolePage);","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nconst permissionsResource = new Resource({ route: '/admin/ajax/permissions' });\r\n\r\nclass PermissionForm extends Component {\r\n  state = {\r\n    name: '',\r\n    display_name: '',\r\n    description: ''\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    if (id) {\r\n      const { name, display_name, description } = await permissionsResource.get(id);\r\n      this.setState({ name, display_name, description });\r\n    }\r\n  }\r\n\r\n  changeHandler = ({ target: { value, name } }) => {\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  deleteHandler = () => {\r\n    const { id } = this.props.match.params;\r\n    permissionsResource.delete(id)\r\n      .then(() => this.props.history.push('/admin/access/permissions'));\r\n  }\r\n\r\n  submitHandler = e => {\r\n    const { id } = this.props.match.params;\r\n    e.preventDefault();\r\n    (id ? permissionsResource.put(id, this.state) : permissionsResource.post(this.state))\r\n      .then(() => this.props.history.push('/admin/access/permissions'));\r\n  }\r\n\r\n  render() {\r\n    const { name, display_name, description } = this.state;\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"name\">Name</label>\r\n        <input type=\"text\" id=\"name\" required name=\"name\"\r\n          value={name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"display_name\">Display Name</label>\r\n        <input type=\"text\" id=\"display_name\" name=\"display_name\"\r\n          value={display_name}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"description\">Description</label>\r\n        <input type=\"text\" id=\"description\" required name=\"description\"\r\n          value={description}\r\n          onChange={this.changeHandler}\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"btn__wrapper\">\r\n        <button className=\"btn btn_success\" type=\"submit\">Add</button>\r\n        <Link to=\"/admin/access/permissions\"><button className=\"btn\">Cancel</button></Link>\r\n        {isEditing && <button className=\"btn btn_failure\" type=\"button\" onClick={this.deleteHandler}>\r\n          Delete\r\n        </button>}\r\n      </div>\r\n    </form >\r\n  }\r\n}\r\n\r\nexport default withRouter(PermissionForm);\r\n","import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport PermissionForm from \"./PermissionForm\";\r\n\r\nclass PermissionPage extends Component {\r\n  render() {\r\n    const isEditing = Boolean(this.props.match.params.id);\r\n\r\n    return <div className=\"admin-pages admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <Link className=\"admin-breadcrumbs__link\" to=\"/admin/access\">Access / All Permissions</Link>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">\r\n            {isEditing ? 'Edit Permission' : 'Add New Permission'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n        <PermissionForm />\r\n      </div>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(PermissionPage);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n//import TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass TableForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: {},\r\n            errors: [],\r\n            redirectAfterSave: false,\r\n        };\r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.saveTable = this.saveTable.bind(this);\r\n    }\r\n    async componentDidMount(){\r\n        let id = this.props.id;\r\n        \r\n        if(id){\r\n            let pageData = await this.resource.get(id);\r\n            this.setState(state=>{\r\n                return{...state, value:pageData, id: id}\r\n            });\r\n        }\r\n    }\r\n    async saveTable(e){\r\n        e.preventDefault();\r\n        let res;\r\n\r\n        if(this.state.id){\r\n            res = await this.resource.put(this.state.id, this.state.value);\r\n        } else {\r\n            res = await this.resource.post(this.state.value);\r\n        }\r\n\r\n        if(res){\r\n            this.setState(state=>{\r\n                return {...state, redirectAfterSave: true}\r\n            });\r\n        } else {\r\n            this.setState(state=>{\r\n                return {...state, value: {}}\r\n            });\r\n        }\r\n    }\r\n    changeValue(value, field){\r\n        this.setState(state=>{\r\n            state = {...state};\r\n            state.value[field] = value;\r\n            return state\r\n        })\r\n    }\r\n    render() {\r\n        if(this.state.redirectAfterSave){\r\n            return <Redirect to={this.props.redirect_url}/>\r\n        }\r\n        return <form className=\"admin-form\" onSubmit={this.saveTable}>\r\n        \r\n            \r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-name\">Name</label>\r\n                <input type=\"text\" id=\"page-name\" required={1}\r\n                    value={this.state.value.name || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'name')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-title\">Title</label>\r\n                <input type=\"text\" id=\"page-title\" required={1}\r\n                    value={this.state.value.title || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'title')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"page-description\">Description</label>\r\n                <input type=\"text\" id=\"page-description\" required={1}\r\n                    value={this.state.value.description || ''}\r\n                    onChange={e => {this.changeValue(e.target.value, 'description')}}\r\n                    className=\"form-control\"/>\r\n            </div>\r\n            <button className=\"btn btn_success\">{this.state.id ? 'Save' : 'Add'}</button>\r\n        </form>;\r\n    }\r\n}\r\n\r\nexport default TableForm;","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass AddTable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            redirect_url: \"/admin/tables\",\r\n        };\r\n    }\r\n    async componentDidMount(){\r\n        let id = this.props.match.params.id;\r\n        \r\n        this.setState((state) => ({\r\n            table_id: id\r\n        }));\r\n    }\r\n\t\r\n    render() {\r\n        return <div className=\"admin-pages admin-page\">\r\n            <div className=\"admin-heading\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Add New Table</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-content\">\r\n                <TableForm id={this.state.table_id} redirect_url={this.state.redirect_url}/>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(AddTable);","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport TableForm from \"../../../../admin/src/components/tables/TableForm\";\r\n/**\r\n * @class\r\n * @property {Resource} resource\r\n */\r\n\r\nclass EditTable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            redirect_url: \"/admin/tables\",\r\n            table_id: this.props.match.params.id,\r\n            setting_url: \"/admin/tables/edit/\"+this.props.match.params.id+\"/setting\"\r\n        };\r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n    }\r\n    render() {\r\n        if(this.state.redirectAfterSave){\r\n            return <Redirect to=\"/admin/tables\"/>\r\n        }\r\n        return <div className=\"admin-pages admin-page\">\r\n            <div className=\"admin-heading\">\r\n                <div className=\"admin-breadcrumbs\">\r\n                    <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                    <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                    <span className=\"admin-breadcrumbs__current\">Edit Table</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"admin-content\">\r\n                <TableForm id={this.state.table_id} redirect_url={this.state.redirect_url}/>\r\n                <div>\r\n                    <Link to={ this.state.setting_url }>Settings</Link>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withRouter(EditTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\n\r\nclass MigrationsTable extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            migrations: [],\r\n            table: {},\r\n            table_columns: [\r\n                {name: 'name',title: 'Name',},\r\n                {name: 'status',title: 'Status',},\r\n                {name: 'created_at',title: 'Created At',},\r\n            ],\r\n        };\r\n        \r\n        this.migrations_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        this.table_resource = new Resource({route: '/admin/ajax/tables'});\r\n    }\r\n    async componentDidMount(){\r\n        let res = await this.migrations_resource.getAll();\r\n        this.setState(state=>{\r\n            return{...state, migrations:res}\r\n        });\r\n        \r\n        let table_res = await this.table_resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res}\r\n        });\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n          <AdminTable columns={this.state.table_columns} rows={this.state.migrations}/>\r\n        </div>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(MigrationsTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AddModelPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        /**\r\n         * Типы связей\r\n         */\r\n        this.relationship_types = [\r\n            {id: \"hasMany\",name: \"hasMany\"},\r\n            {id: \"hasOne\",name: \"hasOne\"},\r\n            {id: \"belongsTo\",name: \"belongsTo\"},\r\n            {id: \"belongsToMany\",name: \"belongsToMany\"},\r\n            {id: \"hasOneThrough\",name: \"hasOneThrough\"},\r\n            {id: \"hasManyThrough\",name: \"hasManyThrough\"},\r\n            {id: \"morphTo\",name: \"morphTo\"},\r\n            {id: \"morphOne\",name: \"morphOne\"},\r\n            {id: \"morphMany\",name: \"morphMany\"},\r\n            {id: \"morphToMany\",name: \"morphToMany\"},\r\n            {id: \"morphedByMany\",name: \"morphedByMany\"},\r\n        ];\r\n        \r\n        /**\r\n         * Настройки таблицы связей\r\n         */\r\n        this.table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'type',title: 'Type',},\r\n            {name: 'model_class',title: 'Model Class',},\r\n            {name: 'foreign_key',title: 'Foreign Key',},\r\n            {name: 'local_key',title: 'Local Key',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Связь по умолчанию\r\n         * @type type\r\n         */\r\n        const default_relationship = {\r\n            id: \"\",\r\n            name: '',\r\n            title: '',\r\n            type: \"hasMany\",\r\n            model_class: '',\r\n            foreign_key: '',\r\n            local_key: '',\r\n        };\r\n        \r\n        /**\r\n         * Настройки таблицы формул\r\n         */\r\n        this.accessors_table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'formula',title: 'Formula',},\r\n            {name: 'status',title: 'Status',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addAccessorModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteAccessorClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Формула по умолчанию\r\n         * @type type\r\n         */\r\n        const default_accessor = {\r\n            id: \"\",\r\n            name: '',\r\n            formula: '',\r\n            description: \"\",\r\n        };\r\n        \r\n        this.state = {\r\n            modal_toogle: false,\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            actual_columns: [],\r\n            fillable_columns: [],\r\n            user_cols: [],\r\n            data: {\r\n                description: \"\",\r\n                fillable_cols: [],\r\n                user_cols: [],\r\n                table_id: this.props.match.params.id,\r\n                path: \"\",\r\n                name: \"\",\r\n                relationships: [],\r\n                pk: \"\",\r\n                time_stamps: false,\r\n                soft_deletes: false\r\n            },\r\n            accessors: [],\r\n            default_relationship: default_relationship,\r\n            selected_relationship: null,\r\n            relationship: default_relationship,\r\n            default_accessor: default_accessor,\r\n            selected_accessor: null,\r\n            accessor: default_accessor,\r\n        };\r\n        \r\n        \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/model'});\r\n        this.save_model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models'});\r\n        this.accessors_resource = false;\r\n        \r\n        this.addFillableColumn = this.addFillableColumn.bind(this);\r\n        this.deleteFillableColumn = this.deleteFillableColumn.bind(this);\r\n        this.addUserColsColumn = this.addUserColsColumn.bind(this);\r\n        this.deleteUserColsColumn = this.deleteUserColsColumn.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onChangeRelationship = this.onChangeRelationship.bind(this);\r\n        this.saveModel = this.saveModel.bind(this);\r\n        \r\n        this.addRelationship = this.addRelationship.bind(this);\r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        \r\n        this.addAccessorModalShow = this.addAccessorModalShow.bind(this);\r\n        this.onDeleteAccessorClick = this.onDeleteAccessorClick.bind(this);\r\n        \r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let columns_res = await this.resource.get(this.state.table_id+\"/columns\");\r\n        this.setState(state=>{\r\n            return{...state, actual_columns: columns_res, fillable_columns: columns_res, user_cols: columns_res};\r\n        });\r\n        \r\n        let model_data = await this.resource.get(this.state.table_id+\"/model\");\r\n        \r\n        if(model_data) {\r\n             \r\n            \r\n            \r\n            let model = {\r\n                description: model_data.description,\r\n                fillable_cols: this.setCols(model_data.fillable_cols),\r\n                user_cols: this.setCols(model_data.user_cols),\r\n                table_id: model_data.table_id,\r\n                path: model_data.path !== null ? model_data.path : \"\",\r\n                name: model_data.name,\r\n                relationships: model_data.table.relationships,\r\n                pk: model_data.pk,\r\n                time_stamps: model_data.time_stamps,//1 == model_data.time_stamps ? true : false,\r\n                soft_deletes: model_data.soft_deletes//1 == model_data.soft_deletes ? true : false,\r\n            }\r\n            \r\n            this.accessors_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models/'+model_data.id+\"/accessors\"});\r\n            let accessors_data = await this.accessors_resource.getAll();\r\n\r\n            this.setState(state=>{\r\n                return{...state, data: model, accsessors: accessors_data};\r\n            }, () => {\r\n                \r\n            });\r\n        }\r\n                \r\n        \r\n        \r\n        /*\r\n        let keys_res = await this.resource.get(this.state.table_id+\"/keys\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, keys: keys_res}};\r\n        });*/\r\n    }\r\n    \r\n    setCols(value) {\r\n        \r\n        let cols = [];\r\n        \r\n        if(!value) return cols;\r\n        \r\n        if(value == null || value == \"\") return cols;\r\n        \r\n        \r\n        value.replace(/'/g,\"\");\r\n        return value.split(\",\");\r\n    }\r\n    \r\n    addFillableColumn(e) {\r\n        \r\n        let value = e.target.value;\r\n        \r\n        let itemIndex = this.state.data.fillable_cols.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This column has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  fillable_cols: update(state.data.fillable_cols, {$push: [value]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    deleteFillableColumn(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.data.fillable_cols.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This column not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  fillable_cols: update(state.data.fillable_cols, {$splice: [[itemIndex, 1]]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    \r\n    addUserColsColumn(e) {\r\n        \r\n        let value = e.target.value;\r\n        \r\n        let itemIndex = this.state.data.user_cols.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This column has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  user_cols: update(state.data.user_cols, {$push: [value]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    deleteUserColsColumn(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.data.user_cols.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This column not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...state.data,  user_cols: update(state.data.user_cols, {$splice: [[itemIndex, 1]]})}};\r\n        }, () => {\r\n            //this.toggleModal();\r\n        });\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        this.setState({ ...this.state, data:{...this.state.data, [field_name]: value}});\r\n    }\r\n    onChangeRelationship(e) {\r\n        let field_name = e.target.name;\r\n        this.setState({ ...this.state, relationship:{...this.state.relationship, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    async saveModel(e) {\r\n        e.preventDefault();\r\n        \r\n        if(this.state.data.name == \"\") {\r\n            alert(\"Enter model name!\");\r\n            return;\r\n        }\r\n        \r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        \r\n        let data = {...this.state.data};\r\n        /*data.time_stamps = String(true) == model.time_stamps ? true : false;\r\n        data.soft_deletes = String(true) == model.soft_deletes ? true : false;*/\r\n        data._token = _token;\r\n\r\n\r\n        console.log(this.state.data)\r\n        /*let data = {\r\n            model: model,\r\n            \r\n        };*/\r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.save_model_resource.post(data);\r\n        \r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n    }\r\n    \r\n    addRelationship(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.relationship};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_relationship == null) {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {[state.selected_relationship]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal();\r\n        });\r\n    }\r\n    getModalClasses() {\r\n        let modalClasses = 'admin-modal';\r\n        if (this.state.modal_toogle) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    toggleModal() {\r\n        this.setState((state) => {\r\n            return { ...state, modal_toogle: !state.modal_toogle}\r\n        })\r\n    }\r\n    addModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.relationships.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_relationship: null, relationship: state.default_relationship}\r\n            }\r\n            else {\r\n                return { ...state, selected_relationship: itemIndex, relationship: state.data.relationships[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    onDeleteClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.relationships.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  relationships: update(this.state.data.relationships, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    addAccessorModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.relationships.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_relationship: null, relationship: state.default_relationship}\r\n            }\r\n            else {\r\n                return { ...state, selected_relationship: itemIndex, relationship: state.data.relationships[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    onDeleteAccessorClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.relationships.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  relationships: update(this.state.data.relationships, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <form>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Name\r\n                            <input className='form__input' type=\"text\" name=\"name\" value={this.state.data.name}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Description\r\n                            <input className='form__input' type=\"text\" name=\"description\" value={this.state.data.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Soft Deletes\r\n                            <input className='form__input' type=\"checkbox\" checked={this.state.data.soft_deletes ? 1 : 0} name=\"soft_deletes\" onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Timestamps\r\n                            <input className='form__input' type=\"checkbox\" checked={this.state.data.time_stamps ? 1 : 0}  name=\"time_stamps\" onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Fillable\r\n                            <select className=\"form__input\" name='add_fillable' onChange={(e) => {this.addFillableColumn(e)}}>\r\n                                <option value=\"\"/>\r\n                                {\r\n                                  this.state.fillable_columns.map(option =>\r\n                                      <option key={option.id}\r\n                                              value={option.name}\r\n                                              children={option.title}/>)\r\n                                }\r\n                            </select>\r\n                        </label>\r\n                        <div>\r\n                            {\r\n                                this.state.data.fillable_cols.map(option =>\r\n                                <div key={option}>\r\n                                    <button className=\"btn\" onClick={(e) => {this.deleteFillableColumn(e,option)}}>{option}</button>\r\n                                </div>  )\r\n                                }\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            User Cols\r\n                            <select className=\"form__input\" name='add_user_cols' onChange={(e) => {this.addUserColsColumn(e)}}>\r\n                                <option value=\"\"/>\r\n                                {\r\n                                  this.state.user_cols.map(option =>\r\n                                      <option key={option.id}\r\n                                              value={option.name}\r\n                                              children={option.title}/>)\r\n                                }\r\n                            </select>\r\n                        </label>\r\n                        <div>\r\n                            {\r\n                                this.state.data.user_cols.map(option =>\r\n                                <div key={option}>\r\n                                    <button className=\"btn\" onClick={(e) => {this.deleteUserColsColumn(e,option)}}>{option}</button>\r\n                                </div>  )\r\n                                }\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Path\r\n                            <input className='form__input' type=\"text\" name=\"path\" value={this.state.data.path}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <label className='form-label'>\r\n                        Primary Key\r\n                        <select className=\"form__input\" name='pk'  value={this.state.data.pk} onChange={(e) => {this.onChange(e)}}>\r\n                            <option value=\"\"/>\r\n                            {\r\n                              this.state.actual_columns.map(option =>\r\n                                  <option key={option.id}\r\n                                          value={option.name}\r\n                                          children={option.title || option.name}/>)\r\n                            }\r\n                        </select>\r\n                    </label>\r\n                </form>\r\n            </div>\r\n            <div>\r\n                <AdminTable columns={this.table_columns} rows={this.state.data.relationships}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addModalShow}>Add Relationship</button>\r\n            </div>\r\n            <div>\r\n                <form className=\"admin-form\" onSubmit={this.saveModel}>\r\n                    <button className=\"btn btn_success\">Save</button>\r\n                </form>\r\n            </div>\r\n            <div>\r\n                <hr />\r\n            </div>\r\n            <div>\r\n                <AdminTable columns={this.accessors_table_columns} rows={this.state.accessors}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addAccessorModalShow}>Add Accessor</button>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses()}>\r\n                <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Relationship</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addRelationship}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.relationship.name} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Model Class\r\n                                <input className='form__input' type=\"text\" name=\"model_class\" value={this.state.relationship.model_class}  onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                type\r\n                                <select className=\"form__input\" value={this.state.relationship.type} name='type'  onChange={(e) => {this.onChangeRelationship(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.relationship_types.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                foreign key\r\n                                <input className='form__input' type=\"text\" name=\"foreign_key\"  value={this.state.relationship.foreign_key} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                local key\r\n                                <input className='form__input' type=\"text\" name=\"local_key\" value={this.state.relationship.local_key} onChange={(e) => {this.onChangeRelationship(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add col</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddModelPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AccessorsPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        /**\r\n         * Настройки таблицы формул\r\n         */\r\n        this.table_columns = [\r\n            {name: 'id',title: 'ID',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'formula',title: 'Formula',},\r\n            {name: 'status',title: 'Status',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        /**\r\n         * Формула по умолчанию\r\n         * @type type\r\n         */\r\n        const default_accessor = {\r\n            id: \"\",\r\n            name: '',\r\n            formula: '',\r\n            description: \"\",\r\n        };\r\n        \r\n        this.state = {\r\n            modal_toogle: false,\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            data: [],\r\n            default_accessor: default_accessor,\r\n            selected_accessor: null,\r\n            accessor: default_accessor,\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.model_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/model'});\r\n        this.accessors_resource = false;\r\n        \r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onChange = this.onChange.bind(this);\r\n        \r\n        this.addModalShow = this.addModalShow.bind(this);\r\n        this.onDeleteClick = this.onDeleteClick.bind(this);\r\n        this.addAccessor = this.addAccessor.bind(this);\r\n        \r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let model_data = await this.model_resource.get(\" \");\r\n        \r\n        if(model_data) {\r\n             \r\n            this.accessors_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/models/'+model_data.id+\"/accessors\"});\r\n            let accessors_data = await this.accessors_resource.getAll();\r\n\r\n            this.setState(state=>{\r\n                return{...state, model: model_data, data: accessors_data};\r\n            }, () => {\r\n                \r\n            });\r\n        }\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        this.setState({ ...this.state, accessor: {...this.state.accessor, [field_name]: value}});\r\n    }\r\n    \r\n    async addAccessor(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.accessor};\r\n        \r\n        if(obj.name == \"\") {\r\n            alert(\"Enter accessor name!\");\r\n            return;\r\n        }\r\n        \r\n        obj._token = _token;\r\n        \r\n        let res;\r\n        \r\n        if(this.state.selected_accessor == null) {\r\n            res = await this.accessors_resource.post(obj);\r\n        }\r\n        else {\r\n            res = await this.accessors_resource.put(obj.id, obj);\r\n        }\r\n        \r\n        \r\n        if(res){\r\n            \r\n            this.setState((state) => {\r\n                if(state.selected_accessor == null) {\r\n                    return { ...state, data: update(state.data, {$push: [res]})};\r\n                }\r\n                else {\r\n                    return { ...state, data: update(state.data, {[state.selected_accessor]: {$set: res}})};\r\n                }\r\n            }, () => {\r\n                this.toggleModal();\r\n            });\r\n            \r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n        /*\r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_relationship == null) {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  relationships: update(state.data.relationships, {[state.selected_relationship]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal();\r\n        });*/\r\n    }\r\n    \r\n    getModalClasses() {\r\n        let modalClasses = 'admin-modal';\r\n        if (this.state.modal_toogle) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    toggleModal() {\r\n        this.setState((state) => {\r\n            return { ...state, modal_toogle: !state.modal_toogle}\r\n        })\r\n    }\r\n    addModalShow(e) {\r\n        console.log(e);\r\n        let itemIndex = this.state.data.indexOf(e);\r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_accessor: null, accessor: state.default_accessor}\r\n            }\r\n            else {\r\n                return { ...state, selected_accessor: itemIndex, accessor: state.data[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal();\r\n        });\r\n    }\r\n    async onDeleteClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                let res;\r\n                res = await this.accessors_resource.delete(e.id);\r\n                \r\n                if(res) {\r\n                    this.setState((state) => {\r\n                        return { ...state, data: update(this.state.data, {$splice: [[itemIndex, 1]]})};\r\n                    }, () => {\r\n                        alert(\"Success\");\r\n                    });\r\n                }\r\n                else {\r\n                    alert(\"Error\")\r\n                }\r\n            \r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <AdminTable columns={this.table_columns} rows={this.state.data}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={this.addModalShow}>Add Accessor</button>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses()}>\r\n                <div className=\"admin-modal__bg\" onClick={this.toggleModal}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={this.toggleModal}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Accessor</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addAccessor}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.accessor.name} onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                description\r\n                                <input className='form__input' type=\"text\" name=\"description\" value={this.state.accessor.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                formula\r\n                                <input className='form__input' type=\"text\" name=\"formula\" value={this.state.accessor.formula}  onChange={(e) => {this.onChange(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        \r\n                        <button className=\"btn btn_success\">Add accessor</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AccessorsPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\nclass AddControllerPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n            relationships: [],\r\n            relation: \"\",\r\n            data: {\r\n                description: \"\",\r\n                prefix: \"\",\r\n                namespace: \"\",\r\n                relations: \"\",\r\n            },\r\n            \r\n        };\r\n        \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.controller_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/controller'});\r\n        this.save_controller_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/controllers'});\r\n        \r\n        \r\n        this.onChange = this.onChange.bind(this);\r\n        this.saveController = this.saveController.bind(this);\r\n        \r\n        this.addRelation = this.addRelation.bind(this);\r\n        this.deleteRelation = this.deleteRelation.bind(this);\r\n    }\r\n    \r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        \r\n        let controller_res = await this.resource.get(this.state.table_id+\"/controller\");\r\n        \r\n        \r\n        \r\n        if(controller_res) {\r\n            \r\n            \r\n            controller_res.description = (controller_res.description == null) ? \"\" : controller_res.description;\r\n            controller_res.prefix = (controller_res.prefix == null) ? \"\" : controller_res.prefix;\r\n            controller_res.namespace = (controller_res.namespace == null) ? \"\" : controller_res.namespace;\r\n            \r\n            controller_res.relation = this.setCols(controller_res.relations);\r\n            \r\n            this.setState(state=>{\r\n                return{...state, data: controller_res};\r\n            }, () => {\r\n                \r\n                this.setState(state=>{\r\n                    return{...state, relationships: controller_res.relation};\r\n                })\r\n                \r\n            });\r\n        }\r\n        \r\n    }\r\n    \r\n    setCols(value) {\r\n        \r\n        let cols = [];\r\n        \r\n        if(!value) return cols;\r\n        \r\n        if(value == null || value == \"\") return cols;\r\n        \r\n        \r\n        value.replace(/'/g,\"\");\r\n        return value.split(\",\");\r\n    }\r\n    \r\n    onChange(e) {\r\n        let field_name = e.target.name;\r\n        \r\n        if(field_name === \"relation\") {\r\n            return this.setState({ ...this.state, relation: e.target.value});\r\n        }\r\n        \r\n        this.setState({ ...this.state, data:{...this.state.data, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    async saveController(e) {\r\n        e.preventDefault();\r\n        \r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        \r\n        let data = {...this.state.data};\r\n        data._token = _token;\r\n        \r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.save_controller_resource.post(data);\r\n        \r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            alert(\"Error\");\r\n        }\r\n    }\r\n    \r\n    addRelation(e) {\r\n        e.preventDefault();\r\n        let value = this.state.relation;\r\n       \r\n        let itemIndex = this.state.relationships.indexOf(value);\r\n        \r\n        if(itemIndex !== -1) {\r\n            alert(\"This relation has already been added.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, relationships: update(state.relationships, {$push: [value]})};\r\n        }, () => {\r\n            console.log(this.state)\r\n            this.setRelation();\r\n            \r\n        });\r\n    }\r\n    \r\n    \r\n    deleteRelation(e, value) {\r\n        e.preventDefault();\r\n        \r\n        let itemIndex = this.state.relationships.indexOf(value);\r\n        \r\n        if(itemIndex === -1) {\r\n            alert(\"This relation not found.\");\r\n            return false;\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, relationships: update(state.relationships, {$splice: [[itemIndex, 1]]})};\r\n        }, () => {\r\n            this.setRelation();\r\n        });\r\n    }\r\n    \r\n    setRelation() {\r\n        let relations = this.state.relationships.join(\";\");\r\n            \r\n        this.setState((state) => {\r\n            return { ...state, data: { ...this.state.data, relations: relations}};\r\n        }, () => {\r\n            console.log(this.state)\r\n        }) \r\n    }\r\n    \r\n    render(){\r\n        return <div>\r\n            <div>\r\n                <form className=\"admin-form\"  onSubmit={this.saveController}>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Description\r\n                            <input className='form__input' type=\"text\" name=\"description\" value={this.state.data.description}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Prefix\r\n                            <input className='form__input' type=\"text\" name=\"prefix\" value={this.state.data.prefix}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Namespace\r\n                            <input className='form__input' type=\"text\" name=\"namespace\" value={this.state.data.namespace}  onChange={(e) => {this.onChange(e)}}/>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label className='form-label'>\r\n                            Relations\r\n                            <div className=\"input-group\">\r\n                                <input className='form__input' type=\"text\" name=\"relation\" value={this.state.relation}  onChange={(e) => {this.onChange(e)}}/>\r\n                                <button onClick={(e) => {this.addRelation(e)}}>Добавить</button>    \r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        {\r\n                            this.state.relationships.map(option =>\r\n                            <div key={option}>\r\n                                <button className=\"btn\" onClick={(e) => {this.deleteRelation(e,option)}}>{option}</button>\r\n                            </div>  )\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        <button className=\"btn btn_success\">Save</button>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </div>\r\n        </div>;\r\n      \r\n            \r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddControllerPage);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\n\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport MigrationsTable from \"./MigrationsTable\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\n\r\nimport AddModelPage from \"./AddModelPage\";\r\nimport AccessorsPage from \"./AccessorsPage\";\r\nimport AddControllerPage from \"./AddControllerPage\";\r\n\r\n/*\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';*/\r\n\r\n\r\n\r\n//import AdminTable from \"../AdminTable\";\r\n/*\r\nimport store from \"../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../js/store/modal-settings/actions\";\r\nimport {generateId, redirect} from \"../js/helpers\";*/\r\n\r\n\r\nclass SettingTable extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            table_id: this.props.match.params.id,\r\n            table: {},\r\n        }  \r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        /*this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        this.onEditClick = this.onEditClick.bind(this);\r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);*/\r\n    }\r\n    async componentDidMount(){\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res}\r\n        });\r\n    }\r\n   \r\n   \r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n        <div className=\"admin-heading\">\r\n            <div className=\"admin-breadcrumbs\">\r\n                <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id}>{this.state.table.title}</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <span className=\"admin-breadcrumbs__current\">Setting</span>\r\n            </div>\r\n        </div>\r\n        <div className=\"admin-content\">\r\n            <Tabs selectedIndex={this.state.activeTab} onSelect={this.switchTab}>\r\n                <TabList className=\"nav nav-pills admin-pills\">\r\n                    <Tab>Migration</Tab>\r\n                    <Tab>Model</Tab>\r\n                    <Tab>Controller</Tab>\r\n                    <Tab>Routes</Tab>\r\n                    <Tab>Accessors</Tab>\r\n                </TabList>\r\n                <TabPanel>\r\n                    <MigrationsTable/>\r\n                    <div>\r\n                        <Link className=\"btn\" to={\"/admin/tables/edit/\"+this.state.table_id+\"/setting/migrations/add\"}>Add New</Link>\r\n                    </div>\r\n                </TabPanel>\r\n                <TabPanel>\r\n                    <AddModelPage/>\r\n                </TabPanel>\r\n                <TabPanel>\r\n                    <AddControllerPage/>\r\n                </TabPanel>\r\n                  <TabPanel>\r\n                  </TabPanel>\r\n                <TabPanel>\r\n                    <AccessorsPage/>\r\n                </TabPanel>  \r\n            </Tabs>\r\n            \r\n        </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(SettingTable);","import React, {Component} from \"react\";\r\nimport {Redirect, withRouter} from 'react-router-dom';\r\nimport AdminTable from \"../AdminTable\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport store from \"../../js/store/store\";\r\nimport {setModalSettings, toggleModal} from \"../../js/store/modal-settings/actions\";\r\nimport update from 'immutability-helper';\r\n\r\nimport TimesIcon from '../../svgs/times.svg';\r\n\r\n\r\n\r\nclass AddMigrationPage extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        \r\n        //Типы  полей\r\n        this.column_types = [\r\n            {id: \"id\",name: \"Identifier\",fields:[]},\r\n            {id: \"foreignId\",name: \"Foreign Id\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"boolean\",name: \"Boolean\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"date\",name: \"Date\",fields:[\"nullable\",\"default\",\"size\",\"unique\",\"current\"]},\r\n            {id: \"datetime\",name: \"Datetime\",fields:[\"nullable\",\"default\",\"size\",\"unique\",\"current\"]},\r\n            {id: \"decimal\",name: \"Decimal\",fields:[\"nullable\",\"default\",\"size\",\"places\"]},\r\n            {id: \"integer\",name: \"Integer\",fields:[\"nullable\",\"default\"]},\r\n            {id: \"longtext\",name: \"Long Text\",fields:[\"nullable\",\"default\",\"unique\"]},\r\n            {id: \"string\",name: \"String\",fields:[\"nullable\",\"default\",\"size\",\"unique\"]},\r\n            {id: \"text\",name: \"Text\",fields:[\"nullable\",\"default\",\"unique\"]},\r\n            {id: \"timestamps\",name: \"Timestamps\",fields:[\"size\"]},\r\n        ];\r\n        \r\n        //Значения колонки по умолчанию\r\n        const default_column = {\r\n            id: \"\",\r\n            name: '',\r\n            title: '',\r\n            description: '',\r\n            type: \"string\",\r\n            size: 191,\r\n            places: 0,\r\n            default: \"\",\r\n            null: false,\r\n            unique: false,\r\n        };\r\n        \r\n        //Значения ключа по умолчанию\r\n        const default_key = {\r\n            id: \"\",\r\n            target_table: \"\",\r\n            source_table_id: this.props.match.params.id,\r\n            target_column: \"\",\r\n            source_column: \"\",\r\n            onDelete: \"restrict\",\r\n            onUpdate: \"restrict\",\r\n        };\r\n        \r\n        //Типы действий для onDelete и onUpdate\r\n        this.key_actions = [\r\n            {id: \"restrict\", name: \"RESTRICT\"},\r\n            {id: \"cascade\", name: \"CASCADE\"},\r\n            {id: \"set null\", name: \"SET NULL\"},\r\n            {id: \"no action\", name: \"NO ACTION\"},\r\n        ];\r\n        \r\n        //Колонки для таблицы полей\r\n        this.table_columns = [\r\n            {name: 'title',title: 'Title',},\r\n            {name: 'name',title: 'Name',},\r\n            {name: 'type',title: 'Type',},\r\n            {name: 'size',title: 'Size',},\r\n            {name: 'default',title: 'Default',},\r\n            {name: 'null',title: 'Nullable',is_boolean: true},\r\n            {name: 'unique',title: 'Unique',is_boolean: true},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalColumnShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteColumnClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ];\r\n        \r\n        //Колонки для таблицы полей\r\n        this.table_keys = [\r\n            {name: 'target_table',title: 'Target Table',},\r\n            {name: 'target_column',title: 'Target Column',},\r\n            {name: 'source_column',title: 'Source Column',},\r\n            {name: 'onDelete',title: 'onDelete',},\r\n            {name: 'onUpdate',title: 'onUpdate',},\r\n            {\r\n                name: 'edit',\r\n                title: 'Edit',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.addModalKeyShow.bind(this),title: \"Edit\"},\r\n            },\r\n            {\r\n                name: 'delete',\r\n                title: 'Delete',\r\n                is_button: true, \r\n                button: {class: \"\",function: this.onDeleteKeyClick.bind(this),title: \"Delete\"},\r\n            },\r\n        ],\r\n        \r\n        \r\n        this.state = {\r\n            column_modal_toggle: false,\r\n            key_modal_toggle: false,\r\n            table: {},\r\n            table_id: this.props.match.params.id,\r\n            data: {\r\n                columns: [],\r\n                keys: [],\r\n                rename_columns: [],\r\n            },\r\n            name: \"\",\r\n            default_column: default_column,\r\n            selected_column: null,\r\n            column: default_column,\r\n            default_key: default_key,\r\n            selected_key: null,\r\n            key: default_key\r\n        };\r\n        \r\n        this.resource = new Resource({route: '/admin/ajax/tables'});\r\n        this.migration_resource = new Resource({route: '/admin/ajax/tables/'+this.props.match.params.id+'/migrations'});\r\n        \r\n        this.addModalColumnShow = this.addModalColumnShow.bind(this);\r\n        this.addModalKeyShow = this.addModalKeyShow.bind(this);\r\n        \r\n        this.onChangeColumn = this.onChangeColumn.bind(this);\r\n        this.onChangeKey = this.onChangeKey.bind(this);\r\n        \r\n        this.addColumn = this.addColumn.bind(this);\r\n        this.addKey = this.addKey.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.getModalClasses = this.getModalClasses.bind(this);\r\n        \r\n        this.onDeleteColumnClick = this.onDeleteColumnClick.bind(this);\r\n        this.onDeleteKeyClick = this.onDeleteKeyClick.bind(this);\r\n        \r\n        this.changeName = this.changeName.bind(this);\r\n        this.saveMigration = this.saveMigration.bind(this);\r\n        \r\n        this.isShowField = this.isShowField.bind(this);\r\n        \r\n        \r\n        \r\n        \r\n    }\r\n    \r\n    //Подгрузка данных\r\n    async componentDidMount(){\r\n        //Получаем данные о таблице\r\n        let table_res = await this.resource.get(this.state.table_id)\r\n        this.setState(state=>{\r\n            return{...state, table:table_res};\r\n        });\r\n        //Получаем данные о колонках\r\n        let columns_res = await this.resource.get(this.state.table_id+\"/columns\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, columns: columns_res}};\r\n        });\r\n        //Получаем данные о ключах\r\n        let keys_res = await this.resource.get(this.state.table_id+\"/keys\")\r\n        this.setState(state=>{\r\n            return{...state, data: { ...state.data, keys: keys_res}};\r\n        });\r\n    }\r\n    \r\n    //Получаем класс для модального окна\r\n    getModalClasses(type) {\r\n        \r\n        let modal_toggle = type+\"_modal_toggle\";\r\n        \r\n        let modalClasses = 'admin-modal';\r\n        if (this.state[modal_toggle]) {\r\n          modalClasses += ' admin-modal_active';\r\n        }\r\n        return modalClasses;\r\n    }\r\n    \r\n    //Получаем класс для модального окна\r\n    isShowField(field_name) {\r\n        \r\n        let state = false;\r\n        \r\n        let type = this.column_types.find(item => item.id === this.state.column.type);\r\n        \r\n        if(type) {\r\n            \r\n            let index = type.fields.indexOf(field_name);\r\n            \r\n            if(index > -1)  {\r\n                state = true;\r\n            }\r\n            \r\n        }\r\n        return state;\r\n    }\r\n    \r\n    //Меняем переменную для открытия той или иной модали\r\n    toggleModal(type) {\r\n        let modal_toggle = type+\"_modal_toggle\";\r\n        \r\n        this.setState((state) => {\r\n            return { ...state, [modal_toggle]: !state[modal_toggle]}\r\n        }, () => {console.log(this.state)})\r\n    }\r\n    \r\n    \r\n    addModalColumnShow(e) {\r\n        let itemIndex = this.state.data.columns.indexOf(e);\r\n        \r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_column: null, column: state.default_column}\r\n            }\r\n            else {\r\n                return { ...state, selected_column: itemIndex, column: state.data.columns[itemIndex]}\r\n            }\r\n            \r\n        }, () => { \r\n            this.toggleModal(\"column\");\r\n        });\r\n    }\r\n    \r\n    addModalKeyShow(e) {\r\n        let itemIndex = this.state.data.keys.indexOf(e);\r\n        \r\n        this.setState((state) => {\r\n            if(itemIndex === -1) {\r\n                return { ...state, selected_key: null, key: state.default_key}\r\n            }\r\n            else {\r\n                return { ...state, selected_key: itemIndex, key: state.data.keys[itemIndex]}\r\n            }\r\n        }, () => { \r\n            this.toggleModal(\"key\");\r\n        });\r\n    }\r\n    \r\n    //Добавление столбца\r\n    addColumn(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.column};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_column == null) {\r\n                return { ...state, data: { ...state.data,  columns: update(state.data.columns, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  columns: update(state.data.columns, {[state.selected_column]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal(\"column\");\r\n        });\r\n    }\r\n    \r\n    //Добавление ключа\r\n    addKey(e) {\r\n        e.preventDefault();\r\n        \r\n        let obj = {...this.state.key};\r\n        \r\n        if(obj.id == \"\") {\r\n            obj.id = new Date().getTime();\r\n        }\r\n        \r\n        this.setState((state) => {\r\n            if(state.selected_key == null) {\r\n                return { ...state, data: { ...state.data,  keys: update(state.data.keys, {$push: [obj]})}};\r\n            }\r\n            else {\r\n                return { ...state, data: { ...state.data,  keys: update(state.data.keys, {[state.selected_key]: {$set: obj}})}};\r\n            }\r\n        }, () => {\r\n            this.toggleModal(\"key\");\r\n        });\r\n    }\r\n    \r\n    onDeleteColumnClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.columns.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  columns: update(this.state.data.columns, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    onDeleteKeyClick(e){\r\n        const conf = confirm(`Are you sure?`);\r\n        \r\n        if (conf) {\r\n            let itemIndex = this.state.data.keys.indexOf(e);\r\n            if(itemIndex !== -1) {\r\n                this.setState((state) => {\r\n                    return { ...state, data: { ...state.data,  keys: update(this.state.data.keys, {$splice: [[itemIndex, 1]]})}};\r\n                }, () => {\r\n                    alert(\"Success\");\r\n                });\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Изменение значений при работе с модальным окном\r\n     * @param {type} e\r\n     * @returns {undefined}\r\n     */\r\n    onChangeColumn(e) {\r\n        let field_name = e.target.name;\r\n        let value = e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n        \r\n        if(field_name === \"name\") {\r\n            \r\n        \r\n            let val = e.target.value.replace(\"_\", \" \");\r\n            value = val.charAt(0).toUpperCase() + val.slice(1); \r\n            \r\n            let title = this.state.column.title;\r\n            let description = this.state.column.description;\r\n            \r\n            if(title === \"\" || title === value.slice(0, value.length - 1)) {\r\n                title = value;\r\n            }\r\n            if(description === \"\" || description === value.slice(0, value.length - 1)) {\r\n                description = value; \r\n            }\r\n            \r\n            this.setState({ ...this.state, column:{...this.state.column, [field_name]: e.target.value, title: title, description: description }});\r\n            return;\r\n        }\r\n        \r\n        this.setState({ ...this.state, column:{...this.state.column, [field_name]: value}}, () => {console.log(this.state)});\r\n    }\r\n    onChangeKey(e) {\r\n        let field_name = e.target.name;\r\n        console.log(e.target.value);\r\n        this.setState({ ...this.state, key:{...this.state.key, [field_name]: e.target.value}});\r\n    }\r\n    \r\n    \r\n    changeName(e) {\r\n        let target = e.target;\r\n        let name_value = target.value\r\n        this.setState( (state) => {\r\n            return {name: name_value}\r\n        });\r\n    }\r\n    async saveMigration(e) {\r\n        e.preventDefault();\r\n        \r\n        if(this.state.name == \"\") {\r\n            alert(\"Enter migration name!\");\r\n            return;\r\n        }\r\n        \r\n        let url = this.state.main_url + \"/migrations\";\r\n        let headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n        console.log(this.state.data)\r\n        let data = {\r\n            name: this.state.name,\r\n            data: JSON.stringify(this.state.data),\r\n            _token: _token\r\n        };\r\n        let options = {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers,\r\n        };\r\n        \r\n        \r\n        let res;\r\n        res = await this.migration_resource.post(data);\r\n        console.log(res)\r\n        if(res){\r\n            alert(\"Success\");\r\n        }\r\n        else {\r\n            \r\n            alert(\"Error\");\r\n        }\r\n    }\r\n  render(){\r\n    return <div className=\"admin-templates admin-page\">\r\n        <div className=\"admin-heading\">\r\n            <div className=\"admin-breadcrumbs\">\r\n                <Link className=\"admin-breadcrumbs__link\" to=\"/admin/tables\">Tables</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id}>{this.state.table.title}</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <Link className=\"admin-breadcrumbs__link\" to={\"/admin/tables/edit/\"+this.state.table_id+\"/setting\"}>Setting</Link>\r\n                <span className=\"admin-breadcrumbs__separator\">/</span>\r\n                <span className=\"admin-breadcrumbs__current\">Add New Migration</span>\r\n            </div>\r\n        </div>\r\n        <div className=\"admin-content\">\r\n            <div>\r\n                <input type=\"text\" placeholder=\"Enter migration name...\" onChange={this.changeName}/>\r\n            </div>\r\n            <AdminTable columns={this.table_columns} rows={this.state.data.columns}/>\r\n            <div>\r\n                <button onClick={(e) => this.addModalColumnShow(e)}>Add Column</button>\r\n            </div>\r\n            <AdminTable columns={this.table_keys} rows={this.state.data.keys}/>\r\n            <div>\r\n                <button onClick={(e) => this.addModalKeyShow(e)}>Add Key</button>\r\n            </div>\r\n            \r\n            \r\n            <div className={this.getModalClasses(\"key\")}>\r\n                <div className=\"admin-modal__bg\" onClick={() => this.toggleModal(\"key\")}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={() => this.toggleModal(\"key\")}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Key</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addKey}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                id\r\n                                <input className='form__input' type=\"text\" name=\"id\" value={this.state.key.id} onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Target Table\r\n                                <input className='form__input' type=\"text\" name=\"target_table\" value={this.state.key.target_table} onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Source Column\r\n                                <input className='form__input' type=\"text\" name=\"source_column\" value={this.state.key.source_column}  onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                Target Column\r\n                                <input className='form__input' type=\"text\" name=\"target_column\" value={this.state.key.target_column}  onChange={(e) => {this.onChangeKey(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                onUpdate\r\n                                <select className=\"form__input\" value={this.state.key.onUpdate} name='onUpdate'  onChange={(e) => {this.onChangeKey(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.key_actions.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                onDelete\r\n                                <select className=\"form__input\" value={this.state.key.onDelete} name='onDelete'  onChange={(e) => {this.onChangeKey(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.key_actions.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add key</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div className={this.getModalClasses(\"column\")}>\r\n                <div className=\"admin-modal__bg\" onClick={() => this.toggleModal(\"column\")}/>\r\n                <div className=\"admin-modal-content\">\r\n                  <button className=\"admin-modal__close\" onClick={() => this.toggleModal(\"column\")}><TimesIcon className=\"icon\"/></button>\r\n                  <div className=\"admin-caption\">Add New Column</div>\r\n                  <div className=\"admin-modal-form form\">\r\n                    <form className=\"admin-form\" onSubmit={this.addColumn}>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                name\r\n                                <input className='form__input' type=\"text\" name=\"name\" value={this.state.column.name} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                type\r\n                                <select className=\"form__input\" value={this.state.column.type} name='type'  onChange={(e) => {this.onChangeColumn(e)}}>\r\n                                    <option value=\"\"/>\r\n                                    {\r\n                                      this.column_types.map(option =>\r\n                                          <option key={option.id}\r\n                                                  value={option.id}\r\n                                                  children={option.title || option.name}/>)\r\n                                    }\r\n                                    </select>\r\n                            </label>\r\n                        </div>\r\n                        {this.isShowField(\"size\") ? <div>\r\n                            <label className='form-label'>\r\n                                size\r\n                                <input className='form__input' type=\"text\" name=\"size\"  value={this.state.column.size} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"places\") ? <div>\r\n                            <label className='form-label'>\r\n                                places\r\n                                <input className='form__input' type=\"text\" name=\"places\"  value={this.state.column.places} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"default\") ? <div>\r\n                            <label className='form-label'>\r\n                                default\r\n                                <input className='form__input' type=\"text\" name=\"default\" value={this.state.column.default} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"unique\") ? <div>\r\n                            <label className='form-label'>\r\n                                <input className='form__input' type=\"checkbox\" name=\"unique\" checked={this.state.column.unique ? 1 : 0} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                                unique\r\n                            </label>\r\n                        </div> : null}\r\n                        {this.isShowField(\"nullable\") ? <div>\r\n                            <label className='form-label'>\r\n                                <input className='form__input' type=\"checkbox\" name=\"null\" checked={this.state.column.null ? 1 : 0} onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                                nullable\r\n                            </label>\r\n                        </div> : null}\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                title\r\n                                <input className='form__input' type=\"text\" name=\"title\" value={this.state.column.title}  onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <div>\r\n                            <label className='form-label'>\r\n                                description\r\n                                <input className='form__input' type=\"text\" name=\"description\" value={this.state.column.description}  onChange={(e) => {this.onChangeColumn(e)}}/>\r\n                            </label>\r\n                        </div>\r\n                        <button className=\"btn btn_success\">Add col</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            <div>\r\n                \r\n            </div>\r\n            <div>\r\n                <form className=\"admin-form\" onSubmit={this.saveMigration}>\r\n                    <button className=\"btn btn_success\">Save</button>\r\n                </form>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default withRouter(AddMigrationPage);","import React, {Component} from \"react\";\r\n\r\nclass AdminVersion extends Component {\r\n  render(){\r\n    return<div children={`Version: ${altrp_version}`} className=\"admin__version\"/>\r\n  }\r\n}\r\n\r\nexport default AdminVersion","import React, {Component} from \"react\";\r\nimport {Tab, TabList, TabPanel, Tabs} from \"react-tabs\";\r\nimport 'react-tabs/style/react-tabs.scss';\r\nimport {Link} from 'react-router-dom'\r\n\r\nimport AdminTable from \"./AdminTable\";\r\nimport Pagination from \"./Pagination\";\r\nimport Resource from \"../../../editor/src/js/classes/Resource\";\r\n\r\nconst columns = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'description',\r\n    title: 'Description'\r\n  },\r\n  {\r\n    name: 'updated_at',\r\n    title: 'Updated At'\r\n  }\r\n];\r\nconst columnsDataSource = [\r\n  {\r\n    name: 'title',\r\n    title: 'Title',\r\n    url: true,\r\n    editUrl: true,\r\n    tag: 'Link'\r\n  },\r\n  {\r\n    name: 'name',\r\n    title: 'Name'\r\n  },\r\n  {\r\n    name: 'route',\r\n    title: 'Route'\r\n  },\r\n  {\r\n    name: 'type',\r\n    title: 'Type'\r\n  }\r\n];\r\nconst initPaginationProps = {\r\n  pageCount: 1,\r\n  currentPage: 1,\r\n};\r\n\r\n\r\nexport default class SQLEditors extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      sql_editorsPagination: initPaginationProps,\r\n      sql_editors: [],\r\n    };\r\n    this.changePage = this.changePage.bind(this);\r\n    this.sql_editorsResource = new Resource({route: '/admin/ajax/sql_editors'});\r\n  }\r\n\r\n  changePage(currentPage, pagination) {\r\n    this.setState(state => ({...state, [pagination]: {...state[pagination], currentPage}}));\r\n  }\r\n\r\n  /**\r\n   * Обновить список Sql-редакторов\r\n   */\r\n  updateSqlEditors() {\r\n\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let sql_editors = await this.sql_editorsResource.getAll();\r\n    sql_editors = sql_editors.sql_editors;\r\n    this.setState(state => ({\r\n      ...state,\r\n      sql_editors\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const { sql_editors, sql_editorsPagination} = this.state;\r\n    return <div className=\"admin-settings admin-page\">\r\n      <div className=\"admin-heading\">\r\n        <div className=\"admin-breadcrumbs\">\r\n          <a className=\"admin-breadcrumbs__link\" href=\"#\">SQL Editors</a>\r\n          <span className=\"admin-breadcrumbs__separator\">/</span>\r\n          <span className=\"admin-breadcrumbs__current\">SQL Editors</span>\r\n        </div>\r\n        <Link className=\"btn\" to={`/admin/tables/sql_editors/add`}>Add New</Link>\r\n      </div>\r\n      <div className=\"admin-content\">\r\n\r\n        {/* TODO: что делать с колoнкой с чекбоксами? */}\r\n        <AdminTable\r\n            columns={columns}\r\n            quickActions={[{\r\n              tag: 'Link', props: {\r\n                href: '/admin/tables/sql_editors/edit/:id',\r\n              },\r\n              title: 'Edit'\r\n            }, {\r\n              tag: 'button',\r\n              route: '/admin/ajax/sql_editors/:id',\r\n              method: 'delete',\r\n              confirm: 'Are You Sure?',\r\n              // after: () => this.updateModels(this.state.currentPage, this.state.activeTemplateArea),\r\n              className: 'quick-action-menu__item_danger',\r\n              title: 'Trash'\r\n            }]}\r\n            rows={sql_editors.map(sql_editor => ({\r\n              ...sql_editor,\r\n              editUrl: '/admin/tables/sql_editors/edit/' + sql_editor.id\r\n            }))}\r\n        />\r\n        <Pagination pageCount={sql_editorsPagination.pageCount}\r\n                    currentPage={sql_editorsPagination.currentPage}\r\n                    changePage={currentPage => this.changePage(currentPage, \"sql_editorsPagination\")}\r\n                    itemsCount={sql_editors.length}\r\n        />\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport './sass/admin-style.scss';\r\nimport {hot} from \"react-hot-loader\";\r\nimport AdminLogo from './components/AdminLogo';\r\nimport Bars from './svgs/bars.svg';\r\nimport AllPages from './components/AllPages';\r\nimport AdminSettings from './components/AdminSettings';\r\nimport AssetSvg from './svgs/assets.svg';\r\nimport DashboardSvg from './svgs/dashboard.svg';\r\nimport PagesSvg from './svgs/pages.svg';\r\nimport PluginSvg from './svgs/plugins.svg';\r\nimport ReportSvg from './svgs/reports.svg';\r\nimport SettingSvg from './svgs/settings.svg';\r\nimport TableSvg from './svgs/tables.svg';\r\nimport TemplateSvg from './svgs/templates.svg';\r\nimport UserSvg from './svgs/users.svg';\r\nimport store from './js/store/store';\r\nimport {Provider} from 'react-redux'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport Users from \"./components/users/Users\";\r\nimport AddUserPage from \"./components/users/AddUserPage\";\r\nimport EditUserPage from \"./components/users/EditUserPage\";\r\nimport UsersTools from \"./components/users/UsersTools\";\r\nimport Assets from \"./components/Assets\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport Plugins from \"./components/Plugins\";\r\nimport Reports from \"./components/Reports\";\r\nimport Tables from \"./components/Tables\";\r\nimport Templates from \"./components/Templates\";\r\nimport AdminModal from \"./components/AdminModal\";\r\nimport AddPage from \"./components/AddPage\";\r\nimport UserTopPanel from \"./components/UserTopPanel\";\r\nimport AssetsBrowser from \"../../editor/src/js/classes/modules/AssetsBrowser\";\r\nimport Models from \"./components/Models\";\r\nimport EditModel from \"./components/models/EditModel\";\r\nimport EditField from \"./components/models/EditField\";\r\nimport AddRelation from \"./components/models/AddRelation\";\r\nimport AddDataSource from \"./components/models/AddDataSource\";\r\nimport SQLBuilder from \"./components/SQLBuilder\";\r\nimport SqlEditor from \"./components/models/SqlEditor\";\r\nimport AccessOptions from \"./components/AccessOptions\";\r\nimport RolePage from \"./components/access/RolePage\";\r\nimport PermissionPage from \"./components/access/PermissionPage\";\r\n\r\nimport AddTable from \"./components/tables/AddTable\";\r\nimport EditTable from \"./components/tables/EditTable\";\r\nimport SettingTable from \"./components/tables/SettingTable\";\r\nimport AddMigrationPage from \"./components/tables/AddMigrationPage\";\r\nimport AdminVersion from \"./components/AdminVersion\";\r\nimport SQLEditors from \"./components/SQLEditors\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nwindow.React = React;\r\nwindow.ReactDOM = ReactDOM;\r\nwindow.Component = React.Component;\r\n\r\nclass Admin extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      adminState: {\r\n        adminEnable: true,\r\n      },\r\n      pagesMenuShow: false,\r\n    };\r\n    this.toggleMenu = this.toggleMenu.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    store.subscribe(this.updateAdminState.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Срабатвыает, когда меняется adminState в store\r\n   */\r\n  updateAdminState(){\r\n    let adminState = store.getState().adminState;\r\n    this.setState(state=>{\r\n      return{...state,adminState:{...adminState}}\r\n    })\r\n  }\r\n  toggleMenu(){\r\n    this.setState(state=>{\r\n      return {...state, pagesMenuShow: !state.pagesMenuShow}\r\n    })\r\n  }\r\n  render() {\r\n    let adminClasses = ['admin'];\r\n    if(!this.state.adminState.adminEnable){\r\n      adminClasses.push('pointer-event-none');\r\n    }\r\n    if(this.state.pagesMenuShow){\r\n      adminClasses.push('admin_pages-show');\r\n    }\r\n    return <Provider store={store}>\r\n      <div className={adminClasses.join(' ')}>\r\n        <Router>\r\n          <nav className=\"admin-nav\">\r\n            <div className=\"admin-nav-top\">\r\n              <AdminLogo/>\r\n              <Bars className=\"admin__bars\" onClick={this.toggleMenu}/>\r\n            </div>\r\n            <div className=\"admin-nav-main\">\r\n\r\n            <ul className=\"admin-nav-list\">\r\n\r\n                <li>\r\n                  <Link to=\"/admin/dashboard\" className=\"admin-nav-list__link\">\r\n                    <DashboardSvg className=\"icon\"/>\r\n                    <span>Dashboard</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/assets\" className=\"admin-nav-list__link\">\r\n                    <AssetSvg className=\"icon\"/>\r\n                    <span>Assets</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  {/*<Link to=\"/admin/tables\" className=\"admin-nav-list__link\">*/}\r\n                    {/*<TableSvg className=\"icon\"/>*/}\r\n                    {/*<span>Tables</span>*/}\r\n                  {/*</Link>*/}\r\n\r\n                  <Link to=\"/admin/tables/models\" className=\"admin-nav-list__link\">\r\n                    <TableSvg className=\"icon\"/>\r\n                    <span>Tables</span>\r\n                  </Link>\r\n                  <ul className=\"admin-nav-sublist\">\r\n\r\n                    <li>\r\n\r\n                      <Link to=\"/admin/tables/sql_editors\" className=\"admin-nav-list__link\">\r\n                        <TableSvg className=\"icon\"/>\r\n                        <span>SQL Editors</span>\r\n                      </Link>\r\n                    </li>\r\n                  </ul>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/templates\" className=\"admin-nav-list__link\">\r\n                    <TemplateSvg className=\"icon\"/>\r\n                    <span>Templates</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/reports\" className=\"admin-nav-list__link\">\r\n                    <ReportSvg className=\"icon\"/>\r\n                    <span>Reports</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/users\" className=\"admin-nav-list__link\">\r\n                    <UserSvg className=\"icon\"/>\r\n                    <span>Users</span>\r\n                  </Link>\r\n                </li>                \r\n                <li>\r\n                  <Link to=\"/admin/tools\" className=\"admin-nav-list__link\">\r\n                    <span>Tools</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/access/roles\" className=\"admin-nav-list__link\">\r\n                    <UserSvg className=\"icon\" />\r\n                    <span>Access</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/plugins\" className=\"admin-nav-list__link\">\r\n                    <PluginSvg className=\"icon\"/>\r\n                    <span>Plugins</span>\r\n                  </Link>\r\n                </li>\r\n                <li>\r\n                  <Link to=\"/admin/settings\" className=\"admin-nav-list__link\">\r\n                    <SettingSvg className=\"icon\"/>\r\n                    <span>Settings</span>\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n              <ul className=\"admin-nav-list admin-nav-list_pages\">\r\n                <li>\r\n                  <Link to=\"/admin/pages\" className=\"admin-nav-list__link\">\r\n                    <PagesSvg className=\"icon\"/>\r\n                    <span>Pages</span>\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <AdminVersion/>\r\n          </nav>\r\n          <Switch>\r\n            <Route path=\"/admin/\" exact>\r\n              <Redirect to=\"/admin/dashboard\"/>\r\n            </Route>\r\n            <Route path=\"/admin/settings\">\r\n              <AdminSettings/>\r\n            </Route>\r\n            <Route path=\"/admin/users\" exact>\r\n              <Users/>\r\n            </Route>\r\n            <Route path=\"/admin/users/new\" exact>\r\n              <AddUserPage/>\r\n            </Route>\r\n            <Route path=\"/admin/users/user/:id\">\r\n              <EditUserPage/>\r\n            </Route>\r\n            \r\n            <Route path=\"/admin/tools\">\r\n              <UsersTools/>\r\n            </Route>\r\n            <Route path=\"/admin/assets\">\r\n              <Assets/>\r\n            </Route>\r\n            <Route path=\"/admin/dashboard\">\r\n              <Dashboard/>\r\n            </Route>\r\n            <Route path=\"/admin/plugins\">\r\n              <Plugins/>\r\n            </Route>\r\n            <Route path=\"/admin/reports\">\r\n              <Reports/>\r\n            </Route>\r\n            <Route path=\"/admin/tables\" exact>\r\n              <Tables/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/edit/:id\"  component={EditTable} exact>\r\n              <EditTable/>   \r\n            </Route>\r\n            <Route path=\"/admin/tables/edit/:id/setting\" component={SettingTable} exact/>\r\n            <Route path=\"/admin/tables/edit/:id/setting/migrations/add\" component={AddMigrationPage} />\r\n            <Route path=\"/admin/tables/add\">\r\n              <AddTable/>\r\n            </Route>\r\n            <Route path=\"/admin/templates\">\r\n              <Templates/>\r\n            </Route>\r\n            <Route path=\"/admin/pages\" exact>\r\n              <AllPages/>\r\n            </Route>\r\n            <Route path=\"/admin/pages/edit/:id\">\r\n              <AddPage/>\r\n            </Route>\r\n            <Route path=\"/admin/pages/add\">\r\n              <AddPage/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models\" exact>\r\n              <Models />\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors\" exact>\r\n              <SQLEditors />\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors/add\">\r\n              <SqlEditor/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/sql_editors/edit/:id\">\r\n              <SqlEditor/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/add\">\r\n              <EditModel />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/edit/:id\" exact>\r\n              <EditModel />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/fields/add\">\r\n              <EditField/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/fields/edit/:id\">\r\n              <EditField/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/relations/add\">\r\n              <AddRelation />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/relations/edit/:id\">\r\n              <AddRelation />\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/queries/add\">\r\n              <SQLBuilder/>\r\n            </Route>\r\n            <Route path=\"/admin/tables/models/:modelId/queries/edit/:id\">\r\n              <SQLBuilder />\r\n            </Route>\r\n            <Route path=\"/admin/tables/data-sources/add\">\r\n              <AddDataSource />\r\n            </Route>\r\n\r\n            <Route path=\"/admin/access/roles/add\">\r\n              <RolePage />\r\n            </Route>\r\n            <Route path=\"/admin/access/roles/edit/:id\">\r\n              <RolePage />\r\n            </Route>\r\n            <Route path=\"/admin/access/permissions/add\">\r\n              <PermissionPage />\r\n            </Route>\r\n            <Route path=\"/admin/access/permissions/edit/:id\">\r\n              <PermissionPage />\r\n            </Route>\r\n            <Route path=\"/admin/access\">\r\n              <AccessOptions />\r\n            </Route>            \r\n          </Switch>\r\n        </Router>\r\n        <AdminModal/>\r\n        <UserTopPanel/>\r\n        <AssetsBrowser/>\r\n      </div>\r\n    </Provider>;\r\n  }\r\n}\r\n\r\nlet _export;\r\nif (process.env.NODE_ENV === 'production') {\r\n  _export = Admin;\r\n} else {\r\n  _export = hot(module)(Admin);\r\n}\r\n\r\nexport default _export;\r\n","export const SET_DISABLED = 'SET_DISABLED';\r\nexport const SET_ENABLE = 'SET_ENABLE';\r\n\r\nexport function setAdminDisable(){\r\n  return {\r\n    type: SET_DISABLED,\r\n  }\r\n}\r\n\r\nexport function setAdminEnable(){\r\n  return {\r\n    type: SET_ENABLE,\r\n  }\r\n}\r\n","export const ASSETS_SHOW = 'ASSETS_SHOW';\r\nexport const ASSETS_TOGGLE = 'ASSETS_TOGGLE';\r\n\r\nexport function assetsShow(settings) {\r\n  settings.active = true;\r\n  return {\r\n    type: ASSETS_SHOW,\r\n    settings\r\n  };\r\n}\r\n\r\nexport function assetsToggle() {\r\n  return {\r\n    type: ASSETS_TOGGLE,\r\n  };\r\n}\r\n\r\n","export const SET_LOGO = 'SET_LOGO';\r\n\r\nexport function setAdminLogo(logoData){\r\n  return {\r\n    logoData,\r\n    type: SET_LOGO,\r\n  }\r\n}\r\n\r\n","import {ASSETS_SHOW, ASSETS_TOGGLE} from \"./actions\";\r\n\r\nconst defaultState = {\r\n  onChoose: function (media) {\r\n    console.log(media);\r\n  },\r\n  active: false,\r\n};\r\n\r\nexport function assetsSettingsReducer(state, action) {\r\n  state = state || defaultState;\r\n  switch (action.type) {\r\n    case ASSETS_SHOW:{\r\n      state = {\r\n        ...action.settings,\r\n      };\r\n    }break;\r\n    case ASSETS_TOGGLE:{\r\n      state = {...state};\r\n      state.active = !state.active;\r\n    }break;\r\n  }\r\n  return state;\r\n}","export const SET_ACE = 'SET_ACE';\r\n\r\nexport function setAceEditor(AceEditor){\r\n  return {\r\n    AceEditor,\r\n    type: SET_ACE,\r\n  }\r\n}\r\n\r\n","const CONSTANTS = {\r\n  TEMPLATE_UPDATED: 'TEMPLATE_UPDATED',\r\n  TEMPLATE_NEED_UPDATE: 'TEMPLATE_NEED_UPDATE',\r\n  TEMPLATE_SAVING: 'TEMPLATE_SAVING',\r\n  DEFAULT_BREAKPOINT: 'DEFAULT_BREAKPOINT',\r\n  SCREENS: [\r\n\r\n    {\r\n      icon: 'wide_screen',\r\n      name: 'DEFAULT_BREAKPOINT',\r\n      id: 1,\r\n      width: '100%',\r\n      mediaQuery: ''\r\n    },\r\n    {\r\n      icon: 'desktop',\r\n      name: \"Desktop\",\r\n      id: 2,\r\n      width: '1440px',\r\n      mediaQuery: '@media screen and (max-width: 1440px)'\r\n    },\r\n    {\r\n      icon: 'laptop',\r\n      name: \"Laptop\",\r\n      id: 3,\r\n      width: '1024px',\r\n      mediaQuery: '@media screen and (max-width: 1024px)'\r\n    },\r\n    {\r\n      icon: 'tablet',\r\n      name: \"Tablet\",\r\n      id: 4,\r\n      width: '768px',\r\n      mediaQuery: '@media screen and (max-width: 768px)'\r\n    },\r\n    {\r\n      icon: 'big_phone',\r\n      name: \"Big-Phone\",\r\n      id: 5,\r\n      width: '450px',\r\n      mediaQuery: '@media screen and (max-width: 450px)'\r\n    },\r\n    {\r\n      icon: 'small_phone',\r\n      name: \"Small-Phone\",\r\n      id: 6,\r\n      width: '320px',\r\n      mediaQuery: '@media screen and (max-width: 320px)'\r\n    },\r\n  ]\r\n};\r\nexport default CONSTANTS;","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap.css\"), \"\");\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!bootstrap/dist/css/bootstrap-grid.min.css\"), \"\");\nexports.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;700&display=swap);\", \"\"]);\nexports.i(require(\"-!../../../../../node_modules/css-loader/index.js!react-datepicker/dist/react-datepicker.css\"), \"\");\n\n// module\nexports.push([module.id, \"html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto, sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:0.2s;-moz-transition-duration:0.2s;-ms-transition-duration:0.2s;-o-transition-duration:0.2s;transition-duration:0.2s;font-family:Roboto, sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8E94AA}.btn_disabled{background-color:#8E94AA;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=\\\"checkbox\\\"]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87CA00;color:#fff;font-weight:bold}.btn_failure{background-color:#FF4E6E;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-disabled{pointer-events:none}.pointer-event-none{pointer-events:none}.altrp-inherit{font-family:inherit;font-size:inherit;font-style:inherit;line-height:inherit;color:inherit;text-decoration:inherit;text-transform:inherit}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat, Arial, sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:#8E94AA}.admin-breadcrumbs__link:hover{color:#315EFB}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px;margin-left:5px;margin-right:5px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}.admin-filters{margin-left:20px;margin-right:20px;font-size:15px;font-family:Roboto, Arial, sans-serif}.admin-filters__link{text-decoration:none;color:#8E94AA}.admin-filters__link:hover{color:#315EFB}.admin-filters__separator{margin-left:5px;margin-right:5px}.admin-filters__current{font-size:15px}.btn{display:inline-block;padding:6px 12px;background:#E9E9EB;border:1.5px solid #3C455B;border-radius:2px;font-family:Roboto, Arial, sans-serif;font-weight:500;font-size:15px;line-height:18px;text-decoration:none;color:#3C455B}.btn:hover{background:#3C455B;color:white}.btn_success{background-color:#87CA00;border-color:#87CA00}.btn_success:hover{border-color:#343B4C}.form-bottom{display:flex;justify-content:flex-end}.form-label{position:relative;margin-bottom:13px;font-size:13px;display:block;width:100%}.form-label select.form__input,.form-label .form__input[type=\\\"text\\\"]{margin-top:5px;font-size:13px;border:1px solid #D5D7DE}.form-label__error{position:absolute;left:0;top:100%;font-size:12px;line-height:13px;color:#FF4E6E}select.form__input,input[type=\\\"number\\\"].form__input,input[type=\\\"text\\\"].form__input{width:100%;padding:10px;line-height:16px;font-size:14px}.admin-pills .nav-item{background-color:transparent}.admin-pills .nav-link{border:1px solid #D5D7DE;border-radius:3px 3px 0 0;margin-bottom:-1px;background-color:#E6E9EC;font-family:Montserrat, sans-serif;font-size:16px;font-weight:bold;color:#8E94AA}.admin-pills .nav-link.active{background-color:#fff;border-bottom-color:#fff;color:#343B4C}.admin-user-top-panel{position:absolute;top:0;right:0;height:62px;padding-right:27px}.top-panel-notification{margin-right:19px}.top-panel__portrait{margin-right:7px}.top-panel__greeting{margin-right:14px;font-size:15px;color:#8E94AA}.top-panel-logout{background-color:transparent;border:none;padding:0}.admin-table{width:100%;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden}.admin-table .admin-table__td{height:65px;position:relative}.admin-table .admin-table__td_check{width:45px;text-align:center}.admin-table table{border-collapse:collapse;width:100%}.admin-table-head{background-color:#fff;border-bottom:1px solid #D5D7DE}.admin-table-head .admin-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343B4C}.admin-table-body .admin-table-row:nth-child(2n){background-color:#F7F8F9}.admin-table-body .admin-table-row:nth-child(2n+1){background-color:#fff}.admin-table-body .admin-table-row .quick-action-menu{display:none;position:absolute;bottom:4px;left:0}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper::after{content:\\\" | \\\";color:#8E94AA}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper:last-child::after{content:\\\"\\\"}.admin-table-body .admin-table-row:hover .quick-action-menu{display:inline-block}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item{font-size:12px;color:#8E94AA;padding:0;background-color:transparent}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item.quick-action-menu__item_danger{color:#cf0025}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item:hover{text-decoration:underline}.admin-modal{display:flex;opacity:0;z-index:-1000;position:fixed;top:0;bottom:0;right:0;left:0;align-items:center;justify-content:center}.admin-modal_active{display:flex;opacity:1;z-index:1000;background-color:rgba(52,59,76,0.2)}.admin-modal_active .admin-modal-content{transform:translate(0, 0vh)}.admin-modal-content{width:320px;position:relative;padding:25px;background-color:#fff;border:1px solid #D5D7DE;-webkit-box-shadow:0px 4px 5px rgba(0,0,0,0.04);-moz-box-shadow:0px 4px 5px rgba(0,0,0,0.04);box-shadow:0px 4px 5px rgba(0,0,0,0.04);border-radius:3px;z-index:100;transform:translate(0, -50vh);transition-duration:.5s}.admin-modal__close{position:absolute;top:0;right:0;padding:10px;border:none;background-color:transparent}.admin-modal__close .icon{width:auto;height:auto;margin:0;display:block}.admin-modal__bg{position:absolute;top:0;bottom:0;left:0;right:0;z-index:50}.uploader{padding:48px;background-color:#fff;border:1px solid #D5D7DE;border-radius:5px;-webkit-transition-duration:.5s;-moz-transition-duration:.5s;-ms-transition-duration:.5s;-o-transition-duration:.5s;transition-duration:.5s;color:#8E94AA}.uploader .icon{width:auto;height:auto;fill:#8E94AA;margin:0;transition-duration:inherit}.uploader__input{display:none}.uploader_drag-over{padding:44px;border:5px solid #71d7f7;color:#71d7f7}.uploader_drag-over .icon{fill:#71d7f7}.item{position:relative}.item__delete{position:absolute;top:0;right:0;padding:10px;border:none;background-color:transparent}.item__delete-icon{transform:scale(1.2)}.item__background{position:absolute;top:5px;bottom:5px;left:5px;right:5px;background-position:center;-webkit-background-size:contain;background-size:contain;background-repeat:no-repeat;background-color:#F7F8F9}.assets-list{background-color:#fff}.assets-list__item{padding-top:8.333333%}.admin-settings{width:100%;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden}.admin-settings .nav{margin-bottom:-1px}.admin-settings .admin-settings-table__td{height:65px;padding:8px 16px}.admin-settings .admin-settings-table__td_check{width:45px;text-align:center}.admin-settings .header-text{text-transform:uppercase;font-weight:600;font-size:16px;line-height:20px}.admin-settings .row-text{font-family:Roboto;font-style:normal;font-weight:bold;font-size:15px;line-height:18px}.admin-settings .admin-settings-button{line-height:5px;width:163px;height:30px;left:315px;top:448px;background:#87CA00;border:1.5px solid #87CA00;box-sizing:border-box;border-radius:2px}.admin-settings table{border-collapse:collapse;width:100%}.admin-settings table .admin-table__td_check{margin-right:10px}.admin-settings-head{background-color:#fff;border-bottom:1px solid #D5D7DE}.admin-settings-head .admin-settings-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343B4C}.admin-settings-body .admin-settings-table-row:nth-child(2n){background-color:#F7F8F9}.admin-settings-body .admin-settings-table-row:nth-child(2n+1){background-color:#fff}.react-tabs__tab-panel{width:100%;padding:10px;border:1px solid #D5D7DE;border-radius:3px;overflow:hidden;background-color:#fff}.nav-pills .react-tabs__tab{margin-right:16px;padding:0.5rem 1rem;border:1px solid #D5D7DE;border-radius:3px 3px 0 0;background-color:#E6E9EC;font-family:Montserrat, sans-serif;font-size:16px;font-weight:bold;color:#8E94AA}.nav-pills .react-tabs__tab--selected{background-color:#fff;border-bottom-color:#fff;color:#343B4C}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #D5D7DE;height:75vh;border-radius:3px;overflow:hidden}.admin-users .table{border-bottom:1px solid #D5D7DE;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274BC8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.admin-users .table .role-svg{transform:rotate(180deg)}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}#content{width:100%;height:100vh;margin:12px}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat, Arial, sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:grey}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}#description{border-radius:0px 3px 3px 3px;border-top:none !important}.nav{margin-top:10px}.nav-item a{font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase}.change-role{line-height:50px;padding:35px 8px 8px 8px;align-items:center}.form-control-sm{margin:0 35px 0 20px;background:#FFFFFF;border:1px solid #343B4C !important;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px}.form-check{padding-left:1.2rem !important}.form-check-inline{margin-right:0 !important}.form-check-label{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.form-check-label:hover{color:#007bff}.col-3{align-self:center}.col-6{padding-bottom:8px;padding-top:10px;border-top:0;border-bottom:0;margin:0 !important}.form-group{margin-top:14px !important}fieldset{padding-top:12px}.treeview{margin-top:-50px;padding:0;clear:both;font-family:Arial, sans-serif;width:100%;height:70vh}.treeview *{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#8E94AA}.treeview ul{overflow:hidden;width:100%;margin:0;padding:0 0 1.5em 0;list-style-type:none}.treeview ul ul{overflow:visible;width:auto;margin:0 0 0 0;padding:0 0 0 1.5em}.treeview ul.l{border-left:1px solid;margin-left:-1px}ul{overflow:hidden}.treeview li{position:relative;padding-left:1.2em}.treeview+ul{margin-left:30px;padding-top:10px}.treeview li{margin-bottom:.8em}.treeview li{margin:0;padding:0}.treeview li li{margin:0 0 0 0.5em;border-left:1px solid;padding:0}.treeview li div{position:relative;height:1.5em;min-height:16px;height:1.9em}.treeview li li div{border-bottom:1px solid}.treeview li p{position:absolute;z-index:1;top:0.8em;top:1.2em;left:.95em;width:100%;margin:0;border-bottom:1px dashed;padding:0}.treeview li p.form-group-p{margin-left:7.8rem}.treeview a{padding:0.1em 0.2em;white-space:nowrap;height:1px}.treeview a:hover{padding:0.1em 0.2em;white-space:nowrap;height:1px;text-decoration:none}.treeview img.i{border-right:2px solid;border-bottom:0.5em solid;margin-bottom:-0.5em;vertical-align:middle}.treeview a.sc{position:absolute;top:0.06em;margin-left:-1em;padding:0;text-decoration:none}.treeview li p,.treeview img.i,.treeview .sc{background:#ffffff}.treeview ul.l,.treeview li p,.treeview img.i{border-color:#ffffff}.treeview ul li li,.treeview ul li li div{border-color:#999999}.treeview a,.treeview a.sc,.treeview a.sc:hover{color:#8E94AA}.treeview a.core{color:#343B4C}.treeview a:hover{color:#f97c13}.group-table{height:50px;align-items:center}.group-table .text-group{margin:0 0 0 15px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343B4C}.group-table .text-total{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343B4C}.col input .search-tools{height:30px;border:1px solid #ced4da}.form-tools button{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#87CA00;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3C455B}.form-tools button:hover{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#b5ea49;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3C455B}.group-table-trees{height:75vh}.form-check-group{margin-top:16px}.form-group-p{margin:0;margin-left:10px;display:inline-block}.form-group-p a{font-family:Roboto;font-style:normal;font-weight:normal;font-size:11px;line-height:14px;color:#8E94AA;text-decoration:none !important}.form-group-p span{margin:0;font-size:12px;line-height:14px;color:#8E94AA}.form-group-p a:last-child{color:#fc394d}.form-group-p a:last-child:hover{color:#fa011a}.group-vertical{display:grid;width:80%;margin:25px auto}.group-vertical button{margin-top:5px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;text-align:center;color:#3C455B}.dangerous{display:grid;width:80%;justify-content:center;margin:350px auto auto auto}.dangerous span{width:195px;font-family:Roboto;font-style:normal;font-weight:bold;font-size:12px;line-height:14px;margin:0 19px;color:#8E94AA}.dangerous button{margin:5px auto;width:195px;height:40px;left:1651px;top:889px;background:#FF4E6E;border:1px solid #FF4E6E;box-sizing:border-box;border-radius:2px;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-align:center;color:#FFFFFF}.admin-logo{width:100%;height:41px;background-color:#2A2D36}.logo{margin:8px 15px}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343B4C;box-sizing:border-box;box-shadow:0px 0px 0px #007CBA;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #D5D7DE;height:75vh;border-radius:3px;overflow:hidden}.admin-users .table{border-bottom:1px solid #D5D7DE;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274BC8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.admin-users .table .role-svg{transform:rotate(180deg)}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}.btn__wrapper .btn{margin-right:20px}.btn_add{margin-top:20px}.form-group__inline-wrapper{display:flex;justify-content:space-between}.form-group__inline-wrapper__divider,.form-group__inline-wrapper .form-group_checkbox{align-self:flex-end}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width65{flex-basis:65%}.form-group.form-group_width47{flex-basis:47.5%}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width15{flex-basis:15%}.sub-header{margin:30px 0;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343B4C}.field-form p,.admin-form p{color:#242424;display:block;font-family:inherit}.field-form .checkbox-group,.admin-form .checkbox-group{display:flex}.field-form .checkbox-group .form-group,.admin-form .checkbox-group .form-group{flex-grow:1}.centred{text-align:center}.checkbox-label{margin-left:10px}.flex-container{display:flex;justify-content:space-between;align-items:baseline}.label_checkbox{margin-bottom:0;cursor:pointer}.disabling-radio{margin-left:15px}.charts{display:flex;flex-wrap:wrap}.charts .card{margin-right:10px;margin-bottom:10px;min-height:300px;min-width:450px;padding:20px;border:0}.charts .card-body{padding:0}.charts .card-body .spinner-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.charts .card-body .widget-table{overflow:auto;width:100%;height:100%}.charts .card-body .widget-table table{width:100%;font-size:0.8rem}.charts .card-body .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666666;width:50%;font-weight:600}.charts .card-body .widget-table table thead th,.charts .card-body .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,0.125);padding:0.3rem 0.5rem}.charts .card-body .widget-table table thead{background-color:#f0f0f0;color:#666666;font-weight:600}.charts .card-header{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0.7rem;border-bottom:none;background-color:transparent;margin-bottom:10px}.charts .card-header__name{width:80%;font-size:1.2rem;color:#2a2d36;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.charts .card-header__buttons button{border:0;background:transparent;padding:0 7px}.widget-placeholder{width:100%;height:420px;border:1px solid #dedede;overflow:hidden;border-radius:2px;margin-right:15px;padding:20px}.widget-placeholder .widget-table{overflow:auto;width:100%;height:100%}.widget-placeholder .widget-table table{width:100%;font-size:0.8rem}.widget-placeholder .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666666;width:50%;font-weight:600}.widget-placeholder .widget-table table thead th,.widget-placeholder .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,0.125);padding:0.3rem 0.5rem}.widget-placeholder .widget-table table thead{background-color:#f0f0f0;color:#666666;font-weight:600}.form-group .react-datepicker-wrapper{width:100%}.hide-blocks .react-datepicker__header{display:none}.form-segment .form-group label{width:100%}.from-segment .form-group_checkbox{margin-bottom:25px}.admin{display:flex;min-height:100vh;padding-left:271px}.admin__logo{width:120px;height:44px;padding-left:12px;display:flex;align-items:center;justify-content:center}.admin__logo img{max-width:100%;max-height:100%}.admin-nav{position:fixed;top:0;left:0;bottom:0;overflow-x:hidden;overflow-y:auto;height:100vh;background-color:#2A2D36;width:271px;flex-shrink:0}.admin-nav-top{display:flex;justify-content:space-between;align-items:center;width:271px;padding-right:5px}.admin-nav-top .nav-logo{background-color:#2a2d36}.admin-nav-list{margin-top:10px}.admin-nav-list__link{display:flex;padding:6px;color:#fff;font-size:17px;font-weight:500}.admin-nav-list__link:hover{color:#87CA00}.admin-nav-list__link:hover path{fill:#87CA00}.admin-nav-list__link svg{position:relative;top:1px;margin:3px 16px 0 7px}.admin-nav-list_pages{position:absolute;top:44px;left:0;right:0;bottom:0;background-color:#2A2D36;transform:translate(100%, 0);transition-duration:0.3s}.admin-content{width:100%}.admin-caption{margin-bottom:15px;font-weight:600;font-size:18px}.admin__bars{margin:12px 12px;float:right;cursor:pointer}.admin_pages-show .admin-nav-list_pages{transform:translate(0, 0)}.admin__version{position:absolute;bottom:0;left:0;right:0;padding:5px;text-align:center;font-size:13px;color:#fff}.admin-form__subheader{text-transform:uppercase;margin-top:25px;font-weight:600;font-size:16px;line-height:20px}.icon{width:16px;height:16px;fill:white;margin-right:15px;display:inline-block;align-items:center}.admin-nav li{list-style-type:none;background:#343b4c}.admin-nav li:hover{background:#495267}ul{margin-left:0;padding-left:0}p{display:inline-block;color:white;font-weight:500;font-family:Montserrat, Arial, sans-serif}a{text-decoration:none}.admin-page{width:100%;display:flex;flex-direction:column}.admin-content{background-color:#F7F8F9;flex-grow:1;padding:13px 25px}.ace_editor{font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace}\\n\", \"\"]);\n\n// exports\n","import CONSTANTS from \"../../../editor/src/js/consts\";\r\n\r\nexport function getRoutes() {\r\n  return import('./classes/Routes.js');\r\n}\r\n/**\r\n * @return {IconsManager}\r\n * */\r\nexport function iconsManager() {\r\n    return window.iconsManager;\r\n}\r\n\r\n/**\r\n * Устанавливаент заголовок страницы на фронтенде\r\n * @param {string} title\r\n */\r\nexport function setTitle(title){\r\n  let titleElement = document.title;\r\n  if(!defaultTitle){\r\n    defaultTitle = titleElement.innerHTML;\r\n  }\r\n  if(! title){\r\n    title = defaultTitle;\r\n  }\r\n  if(document.title !== title){\r\n    document.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * @return {boolean}\r\n * */\r\nexport function isEditor() {\r\n  return !!(window.altrpEditor || window.parent.altrpEditor);\r\n}\r\n\r\n/**\r\n * Переменная, в которой храниться измначальный заголовок\r\n * @var {string}\r\n */\r\nlet defaultTitle;\r\n\r\n/**\r\n * Парсит стрку вводимую пользователем для опций селекта\r\n * @param string\r\n */\r\nexport function parseOptionsFromSettings(string) {\r\n  if(! string){\r\n    return[];\r\n  }\r\n  let options = string.split('\\n');\r\n  options = options.map(option=>{\r\n    let value = option.split('|')[0];\r\n    value = value.trim();\r\n    let label = option.split('|')[1] || value;\r\n    label = label.trim();\r\n    return{\r\n      value,\r\n      label,\r\n    }\r\n  });\r\n  return options;\r\n}\r\n\r\n/**\r\n * Получает медиа запрос для css по имени настройки\r\n * @param {string} screenSettingName\r\n * @return {string}\r\n */\r\nexport function getMediaQueryByName(screenSettingName) {\r\n  let mediaQuery = '';\r\n  CONSTANTS.SCREENS.forEach(screen=>{\r\n    if(screen.name === screenSettingName){\r\n      mediaQuery = screen.mediaQuery;\r\n    }\r\n  });\r\n  return mediaQuery;\r\n}\r\n/**\r\n * Получает медиа запрос для css по имени настройки\r\n * @param {string} screenSettingName\r\n * @return {string}\r\n */\r\nexport function getMediaSettingsByName(screenSettingName) {\r\n  let screen = CONSTANTS.SCREENS[0];\r\n  CONSTANTS.SCREENS.forEach(_screen=>{\r\n    if(_screen.name === screenSettingName){\r\n      screen = _screen;\r\n    }\r\n  });\r\n  return screen;\r\n}\r\n\r\n/**\r\n *@param {string} URLTemplate\r\n *@param {{}} object\r\n */\r\nexport function parseURLTemplate(URLTemplate = '', object = {}){\r\n  let url = URLTemplate;\r\n  // columnEditUrl = columnEditUrl.replace(':id', row.original.id);\r\n  let idTemplates = url.match(/:([\\s\\S]+?)(\\/|$)/g);\r\n  if(! idTemplates){\r\n    return url;\r\n  }\r\n  idTemplates.forEach(idTemplate=>{\r\n    let replace = object[idTemplate.replace(/:|\\//g, '')] || '';\r\n    idTemplate = idTemplate.replace('/', '');\r\n    url = url.replace(new RegExp(idTemplate,'g'), replace);\r\n  });\r\n  return url;\r\n}\r\n\r\nexport function getWindowWidth() {\r\n  let window;\r\n  if(isEditor()) {\r\n    window = document.getElementById(\"editorWindow\").offsetWidth;\r\n  } else {\r\n    window = document.getElementById(\"front-app\").offsetWidth\r\n  }\r\n  return window\r\n}\r\n\r\nexport function renderAssetIcon(asset, props = null) {\r\n  if(asset) {\r\n    switch (asset.assetType) {\r\n      case 'icon': {\r\n        return iconsManager().renderIcon(asset.name)\r\n      }\r\n      case 'image': {\r\n        return React.createElement('img', {...props, src: asset.url})\r\n      }\r\n      case 'media': {\r\n        return React.createElement('img', {...props, src: asset.url})\r\n      }\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * @param {object} asset\r\n * @param {object} props\r\n * @return {React.DetailedReactHTMLElement<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> | React.DetailedReactHTMLElement<React.HTMLAttributes<T>, HTMLElement> | React.ReactSVGElement | React.DOMElement<React.DOMAttributes<T>, Element> | React.FunctionComponentElement<{}> | React.CElement<{}, React.ClassicComponent<{}, React.ComponentState>> | React.CElement<{}, React.Component<P, React.ComponentState>> | React.ReactElement<{}> | string}\r\n * @throws Исключение если иконка не найдена\r\n * */\r\nexport function renderAsset(asset, props = null) {\r\n  switch (asset.assetType) {\r\n    case 'icon': {\r\n      return iconsManager().renderIcon(asset.name)\r\n    }\r\n    case 'image': {\r\n      return React.createElement('img', {...props, src: asset.url})\r\n    }\r\n    case 'media': {\r\n      return React.createElement('img', {...props, src: asset.url})\r\n    }\r\n    case 'mediaBackground': {\r\n      return React.createElement('div', {...props, style:{backgroundImage: `url(${asset.url})`}})\r\n    }\r\n    case undefined: {\r\n      return React.createElement('img', {...props, src: '/img/nullImage.png'})\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * Парсим данный из строки в объект, если значение - путь, то берем значение из context\r\n * (если в context нет свойства, то не записываем)\r\n * @param {string} string\r\n * @param {AltrpModel} context\r\n */\r\nexport function parseParamsFromString(string, context = {}){\r\n  const params = {};\r\n\r\n  if(! string){\r\n    return params;\r\n  }\r\n  const lines = string.split('\\n');\r\n  lines.forEach((line)=>{\r\n    let [left, right] = line.split('|');\r\n    if(! left || ! right){\r\n      return;\r\n    }\r\n    left = left.trim();\r\n    right = right.trim();\r\n    if(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)){\r\n      if(context.getProperty(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)[0])){\r\n        params[left] = context.getProperty(right.match(/(?<={{)([\\s\\S]+?)(?=}})/g)[0]) || '';\r\n      } else {\r\n        params[left] = '';\r\n      }\r\n    } else {\r\n      params[left] = right;\r\n    }\r\n    if(_.isObject(params[left])){\r\n      delete params[left];\r\n    }\r\n  });\r\n  return params;\r\n}\r\n\r\n/**\r\n * Функция для проверки условий\r\n * @param {[]} conditions\r\n * @param {boolean} AND - логичекое И или ИЛИ\r\n * @param {AltrpModel} model\r\n * @return {boolean}\r\n */\r\nexport function conditionsChecker(conditions = [], AND = true, model){\r\n  if(! conditions.length){\r\n    return true;\r\n  }\r\n  let result = AND;\r\n  _.each(conditions, c =>{\r\n    if(AND){\r\n      result *= _conditionChecker(c, model);\r\n    } else {\r\n      result += _conditionChecker(c, model);\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\n/**\r\n * Функция для проверки одного условия\r\n * @param c\r\n * @param {AltrpModel} model\r\n * @return {boolean}\r\n */\r\nfunction _conditionChecker(c, model){\r\n  let result = 0;\r\n  const {\r\n     modelField,\r\n     operator,\r\n     value,\r\n  } = c;\r\n  switch(operator){\r\n    case 'empty':{\r\n      return ! model.getProperty(modelField, '');\r\n    }\r\n    case 'not_empty':{\r\n      return ! ! model.getProperty(modelField, '');\r\n    }\r\n    case '==':{\r\n      return _.isEqual(model.getProperty(modelField, ''), value );\r\n    }\r\n    case '<>':{\r\n      return ! _.isEqual(model.getProperty(modelField, ''), value );\r\n    }\r\n    case '>':{\r\n      return Number(model.getProperty(modelField, '')) > Number(value);\r\n    }\r\n    case '>=':{\r\n      return Number(model.getProperty(modelField, '')) >= Number(value);\r\n    }\r\n    case '<':{\r\n      return Number(model.getProperty(modelField, '')) < Number(value);\r\n    }\r\n    case '<=':{\r\n      return Number(model.getProperty(modelField, '')) <= Number(value);\r\n    }\r\n  }\r\n  return result;\r\n}"],"sourceRoot":""}