exports.ids=[19],exports.modules={213:function(e,t,n){"use strict";n.r(t);var a=n(21),i=n.n(a),s=n(81),r=n.n(s),o=n(12),l=n.n(o),c=n(4),d=n.n(c),u=n(5),p=n.n(u),h=n(11),m=n.n(h),v=n(7),f=n.n(v),g=n(8),b=n.n(g),y=n(1),E=n.n(y),w=n(0),D=n.n(w),k=n(133),O=n(19),S=(n(29),n(48)),x=n(52),N=n(76),P=n.n(N),R=n(89),I=n.n(R),j=(n(134),n(135),n(143)),L=n(9),C=n.n(L),A=n(2),z=n.n(A),B=n(91);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var T=function(e){f()(n,e);var t=W(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={hasError:!1},a}return p()(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?D.a.createElement("div",null,D.a.createElement("h1",{style:{textAlign:"center"}},"Ошибка отрисовки"),D.a.createElement("h4",null,"Измените настройки диаграммы и перезагрузите страницу")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(w.Component),q=n(16),F=n.n(q),H=n(6),V=n(28),M=n.n(V),Y=function(){function e(t,n,a,i,s){d()(this,e),this.diagramType=t,this.sources=n,this.storeParams=a,this.widgetParams=i,this.countRequest=s}var t,n,a,i,s;return p()(e,[{key:"getAlias",value:function(e){try{return e.split("altrpdata.")[1]}catch(e){console.log(e)}}},{key:"getDatasourceByPath",value:function(e){var t=this;return _.find(dataStorageUpdater.data.currentDataSources,(function(n){return n.data.alias===t.getAlias(e)}))}},{key:"queryString",value:function(e){var t=_.values(e).map((function(e,t){var n=encodeURIComponent(_.keys(e)[0]),a=encodeURIComponent(e[n]);return 0===t?null===e[n]||null==e[n]?"":"".concat(n,"=").concat(a):""===e[n]||null==e[n]?"":"&".concat(n,"=").concat(a)}));return t=t.join("")}},{key:"parseSourceParams",value:function(e){var t="";return void 0!==e&&(t=_.keys(e).map((function(t,n){if(void 0!==e[t]||""!==e[t])return"".concat(t,"=").concat(e[t])})).filter((function(e){var t="undefined"!==e.split("=")[1]?e.split("=")[1]:"";return void 0!==t&&""!==t&&null!==t&&"null"!==t})).join("&")),t}},{key:"selectFormatting",value:function(e,t,n,a){var i=[];switch(this.diagramType){case j.b:case j.d:case j.e:i=this.formatData(e,t,n,a);break;case j.c:i=this.formatDataPie(e,t,n,a);break;case j.a:i=this.formatDataBar(e,t,n,a)}return i}},{key:"formatData",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.map((function(e){var i=_.get(e,t),s=M()(i).isValid()?M()(i).format("DD.MM.YYYY"):i;return{y:Number(_.get(e,n)),x:a?s:i}}))||[]}},{key:"formatDataPie",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.map((function(e){var i=_.get(e,t),s=M()(i).isValid()?M()(i).format("DD.MM.YYYY"):i;return{value:Number(_.get(e,n)),id:a?s:i}}))||[]}},{key:"formatDataBar",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.map((function(e){var i,s=_.get(e,t),r=M()(s).isValid()?M()(s).format("DD.MM.YYYY"):s;return i={key:a?r:s,value:Number(_.get(e,n))},l()(i,r,Number(_.get(e,n))),l()(i,"label",a?"".concat(r," (").concat(Number(_.get(e,n)),")"):"".concat(s," (").concat(Number(_.get(e,n)),")")),i}))||[]}},{key:"getDataWithParams",value:(s=C()(z.a.mark((function e(t,n,a,i,s){var r,o,l,c,d,u,p,h,m,v,f;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.path,o=n.title,l=n.keyIsDate,c=o||r,d=t.getWebUrl(),u=this.parseSourceParams(t.params),p=this.queryString(s)+"&"+u,p=Array.from(new Set(p.split("&"))).join("&"),h=d+"?"+p,e.prev=7,e.next=10,P()(h);case 10:return m=e.sent,v=void 0!==m.data.data?_.uniqBy(m.data.data,a):_.uniqBy(m.data,a),f=this.selectFormatting(v,a,i,l),n.splitTo&&n.splitFrom&&(f=f.slice(n.splitFrom,n.splitTo)),e.abrupt("return",{id:c,data:f});case 17:return e.prev=17,e.t0=e.catch(7),e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e,this,[[7,17]])}))),function(e,t,n,a,i){return s.apply(this,arguments)})},{key:"adaptDataByPath",value:(i=C()(z.a.mark((function e(t){var n,a,i,s,r,o,l,c,d,u=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:{},a=t.path,i=t.key,s=t.data,r=t.title,o=t.keyIsDate,l=r||a,!(_.keys(n).length>0)){e.next=9;break}if(void 0===(c=this.getDatasourceByPath(a))){e.next=9;break}return e.next=8,this.getDataWithParams(c,t,i,s,n);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,d=Object(H.q)(a,[]),(d=Array.isArray(d)?d:[d]).length>0&&(d=_.uniqBy(d,i),d=this.selectFormatting(d,i,s,o),t.splitTo&&t.splitFrom&&(d=d.slice(t.splitFrom,t.splitTo))),e.abrupt("return",[{id:l,data:d}]);case 16:e.prev=16,e.t0=e.catch(9),console.log("ADAPTER ERROR =>",e.t0);case 19:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(e){return i.apply(this,arguments)})},{key:"parseData",value:(a=C()(z.a.mark((function e(){var t,n,a,i,s,r,o,c,d,u,p,h,m;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=_.keys(this.sources).length>1,a=!0,i=!0,s=!1,r=_.cloneDeep(this.storeParams,[]),o=_.keys(r).map((function(e){return l()({},e,r[e])})).filter((function(e){return""!==e[_.keys(e)[0]]})),c=_.cloneDeep(this.widgetParams,[]),d=void 0!==c&&"number"!=typeof c?c.concat(o):[].concat(o),!(_.keys(this.sources).length>0)){e.next=37;break}if(n){e.next=29;break}if(u=this.sources[0],e.prev=12,!(_.keys(d).length>0)){e.next=19;break}return e.next=16,this.adaptDataByPath(u,d);case 16:t=e.sent,e.next=22;break;case 19:return e.next=21,this.adaptDataByPath(u);case 21:t=e.sent;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),t=[];case 27:e.next=33;break;case 29:return e.next=31,this.getDataFromIterableDatasources(this.sources,d);case 31:(t=e.sent).forEach((function(e,n){t[n]=e[0]}));case 33:return p=[],h=[],n?(m=t.map((function(e){return _.keys(e).length>0?(s||(s=void 0!==e.data&&e.data.length>100),void 0!==e.data&&e.data.length>100):_.keys(e).length>0})),(a=_.includes(m,!1))||((p=t.map((function(e){return e.data.map((function(e){return e.key instanceof Date}))}))).forEach((function(e){return h=h.concat(e)})),h=_.uniq(h),i=!0!==_.includes(h,!1))):(Array.isArray(t)||(t=[t]),a=void 0===t[0]||0===_.keys(t[0].data).length&&this.countRequest<5,p=t.map((function(e){return s||(s=e.data.length>100),e.key instanceof Date})),p=_.uniq(p),i=!0!==_.includes(p,!1)),e.abrupt("return",{data:t,isMultiple:n,isDate:i,needCallAgain:a,isLarge:s});case 37:return e.abrupt("return",{data:[],isMultiple:n,isDate:i,needCallAgain:a,isLarge:s});case 38:case"end":return e.stop()}}),e,this,[[12,24]])}))),function(){return a.apply(this,arguments)})},{key:"parseDataNotType",value:(n=C()(z.a.mark((function e(){var t,n,a,i,s,o,c,d,u,p,h,m,v,f,g,b;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=_.keys(this.sources).length>1,a=!0,i=!0,s=!1,o=_.cloneDeep(this.storeParams,[]),c=_.keys(o).map((function(e){return l()({},e,o[e])})).filter((function(e){return""!==e[_.keys(e)[0]]})),d=_.cloneDeep(this.widgetParams,[]),u=void 0!==d&&"number"!=typeof d?d.concat(c):[].concat(c),!(_.keys(this.sources).length>0)){e.next=33;break}if(n){e.next=24;break}if(p=this.sources[0],!(_.keys(u).length>0)){e.next=18;break}return e.next=15,this.adaptDataByPath(p,u);case 15:t=e.sent,e.next=21;break;case 18:return e.next=20,this.adaptDataByPath(p);case 20:t=e.sent;case 21:t="object"===r()(t)&&0===_.keys(t)?[]:t,e.next=28;break;case 24:return e.next=26,this.getDataFromIterableDatasources(this.sources,u);case 26:(t=e.sent).forEach((function(e,n){t[n]=e[0]}));case 28:return h=[],m=[],n?(v=t.map((function(e){return _.keys(e).length>0?(s||(s=e.length>100),e.length>0):_.keys(e).length>0})),(a=_.includes(v,!1))||((h=t.map((function(e){return e.map((function(e){return e.key instanceof Date}))}))).forEach((function(e){return m=m.concat(e)})),m=_.uniq(m),i=!0!==_.includes(m,!1))):(f=t.length>0?t.map((function(e){return e.length>0})):[!1],a=_.includes(f,!1)&&this.countRequest<5,h=t.length>0&&t.map((function(e){return s||(s=e.length>100),e.key instanceof Date})),h=_.uniq(h),i=!0!==_.includes(h,!1)),this.diagramType===j.c?t=Array.isArray(t)?_.uniqBy((g=[]).concat.apply(g,F()(t.map((function(e){return e.data})))),"id"):t.data.length>0?_.uniqBy(t.data,"id"):[]:n||this.diagramType!==j.a?t=(b=[]).concat.apply(b,F()(t.map((function(e){return e.data})))):n||this.diagramType!==j.a||(t=Array.isArray(t)?t[0].data:t.data),e.abrupt("return",{data:t,isMultiple:n,isDate:i,needCallAgain:a,isLarge:s});case 33:return e.abrupt("return",{data:[],isMultiple:n,isDate:i,needCallAgain:a,isLarge:s});case 34:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getDataFromIterableDatasources",value:(t=C()(z.a.mark((function e(t){var n,a=this,i=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",Promise.all(t.map(function(){var e=C()(z.a.mark((function e(t){var i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(_.keys(n).length>0)){e.next=7;break}return e.next=4,a.adaptDataByPath(t,n);case 4:i=e.sent,e.next=10;break;case 7:return e.next=9,a.adaptDataByPath(t);case 9:i=e.sent;case 10:if(0!==_.keys(i).length){e.next=12;break}return e.abrupt("return",[]);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),X=n(102),J=n.n(X),G=n(165),U=n(144);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var $=_.find(U.a,{value:"regagro"}).colors.reverse(),ee=function(e){f()(s,e);var t,n,a,i=Z(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).state={settings:_.cloneDeep(e.element.settings),sources:_.cloneDeep(e.sources),legend:_.cloneDeep(e.element.settings.legend),color:_.cloneDeep(e.element.settings.color),params:_.cloneDeep(e.element.settings.params),countRequest:0,isMultiple:!1,isDate:!0,isLarge:!1,data:[]},t}return p()(s,[{key:"componentDidUpdate",value:(a=C()(z.a.mark((function e(t,n){var a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t.sources,this.props.sources)){e.next=4;break}return this.setState((function(e){return Q(Q({},e),{},{sources:a.props.sources})})),e.next=4,this.getData();case 4:if(_.isEqual(t.element,this.props.element)||this.setState((function(e){return Q(Q({},e),{},{legend:a.props.element.settings.legend,color:a.props.element.settings.color,sources:a.props.element.settings.sources})})),_.isEqual(t.element.settings.params,this.props.element.settings.params)){e.next=9;break}return this.setState((function(e){return Q(Q({},e),{},{params:a.props.element.settings.params})})),e.next=9,this.getData();case 9:if(_.isEqual(t.element.settings,this.props.element.settings)||this.setState((function(e){return Q(Q({},e),{},{settings:a.props.element.settings})})),JSON.stringify(t.element.settings.params)===JSON.stringify(this.props.element.settings.params)){e.next=14;break}return this.setState((function(e){return Q(Q({},e),{},{params:a.props.element.settings.params})})),e.next=14,this.getData();case 14:if(_.isEqual(t.formsStore.form_data,this.props.formsStore.form_data)){e.next=18;break}return this.setState((function(e){return Q(Q({},e),{},{countRequest:0})})),e.next=18,this.getData();case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getData",value:(t=C()(z.a.mark((function e(){var t,n,a,i,s,r,o=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(this.props.element.settings.type,this.props.element.settings.sources,_.cloneDeep(this.props.formsStore.form_data),this.state.params,this.state.countRequest).parseDataNotType();case 2:t=e.sent,n=t.isMultiple,a=t.isDate,i=t.isLarge,s=t.needCallAgain,r=t.data,s&&setTimeout((function(){o.getData();var e=o.state.countRequest;e+=1,o.setState((function(t){return Q(Q({},t),{},{countRequest:e})}))}),3500),this.setState((function(e){return Q(Q({},e),{},{data:r,isMultiple:n,isDate:a,isLarge:i})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(void 0===this.state.sources)return D.a.createElement("div",null,"Укажите источник данных");if(null===this.state.sources&&0===Object.keys(this.state.sources).length)return D.a.createElement("div",null,"Нет данных");if(this.state.isLarge)return D.a.createElement("div",null,"Ограничьте диапозон данных или выберите другой источник");if(void 0!==this.state.data&&this.state.data.length>0){var t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,k,O,S,x,N,P,R,I,j,L,C,A,z,W,q,F,H,V,M,Y,X,U,K,Z,ee,te,ne=this.state.data;switch(null===(t=this.state.settings)||void 0===t||null===(n=t.sort)||void 0===n?void 0:n.value){case"value":ne=_.sortBy(ne,["value"]);break;case"key":ne=_.sortBy(ne,["key"]);break;default:ne=ne}return D.a.createElement(D.a.Fragment,null,D.a.createElement(T,null,D.a.createElement(B.ResponsiveBarCanvas,{data:ne,indexBy:"key",enableLabel:null===(a=this.state.settings)||void 0===a?void 0:a.enableSliceLabels,padding:null===(i=this.state.settings)||void 0===i?void 0:i.padding,innerPadding:null===(s=this.state.settings)||void 0===s?void 0:s.innerPadding,reverse:null===(r=this.state.settings)||void 0===r?void 0:r.reverse,groupMode:null===(o=this.state.settings)||void 0===o?void 0:o.groupMode,layout:null===(l=this.state.settings)||void 0===l?void 0:l.layout,labelSkipHeight:null===(c=this.state.settings)||void 0===c?void 0:c.labelSkipHeight,labelSkipWidth:null===(d=this.state.settings)||void 0===d?void 0:d.labelSkipWidth,enableGridY:null===(u=this.state.settings)||void 0===u?void 0:u.enableGridY,enableGridX:null===(p=this.state.settings)||void 0===p?void 0:p.enableGridX,labelTextColor:function(e){return J()(e.color,{black:"#000000",white:"#FFFFFF",threshold:.45})},theme:{tooltip:{container:{padding:"0"}}},margin:{top:(null===(h=this.state.settings)||void 0===h||null===(m=h.margin)||void 0===m?void 0:m.top)||40,right:(null===(v=this.state.settings)||void 0===v||null===(f=v.margin)||void 0===f?void 0:f.right)||80,bottom:(null===(g=this.state.settings)||void 0===g||null===(b=g.margin)||void 0===b?void 0:b.bottom)||80,left:(null===(y=this.state.settings)||void 0===y||null===(E=y.margin)||void 0===E?void 0:E.left)||80},colors:"regagro"===(null===(w=this.state.settings)||void 0===w||null===(k=w.colors)||void 0===k?void 0:k.scheme)?$:null===(O=this.state.settings)||void 0===O?void 0:O.colors,colorBy:"index",tooltip:function(t){var n;return D.a.createElement(G.a,{enable:null===(n=e.state.settings)||void 0===n?void 0:n.enableCustomTooltip,datum:t,widgetID:e.props.widgetID})},axisLeft:"horizontal"===(null===(S=this.state.settings)||void 0===S?void 0:S.layout)?!(null!==(x=this.state.settings)&&void 0!==x&&x.reverse)&&{tickRotation:0}:{tickRotation:0},axisRight:"horizontal"===(null===(N=this.state.settings)||void 0===N?void 0:N.layout)?(null===(P=this.state.settings)||void 0===P?void 0:P.reverse)&&{tickRotation:0}:null,axisBottom:"vertical"===(null===(R=this.state.settings)||void 0===R?void 0:R.layout)?!(null!==(I=this.state.settings)&&void 0!==I&&I.reverse)&&Q({},null===(j=this.state.settings)||void 0===j?void 0:j.axisBottom):Q({},null===(L=this.state.settings)||void 0===L?void 0:L.axisBottom),axisTop:"vertical"===(null===(C=this.state.settings)||void 0===C?void 0:C.layout)?(null===(A=this.state.settings)||void 0===A?void 0:A.reverse)&&Q({},null===(z=this.state.settings)||void 0===z?void 0:z.axisBottom):null,animate:!1,motionDamping:null===(W=this.state.settings)||void 0===W?void 0:W.animationMotionDamping,motionStiffness:null===(q=this.state.settings)||void 0===q?void 0:q.animationMotionStiffness,legends:null!==(F=this.state.settings)&&void 0!==F&&F.enableLegend?[{dataFrom:"indexes",anchor:(null===(H=this.state.settings)||void 0===H?void 0:H.legendAchor)||"bottom-right",direction:(null===(V=this.state.settings)||void 0===V?void 0:V.legendDirection)||"row",justify:(null===(M=this.state.settings)||void 0===M?void 0:M.legendJustify)||!1,translateX:(null===(Y=this.state.settings)||void 0===Y?void 0:Y.legendTranslateX)||0,translateY:(null===(X=this.state.settings)||void 0===X?void 0:X.legendTranslateY)||0,itemsSpacing:(null===(U=this.state.settings)||void 0===U?void 0:U.legendItemsSpacing)||10,itemWidth:(null===(K=this.state.settings)||void 0===K?void 0:K.legendItemWidth)||10,itemHeight:(null===(Z=this.state.settings)||void 0===Z?void 0:Z.legendItemHeight)||10,itemDirection:(null===(ee=this.state.settings)||void 0===ee?void 0:ee.legendItemDirection)||"left-to-right",symbolSize:(null===(te=this.state.settings)||void 0===te?void 0:te.legendSymbolSize)||25,symbolShape:"circle"}]:[]})))}return this.state.countRequest<5?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}}]),s}(w.Component),te=Object(O.connect)((function(e){return{formsStore:_.cloneDeep(e.formsStore)}}))(ee),ne=n(92),ae=n(167);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var oe=_.find(U.a,{value:"regagro"}).colors.reverse(),le=function(e){f()(s,e);var t,n,a,i=re(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).state={settings:_.cloneDeep(e.element.settings),sources:_.cloneDeep(e.sources),legend:_.cloneDeep(e.element.settings.legend),color:_.cloneDeep(e.element.settings.color),params:_.cloneDeep(e.element.settings.params),countRequest:0,isDate:!0,data:[]},t}return p()(s,[{key:"componentDidUpdate",value:(a=C()(z.a.mark((function e(t,n){var a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t.sources,this.props.sources)){e.next=4;break}return this.setState((function(e){return se(se({},e),{},{sources:a.props.sources})})),e.next=4,this.getData();case 4:if(_.isEqual(t.element,this.props.element)||this.setState((function(e){return se(se({},e),{},{legend:a.props.element.settings.legend,color:a.props.element.settings.color,sources:a.props.element.settings.sources})})),_.isEqual(t.element.settings.params,this.props.element.settings.params)){e.next=9;break}return this.setState((function(e){return se(se({},e),{},{params:a.props.element.settings.params})})),e.next=9,this.getData();case 9:if(_.isEqual(t.element.settings,this.props.element.settings)||this.setState((function(e){return se(se({},e),{},{settings:a.props.element.settings})})),JSON.stringify(t.element.settings.params)===JSON.stringify(this.props.element.settings.params)){e.next=14;break}return this.setState((function(e){return se(se({},e),{},{params:a.props.element.settings.params})})),e.next=14,this.getData();case 14:if(_.isEqual(t.formsStore.form_data,this.props.formsStore.form_data)){e.next=18;break}return this.setState((function(e){return se(se({},e),{},{countRequest:0})})),e.next=18,this.getData();case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getData",value:(t=C()(z.a.mark((function e(){var t,n,a,i,s,r=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(this.props.element.settings.type,this.props.element.settings.sources,_.cloneDeep(this.props.formsStore.form_data),this.state.params,this.state.countRequest).parseDataNotType();case 2:t=e.sent,n=t.isMultiple,a=t.isDate,i=t.needCallAgain,s=t.data,i&&setTimeout((function(){r.getData();var e=r.state.countRequest;e+=1,r.setState((function(t){return se(se({},t),{},{countRequest:e})}))}),3500),this.setState((function(e){return se(se({},e),{},{data:s,isMultiple:n,isDate:a})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,k,O,S,x,N,P,R,I,j,L,C,A,z,B,W,q,F,H,V,M=this;if(void 0===this.state.sources)return D.a.createElement("div",null,"Укажите источник данных");if(0===Object.keys(this.state.sources).length)return D.a.createElement("div",null,"Нет данных ");if(void 0!==this.state.data&&0===this.state.data.length)return this.state.countRequest<3?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных");var Y,X,G=this.state.data;if(null!==(null===(e=this.state.settings)||void 0===e||null===(t=e.sort)||void 0===t?void 0:t.value)&&void 0!==(null===(n=this.state.settings)||void 0===n||null===(a=n.sort)||void 0===a?void 0:a.value)&&void 0!==G)switch(null===(Y=this.state.settings)||void 0===Y||null===(X=Y.sort)||void 0===X?void 0:X.value){case"value":G=_.sortBy(G,["value"]);break;case"key":G=_.sortBy(G,["id"]);break;default:G=G}return D.a.createElement(D.a.Fragment,null,D.a.createElement(T,null,D.a.createElement(ne.ResponsivePie,{margin:{top:(null===(i=this.state.settings)||void 0===i||null===(s=i.margin)||void 0===s?void 0:s.top)||80,right:(null===(r=this.state.settings)||void 0===r||null===(o=r.margin)||void 0===o?void 0:o.right)||180,bottom:(null===(l=this.state.settings)||void 0===l||null===(c=l.margin)||void 0===c?void 0:c.bottom)||80,left:(null===(d=this.state.settings)||void 0===d||null===(u=d.margin)||void 0===u?void 0:u.left)||120},sliceLabelsTextColor:function(e){return J()(e.color,{black:"#000000",white:"#FFFFFF",threshold:.45})},cornerRadius:null===(p=this.state.settings)||void 0===p?void 0:p.cornerRadius,padAngle:null===(h=this.state.settings)||void 0===h?void 0:h.padAngle,borderWidth:null===(m=this.state.settings)||void 0===m?void 0:m.borderWidth,borderColor:null===(v=this.state.settings)||void 0===v?void 0:v.borderColor,data:G,colors:"regagro"===(null===(f=this.state.settings)||void 0===f||null===(g=f.colors)||void 0===g?void 0:g.scheme)?oe:null===(b=this.state.settings)||void 0===b?void 0:b.colors,sliceLabelsSkipAngle:null===(y=this.state.settings)||void 0===y?void 0:y.sliceLabelsSkipAngle,sliceLabelsRadiusOffset:null===(E=this.state.settings)||void 0===E?void 0:E.sliceLabelsRadiusOffset,radialLabelsSkipAngle:null===(w=this.state.settings)||void 0===w?void 0:w.radialLabelsSkipAngle,radialLabelsLinkOffset:null===(k=this.state.settings)||void 0===k?void 0:k.radialLabelsLinkOffset,radialLabelsLinkDiagonalLength:null===(O=this.state.settings)||void 0===O?void 0:O.radialLabelsLinkDiagonalLength,radialLabelsLinkHorizontalLength:null===(S=this.state.settings)||void 0===S?void 0:S.radialLabelsLinkHorizontalLength,radialLabelsTextXOffset:null===(x=this.state.settings)||void 0===x?void 0:x.radialLabelsTextXOffset,radialLabelsLinkStrokeWidth:null===(N=this.state.settings)||void 0===N?void 0:N.radialLabelsLinkStrokeWidth,innerRadius:null===(P=this.state.settings)||void 0===P?void 0:P.innerRadius,enableSliceLabels:null===(R=this.state.settings)||void 0===R?void 0:R.enableSliceLabels,enableRadialLabels:null===(I=this.state.settings)||void 0===I?void 0:I.enableRadialLabels,tooltip:function(e){var t;return D.a.createElement(ae.a,{enable:null===(t=M.state.settings)||void 0===t?void 0:t.enableCustomTooltip,datum:e,widgetID:M.props.widgetID})},legends:null!==(j=this.state.settings)&&void 0!==j&&j.enableLegend?[{anchor:(null===(L=this.state.settings)||void 0===L?void 0:L.legendAchor)||"bottom-right",direction:(null===(C=this.state.settings)||void 0===C?void 0:C.legendDirection)||"row",justify:(null===(A=this.state.settings)||void 0===A?void 0:A.legendJustify)||!1,translateX:(null===(z=this.state.settings)||void 0===z?void 0:z.legendTranslateX)||0,translateY:(null===(B=this.state.settings)||void 0===B?void 0:B.legendTranslateY)||0,itemsSpacing:(null===(W=this.state.settings)||void 0===W?void 0:W.legendItemsSpacing)||10,itemWidth:(null===(q=this.state.settings)||void 0===q?void 0:q.legendItemWidth)||10,itemHeight:(null===(F=this.state.settings)||void 0===F?void 0:F.legendItemHeight)||10,itemDirection:(null===(H=this.state.settings)||void 0===H?void 0:H.legendItemDirection)||"left-to-right",symbolSize:(null===(V=this.state.settings)||void 0===V?void 0:V.legendSymbolSize)||25,symbolShape:"circle"}]:[]})))}}]),s}(w.Component),ce=Object(O.connect)((function(e){return{formsStore:_.cloneDeep(e.formsStore)}}))(le);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var he=function(e){f()(s,e);var t,n,a,i=pe(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).state={sources:_.cloneDeep(e.sources),color:_.cloneDeep(e.element.settings.color),params:_.cloneDeep(e.element.settings.params),countRequest:0,isMultiple:!1,data:[]},t}return p()(s,[{key:"componentDidUpdate",value:(a=C()(z.a.mark((function e(t,n){var a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t.sources,this.props.sources)){e.next=4;break}return this.setState((function(e){return ue(ue({},e),{},{sources:_.cloneDeep(a.props.sources)})})),e.next=4,this.getData();case 4:if(_.isEqual(t.element,this.props.element)||this.setState((function(e){return ue(ue({},e),{},{legend:_.cloneDeep(a.props.element.settings.legend),color:_.cloneDeep(a.props.element.settings.color),sources:_.cloneDeep(a.props.element.settings.sources)})})),_.isEqual(t.element.settings.params,this.props.element.settings.params)){e.next=9;break}return this.setState((function(e){return ue(ue({},e),{},{params:_.cloneDeep(a.props.element.settings.params)})})),e.next=9,this.getData();case 9:if(_.isEqual(t.element.settings,this.props.element.settings)||this.setState((function(e){return ue(ue({},e),{},{settings:_.cloneDeep(a.props.element.settings)})})),JSON.stringify(t.element.settings.params)===JSON.stringify(this.props.element.settings.params)){e.next=14;break}return this.setState((function(e){return ue(ue({},e),{},{params:_.cloneDeep(a.props.element.settings.params)})})),e.next=14,this.getData();case 14:if(_.isEqual(t.formsStore.form_data,this.props.formsStore.form_data)){e.next=18;break}return this.setState((function(e){return ue(ue({},e),{},{countRequest:0})})),e.next=18,this.getData();case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getData",value:(t=C()(z.a.mark((function e(){var t,n,a,i,s,r,o=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(this.props.element.settings.type,this.props.element.settings.sources,_.cloneDeep(this.props.formsStore.form_data),this.state.params,this.state.countRequest).parseData();case 2:t=e.sent,n=t.data,a=t.isMultiple,i=t.isDate,s=t.needCallAgain,r=t.isLarge,s&&setTimeout((function(){o.getData();var e=o.state.countRequest;e+=1,o.setState((function(t){return ue(ue({},t),{},{countRequest:e})}))}),5e3),this.setState((function(e){return ue(ue({},e),{},{data:n,isMultiple:a,isDate:i,isLarge:r})}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sum",value:function(e){return e.reduce((function(e,t){return e+t.data}),0)}},{key:"render",value:function(){var e,t,n,a,i=this;if(void 0===this.state.sources||0===Object.keys(this.state.sources).length)return D.a.createElement("div",null,"Нет данных ");if(!this.state.sources>1){if(void 0===this.state.data&&0===this.state.data[0].data.length)return this.state.countRequest<3?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}else{var s=this.state.data.map((function(e){return _.keys(e).length>0?e.data.length>0:_.keys(e).length>0}));if(_.includes(s,!1))return this.state.countRequest<3?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}var r,o=this.state.data;if(null!==(null===(e=this.state.settings)||void 0===e||null===(t=e.sort)||void 0===t?void 0:t.value)&&void 0!==(null===(n=this.state.settings)||void 0===n||null===(a=n.sort)||void 0===a?void 0:a.value)&&void 0!==o)switch(null===(r=this.state.settings)||void 0===r?void 0:r.sort.value){case"value":o.forEach((function(e,t){e.data.length>0&&(o[t].data=_.sortBy(e.data,["y"]))}));break;case"key":o.forEach((function(e,t){e.data.length>0&&(o[t].data=_.sortBy(e.data,["x"]))}))}var l=o.map((function(e){return e.data.reduce((function(e,t){return e+t.y}),0)})).reduce((function(e,t){return e+t}),0);return D.a.createElement(T,null,D.a.createElement("div",{className:"widget-table"},D.a.createElement("table",{className:"vertical-table"},D.a.createElement("tbody",null,o.map((function(e,t){var n=e.data.map((function(e,n){return D.a.createElement("tr",{key:"".concat(t).concat(n)},D.a.createElement("td",null,e.key instanceof Date?i.formattingDate(e.x):e.x),D.a.createElement("td",null,e.y))}));return D.a.createElement(D.a.Fragment,{key:t},D.a.createElement("tr",{key:t,style:{textAlign:"center"}},D.a.createElement("td",{colSpan:2},e.id)),n)})),D.a.createElement("tr",null,D.a.createElement("td",null,"ИТОГО"),D.a.createElement("td",null,l))))))}}]),s}(w.Component),me=Object(O.connect)((function(e){return{formsStore:_.cloneDeep(e.formsStore)}}))(he),ve=n(93),fe=n(136),ge=n(169);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var we=_.find(U.a,{value:"regagro"}).colors,De=function(e){f()(s,e);var t,n,a,i=Ee(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).state={settings:_.cloneDeep(e.element.settings),sources:_.cloneDeep(e.sources),legend:_.cloneDeep(e.element.settings.legend),color:_.cloneDeep(e.element.settings.color),params:_.cloneDeep(e.element.settings.params),countRequest:0,isMultiple:!1,isDate:!0,isLarge:!1,data:[]},t}return p()(s,[{key:"componentDidUpdate",value:(a=C()(z.a.mark((function e(t,n){var a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t.sources,this.props.sources)){e.next=4;break}return this.setState((function(e){return ye(ye({},e),{},{sources:_.cloneDeep(a.props.sources)})})),e.next=4,this.getData();case 4:if(_.isEqual(t.element,this.props.element)||this.setState((function(e){return ye(ye({},e),{},{legend:a.props.element.settings.legend,color:a.props.element.settings.color,sources:a.props.element.settings.sources})})),_.isEqual(t.element.settings.params,this.props.element.settings.params)){e.next=9;break}return this.setState((function(e){return ye(ye({},e),{},{params:_.cloneDeep(a.props.element.settings.params)})})),e.next=9,this.getData();case 9:if(_.isEqual(t.element.settings,this.props.element.settings)||this.setState((function(e){return ye(ye({},e),{},{settings:a.props.element.settings})})),JSON.stringify(t.element.settings.params)===JSON.stringify(this.props.element.settings.params)){e.next=14;break}return this.setState((function(e){return ye(ye({},e),{},{params:_.cloneDeep(a.props.element.settings.params)})})),e.next=14,this.getData();case 14:if(_.isEqual(t.formsStore.form_data,this.props.formsStore.form_data)&&JSON.stringify(t.formsStore.form_data)===JSON.stringify(this.props.formsStore.form_data)){e.next=18;break}return this.setState((function(e){return ye(ye({},e),{},{countRequest:0})})),e.next=18,this.getData();case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getData",value:(t=C()(z.a.mark((function e(){var t,n,a,i,s,r,o=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(this.props.element.settings.type,this.props.element.settings.sources,_.cloneDeep(this.props.formsStore.form_data),this.state.params,this.state.countRequest).parseData();case 2:t=e.sent,n=t.isMultiple,a=t.isDate,i=t.needCallAgain,s=t.isLarge,r=t.data,i&&setTimeout((function(){o.getData();var e=o.state.countRequest;e+=1,o.setState((function(t){return ye(ye({},t),{},{countRequest:e})}))}),3500),this.setState((function(e){return ye(ye({},e),{},{data:r,isMultiple:n,isDate:a,isLarge:s})}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,k,O,S,x,N,P,R,I,j,L,C,A,z,B,W,q,F,H,V,Y,X,J,G,U,K=this;if(void 0===this.state.sources)return D.a.createElement("div",null,"Укажите источник данных");if(0===Object.keys(this.state.sources).length)return D.a.createElement("div",null,"Нет данных ");if(!this.state.sources>1){if(void 0===this.state.data&&0===this.state.data[0].data.length)return this.state.countRequest<3?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}else{var Q=this.state.data.map((function(e){return _.keys(e).length>0?e.data.length>0:_.keys(e).length>0}));if(_.includes(Q,!1))return this.state.countRequest<5?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}var Z,$,ee=[];if(ee="time"===(null===(e=this.state.settings)||void 0===e||null===(t=e.xScale)||void 0===t?void 0:t.type)?(ee=_.cloneDeep(this.state.data,[])).map((function(e){return e.data=e.data.map((function(e){return e.x=M()(e.x).format("DD.MM.YYYY"),e})),e})):this.state.data,null!==(null===(n=this.state.settings)||void 0===n||null===(a=n.sort)||void 0===a?void 0:a.value)&&void 0!==(null===(i=this.state.settings)||void 0===i||null===(s=i.sort)||void 0===s?void 0:s.value)&&void 0!==ee)switch(null===(Z=this.state.settings)||void 0===Z||null===($=Z.sort)||void 0===$?void 0:$.value){case"value":ee.forEach((function(e,t){e.data.length>0&&(ee[t].data=_.sortBy(e.data,["y"]))}));break;case"key":ee.forEach((function(e,t){e.data.length>0&&(ee[t].data=_.sortBy(e.data,["x"]))}))}return D.a.createElement(D.a.Fragment,null,D.a.createElement(T,null,D.a.createElement(ve.ResponsiveLine,{data:ee,margin:{top:(null===(r=this.state.settings)||void 0===r||null===(o=r.margin)||void 0===o?void 0:o.top)||40,right:(null===(l=this.state.settings)||void 0===l||null===(c=l.margin)||void 0===c?void 0:c.right)||120,bottom:(null===(d=this.state.settings)||void 0===d||null===(u=d.margin)||void 0===u?void 0:u.bottom)||80,left:(null===(p=this.state.settings)||void 0===p||null===(h=p.margin)||void 0===h?void 0:h.left)||100},curve:null===(m=this.state.settings)||void 0===m?void 0:m.curve,colors:"regagro"===(null===(v=this.state.settings)||void 0===v||null===(f=v.colors)||void 0===f?void 0:f.scheme)?we:null===(g=this.state.settings)||void 0===g?void 0:g.colors,enableArea:null===(b=this.state.settings)||void 0===b?void 0:b.enableArea,defs:(null===(y=this.state.settings)||void 0===y?void 0:y.enableArea)&&[Object(fe.linearGradientDef)("gradient",[{offset:0,color:"inherit"},{offset:100,color:"inherit",opacity:.25}])],fill:(null===(E=this.state.settings)||void 0===E?void 0:E.enableArea)&&[{match:"*",id:"gradient"}],useMesh:!0,xScale:null===(w=this.state.settings)||void 0===w?void 0:w.xScale,pointSize:null===(k=this.state.settings)||void 0===k?void 0:k.pointSize,enablePoints:null===(O=this.state.settings)||void 0===O?void 0:O.enablePoints,lineWidth:null===(S=this.state.settings)||void 0===S?void 0:S.lineWidth,enableCrosshair:null===(x=this.state.settings)||void 0===x?void 0:x.enableCrosshair,enableGridY:null===(N=this.state.settings)||void 0===N?void 0:N.enableGridY,enableGridX:null===(P=this.state.settings)||void 0===P?void 0:P.enableGridX,xFormat:"time"===(null===(R=this.state.settings)||void 0===R||null===(I=R.xScale)||void 0===I?void 0:I.type)&&"time:%d.%m.%Y",axisBottom:"time"===(null===(j=this.state.settings)||void 0===j||null===(L=j.xScale)||void 0===L?void 0:L.type)?ye({format:this.state.settings.xScale.format},null===(C=this.state.settings)||void 0===C?void 0:C.axisBottom):ye({},null===(A=this.state.settings)||void 0===A?void 0:A.axisBottom),tooltip:function(e){var t,n;return D.a.createElement(ge.a,{datum:e,settings:{padding:null===(t=K.state.settings)||void 0===t?void 0:t.tooltipPadding},enable:null===(n=K.state.settings)||void 0===n?void 0:n.enableCustomTooltip,widgetID:K.props.widgetID})},animate:Boolean(null===(z=this.state.settings)||void 0===z?void 0:z.enableAnimation),legends:null!==(B=this.state.settings)&&void 0!==B&&B.enableLegend?[{anchor:(null===(W=this.state.settings)||void 0===W?void 0:W.legendAchor)||"bottom-right",direction:(null===(q=this.state.settings)||void 0===q?void 0:q.legendDirection)||"row",justify:(null===(F=this.state.settings)||void 0===F?void 0:F.legendJustify)||!1,translateX:(null===(H=this.state.settings)||void 0===H?void 0:H.legendTranslateX)||0,translateY:(null===(V=this.state.settings)||void 0===V?void 0:V.legendTranslateY)||0,itemsSpacing:(null===(Y=this.state.settings)||void 0===Y?void 0:Y.legendItemsSpacing)||10,itemWidth:(null===(X=this.state.settings)||void 0===X?void 0:X.legendItemWidth)||10,itemHeight:(null===(J=this.state.settings)||void 0===J?void 0:J.legendItemHeight)||10,itemDirection:(null===(G=this.state.settings)||void 0===G?void 0:G.legendItemDirection)||"left-to-right",symbolSize:(null===(U=this.state.settings)||void 0===U?void 0:U.legendSymbolSize)||25,symbolShape:"circle"}]:[]})))}}]),s}(w.Component),_e=Object(O.connect)((function(e){return{formsStore:_.cloneDeep(e.formsStore)}}))(De),ke=n(94),Oe=n(172);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Pe=_.find(U.a,{value:"regagro"}).colors,Re=function(e){f()(s,e);var t,n,a,i=Ne(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).state={settings:_.cloneDeep(e.element.settings),sources:_.cloneDeep(e.sources),legend:_.cloneDeep(e.element.settings.legend),color:_.cloneDeep(e.element.settings.color),params:_.cloneDeep(e.element.settings.params),countRequest:0,isDate:!0,data:[]},t}return p()(s,[{key:"componentDidUpdate",value:(a=C()(z.a.mark((function e(t,n){var a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.isEqual(t.sources,this.props.sources)){e.next=4;break}return this.setState((function(e){return xe(xe({},e),{},{sources:a.props.sources})})),e.next=4,this.getData();case 4:if(_.isEqual(t.element,this.props.element)||this.setState((function(e){return xe(xe({},e),{},{legend:a.props.element.settings.legend,color:a.props.element.settings.color,sources:a.props.element.settings.sources})})),_.isEqual(t.element.settings.params,this.props.element.settings.params)){e.next=9;break}return this.setState((function(e){return xe(xe({},e),{},{params:a.props.element.settings.params})})),e.next=9,this.getData();case 9:if(_.isEqual(t.element.settings,this.props.element.settings)||this.setState((function(e){return xe(xe({},e),{},{settings:a.props.element.settings})})),JSON.stringify(t.element.settings.params)===JSON.stringify(this.props.element.settings.params)){e.next=14;break}return this.setState((function(e){return xe(xe({},e),{},{params:a.props.element.settings.params})})),e.next=14,this.getData();case 14:if(_.isEqual(t.formsStore.form_data,this.props.formsStore.form_data)){e.next=18;break}return this.setState((function(e){return xe(xe({},e),{},{countRequest:0})})),e.next=18,this.getData();case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getData",value:(t=C()(z.a.mark((function e(){var t,n,a,i,s,r,o=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Y(this.props.element.settings.type,this.props.element.settings.sources,_.cloneDeep(this.props.formsStore.form_data),this.state.params,this.state.countRequest).parseData();case 2:t=e.sent,n=t.data,a=t.isMultiple,i=t.isDate,s=t.needCallAgain,r=t.isLarge,s&&setTimeout((function(){o.getData();var e=o.state.countRequest;e+=1,o.setState((function(t){return xe(xe({},t),{},{countRequest:e})}))}),3500),this.setState((function(e){return xe(xe({},e),{},{data:n,isMultiple:a,isDate:i,isLarge:r})}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,k,O,S,x,N,P,R,I,j,L,C,A,z,B,W,q,F,H,V=this;if(void 0===this.state.sources)return D.a.createElement("div",null,"Укажите источник данных");if(0===Object.keys(this.state.sources).length)return D.a.createElement("div",null,"Нет данных ");if(!this.state.sources>1){if(void 0===this.state.data&&0===this.state.data[0].data.length)return this.state.countRequest<3?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}else{var Y=this.state.data.map((function(e){return _.keys(e).length>0?e.data.length>0:_.keys(e).length>0}));if(_.includes(Y,!1))return this.state.countRequest<5?D.a.createElement("div",null,"Загрузка..."):D.a.createElement("div",null,"Нет данных")}var X,J,G=[];if(G="time"===(null===(e=this.state.settings)||void 0===e||null===(t=e.xScale)||void 0===t?void 0:t.type)?(G=_.cloneDeep(this.state.data,[])).map((function(e){return e.data=e.data.map((function(e){return e.x=M()(e.x).format("DD.MM.YYYY"),e})),e})):this.state.data,null!==(null===(n=this.state.settings)||void 0===n||null===(a=n.sort)||void 0===a?void 0:a.value)&&void 0!==(null===(i=this.state.settings)||void 0===i||null===(s=i.sort)||void 0===s?void 0:s.value)&&void 0!==G)switch(null===(X=this.state.settings)||void 0===X||null===(J=X.sort)||void 0===J?void 0:J.value){case"value":G.forEach((function(e,t){e.data.length>0&&(G[t].data=_.sortBy(e.data,["y"]))}));break;case"key":G.forEach((function(e,t){e.data.length>0&&(G[t].data=_.sortBy(e.data,["x"]))}))}return D.a.createElement(D.a.Fragment,null,D.a.createElement(T,null,D.a.createElement(ke.ResponsiveScatterPlotCanvas,{data:G,margin:{top:(null===(r=this.state.settings)||void 0===r||null===(o=r.margin)||void 0===o?void 0:o.top)||40,right:(null===(l=this.state.settings)||void 0===l||null===(c=l.margin)||void 0===c?void 0:c.right)||180,bottom:(null===(d=this.state.settings)||void 0===d||null===(u=d.margin)||void 0===u?void 0:u.bottom)||80,left:(null===(p=this.state.settings)||void 0===p||null===(h=p.margin)||void 0===h?void 0:h.left)||100},xScale:null===(m=this.state.settings)||void 0===m?void 0:m.xScale,enableSliceLabels:!1,colors:"regagro"===(null===(v=this.state.settings)||void 0===v||null===(f=v.colors)||void 0===f?void 0:f.scheme)?Pe:null===(g=this.state.settings)||void 0===g?void 0:g.colors,xFormat:"time"===(null===(b=this.state.settings)||void 0===b||null===(y=b.xScale)||void 0===y?void 0:y.type)&&"time:%d.%m.%Y",axisBottom:"time"===(null===(E=this.state.settings)||void 0===E||null===(w=E.xScale)||void 0===w?void 0:w.type)?xe({format:this.state.settings.xScale.format},null===(k=this.state.settings)||void 0===k?void 0:k.axisBottom):xe({},null===(O=this.state.settings)||void 0===O?void 0:O.axisBottom),enableGridY:null===(S=this.state.settings)||void 0===S?void 0:S.enableGridY,enableGridX:null===(x=this.state.settings)||void 0===x?void 0:x.enableGridX,animate:Boolean(null===(N=this.state.settings)||void 0===N?void 0:N.enableAnimation)||!1,motionDamping:null===(P=this.state.settings)||void 0===P?void 0:P.animationMotionDamping,motionStiffness:null===(R=this.state.settings)||void 0===R?void 0:R.animationMotionStiffness,tooltip:function(e){var t;return D.a.createElement(Oe.a,{enable:null===(t=V.state.settings)||void 0===t?void 0:t.enableCustomTooltip,datum:e,widgetID:V.props.widgetID})},legends:null!==(I=this.state.settings)&&void 0!==I&&I.enableLegend?[{anchor:(null===(j=this.state.settings)||void 0===j?void 0:j.legendAchor)||"bottom-right",direction:(null===(L=this.state.settings)||void 0===L?void 0:L.legendDirection)||"row",justify:(null===(C=this.state.settings)||void 0===C?void 0:C.legendJustify)||!1,translateX:(null===(A=this.state.settings)||void 0===A?void 0:A.legendTranslateX)||0,translateY:(null===(z=this.state.settings)||void 0===z?void 0:z.legendTranslateY)||0,itemsSpacing:(null===(B=this.state.settings)||void 0===B?void 0:B.legendItemsSpacing)||10,itemWidth:(null===(W=this.state.settings)||void 0===W?void 0:W.legendItemWidth)||10,itemHeight:(null===(q=this.state.settings)||void 0===q?void 0:q.legendItemHeight)||10,itemDirection:(null===(F=this.state.settings)||void 0===F?void 0:F.legendItemDirection)||"left-to-right",symbolSize:(null===(H=this.state.settings)||void 0===H?void 0:H.legendSymbolSize)||25,symbolShape:"circle"}]:[]})))}}]),s}(w.Component),Ie=Object(O.connect)((function(e){return{formsStore:_.cloneDeep(e.formsStore)}}))(Re);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Ae=function(e){f()(n,e);var t=Ce(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={sources:_.cloneDeep(e.sources),type:_.cloneDeep(e.type),editElement:_.cloneDeep(e.editElement),params:_.cloneDeep(e.params)},a}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(!_.isEqual(e.editElement,this.props.editElement)){var a=_.cloneDeep(this.props.editElement,[]);this.setState((function(e){return Le(Le({},e),{},{editElement:a})}))}JSON.stringify(e.params)!==JSON.stringify(this.props.params)&&this.setState((function(e){return Le(Le({},e),{},{editElement:_.cloneDeep(n.props.editElement)})})),_.isEqual(e.type,this.props.type)||this.setState((function(e){return Le(Le({},e),{},{type:n.props.type})})),_.isEqual(e.sources,this.props.sources)||this.setState((function(e){return Le(Le({},e),{},{sources:n.props.sources})}))}},{key:"getWidget",value:function(){var e,t,n="Выберите тип диаграммы";switch(null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.type){case j.a:n=this.renderBar();break;case j.c:n=this.renderPie();break;case j.b:n=this.renderLine();break;case j.e:n=this.renderTable();break;case j.d:n=this.renderScatter();break;default:n=D.a.createElement("div",null,"Выберите тип диаграммы")}return D.a.createElement("div",{className:"chart-container"},n)}},{key:"renderBar",value:function(){return D.a.createElement(te,{element:_.cloneDeep(this.props.editElement),sources:_.cloneDeep(this.state.sources),widgetID:this.props.widgetID})}},{key:"renderPie",value:function(){return D.a.createElement(ce,{element:_.cloneDeep(this.props.editElement),sources:_.cloneDeep(this.state.sources),widgetID:this.props.widgetID})}},{key:"renderLine",value:function(){return D.a.createElement(_e,{element:_.cloneDeep(this.props.editElement),sources:_.cloneDeep(this.state.sources),widgetID:this.props.widgetID})}},{key:"renderTable",value:function(){return D.a.createElement(me,{element:_.cloneDeep(this.props.editElement),sources:_.cloneDeep(this.state.sources)})}},{key:"renderScatter",value:function(){return D.a.createElement(Ie,{element:_.cloneDeep(this.props.editElement),sources:_.cloneDeep(this.state.sources),widgetID:this.props.widgetID})}},{key:"render",value:function(){return this.getWidget()}}]),n}(w.Component),ze=n(101),Be=n(86),We=n.n(Be),Te=n(87),qe=n.n(Te),Fe=n(97),He=n.n(Fe),Ve=n(98),Me=n.n(Ve),Ye=(n(99),n(137)),Xe=n.n(Ye),Je=n(100),Ge=n.n(Je),Ue=n(138),Ke=n.n(Ue);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var et=function(e){f()(n,e);var t=$e(n);function n(e){var a;d()(this,n),a=t.call(this,e);var i=_.cloneDeep(e.editElement);return a.state={el:i},a.ref=D.a.createRef(),a.downloadWidget=a.downloadWidget.bind(m()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e,t,n){var a,i,s=this;_.isEqual(t.el,this.props.editElement)||this.setState((function(e){return Ze(Ze({},e),{},{el:_.cloneDeep(s.props.editElement)})})),JSON.stringify(null===(a=e.editElement.settings)||void 0===a?void 0:a.params)!==JSON.stringify(null===(i=this.props.editElement.settings)||void 0===i?void 0:i.params)&&this.setState((function(e){return Ze(Ze({},e),{},{el:_.cloneDeep(s.props.editElement)})}))}},{key:"downloadWidget",value:function(){Object(ze.exportComponentAsPNG)(this.ref,this.props.editElement.settings.name)}},{key:"render",value:function(){var e,t,n,a,i=this;return D.a.createElement("div",{className:" altrp-dashboard__card altrp-dashboard__card--border altrp-dashboard__card--border-radius altrp-dashboard__card--border-color altrp-dashboard__card--border-style altrp-dashboard__card--background altrp-dashboard__card--font"},D.a.createElement("div",{className:"title altrp-dashboards__cancle-drag"},D.a.createElement("div",{className:" altrp-dashboard__card--font altrp-dashboard__card--font-size altrp-dashboard__card--font-weight altrp-dashboard__card--font-color",style:{width:"100%"}},(null===(e=this.state.el.settings)||void 0===e?void 0:e.name)||""),D.a.createElement("div",{className:"dropdownTogglerContainer"},D.a.createElement(We.a,{drop:"left"},D.a.createElement(We.a.Toggle,{className:"altrp-dashboard__card--background",variant:"light"},D.a.createElement(qe.a,{color:"#7a7a7b"})),D.a.createElement(We.a.Menu,{className:"dropdownMenuToggle altrp-dashboard__card--settings-tooltip-background",style:{zIndex:999999,background:"rgba(255,255,255,1)"}},D.a.createElement(We.a.Item,{className:"altrp-dashboard__card--settings-tooltip-background"},D.a.createElement("button",{type:"button",title:"Скачать файл",className:"altrp-dashboard__card--settings-tooltip-icon-background",onClick:this.downloadWidget},D.a.createElement(Ge.a,null))),D.a.createElement(We.a.Item,{className:"altrp-dashboard__card--settings-tooltip-background"},D.a.createElement("button",{type:"button",title:"Экспорт",className:"altrp-dashboard__card--settings-tooltip-icon-background",onClick:function(){return i.props.exportCard(i.state.el)}},D.a.createElement(Xe.a,null))),D.a.createElement(We.a.Item,{className:"altrp-dashboard__card--settings-tooltip-background"},D.a.createElement("button",{type:"button",title:"Дублировать",className:"altrp-dashboard__card--settings-tooltip-icon-background",onClick:function(){return i.props.copyWidget(i.state.el)}},D.a.createElement(Ke.a,null))),D.a.createElement(We.a.Item,{className:"altrp-dashboard__card--settings-tooltip-background"},D.a.createElement("button",{type:"button",title:"Настроить",className:"altrp-dashboard__card--settings-tooltip-icon-background",onClick:function(){return i.props.openSettingsHandler(i.state.el)}},D.a.createElement(He.a,null))),D.a.createElement(We.a.Item,{className:"altrp-dashboard__card--settings-tooltip-background"},D.a.createElement("button",{type:"button",title:"Удалить",className:"altrp-dashboard__card--settings-tooltip-icon-background",onClick:function(){return i.props.onRemoveItem(i.state.el.i)}},D.a.createElement(Me.a,null))))))),D.a.createElement(Ae,{ref:this.ref,editElement:_.cloneDeep(this.state.el),params:_.cloneDeep(null===(t=this.state.el.settings)||void 0===t?void 0:t.params),type:_.cloneDeep(null===(n=this.state.el.settings)||void 0===n?void 0:n.type),sources:_.cloneDeep(null===(a=this.state.el.settings)||void 0===a?void 0:a.sources),widgetID:this.props.widgetID}))}}]),n}(w.Component);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var it=function(e){f()(n,e);var t=at(n);function n(e){var a,i,s;return d()(this,n),(s=t.call(this,e)).state={editElement:_.cloneDeep(e.editElement),cardName:null===(a=s.props.editElement)||void 0===a||null===(i=a.settings)||void 0===i?void 0:i.name,width:e.width},s.setCardName=s.setCardName.bind(m()(s)),s}return p()(n,[{key:"componentDidUpdate",value:function(e,t,n){var a,i,s,r,o,l,c,d,u=this;_.isEqual(e.editElement,this.props.editElement)||(this.props.addItemPreview,this.setState((function(e){return nt(nt({},e),{},{editElement:_.cloneDeep(u.props.editElement)})}))),JSON.stringify(null===(a=e.editElement)||void 0===a||null===(i=a.settings)||void 0===i?void 0:i.params)!==JSON.stringify(null===(s=this.props.editElement)||void 0===s||null===(r=s.settings)||void 0===r?void 0:r.params)&&this.setState((function(e){var t,n;return nt(nt({},e),{},{editElement:_.cloneDeep(u.props.editElement),cardName:null===(t=u.props.editElement)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.name})})),_.isEqual(null===(o=e.editElement)||void 0===o||null===(l=o.settings)||void 0===l?void 0:l.name,null===(c=this.props.editElement)||void 0===c||null===(d=c.settings)||void 0===d?void 0:d.name)||(this.props.addItemPreview?this.setState((function(e){var t;return nt(nt({},e),{},{editElement:_.cloneDeep(u.props.editElement),cardName:null===(t=u.props.editElement)||void 0===t?void 0:t.name})})):this.setState((function(e){var t,n;return nt(nt({},e),{},{editElement:_.cloneDeep(u.props.editElement),cardName:null===(t=u.props.editElement)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.name})})))}},{key:"setCardName",value:function(e){var t=e.target.value;this.setState((function(e){return nt(nt({},e),{},{cardName:t})})),this.props.setCardName(t,this.props.editElement)}},{key:"render",value:function(){var e,t,n,a,i,s,r,o;return _.isEmpty(this.state.editElement)?D.a.createElement("div",{className:"drawer-preview"},D.a.createElement("div",{className:"drawer-preview__container"},D.a.createElement("div",{className:"drawer-preview__container-content"},D.a.createElement("div",{className:"chart-container"},D.a.createElement("div",null,"Начните настраивать виджет"))))):D.a.createElement("div",{className:"drawer-preview",style:{width:"calc(100% - ".concat(this.state.width,")"),fallbacks:[{width:"-moz-calc(100% - ".concat(this.state.width,")")},{width:"-webkit-calc(100% - ".concat(this.state.width,")")},{width:"-o-calc(100% - ".concat(this.state.width,")")}]}},D.a.createElement("div",{className:"drawer-preview__container"},this.props.addItemPreview?D.a.createElement("div",{className:"title"},D.a.createElement("input",{type:"text",value:(null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.name)||this.state.cardName,placeholder:"Введите название диаграммы"})):D.a.createElement("div",{className:"title"},D.a.createElement("input",{type:"text",onChange:this.setCardName,value:this.state.cardName,placeholder:"Введите название диаграммы"})),D.a.createElement("div",{className:"drawer-preview__container-content"},D.a.createElement(Ae,{sources:_.cloneDeep(null===(n=this.props.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.sources),params:_.cloneDeep(null===(i=this.props.editElement)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.params),type:_.cloneDeep(null===(r=this.props.editElement)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.type),editElement:_.cloneDeep(this.props.editElement)}))))}}]),n}(w.Component),st=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(it),rt=n(95),ot=n(139),lt=n(75),ct=n.n(lt),dt=n(79),ut=n.n(dt);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var vt=function(e){f()(n,e);var t=mt(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={editElement:_.cloneDeep(e.editElement)},a.returnOptionsWithKeys=a.returnOptionsWithKeys.bind(m()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.editElement,this.props.editElement)||this.setState((function(e){return ht(ht({},e),{},{editElement:_.cloneDeep(n.props.editElement)})}))}},{key:"componentWillMount",value:function(){if(1===this.props.datasources.length){var e=[this.returnOptionsWithKeys()[0]];this.props.setDatasource(e)}}},{key:"returnOptionsWithKeys",value:function(){return _.cloneDeep(this.props.datasources).map((function(e,t){return e.title=void 0!==e.title?e.title:e.path,e}))}},{key:"render",value:function(){var e,t,n=this;return null!==this.props.datasources?1===this.props.datasources.length?D.a.createElement(D.a.Fragment,null):D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"col-12"},D.a.createElement(ct.a.Group,{className:"mb-2"},D.a.createElement(ct.a.Label,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Источники данных"),D.a.createElement(ut.a,{isMulti:!0,placeholder:"Выберите источник данных",onChange:function(e){return n.props.setDatasource(e)},className:"select-type",defaultValue:null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.sources,name:"type",as:"select",styles:{menuList:function(e,t){return ht(ht({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menu:function(e,t){return ht(ht({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menuPortal:function(e,t){return ht(ht({},e),{},{zIndex:"999999999999999999999",position:"relative"})}},options:this.returnOptionsWithKeys(),getOptionValue:function(e){return e},getOptionLabel:function(e){return e.title}})))):D.a.createElement("div",{className:"col-12 text-center"},"Укажите источники данных в настройке виджета")}}]),n}(w.Component),ft=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(vt);function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Et={menuList:function(e,t){return yt(yt({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menu:function(e,t){return yt(yt({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menuPortal:function(e,t){return yt(yt({},e),{},{zIndex:"999999999999999999999",position:"relative"})}},wt=[{id:0,label:"Линейный",value:"linear"},{id:1,label:"Точечный",value:"point"},{id:2,label:"Временной",value:"time"}],Dt=[{id:4,label:"День",value:"day"},{id:5,label:"Месяц",value:"month"},{id:6,label:"Год",value:"year"}];var _t=function(e){f()(n,e);var t=gt(n);function n(e){var a;d()(this,n),a=t.call(this,e);var i=null!==e.editElement?_.cloneDeep(e.editElement):{};return a.state={editElement:i},a}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n,a,i=this;_.isEqual(null===(n=e.editElement)||void 0===n?void 0:n.settings,null===(a=this.props.editElement)||void 0===a?void 0:a.settings)||this.setState((function(e){return yt(yt({},e),{},{editElement:i.props.editElement})}))}},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g=this,b=null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t||null===(n=t.xScale)||void 0===n?void 0:n.type;return D.a.createElement("div",{className:"col mb-1"},D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Ось X"),D.a.createElement(ut.a,{placeholder:"Выберите отображение",options:wt,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select select-type"),defaultValue:null===(a=this.state.editElement)||void 0===a||null===(i=a.settings)||void 0===i||null===(s=i.xScale)||void 0===s?void 0:s.type,defaultInputValue:(null===(r=_.find(wt,{value:null===(o=this.state.editElement)||void 0===o||null===(l=o.settings)||void 0===l||null===(c=l.xScale)||void 0===c?void 0:c.type}))||void 0===r?void 0:r.label)||"",onChange:function(e){return g.props.setXAxisScale(e.value)},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:Et})),void 0!==b&&"time"===b&&D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Масштаб времени"),D.a.createElement(ut.a,{placeholder:"Выберите масштаб времени",options:Dt,className:"select-type",defaultValue:null===(d=this.state.editElement)||void 0===d||null===(u=d.settings)||void 0===u||null===(p=u.xScale)||void 0===p?void 0:p.precision,defaultInputValue:(null===(h=_.find(Dt,{value:null===(m=this.state.editElement)||void 0===m||null===(v=m.settings)||void 0===v||null===(f=v.xScale)||void 0===f?void 0:f.precision}))||void 0===h?void 0:h.label)||"",onChange:function(e){return g.props.setXAxisTimeScale(e.value)},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:Et})))}}]),n}(w.Component),kt=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(_t);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Nt={left:80,right:80,bottom:80,top:40},Pt={left:120,right:180,bottom:80,top:80},Rt={left:100,right:120,bottom:80,top:40},It={top:40,right:180,bottom:80,left:100},jt=function(e){f()(n,e);var t=xt(n);function n(e){var a,i,s,r,o;d()(this,n),o=t.call(this,e);var l={left:30,right:30,bottom:30,top:30};switch(e.type){case j.b:l=Rt;break;case j.a:l=Nt;break;case j.c:l=Pt;break;case j.d:l=It}return o.state={margin:{left:(null===(a=e.margin)||void 0===a?void 0:a.left)||l.left,right:(null===(i=e.margin)||void 0===i?void 0:i.right)||l.right,bottom:(null===(s=e.margin)||void 0===s?void 0:s.bottom)||l.bottom,top:(null===(r=e.margin)||void 0===r?void 0:r.top)||l.top}},o.setProperty=o.setProperty.bind(m()(o)),o}return p()(n,[{key:"componentDidUpdate",value:function(e,t){_.isEqual(e.margin,this.state.margin)||this.props.setProperty(this.state.margin,"margin")}},{key:"setProperty",value:function(e,t){this.setState((function(n){return St(St({},n),{},{margin:St(St({},n.margin),{},l()({},t,Number(e)))})}))}},{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:"mt-2"},D.a.createElement("div",{className:"col"},D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"col px-0"},D.a.createElement("div",{htmlFor:"",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Слева:"),D.a.createElement("input",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--font-input"),style:{width:"100%"},type:"number",min:"0",defaultValue:this.state.margin.left,param:"left",onChange:function(t){return e.setProperty(t.target.value,"left")}})),D.a.createElement("div",{className:"col px-0"},D.a.createElement("div",{htmlFor:"",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Справа:"),D.a.createElement("input",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--font-input"),style:{width:"100%"},type:"number",min:"0",defaultValue:this.state.margin.right,param:"right",onChange:function(t){return e.setProperty(t.target.value,"right")}}))),D.a.createElement("div",{className:"row mt-1"},D.a.createElement("div",{className:"col px-0"},D.a.createElement("div",{htmlFor:"",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Сверху:"),D.a.createElement("input",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--font-input"),style:{width:"100%"},type:"number",min:"0",defaultValue:this.state.margin.top,param:"top",onChange:function(t){return e.setProperty(t.target.value,"top")}})),D.a.createElement("div",{className:"col px-0"},D.a.createElement("div",{htmlFor:"",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Снизу:"),D.a.createElement("input",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--font-input"),style:{width:"100%"},type:"number",min:"0",defaultValue:this.state.margin.bottom,param:"bottom",onChange:function(t){return e.setProperty(t.target.value,"bottom")}})))))}}]),n}(w.Component),Lt=n(140),Ct=n(83),At=n.n(Ct),zt=n(82),Bt=n.n(zt);function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft={menuList:function(e,t){return qt(qt({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menu:function(e,t){return qt(qt({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menuPortal:function(e,t){return qt(qt({},e),{},{zIndex:"999999999999999999999",position:"relative"})}},Ht=_.find(U.a,{value:"regagro"}).value,Vt=[{id:0,value:"basis"},{id:1,value:"cardinal"},{id:2,value:"catmullRom"},{id:3,value:"linear"},{id:4,value:"monotoneX"},{id:5,value:"monotoneY"},{id:6,value:"natural"},{id:7,value:"step"},{id:8,value:"stepAfter"},{id:9,value:"stepBefore"}],Mt=[{id:0,value:"horizontal",label:"Горизонтальный"},{id:1,value:"vertical",label:"Вертикальный"}];var Yt=function(e){f()(n,e);var t=Wt(n);function n(e){var a;d()(this,n),a=t.call(this,e);var i=null!==e.editElement?_.cloneDeep(e.editElement):{};return a.state={editElement:i,lineWidth:2,tickRotation:0,pointSize:6,innerRadius:0,padding:.1,innerPadding:0,sliceLabelsSkipAngle:0,sliceLabelsRadiusOffset:.5,radialLabelsSkipAngle:0,radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsTextXOffset:6,radialLabelsLinkStrokeWidth:1,labelSkipHeight:0,labelSkipWidth:0,currentColorScheme:"",cornerRadius:0,padAngle:0,borderWidth:0,borderColor:"",checked:!1},a.enableArea=a.enableArea.bind(m()(a)),a.enableSliceLabels=a.enableSliceLabels.bind(m()(a)),a.enableRadialLabels=a.enableRadialLabels.bind(m()(a)),a.handleChange=a.handleChange.bind(m()(a)),a.enablePoints=a.enablePoints.bind(m()(a)),a.setReverse=a.setReverse.bind(m()(a)),a.setColorScheme=a.setColorScheme.bind(m()(a)),a.setSliceLabelsSkipAngle=a.setSliceLabelsSkipAngle.bind(m()(a)),a.setRadialLabelsSkipAngle=a.setRadialLabelsSkipAngle.bind(m()(a)),a.setSliceLabelsRadiusOffset=a.setSliceLabelsRadiusOffset.bind(m()(a)),a.setRadialLabelsLinkOffset=a.setRadialLabelsLinkOffset.bind(m()(a)),a.setRadialLabelsLinkDiagonalLength=a.setRadialLabelsLinkDiagonalLength.bind(m()(a)),a.setRadialLabelsLinkHorizontalLength=a.setRadialLabelsLinkHorizontalLength.bind(m()(a)),a.setRadialLabelsTextXOffset=a.setRadialLabelsTextXOffset.bind(m()(a)),a.setRadialLabelsLinkStrokeWidth=a.setRadialLabelsLinkStrokeWidth.bind(m()(a)),a.setLabelSkipHeight=a.setLabelSkipHeight.bind(m()(a)),a.setLabelSkipWidth=a.setLabelSkipWidth.bind(m()(a)),a.cornerRadius=a.cornerRadius.bind(m()(a)),a.padAngle=a.padAngle.bind(m()(a)),a.borderColor=a.borderColor.bind(m()(a)),a.borderWidth=a.borderWidth.bind(m()(a)),a.enableGridX=a.enableGridX.bind(m()(a)),a.enableGridY=a.enableGridY.bind(m()(a)),a.enableCrosshair=a.enableCrosshair.bind(m()(a)),a}return p()(n,[{key:"componentDidMount",value:function(){var e,t,n=this;void 0===(null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.color)&&setTimeout((function(){n.setColorScheme(Ht)}),1e3)}},{key:"componentDidUpdate",value:function(e,t){var n,a,i=this;_.isEqual(null===(n=e.editElement)||void 0===n?void 0:n.settings,null===(a=this.props.editElement)||void 0===a?void 0:a.settings)||this.setState((function(e){return qt(qt({},e),{},{editElement:i.props.editElement})}))}},{key:"setColorScheme",value:function(e){this.props.setColorScheme(e),this.setState((function(t){return qt(qt({},t),{},{currentColorScheme:e})}))}},{key:"handleChange",value:function(e){console.log(e),e.persist(),this.setState((function(t){return qt(qt({},t),{},{checked:e.target.checked})}))}},{key:"changeWidth",value:function(e){this.props.setProperty(e,"lineWidth"),this.setState((function(t){return qt(qt({},t),{},{lineWidth:e})}))}},{key:"setTickRotation",value:function(e){this.props.setTickRotation(e),this.setState((function(t){return qt(qt({},t),{},{tickRotation:e})}))}},{key:"setPointSize",value:function(e){this.props.setProperty(e,"pointSize"),this.setState((function(t){return qt(qt({},t),{},{pointSize:e})}))}},{key:"setInnerRadius",value:function(e){this.props.setProperty(e,"innerRadius"),this.setState((function(t){return qt(qt({},t),{},{innerRadius:e})}))}},{key:"setPadding",value:function(e){this.props.setProperty(e,"padding"),this.setState((function(t){return qt(qt({},t),{},{padding:e})}))}},{key:"setInnerPadding",value:function(e){this.props.setProperty(e,"innerPadding"),this.setState((function(t){return qt(qt({},t),{},{innerPadding:e})}))}},{key:"enableArea",value:function(e){this.props.setProperty(e.target.checked,"enableArea")}},{key:"enableSliceLabels",value:function(e){this.props.setProperty(e.target.checked,"enableSliceLabels")}},{key:"enableRadialLabels",value:function(e){this.props.setProperty(e.target.checked,"enableRadialLabels")}},{key:"enablePoints",value:function(e){this.props.setProperty(e.target.checked,"enablePoints")}},{key:"enableGridX",value:function(e){this.props.setProperty(e.target.checked,"enableGridX")}},{key:"enableGridY",value:function(e){this.props.setProperty(e.target.checked,"enableGridY")}},{key:"enableCrosshair",value:function(e){this.props.setProperty(e.target.checked,"enableCrosshair")}},{key:"setReverse",value:function(e){this.props.setProperty(e.target.checked,"reverse")}},{key:"setSliceLabelsSkipAngle",value:function(e,t){this.props.setProperty(Number(t),"sliceLabelsSkipAngle")}},{key:"setRadialLabelsSkipAngle",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsSkipAngle")}},{key:"setSliceLabelsRadiusOffset",value:function(e,t){this.props.setProperty(Number(t),"sliceLabelsRadiusOffset")}},{key:"setRadialLabelsLinkOffset",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsLinkOffset")}},{key:"setRadialLabelsLinkDiagonalLength",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsLinkDiagonalLength")}},{key:"setRadialLabelsLinkHorizontalLength",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsLinkHorizontalLength")}},{key:"setRadialLabelsTextXOffset",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsTextXOffset")}},{key:"setRadialLabelsLinkStrokeWidth",value:function(e,t){this.props.setProperty(Number(t),"radialLabelsLinkStrokeWidth")}},{key:"setLabelSkipHeight",value:function(e,t){this.props.setProperty(Number(t),"labelSkipHeight")}},{key:"setLabelSkipWidth",value:function(e,t){this.props.setProperty(Number(t),"labelSkipWidth")}},{key:"cornerRadius",value:function(e,t){this.props.setProperty(Number(t),"cornerRadius")}},{key:"padAngle",value:function(e,t){this.props.setProperty(Number(t),"padAngle")}},{key:"borderWidth",value:function(e,t){this.props.setProperty(Number(t),"borderWidth")}},{key:"borderColor",value:function(e){this.props.setProperty(e.hex,"borderColor"),this.setState((function(t){return qt(qt({},t),{},{borderColor:e.hex})}))}},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,_,k,O,S,x,N,P,R,I,L,C,A,z,B,W,T,q,F,H,V,M,Y,X,J,G,K,Q,Z,$,ee,te,ne,ae,ie,se,re,oe,le,ce,de,ue,pe,he,me,ve,fe,ge,be,ye,Ee,we,De,_e,ke,Oe,Se,xe,Ne,Pe,Re,Ie,je,Le,Ce,Ae,ze,Be,We,Te,qe,Fe,He,Ve,Me,Ye,Xe,Je,Ge,Ue,Ke,Qe,Ze,$e,et,tt,nt,at,it,st,rt,ot,lt,ct,dt,pt,ht,mt,vt,ft,gt,bt,yt,Et,wt,Dt,_t,kt,Ot,St,xt,Nt,Pt,Rt,It,Ct,zt,Wt,Tt,qt,Ht,Yt,Xt,Jt,Gt,Ut=this;return D.a.createElement("div",{className:"col"},D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Укажите внутренние отступы"),D.a.createElement(jt,{widgetID:this.props.widgetID,setProperty:this.props.setProperty,type:null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.type,margin:null===(n=this.state.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.margin})),(null===(i=this.state.editElement)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.type)===j.b&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Выберите тип кривой"),D.a.createElement(ut.a,{placeholder:"Выберите тип кривой",options:Vt,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select"),defaultValue:null===(r=this.state.editElement)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.curve,defaultInputValue:null===(l=this.state.editElement)||void 0===l||null===(c=l.settings)||void 0===c?void 0:c.curve,onChange:function(e){return Ut.props.setProperty(e.value,"curve")},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.value},styles:Ft}))),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Выберите цветовую схему"," "),D.a.createElement(ut.a,{options:U.a,placeholder:"Выберите цветовую схему",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select"),defaultValue:(null===(d=this.props.editElement)||void 0===d||null===(u=d.settings)||void 0===u||null===(p=u.colors)||void 0===p?void 0:p.scheme)||this.state.currentColorScheme,defaultInputValue:(null===(h=this.props.editElement)||void 0===h||null===(m=h.settings)||void 0===m||null===(v=m.colors)||void 0===v?void 0:v.scheme)||this.state.currentColorScheme,onChange:function(e){return Ut.setColorScheme(e.value)},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.value},styles:Ft})),(null===(f=this.state.editElement)||void 0===f||null===(g=f.settings)||void 0===g?void 0:g.type)===j.b&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Укажите ширину линии"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(b=this.state.editElement)||void 0===b||null===(y=b.settings)||void 0===y?void 0:y.lineWidth)||this.state.lineWidth,onChange:function(e,t){return Ut.changeWidth(t)},min:0,max:20,step:1}),"(",(null===(E=this.state.editElement)||void 0===E||null===(w=E.settings)||void 0===w?void 0:w.lineWidth)||this.state.lineWidth,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить участки"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(_=this.state.editElement)||void 0===_||null===(k=_.settings)||void 0===k?void 0:k.enableArea)||!1,checked:null===(O=this.state.editElement)||void 0===O||null===(S=O.settings)||void 0===S?void 0:S.enableArea,onChange:this.enableArea,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить точки"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(x=this.state.editElement)||void 0===x||null===(N=x.settings)||void 0===N?void 0:N.enablePoints)||!0,checked:null===(P=this.state.editElement)||void 0===P||null===(R=P.settings)||void 0===R?void 0:R.enablePoints,onChange:this.enablePoints,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить перекрестие"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(I=this.state.editElement)||void 0===I||null===(L=I.settings)||void 0===L?void 0:L.enableCrosshair)||!0,checked:null===(C=this.state.editElement)||void 0===C||null===(A=C.settings)||void 0===A?void 0:A.enableCrosshair,onChange:this.enableCrosshair,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Укажите размер точки"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(z=this.state.editElement)||void 0===z||null===(B=z.settings)||void 0===B?void 0:B.pointSize)||this.state.pointSize,onChange:function(e,t){return Ut.setPointSize(t)},min:2,max:20,step:1}),"(",(null===(W=this.state.editElement)||void 0===W||null===(T=W.settings)||void 0===T?void 0:T.pointSize)||this.state.pointSize,"px)")),((null===(q=this.state.editElement)||void 0===q||null===(F=q.settings)||void 0===F?void 0:F.type)!==j.c||(null===(H=this.state.editElement)||void 0===H||null===(V=H.settings)||void 0===V?void 0:V.type)!==j.e)&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Укажите наклон нижней легенды"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(M=this.state.editElement)||void 0===M||null===(Y=M.settings)||void 0===Y||null===(X=Y.axisBottom)||void 0===X?void 0:X.tickRotation)||this.state.tickRotation,onChange:function(e,t){return Ut.setTickRotation(t)},min:-90,max:90,step:1}),"(",(null===(J=this.state.editElement)||void 0===J||null===(G=J.settings)||void 0===G||null===(K=G.axisBottom)||void 0===K?void 0:K.tickRotation)||this.state.tickRotation,"°)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить сетку по X"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(Q=this.state.editElement)||void 0===Q||null===(Z=Q.settings)||void 0===Z?void 0:Z.enableGridX)||!0,checked:null===($=this.state.editElement)||void 0===$||null===(ee=$.settings)||void 0===ee?void 0:ee.enableGridX,onChange:this.enableGridX,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить сетку по Y"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(te=this.state.editElement)||void 0===te||null===(ne=te.settings)||void 0===ne?void 0:ne.enableGridY)||!0,checked:null===(ae=this.state.editElement)||void 0===ae||null===(ie=ae.settings)||void 0===ie?void 0:ie.enableGridY,onChange:this.enableGridY,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")}))),(null===(se=this.state.editElement)||void 0===se||null===(re=se.settings)||void 0===re?void 0:re.type)===j.c&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Укажите внутренний радиус"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(oe=this.state.editElement)||void 0===oe||null===(le=oe.settings)||void 0===le?void 0:le.innerRadius)||this.state.innerRadius,onChange:function(e,t){return Ut.setInnerRadius(t)},min:0,max:.95,step:.05}),"(",(null===(ce=this.state.editElement)||void 0===ce||null===(de=ce.settings)||void 0===de?void 0:de.innerRadius)||this.state.innerRadius,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Надписи на сегментах"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(ue=this.state.editElement)||void 0===ue||null===(pe=ue.settings)||void 0===pe?void 0:pe.enableSliceLabels)||!0,checked:null===(he=this.state.editElement)||void 0===he||null===(me=he.settings)||void 0===me?void 0:me.enableSliceLabels,onChange:this.enableSliceLabels,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Пропускать внутренние подписи при угле сектора"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(ve=this.state.editElement)||void 0===ve||null===(fe=ve.settings)||void 0===fe?void 0:fe.sliceLabelsSkipAngle)||this.state.sliceLabelsSkipAngle,onChange:this.setSliceLabelsSkipAngle,min:0,max:45,step:1}),"(",(null===(ge=this.state.editElement)||void 0===ge||null===(be=ge.settings)||void 0===be?void 0:be.sliceLabelsSkipAngle)||this.state.sliceLabelsSkipAngle,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отступ внутренних подписей"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(ye=this.state.editElement)||void 0===ye||null===(Ee=ye.settings)||void 0===Ee?void 0:Ee.sliceLabelsRadiusOffset)||this.state.sliceLabelsRadiusOffset,onChange:this.setSliceLabelsRadiusOffset,min:0,max:2,step:.05}),"(",(null===(we=this.state.editElement)||void 0===we||null===(De=we.settings)||void 0===De?void 0:De.sliceLabelsRadiusOffset)||this.state.sliceLabelsRadiusOffset,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Внешние надписи"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(_e=this.state.editElement)||void 0===_e||null===(ke=_e.settings)||void 0===ke?void 0:ke.enableRadialLabels)||!0,checked:null===(Oe=this.state.editElement)||void 0===Oe||null===(Se=Oe.settings)||void 0===Se?void 0:Se.enableRadialLabels,onChange:this.enableRadialLabels,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Пропускать внешние подписи при угле сектора"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(xe=this.state.editElement)||void 0===xe||null===(Ne=xe.settings)||void 0===Ne?void 0:Ne.radialLabelsSkipAngle)||this.state.radialLabelsSkipAngle,onChange:this.setRadialLabelsSkipAngle,min:0,max:45,step:1}),"(",(null===(Pe=this.state.editElement)||void 0===Pe||null===(Re=Pe.settings)||void 0===Re?void 0:Re.radialLabelsSkipAngle)||this.state.radialLabelsSkipAngle,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отступы внешней подписи"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Ie=this.state.editElement)||void 0===Ie||null===(je=Ie.settings)||void 0===je?void 0:je.radialLabelsLinkOffset)||this.state.radialLabelsLinkOffset,onChange:this.setRadialLabelsLinkOffset,min:-48,max:60,step:1}),"(",(null===(Le=this.state.editElement)||void 0===Le||null===(Ce=Le.settings)||void 0===Ce?void 0:Ce.radialLabelsLinkOffset)||this.state.radialLabelsLinkOffset,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Длина линии подписи по диагонали"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Ae=this.state.editElement)||void 0===Ae||null===(ze=Ae.settings)||void 0===ze?void 0:ze.radialLabelsLinkDiagonalLength)||this.state.radialLabelsLinkDiagonalLength,onChange:this.setRadialLabelsLinkDiagonalLength,min:0,max:60,step:1})," ","(",(null===(Be=this.state.editElement)||void 0===Be||null===(We=Be.settings)||void 0===We?void 0:We.radialLabelsLinkDiagonalLength)||this.state.radialLabelsLinkDiagonalLength,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Длина линии подписи по горизонтали"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Te=this.state.editElement)||void 0===Te||null===(qe=Te.settings)||void 0===qe?void 0:qe.radialLabelsLinkHorizontalLength)||this.state.radialLabelsLinkHorizontalLength,onChange:this.setRadialLabelsLinkHorizontalLength,min:0,max:60,step:1}),"(",(null===(Fe=this.state.editElement)||void 0===Fe||null===(He=Fe.settings)||void 0===He?void 0:He.radialLabelsLinkHorizontalLength)||this.state.radialLabelsLinkHorizontalLength,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отступ внешней подписи по горизонтали"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Ve=this.state.editElement)||void 0===Ve||null===(Me=Ve.settings)||void 0===Me?void 0:Me.radialLabelsTextXOffset)||this.state.radialLabelsTextXOffset,onChange:this.setRadialLabelsTextXOffset,min:0,max:60,step:1}),"(",(null===(Ye=this.state.editElement)||void 0===Ye||null===(Xe=Ye.settings)||void 0===Xe?void 0:Xe.radialLabelsTextXOffset)||this.state.radialLabelsTextXOffset,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Толщина линии внешней подписи"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Je=this.state.editElement)||void 0===Je||null===(Ge=Je.settings)||void 0===Ge?void 0:Ge.radialLabelsLinkStrokeWidth)||this.state.radialLabelsLinkStrokeWidth,onChange:this.setRadialLabelsLinkStrokeWidth,min:0,max:20,step:1}),"(",(null===(Ue=this.state.editElement)||void 0===Ue||null===(Ke=Ue.settings)||void 0===Ke?void 0:Ke.radialLabelsLinkStrokeWidth)||this.state.radialLabelsLinkStrokeWidth,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Скругление углов сегмента"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Qe=this.state.editElement)||void 0===Qe||null===(Ze=Qe.settings)||void 0===Ze?void 0:Ze.cornerRadius)||this.state.cornerRadius,onChange:this.cornerRadius,min:0,max:45,step:1}),"(",(null===($e=this.state.editElement)||void 0===$e||null===(et=$e.settings)||void 0===et?void 0:et.cornerRadius)||this.state.cornerRadius,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Угол между сегментами"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(tt=this.state.editElement)||void 0===tt||null===(nt=tt.settings)||void 0===nt?void 0:nt.padAngle)||this.state.padAngle,onChange:this.padAngle,min:0,max:45,step:1}),"(",(null===(at=this.state.editElement)||void 0===at||null===(it=at.settings)||void 0===it?void 0:it.padAngle)||this.state.padAngle,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Толщина рамки сегментов"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(st=this.state.editElement)||void 0===st||null===(rt=st.settings)||void 0===rt?void 0:rt.borderWidth)||this.state.borderWidth,onChange:this.borderWidth,min:0,max:20,step:1}),"(",(null===(ot=this.state.editElement)||void 0===ot||null===(lt=ot.settings)||void 0===lt?void 0:lt.borderWidth)||this.state.borderWidth,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Цвет рамки сегментов"),D.a.createElement(Lt.SketchPicker,{color:(null===(ct=this.state.editElement)||void 0===ct||null===(dt=ct.settings)||void 0===dt?void 0:dt.borderColor)||this.state.borderColor,onChange:this.borderColor}))),(null===(pt=this.state.editElement)||void 0===pt||null===(ht=pt.settings)||void 0===ht?void 0:ht.type)===j.a&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Надписи на сегментах"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(mt=this.state.editElement)||void 0===mt||null===(vt=mt.settings)||void 0===vt?void 0:vt.enableSliceLabels)||!0,checked:null===(ft=this.state.editElement)||void 0===ft||null===(gt=ft.settings)||void 0===gt?void 0:gt.enableSliceLabels,onChange:this.enableSliceLabels,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Внешние отступы"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(bt=this.state.editElement)||void 0===bt||null===(yt=bt.settings)||void 0===yt?void 0:yt.padding)||this.state.padding,onChange:function(e,t){return Ut.setPadding(t)},min:0,max:.9,step:.05}),"(",(null===(Et=this.state.editElement)||void 0===Et||null===(wt=Et.settings)||void 0===wt?void 0:wt.padding)||this.state.padding,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Внутренние отступы"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Dt=this.state.editElement)||void 0===Dt||null===(_t=Dt.settings)||void 0===_t?void 0:_t.innerPadding)||this.state.innerPadding,onChange:function(e,t){return Ut.setInnerPadding(t)},min:0,max:10,step:1}),"(",(null===(kt=this.state.editElement)||void 0===kt||null===(Ot=kt.settings)||void 0===Ot?void 0:Ot.innerPadding)||this.state.innerPadding,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Пропускать подписи при высоте столбца"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(St=this.state.editElement)||void 0===St||null===(xt=St.settings)||void 0===xt?void 0:xt.labelSkipHeight)||this.state.labelSkipHeight,onChange:this.setLabelSkipHeight,min:0,max:36,step:1}),"(",(null===(Nt=this.state.editElement)||void 0===Nt||null===(Pt=Nt.settings)||void 0===Pt?void 0:Pt.labelSkipHeight)||this.state.labelSkipHeight,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Пропускать подписи при ширине столбца"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(Rt=this.state.editElement)||void 0===Rt||null===(It=Rt.settings)||void 0===It?void 0:It.labelSkipWidth)||this.state.labelSkipWidth,onChange:this.setLabelSkipWidth,min:0,max:36,step:1}),"(",(null===(Ct=this.state.editElement)||void 0===Ct||null===(zt=Ct.settings)||void 0===zt?void 0:zt.labelSkipWidth)||this.state.labelSkipWidth,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отразить"),D.a.createElement(At.a,{disableRipple:!0,defaultChecked:(null===(Wt=this.state.editElement)||void 0===Wt||null===(Tt=Wt.settings)||void 0===Tt?void 0:Tt.reverse)||!1,checked:null===(qt=this.state.editElement)||void 0===qt||null===(Ht=qt.settings)||void 0===Ht?void 0:Ht.reverse,onChange:this.setReverse,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Тип макета"),D.a.createElement(ut.a,{options:Mt,placeholder:"Выберите тип макета",className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select select-type"),defaultValue:null===(Yt=this.state.editElement)||void 0===Yt||null===(Xt=Yt.settings)||void 0===Xt?void 0:Xt.layout,defaultInputValue:null===(Jt=this.state.editElement)||void 0===Jt||null===(Gt=Jt.settings)||void 0===Gt?void 0:Gt.layout,onChange:function(e){return Ut.props.setProperty(e.value,"layout")},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:Ft}))))}}]),n}(w.Component),Xt=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(editElement(t))}}}))(Yt);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Kt=function(e){f()(i,e);var t,n,a=Ut(i);function i(e){var t;return d()(this,i),(t=a.call(this,e)).state={param:_.cloneDeep(e.param),options:[],editElement:_.cloneDeep(e.editElement),currentSelected:""},t.setOption=t.setOption.bind(m()(t)),t}return p()(i,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.param,this.props.param)||this.setState((function(e){return Gt(Gt({},e),{},{param:_.cloneDeep(n.props.param)})})),_.isEqual(t.editElement,this.props.editElement)||this.setState((function(e){return Gt(Gt({},e),{},{editElement:_.cloneDeep(n.props.editElement)})}))}},{key:"componentDidMount",value:function(){var e,t,n=this,a=_.find(null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.params,(function(e){return void 0!==e[n.state.param.value]&&null!=e[n.state.param.value]?(console.log(e[n.state.param.value]),e[n.state.param.value]):""}));if(void 0!==a){var i=_.keys(a)[0];this.setState((function(e){return Gt(Gt({},e),{},{currentSelected:a[i]||""})}))}}},{key:"componentWillMount",value:(n=C()(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOptions();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getOptions",value:(t=C()(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P()("/ajax/models/queries/".concat(this.state.param.model,"/").concat(this.state.param.value));case 3:200===(t=e.sent).status&&this.setState((function(e){return Gt(Gt({},e),{},{options:t.data.data})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("NETWORK ERROR =>",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"setOption",value:function(e){var t,n=this;this.props.setParam(this.state.param.value,e,this.state.options,(null===(t=_.find(this.state.options,(function(e){return e.value==n.state.currentSelected})))||void 0===t?void 0:t.label)||""),this.setState((function(t){return Gt(Gt({},t),{},{currentSelected:e})}))}},{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:"col-12"},D.a.createElement(ct.a.Group,{className:"mb-2"},D.a.createElement(ct.a.Label,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},this.state.param.label),D.a.createElement(ct.a.Control,{className:"select-type",name:"type",defaultValue:this.state.currentSelected,value:this.state.currentSelected,onChange:function(t){return e.setOption(t.target.value)},as:"select"},D.a.createElement("option",{value:""},"Выберите параметры для фильтрации"),this.state.options.length>0&&this.state.options.map((function(e,t){return D.a.createElement("option",{key:t,value:e.value},e.label)})))))}}]),i}(w.Component),Qt=Object(O.connect)((function(e){return{editElement:e.editElement}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(Kt);function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var $t=function(e){f()(n,e);var t=Zt(n);function n(e){var a;d()(this,n),a=t.call(this,e);var i=null!==e.editElement?_.cloneDeep(e.editElement):{};return a.state={types:j.h,editElement:i},a}return p()(n,[{key:"render",value:function(){var e,t,n=this;return D.a.createElement("div",{className:"col-12"},D.a.createElement(ct.a.Group,null,D.a.createElement(ct.a.Label,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Тип диаграммы"),D.a.createElement(ct.a.Control,{onChange:function(e){return n.props.setType(e.target.value)},value:null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.type,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select select-type"),name:"type",as:"select"},D.a.createElement("option",{value:""},"Выберите тип диаграммы"),this.state.types&&this.state.types.map((function(e,t){return D.a.createElement("option",{key:t,value:e.value},e.name)})))))}}]),n}(w.Component),en=Object(O.connect)((function(e){return{editElement:e.editElement}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))($t);function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn={menuList:function(e,t){return an(an({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menu:function(e,t){return an(an({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menuPortal:function(e,t){return an(an({},e),{},{zIndex:"999999999999999999999",position:"relative"})}},rn=[{value:"top-left",label:"Сверху слева"},{value:"top",label:"Сверху"},{value:"top-right",label:"Сверху справа"},{value:"left",label:"Слева"},{value:"center",label:"По центру"},{value:"right",label:"Справа"},{value:"bottom-left",label:"Снизу слева"},{value:"bottom",label:"Снизу"},{value:"bottom-right",label:"Снизу справа"}],on=[{value:"column",label:"Колонка"},{value:"row",label:"Строчка"}],ln=[{value:"left-to-right",label:"Слева направо"},{value:"right-to-left",label:"Справа налево"},{value:"top-to-bottom",label:"Сверху вниз"},{value:"bottom-to-top",label:"Снизу вверх"}],cn=function(e){f()(n,e);var t=tn(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={editElement:e.editElement,enableLegend:!0,legendTranslateX:0,legendTranslateY:0,itemWidth:10,itemHeight:10,itemsSpacing:10,symbolSize:10},a.setLedengEnable=a.setLedengEnable.bind(m()(a)),a.setLegendJustify=a.setLegendJustify.bind(m()(a)),a.setProperty=a.setProperty.bind(m()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.editElement,this.props.editElement)||this.setState((function(e){return an(an({},e),{},{editElement:n.props.editElement})}))}},{key:"setLedengEnable",value:function(e){this.props.setProperty(e.target.checked,"enableLegend")}},{key:"setLegendJustify",value:function(e){this.props.setProperty(e.target.checked,"legendJustify")}},{key:"setProperty",value:function(e,t){this.props.setProperty(e,t),this.setState((function(n){return an(an({},n),{},l()({},t,e))}))}},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,_,k,O,S,x,N,P,R,I,j,L,C,A,z,B,W,T,q,F,H,V,M,Y=this;return D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"col"},D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить легенду"),D.a.createElement(At.a,{disableRipple:!0,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor"),defaultChecked:null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.enableLegend,checked:null===(n=this.state.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.enableLegend,onChange:this.setLedengEnable})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Расположение легенды"),D.a.createElement(ut.a,{placeholder:"Выберите расположение легенды",options:rn,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select"),defaultValue:null===(i=this.state.editElement)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.legendAchor,defaultInputValue:null===(r=this.state.editElement)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.legendAchor,onChange:function(e){return Y.props.setProperty(e.value,"legendAchor")},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:sn})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Направление легенды"),D.a.createElement(ut.a,{placeholder:"Выберите расположение легенды",options:on,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select"),defaultValue:null===(l=this.state.editElement)||void 0===l||null===(c=l.settings)||void 0===c?void 0:c.legendDirection,defaultInputValue:null===(d=this.state.editElement)||void 0===d||null===(u=d.settings)||void 0===u?void 0:u.legendDirection,onChange:function(e){return Y.props.setProperty(e.value,"legendDirection")},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:sn})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Выровнять легенды"),D.a.createElement(At.a,{disableRipple:!0,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor"),defaultChecked:null===(p=this.state.editElement)||void 0===p||null===(h=p.settings)||void 0===h?void 0:h.legendJustify,checked:null===(m=this.state.editElement)||void 0===m||null===(v=m.settings)||void 0===v?void 0:v.legendJustify,onChange:this.setLegendJustify})),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Расположение легенды по X"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(f=this.state.editElement)||void 0===f||null===(g=f.settings)||void 0===g?void 0:g.legendTranslateX)||this.state.legendTranslateX,onChange:function(e,t){return Y.setProperty(Number(t),"legendTranslateX")},min:-200,max:200,step:1}),"(",(null===(b=this.state.editElement)||void 0===b||null===(y=b.settings)||void 0===y?void 0:y.legendTranslateX)||this.state.legendTranslateX,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Расположение легенды по Y"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(E=this.state.editElement)||void 0===E||null===(w=E.settings)||void 0===w?void 0:w.legendTranslateY)||this.state.legendTranslateY,onChange:function(e,t){return Y.setProperty(Number(t),"legendTranslateY")},min:-200,max:200,step:1}),"(",(null===(_=this.state.editElement)||void 0===_||null===(k=_.settings)||void 0===k?void 0:k.legendTranslateY)||this.state.legendTranslateY,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Ширина элемента легенды"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(O=this.state.editElement)||void 0===O||null===(S=O.settings)||void 0===S?void 0:S.legendItemWidth)||this.state.itemWidth,onChange:function(e,t){return Y.setProperty(Number(t),"itemWlegendItemWidthidth")},min:10,max:200,step:1}),"(",(null===(x=this.state.editElement)||void 0===x||null===(N=x.settings)||void 0===N?void 0:N.legendItemWidth)||this.state.itemWidth,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Высота элемента легенды"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(P=this.state.editElement)||void 0===P||null===(R=P.settings)||void 0===R?void 0:R.legendItemHeight)||this.state.itemHeight,onChange:function(e,t){return Y.setProperty(Number(t),"legendItemHeight")},min:10,max:200,step:1}),"(",(null===(I=this.state.editElement)||void 0===I||null===(j=I.settings)||void 0===j?void 0:j.legendItemHeight)||this.state.itemHeight,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Расстояние между элементами"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(L=this.state.editElement)||void 0===L||null===(C=L.settings)||void 0===C?void 0:C.legendItemsSpacing)||this.state.itemsSpacing,onChange:function(e,t){return Y.setProperty(Number(t),"legendItemsSpacing")},min:0,max:60,step:1}),"(",(null===(A=this.state.editElement)||void 0===A||null===(z=A.settings)||void 0===z?void 0:z.legendItemsSpacing)||this.state.itemsSpacing,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Размер символа"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(B=this.state.editElement)||void 0===B||null===(W=B.settings)||void 0===W?void 0:W.legendSymbolSize)||this.state.symbolSize,onChange:function(e,t){return Y.setProperty(Number(t),"legendSymbolSize")},min:2,max:60,step:1}),"(",(null===(T=this.state.editElement)||void 0===T||null===(q=T.settings)||void 0===q?void 0:q.legendSymbolSize)||this.state.symbolSize,"px)"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Направление элементов"),D.a.createElement(ut.a,{placeholder:"Выберите направление элементов",options:ln,className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select"),defaultValue:null===(F=this.state.editElement)||void 0===F||null===(H=F.settings)||void 0===H?void 0:H.legendItemDirection,defaultInputValue:null===(V=this.state.editElement)||void 0===V||null===(M=V.settings)||void 0===M?void 0:M.legendItemDirection,onChange:function(e){return Y.props.setProperty(e.value,"legendItemDirection")},getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},styles:sn}))))}}]),n}(w.Component),dn=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(editElement(t))}}}))(cn);function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}w.Component;function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var gn=function(e){f()(n,e);var t=fn(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={editElement:e.editElement,padding:{left:5,right:5,top:5,bottom:5},currentColorScheme:"",lineWidth:2},a.setTooltipEnable=a.setTooltipEnable.bind(m()(a)),a.setColorScheme=a.setColorScheme.bind(m()(a)),a}return p()(n,[{key:"componentDidMount",value:function(){var e,t,n=this;void 0===(null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.color)&&setTimeout((function(){n.setColorScheme(regagroScheme)}),1e3)}},{key:"setColorScheme",value:function(e){this.props.setColorScheme(e),this.setState((function(t){return vn(vn({},t),{},{currentColorScheme:e})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.editElement,this.props.editElement)||this.setState((function(e){return vn(vn({},e),{},{editElement:n.props.editElement})}))}},{key:"setTooltipEnable",value:function(e){this.props.setProperty(e.target.checked,"enableCustomTooltip")}},{key:"changeWidth",value:function(e){this.props.setProperty(e,"lineWidth"),this.setState((function(t){return vn(vn({},t),{},{lineWidth:e})}))}},{key:"render",value:function(){var e,t,n,a;return React.createElement(React.Fragment,null,React.createElement("div",{className:"col"},React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Отобразить собственные подсказки"),React.createElement(At.a,{disableRipple:!0,defaultChecked:null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.enableCustomTooltip,checked:null===(n=this.state.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.enableCustomTooltip,onChange:this.setTooltipEnable,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor")}))))}}]),n}(w.Component),bn=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(editElement(t))}}}))(gn);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Dn=function(e){f()(n,e);var t=wn(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={editElement:e.editElement,animationMotionStiffness:90,animationMotionDamping:15,animationEnabled:!0},a.setAnimationEnable=a.setAnimationEnable.bind(m()(a)),a}return p()(n,[{key:"setAnimationEnable",value:function(e){this.props.setProperty(e.target.checked,"enableAnimation")}},{key:"setProperty",value:function(e,t){this.props.setProperty(e,t),this.setState((function(n){return En(En({},n),{},l()({},t,e))}))}},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u,p,h,m,v,f,g,b,y,E,w,_=this;return D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"col"},((null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.type)===j.b||(null===(n=this.state.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.type)===j.d||(null===(i=this.state.editElement)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.type)===j.a)&&D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Включить анимацию"),D.a.createElement(At.a,{disableRipple:!0,className:"".concat(this.props.widgetID," altrp-dashboard__checkboxcolor"),defaultChecked:null===(r=this.props.editElement)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.enableAnimation,checked:null===(l=this.props.editElement)||void 0===l||null===(c=l.settings)||void 0===c?void 0:c.enableAnimation,onChange:this.setAnimationEnable})),((null===(d=this.state.editElement)||void 0===d||null===(u=d.settings)||void 0===u?void 0:u.type)===j.d||(null===(p=this.state.editElement)||void 0===p||null===(h=p.settings)||void 0===h?void 0:h.type)===j.a)&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Жесткость движения"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(m=this.state.editElement)||void 0===m||null===(v=m.settings)||void 0===v?void 0:v.animationMotionStiffness)||this.state.animationMotionStiffness,onChange:function(e,t){return _.setProperty(Number(t),"animationMotionStiffness")},min:0,max:90,step:1}),"(",(null===(f=this.state.editElement)||void 0===f||null===(g=f.settings)||void 0===g?void 0:g.animationMotionStiffness)||this.state.animationMotionStiffness,")"),D.a.createElement("div",{className:"mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Затухаение движения"),D.a.createElement(Bt.a,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--range-drawer-color"),defaultValue:(null===(b=this.state.editElement)||void 0===b||null===(y=b.settings)||void 0===y?void 0:y.animationMotionDamping)||this.state.animationMotionDamping,onChange:function(e,t){return _.setProperty(Number(t),"animationMotionDamping")},min:0,max:40,step:1}),"(",(null===(E=this.state.editElement)||void 0===E||null===(w=E.settings)||void 0===w?void 0:w.animationMotionDamping)||this.state.animationMotionDamping,")"))))}}]),n}(w.Component),_n=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(editElement(t))}}}))(Dn);function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var xn=[{id:0,label:"По умолчанию",value:""},{id:1,label:"По значению",value:"value"},{id:2,label:"По названию",value:"key"}],Nn=function(e){f()(n,e);var t=Sn(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={editElement:e.editElement},a}return p()(n,[{key:"render",value:function(){var e,t,n=this;return D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"col-12"},D.a.createElement(ct.a.Group,{className:"mb-2"},D.a.createElement(ct.a.Label,{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Сортировать"),D.a.createElement(ut.a,{placeholder:"Выберите фильтр",onChange:function(e){return n.props.setProperty(e,"sort")},className:"".concat(this.props.widgetID," altrp-dashboard__drawer--select select-type"),defaultValue:(null===(e=this.state.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.sort)||xn[0].value,name:"type",as:"select",styles:{menuList:function(e,t){return On(On({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menu:function(e,t){return On(On({},e),{},{zIndex:"999999999999999999999",position:"relative"})},menuPortal:function(e,t){return On(On({},e),{},{zIndex:"999999999999999999999",position:"relative"})}},options:xn,getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label}}))))}}]),n}(w.Component),Pn=Object(O.connect)((function(e){return{editElement:e.editElement}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(Nn);function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Ln=function(e){f()(n,e);var t=jn(n);function n(e){var a,i;return d()(this,n),(i=t.call(this,e)).state={settings:_.cloneDeep(null===(a=e.editElement)||void 0===a?void 0:a.settings,{})||{},datasources:e.datasources,openDataSettings:!1,openDiagramSettings:!1,openTooltipSettings:!1,openLegendSettings:!1,openAnimationSettings:!1,filter_datasource:e.filter_datasource,editElement:_.cloneDeep(e.editElement,{})||{},delimer:e.delimer},i.setDatasource=i.setDatasource.bind(m()(i)),i.setType=i.setType.bind(m()(i)),i.setParam=i.setParam.bind(m()(i)),i.setXAxisScale=i.setXAxisScale.bind(m()(i)),i.setXAxisTimeScale=i.setXAxisTimeScale.bind(m()(i)),i.setYAxisScale=i.setYAxisScale.bind(m()(i)),i.setColorScheme=i.setColorScheme.bind(m()(i)),i.setTickRotation=i.setTickRotation.bind(m()(i)),i.generateName=i.generateName.bind(m()(i)),i.setName=i.setName.bind(m()(i)),i.setProperty=i.setProperty.bind(m()(i)),i}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n,a,i,s,r,o,l,c,d=this;(_.isEqual(e.datasources,this.props.datasources)||this.setState((function(e){return In(In({},e),{},{datasources:d.props.datasources})})),_.isEqual(e.filter_datasource,this.props.filter_datasource)||this.setState((function(e){return In(In({},e),{},{filter_datasource:d.props.filter_datasource})})),_.isEqual(e.editElement,this.props.editElement)||this.setState((function(e){var t;return In(In({},e),{},{editElement:_.cloneDeep(d.props.editElement),settings:_.cloneDeep(null===(t=d.props.editElement)||void 0===t?void 0:t.settings,{})})})),this.props.addItemPreview)||(_.isEqual(null===(r=e.editElement)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.name,null===(l=this.props.editElement)||void 0===l||null===(c=l.settings)||void 0===c?void 0:c.name)||this.setState((function(e){var t;return In(In({},e),{},{editElement:_.cloneDeep(d.props.editElement),settings:_.cloneDeep(null===(t=d.props.editElement)||void 0===t?void 0:t.settings,{})})})));JSON.stringify(null===(n=e.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.params)!==JSON.stringify(null===(i=this.props.editElement)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.params)&&this.setState((function(e){var t;return In(In({},e),{},{editElement:_.cloneDeep(d.props.editElement),settings:_.cloneDeep(null===(t=d.props.editElement)||void 0===t?void 0:t.settings,{})})}))}},{key:"setOpenDataSettings",value:function(e){this.setState((function(t){return In(In({},t),{},{openDataSettings:e})}))}},{key:"setOpenDiagramSettings",value:function(e){this.setState((function(t){return In(In({},t),{},{openDiagramSettings:e})}))}},{key:"setOpenTooltipSettings",value:function(e){this.setState((function(t){return In(In({},t),{},{openTooltipSettings:e})}))}},{key:"setOpenLegendSettings",value:function(e){this.setState((function(t){return In(In({},t),{},{openLegendSettings:e})}))}},{key:"setOpenAnimationSettings",value:function(e){this.setState((function(t){return In(In({},t),{},{openAnimationSettings:e})}))}},{key:"setName",value:function(e,t,n){var a,i=_.cloneDeep(null===(a=this.props.editElement)||void 0===a?void 0:a.settings),s=null==i?void 0:i.name;if(0!=e.length){var r=_.find(t,(function(t){return t.value==e})).label;if(void 0!==s){s=s.split(this.state.delimer);var o=-1;n.length>0&&(o=_.findIndex(s,(function(e){return e==n}))),-1!==o?s[o]=r:s.push(r),s=(s=(s=_.uniq(s)).filter((function(e){return 0!==e.length}))).join(this.parseHtmlEntities(this.state.delimer))}else s=e}else if(void 0!==s){s=s.split(this.state.delimer);var l=-1;n.length>0&&(l=_.findIndex(s,(function(e){return e==n}))),-1!==l&&delete s[l],s=(s=(s=_.uniq(s)).filter((function(e){return void 0!==e&&0!==e.length}))).join(this.parseHtmlEntities(this.state.delimer))}return s}},{key:"setType",value:function(e){var t=this.state.settings;if(t=In(In({},t),{},{type:e}),this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:{settings:t}})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"generateName",value:function(e){var t=_.cloneDeep(this.state.settings),n=null==t?void 0:t.name,a=e.map((function(e){var t;return null!==(t=e.title)&&void 0!==t?t:""}));return null==n||0===n.length?n=a.join(this.state.delimer):Array.isArray(n)?(a.forEach((function(e,t){-1===_.findIndex(n,e)&&(n[t]=e)})),n=n.join(this.state.delimer)):(n=n.split(this.state.delimer),a.forEach((function(e,t){-1===_.findIndex(n,e)&&(n[t]=e)})),n=n.join(this.state.delimer)),n}},{key:"setDatasource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.settings,a="",i=[];if(null===e)n=In(In({},n),{},{sources:[],params:[]}),i=[];else if(0===e.length)n=In(In({},n),{},{sources:[],params:[]}),i=[];else{var s;a=this.generateName(_.cloneDeep(e)),n=In(In({},n),{},{sources:e,params:t?[]:void 0!==(null===(s=n)||void 0===s?void 0:s.params)?F()(n.params):[],name:a})}if(this.setState((function(e){return In(In({},e),{},{settings:n})})),this.props.addItemPreview){var r={settings:In({},n)};this.props.editElementDispatch(r),this.setState((function(e){return In(In({},e),{},{editElement:{settings:n}})}))}else{var o=this.props.editElement;o.settings.sources=i,this.props.editElementDispatch(o),this.props.editHandler(this.props.editElement.i,n)}}},{key:"parseHtmlEntities",value:function(e){return e.replace(/&#([0-9]{1,3});/gi,(function(e,t){var n=parseInt(t,10);return String.fromCharCode(n)}))}},{key:"setParam",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=this.state.settings,s=l()({},e,t);n.length>0&&(i.name=this.setName(t,n,a));var r=_.findKey(i.params,e);if(void 0!==r?i.params[r]=s:i=In(In({},i),{},{params:[].concat(F()(i.params),[s])}),i.params=i.params.filter((function(e){var t=_.keys(e)[0];return null!==i.params[t]})),this.setState((function(e){return In(In({},e),{},{settings:i})})),this.props.addItemPreview){var o={settings:In({},i)};this.props.editElementDispatch(o),this.setState((function(e){return In(In({},e),{},{editElement:i})}))}else{var c=this.props.editElement;c.settings=i,this.props.editElementDispatch(c),this.props.editHandler(this.props.editElement.i,i)}}},{key:"setXAxisScale",value:function(e){var t={};if(t=In(In({},this.state.settings),{},"time"===e?{xScale:{type:e,format:"%d.%m.%Y",precision:"day"}}:{xScale:{type:e}}),this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:t})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"setXAxisTimeScale",value:function(e){var t=In(In({},this.state.settings),{},{xScale:In(In({},this.state.settings.xScale),{},{precision:e,format:"%d.%m.%Y"})});if(this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:t})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"setYAxisScale",value:function(e){var t=In(In({},this.state.settings),{},{yScale:{type:e}});if(this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:t})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"setColorScheme",value:function(e){var t=this.state.settings;if(t=In(In({},this.state.settings),{},{colors:{scheme:e}}),this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:t})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"setTickRotation",value:function(e){var t=In(In({},this.state.settings),{},{axisBottom:In(In({},null==t?void 0:t.axisBottom),{},{tickRotation:e})});if(this.setState((function(e){return In(In({},e),{},{settings:t})})),this.props.addItemPreview){var n={settings:In({},t)};this.props.editElementDispatch(n),this.setState((function(e){return In(In({},e),{},{editElement:t})}))}else{var a=this.props.editElement;a.settings=t,this.props.editElementDispatch(a),this.props.editHandler(this.props.editElement.i,t)}}},{key:"setProperty",value:function(e,t){var n=In(In({},this.state.settings),{},l()({},t,e));if(this.setState((function(e){return In(In({},e),{},{settings:n})})),this.props.addItemPreview){var a={settings:In({},n)};this.props.editElementDispatch(a),this.setState((function(e){return In(In({},e),{},{editElement:n})}))}else{var i=this.props.editElement;i.settings=n,this.props.editElementDispatch(i),this.props.editHandler(this.props.editElement.i,n)}}},{key:"render",value:function(){var e,t,n,a,i,s,r,o,l,c,d,u=this;return D.a.createElement("div",{className:"col ".concat(this.props.widgetID," altrp-dashboard__drawer--font")},D.a.createElement("div",{className:"row"},D.a.createElement("div",{className:"mx-auto"},D.a.createElement("h3",null,"Настройка диаграммы"))),D.a.createElement("div",{className:"row"},D.a.createElement(rt.Button,{className:"collapse-button",onClick:function(){return u.setOpenDataSettings(!u.state.openDataSettings)},"aria-controls":"Datasource settings","aria-expanded":this.state.openDataSettings},D.a.createElement("div",{className:"collapse-button-content"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--section-font-size altrp-dashboard__drawer--font altrp-dashboard__drawer--font-margin")},"Базовые настройки"),D.a.createElement("div",null,this.state.openDataSettings?D.a.createElement(ot.ArrowUp,null):D.a.createElement(ot.ArrowDown,null)))),D.a.createElement(rt.Collapse,{in:this.state.openDataSettings},D.a.createElement("div",{style:{width:"100%"}},D.a.createElement(en,{widgetID:this.props.widgetID,setType:this.setType}),D.a.createElement(ft,{widgetID:this.props.widgetID,datasources:this.state.datasources,setCardName:this.setCardName,setDatasource:this.setDatasource}),void 0!==this.state.filter_datasource&&_.keys(this.state.filter_datasource).length>0&&D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"col mb-3"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--label-font-size")},"Параметры")),this.state.filter_datasource.map((function(e,t){return D.a.createElement(Qt,{widgetID:u.props.widgetID,setParam:u.setParam,key:t,setCardName:u.setCardName,param:e})}))),((null===(e=this.props.editElement)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.type)===j.b||(null===(n=this.props.editElement)||void 0===n||null===(a=n.settings)||void 0===a?void 0:a.type)===j.d)&&D.a.createElement(D.a.Fragment,null,D.a.createElement(kt,{widgetID:this.props.widgetID,setXAxisScale:this.setXAxisScale,setXAxisTimeScale:this.setXAxisTimeScale,setYAxisScale:this.setYAxisScale})),D.a.createElement(Pn,{widgetID:this.props.widgetID,setProperty:this.setProperty})))),D.a.createElement("div",{className:"row"},D.a.createElement(rt.Button,{className:"collapse-button",onClick:function(){return u.setOpenDiagramSettings(!u.state.openDiagramSettings)},"aria-controls":"Datasource settings","aria-expanded":this.state.openDiagramSettings},D.a.createElement("div",{className:"collapse-button-content"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--section-font-size altrp-dashboard__drawer--font altrp-dashboard__drawer--font-margin")},"Настройки стилей"),D.a.createElement("div",null,this.state.openDiagramSettings?D.a.createElement(ot.ArrowUp,null):D.a.createElement(ot.ArrowDown,null)))),D.a.createElement(rt.Collapse,{in:this.state.openDiagramSettings},D.a.createElement("div",null,D.a.createElement(Xt,{widgetID:this.props.widgetID,setProperty:this.setProperty,checkboxColor:null===(i=this.props)||void 0===i?void 0:i.checkboxColor,setColorScheme:this.setColorScheme,setTickRotation:this.setTickRotation})))),D.a.createElement("div",{className:"row"},D.a.createElement(rt.Button,{className:"collapse-button",onClick:function(){return u.setOpenTooltipSettings(!u.state.openTooltipSettings)},"aria-controls":"Datasource settings","aria-expanded":this.state.openTooltipSettings},D.a.createElement("div",{className:"collapse-button-content"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--section-font-size altrp-dashboard__drawer--font altrp-dashboard__drawer--font-margin")},"Настройки подсказок"),D.a.createElement("div",null,this.state.openTooltipSettings?D.a.createElement(ot.ArrowUp,null):D.a.createElement(ot.ArrowDown,null)))),D.a.createElement(rt.Collapse,{in:this.state.openTooltipSettings},D.a.createElement("div",null,D.a.createElement(bn,{widgetID:this.props.widgetID,setProperty:this.setProperty})))),D.a.createElement("div",{className:"row"},D.a.createElement(rt.Button,{className:"collapse-button",onClick:function(){return u.setOpenLegendSettings(!u.state.openLegendSettings)},"aria-controls":"Datasource settings","aria-expanded":this.state.openLegendSettings},D.a.createElement("div",{className:"collapse-button-content"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--section-font-size altrp-dashboard__drawer--font altrp-dashboard__drawer--font-margin")},"Настройки легенды"),D.a.createElement("div",null,this.state.openLegendSettings?D.a.createElement(ot.ArrowUp,null):D.a.createElement(ot.ArrowDown,null)))),D.a.createElement(rt.Collapse,{in:this.state.openLegendSettings},D.a.createElement("div",null,D.a.createElement(dn,{widgetID:this.props.widgetID,setProperty:this.setProperty})))),((null===(s=this.state.editElement)||void 0===s||null===(r=s.settings)||void 0===r?void 0:r.type)===j.b||(null===(o=this.state.editElement)||void 0===o||null===(l=o.settings)||void 0===l?void 0:l.type)===j.d||(null===(c=this.state.editElement)||void 0===c||null===(d=c.settings)||void 0===d?void 0:d.type)===j.a)&&D.a.createElement("div",{className:"row"},D.a.createElement(rt.Button,{className:"collapse-button",onClick:function(){return u.setOpenAnimationSettings(!u.state.openAnimationSettings)},"aria-controls":"Datasource settings","aria-expanded":this.state.openAnimationSettings},D.a.createElement("div",{className:"collapse-button-content"},D.a.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__drawer--section-font-size altrp-dashboard__drawer--font altrp-dashboard__drawer--font-margin")},"Настройки анимации"),D.a.createElement("div",null,this.state.openAnimationSettings?D.a.createElement(ot.ArrowUp,null):D.a.createElement(ot.ArrowDown,null)))),D.a.createElement(rt.Collapse,{in:this.state.openAnimationSettings},D.a.createElement("div",null,D.a.createElement(_n,{widgetID:this.props.widgetID,setProperty:this.setProperty})))),this.props.addItemPreview?D.a.createElement("div",{className:"row justify-content-beetwen mt-3"},D.a.createElement("div",{className:"col"},D.a.createElement("button",{className:"".concat(this.props.widgetID," altrp-btn-draw"),style:{width:"100%"},onClick:function(e){return u.props.onAddItem(u.state.editElement)}},"Сохранить")),D.a.createElement("div",{className:"col"},D.a.createElement("button",{className:"".concat(this.props.widgetID," altrp-btn-draw"),style:{width:"100%"},onClick:function(e){return u.props.onCloseHandler(null,!1)}},"Отмена"))):D.a.createElement("div",{className:"row justify-content-beetwen mt-3"},D.a.createElement("div",{className:"col"},D.a.createElement("button",{className:"".concat(this.props.widgetID," altrp-btn-draw"),style:{width:"100%"},onClick:function(e){return u.props.onCloseHandler(null)}},"Сохранить"))))}}]),n}(w.Component),Cn=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement)}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))}}}))(Ln);function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var zn=function(e){f()(n,e);var t=An(n);function n(e){return d()(this,n),t.call(this,e)}return p()(n,[{key:"render",value:function(){return D.a.createElement("button",{className:"altrp-btn-draw",style:{margin:"5px 5px 5px 5px"},onClick:this.props.onAddItem},"Добавить виджет")}}]),n}(w.Component);function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Wn=function(e){f()(n,e);var t=Bn(n);function n(e){return d()(this,n),t.call(this,e)}return p()(n,[{key:"render",value:function(){return D.a.createElement("div",{className:this.props.className,style:{display:"inline-block"}},D.a.createElement("button",{className:"altrp-btn-draw",style:{margin:"5px 5px 5px 5px"},onClick:this.props.onExport},"Экспорт диаграмм"))}}]),n}(w.Component);function Tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var qn=function(e){f()(n,e);var t=Tn(n);function n(e){return d()(this,n),t.call(this,e)}return p()(n,[{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:this.props.className,style:{display:"inline-block"}},D.a.createElement("button",{className:"altrp-btn-draw",style:{margin:"5px 5px 5px 5px"},onClick:this.props.onImport},"Импорт диаграмм"),D.a.createElement("input",{type:"file",onChange:function(t){return e.props.getFile(t)},accept:"application/json"}))}}]),n}(w.Component);function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Hn=function(e){f()(n,e);var t=Fn(n);function n(e){return d()(this,n),t.call(this,e)}return p()(n,[{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:this.props.className,style:{display:"inline-block"}},D.a.createElement("button",{style:{margin:"5px 5px 5px 5px"},onClick:this.props.onImport},"Импорт виджета"),D.a.createElement("input",{type:"file",onChange:function(t){return e.props.getFile(t)},accept:"application/json"}))}}]),n}(w.Component);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return b()(this,n)}}var Xn=Object(k.WidthProvider)(k.Responsive);var Jn=function(e){f()(n,e);var t=Yn(n);function n(e){var a;return d()(this,n),(a=t.call(this,e)).state={id:e.id,items:e.items||[],newCounter:e.counter||1,repeater:_.cloneDeep(e.rep,[]),settingsOpen:!1,addItemPreview:!1,settings:e.settings,drawer:null,datasources:null,delimer:e.delimer,importData:[],importWidget:[]},a.export=a.export.bind(m()(a)),a.import=a.import.bind(m()(a)),a.getFile=a.getFile.bind(m()(a)),a.exportCard=a.exportCard.bind(m()(a)),a.importDiagram=a.importDiagram.bind(m()(a)),a.getWidgetFile=a.getWidgetFile.bind(m()(a)),a.onAddItem=a.onAddItem.bind(m()(a)),a.onAddItemCard=a.onAddItemCard.bind(m()(a)),a.onBreakpointChange=a.onBreakpointChange.bind(m()(a)),a.onEditItem=a.onEditItem.bind(m()(a)),a.onResizeHandler=a.onResizeHandler.bind(m()(a)),a.onResizeHandlerStop=a.onResizeHandlerStop.bind(m()(a)),a.saveWidgetData=a.saveWidgetData.bind(m()(a)),a.onRemoveItem=a.onRemoveItem.bind(m()(a)),a.setEditItem=a.setEditItem.bind(m()(a)),a.openSettings=a.openSettings.bind(m()(a)),a.setCardName=a.setCardName.bind(m()(a)),a.onDragStop=a.onDragStop.bind(m()(a)),a.copyWidget=a.copyWidget.bind(m()(a)),a}return p()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.items,this.props.items)||this.setState((function(e){return Mn(Mn({},e),{},{items:n.props.items})})),_.isEqual(e.counter,this.props.counter)||this.setState((function(e){return Mn(Mn({},e),{},{newCounter:n.props.counter})})),_.isEqual(t.items,this.state.items)||(this.saveWidgetData(this.state),this.setState((function(e){return Mn(Mn({},e),{},{items:n.state.items})})));var a=document.querySelector(".drawer");_.isEqual(this.state.drawer,a)||this.setState((function(e){return Mn(Mn({},e),{},{drawer:a})}))}},{key:"saveWidgetData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.id,n=e.items,a=e.newCounter,i={items:n,newCounter:a};try{P.a.post("/ajax/dashboards/datasource/".concat(t,"/settings"),{settings:i},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then((function(e){console.log(e.data)}))}catch(e){console.log("ERROR ==>",e)}}},{key:"putLayoutToLocalStorage",value:function(e){}},{key:"setEditItem",value:function(e){var t=this.state.items;_.replace(t,{i:e.i},e);var n=_.findKey(t,{i:e.i});this.setState((function(a){return a.items[n]=e,Mn(Mn({},a),{},{items:t})}))}},{key:"setCardName",value:function(e,t){var n=this.state.items,a=_.find(n,{i:t.i});a.settings.name=e;var i=_.findKey(n,{i:t.i});this.setState((function(e){return e.items[i]=a,Mn(Mn({},e),{},{items:n})})),this.saveWidgetData(this.state)}},{key:"openSettings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=_.cloneDeep(t);this.setState((function(i){return null===t&&(i.drawer=null),e.props.editElementDispatch(a),i.editElement=a,Mn(Mn({},i),{},null!==n?{settingsOpen:!i.settingsOpen,addItemPreview:n}:{settingsOpen:!i.settingsOpen})}))}},{key:"onEditItem",value:function(e,t){var n=this,a=this.state.items,i=_.find(a,{i:e});i.settings=t,i.edit=!1,this.props.editElementDispatch(i),_.replace(a,{i:e},i);var s=_.findKey(a,{i:e});this.setState((function(e){return e.items[s]=i,n.saveWidgetData(e),Mn(Mn({},e),{},{items:a})}))}},{key:"onAddItem",value:function(){this.setState((function(e){return Mn(Mn({},e),{},{addItemPreview:!0})})),this.openSettings()}},{key:"onAddItemCard",value:function(e){var t=this;_.keys(e).length>0?this.setState((function(n){Array.isArray(n.items)||(n.items=Object.values(n.items));var a=n.items.concat(t.itemSettingsAdd(n,e.settings));return Mn(Mn({},n),{},{items:a,newCounter:n.newCounter+1,addItemPreview:!1,settingsOpen:!1})})):alert("Информация не заполнена")}},{key:"itemSettingsAdd",value:function(e,t){return{i:void 0!==e.items?"n"+e.newCounter:"n0",x:void 0!==e.items?3*e.items.length%(e.cols||12):0%(e.cols||12),y:1/0,w:3,h:5,settings:t}}},{key:"onResizeHandler",value:function(e,t,n,a){var i=this;("object"===r()(n)?[n]:n).forEach((function(e){var t=e.i,n=e.x,a=e.y,s=e.w,r=e.h,o=_.find(i.state.items,{i:t});o=Mn(Mn({},o),{},{x:n,y:a,w:s,h:r,settings:Mn({},o.settings)});var l=_.findKey(i.state.items,{i:t});i.setState((function(e){return e.items[l]=o,Mn(Mn({},e),{},{items:e.items})}))}))}},{key:"onResizeHandlerStop",value:function(e,t,n,a){var i=n.i,s=n.x,r=n.y,o=n.w,c=n.h,d=_.find(this.state.items,{i:i}),u=_.findKey(this.state.items,{i:i});d=Mn(Mn({},d),{},{x:s,y:r,w:o,h:c}),this.setState((function(e){return Mn(Mn({},e),{},{items:Mn(Mn({},e.items),{},l()({},u,d))})})),this.saveWidgetData(this.state)}},{key:"onBreakpointChange",value:function(e,t){this.setState({breakpoint:e,cols:t})}},{key:"onLayoutChange",value:function(e){this.props.onLayoutChange(e)}},{key:"onDragStop",value:function(e,t,n,a,i,s){var r=n.i,o=n.x,c=n.y,d=n.w,u=n.h,p=_.find(this.state.items,{i:r}),h=_.findKey(this.state.items,{i:r});p=Mn(Mn({},p),{},{x:o,y:c,w:d,h:u}),this.setState((function(e){return Mn(Mn({},e),{},{items:Mn(Mn({},e.items),{},l()({},h,p))})})),this.saveWidgetData(this.state)}},{key:"onRemoveItem",value:function(e){this.state.items=_.reject(this.state.items,{i:e}),this.setState({items:this.state.items}),this.saveWidgetData(this.state)}},{key:"export",value:function(){var e={newCounter:_.cloneDeep(this.state.newCounter),items:_.cloneDeep(this.state.items)},t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","".concat(this.state.id,".json")),n.click()}},{key:"exportCard",value:function(e){var t=e.settings,n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download","".concat(e.settings.name,".json")),a.click()}},{key:"import",value:function(){var e=this,t=this.state.importData,n=this.state.id;if(_.keys(t).length<=0)alert("Выберите файл");else try{P.a.post("/ajax/dashboards/datasource/".concat(n,"/settings"),{settings:t},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then((function(t){try{var n=null===JSON||void 0===JSON?void 0:JSON.parse(t.data.settings),a=n.items,i=n.newCounter;e.setState((function(e){return Mn(Mn({},e),{},{items:a,newCounter:i})}))}catch(e){}}))}catch(e){console.log("ERROR ==>",e)}}},{key:"importDiagram",value:function(){var e={settings:this.state.importWidget};if(_.keys(e.settings).length<=0)alert("Выберите файл");else try{this.onAddItemCard(e),this.setState((function(e){return{importWidget:[]}}))}catch(e){console.log("ERROR ==>",e)}}},{key:"getFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0],"UTF-8"),n.onload=function(e){var n=JSON.parse(e.target.result);t.setState((function(e){return Mn(Mn({},e),{},{importData:n})}))}}},{key:"getWidgetFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0],"UTF-8"),n.onload=function(e){var n=JSON.parse(e.target.result);t.setState((function(e){return Mn(Mn({},e),{},{importWidget:n})}))}}},{key:"copyWidget",value:function(e){this.onAddItemCard(e)}},{key:"createElement",value:function(e,t){return e.y=null==e.y?1/0:e.y,D.a.createElement("div",{key:e.i,"data-grid":e},D.a.createElement(et,{editElement:_.cloneDeep(e,{}),settings:e.settings,openSettingsHandler:this.openSettings,setEditItem:this.setEditItem,onRemoveItem:this.onRemoveItem,saveWidget:this.saveWidgetData,copyWidget:this.copyWidget,exportCard:this.exportCard,widgetID:this.state.id}))}},{key:"render",value:function(){var e,t,n=this;return D.a.createElement("div",null,this.props.showButton&&D.a.createElement(D.a.Fragment,null,D.a.createElement(zn,{onAddItem:this.onAddItem})),this.props.showExportButton&&D.a.createElement(Wn,{className:"altrp-dashboars__export-dashboard-button",onExport:this.export}),D.a.createElement(qn,{className:"altrp-dashboars__import-dashboard-button",onImport:this.import,getFile:this.getFile}),D.a.createElement(Hn,{className:"altrp-dashboars__import-diagram-button",onImport:this.importDiagram,getFile:this.getWidgetFile}),D.a.createElement(Xn,i()({draggableCancel:".altrp-dashboards__cancle-drag",onLayoutChange:this.onLayoutChange,onResizeStart:this.onResizeHandler,onResizeStop:this.onResizeHandlerStop,autoSize:!0,onDrop:this.onDrop,onDragStop:this.onDragStop,onBreakpointChange:this.onBreakpointChange},this.props),_.map(this.state.items,(function(e,t){return n.createElement(e,t)}))),D.a.createElement(I.a,(t={getContainer:document.body,placement:"right",open:!0,defaultOpen:!0,width:this.props.drawerWidth},l()(t,"open",this.state.settingsOpen),l()(t,"onClose",this.openSettings),l()(t,"handler",!1),t),this.state.settingsOpen&&D.a.createElement(Cn,{widgetID:this.state.id,addItemPreview:this.state.addItemPreview,filter_datasource:this.state.settings.filter_datasource,datasources:this.props.rep,editHandler:this.onEditItem,checkboxColor:null===(e=this.state.settings)||void 0===e?void 0:e.checkboxColor,onCloseHandler:this.openSettings,onAddItem:this.onAddItemCard,setCardName:this.setCardName,delimer:this.state.delimer})),null!=this.state.drawer&&ReactDOM.createPortal(D.a.createElement(st,{width:this.props.drawerWidth,widgetID:this.state.id,addItemPreview:this.state.addItemPreview,setCardName:this.setCardName}),this.state.drawer))}}]),n}(w.Component);Jn.defaultProps={className:"layout",cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:60,onLayoutChange:function(){}};t.default=Object(O.connect)((function(e){return{editElement:_.cloneDeep(e.editElement),dashboardExport:_.cloneDeep(e.exportDashboard)}}),(function(e){return{editElementDispatch:function(t){return e(Object(S.b)(t))},exportDashboardDispatch:function(t){return e(Object(x.b)(t))}}}),null,{forwardRef:!0})(Jn)}};